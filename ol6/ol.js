/*! For license information please see ol.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t={226:function(t,n){n.read=function(t,n,i,r,e){var o,s,u=8*e-r-1,h=(1<<u)-1,f=h>>1,a=-7,c=i?e-1:0,v=i?-1:1,l=t[n+c];for(c+=v,o=l&(1<<-a)-1,l>>=-a,a+=u;a>0;o=256*o+t[n+c],c+=v,a-=8);for(s=o&(1<<-a)-1,o>>=-a,a+=r;a>0;s=256*s+t[n+c],c+=v,a-=8);if(0===o)o=1-f;else{if(o===h)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),o-=f}return(l?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,n,i,r,e,o){var s,u,h,f=8*o-e-1,a=(1<<f)-1,c=a>>1,v=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:o-1,d=r?1:-1,p=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,s=a):(s=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-s))<1&&(s--,h*=2),(n+=s+c>=1?v/h:v*Math.pow(2,1-c))*h>=2&&(s++,h/=2),s+c>=a?(u=0,s=a):s+c>=1?(u=(n*h-1)*Math.pow(2,e),s+=c):(u=n*Math.pow(2,c-1)*Math.pow(2,e),s=0));e>=8;t[i+l]=255&u,l+=d,u/=256,e-=8);for(s=s<<e|u,f+=e;f>0;t[i+l]=255&s,l+=d,s/=256,f-=8);t[i+l-d]|=128*p}},98:function(t,n,i){"use strict";t.exports=e;var r=i(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,s=1/o,u="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function h(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1}function f(t,n,i){return i?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0)}function a(t,n,i){var r=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(r);for(var e=i.pos-1;e>=t;e--)i.buf[e+r]=i.buf[e]}function c(t,n){for(var i=0;i<t.length;i++)n.writeVarint(t[i])}function v(t,n){for(var i=0;i<t.length;i++)n.writeSVarint(t[i])}function l(t,n){for(var i=0;i<t.length;i++)n.writeFloat(t[i])}function d(t,n){for(var i=0;i<t.length;i++)n.writeDouble(t[i])}function p(t,n){for(var i=0;i<t.length;i++)n.writeBoolean(t[i])}function w(t,n){for(var i=0;i<t.length;i++)n.writeFixed32(t[i])}function g(t,n){for(var i=0;i<t.length;i++)n.writeSFixed32(t[i])}function y(t,n){for(var i=0;i<t.length;i++)n.writeFixed64(t[i])}function m(t,n){for(var i=0;i<t.length;i++)n.writeSFixed64(t[i])}function b(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3]}function M(t,n,i){t[i]=n,t[i+1]=n>>>8,t[i+2]=n>>>16,t[i+3]=n>>>24}function _(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24)}e.prototype={destroy:function(){this.buf=null},readFields:function(t,n,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),e=r>>3,o=this.pos;this.type=7&r,t(e,n,this),this.pos===o&&this.skip(r)}return n},readMessage:function(t,n){return this.readFields(t,n,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var n,i,r=this.buf;return n=127&(i=r[this.pos++]),i<128?n:(n|=(127&(i=r[this.pos++]))<<7,i<128?n:(n|=(127&(i=r[this.pos++]))<<14,i<128?n:(n|=(127&(i=r[this.pos++]))<<21,i<128?n:function(t,n,i){var r,e,o=i.buf;if(e=o[i.pos++],r=(112&e)>>4,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<3,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<10,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<17,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<24,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(1&e)<<31,e<128)return f(t,r,n);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&u?function(t,n,i){return u.decode(t.subarray(n,i))}(this.buf,n,t):function(t,n,i){var r="",e=n;for(;e<i;){var o,s,u,h=t[e],f=null,a=h>239?4:h>223?3:h>191?2:1;if(e+a>i)break;1===a?h<128&&(f=h):2===a?128==(192&(o=t[e+1]))&&(f=(31&h)<<6|63&o)<=127&&(f=null):3===a?(o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&((f=(15&h)<<12|(63&o)<<6|63&s)<=2047||f>=55296&&f<=57343)&&(f=null)):4===a&&(o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&((f=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&u)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,a=1):f>65535&&(f-=65536,r+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),r+=String.fromCharCode(f),e+=a}return r}(this.buf,n,t)},readBytes:function(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n},readPackedVarint:function(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var i=h(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(n));return t},readPackedSVarint:function(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed64());return t},skip:function(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;);else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(t,n){this.writeVarint(t<<3|n)},realloc:function(t){for(var n=this.length||16;n<this.pos+t;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),M(this.buf,-1&t,this.pos),M(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),M(this.buf,-1&t,this.pos),M(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,n){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,n),function(t,n){var i=(7&t)<<4;if(n.buf[n.pos++]|=i|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t}(r,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,i){for(var r,e,o=0;o<n.length;o++){if((r=n.charCodeAt(o))>55295&&r<57344){if(!e){r>56319||o+1===n.length?(t[i++]=239,t[i++]=191,t[i++]=189):e=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,e=r;continue}r=e-55296<<10|r-56320|65536,e=null}else e&&(t[i++]=239,t[i++]=191,t[i++]=189,e=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-n;i>=128&&a(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,n){this.pos++;var i=this.pos;t(n,this);var r=this.pos-i;r>=128&&a(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,n,i){this.writeTag(t,e.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(t,n){n.length&&this.writeMessage(t,c,n)},writePackedSVarint:function(t,n){n.length&&this.writeMessage(t,v,n)},writePackedBoolean:function(t,n){n.length&&this.writeMessage(t,p,n)},writePackedFloat:function(t,n){n.length&&this.writeMessage(t,l,n)},writePackedDouble:function(t,n){n.length&&this.writeMessage(t,d,n)},writePackedFixed32:function(t,n){n.length&&this.writeMessage(t,w,n)},writePackedSFixed32:function(t,n){n.length&&this.writeMessage(t,g,n)},writePackedFixed64:function(t,n){n.length&&this.writeMessage(t,y,n)},writePackedSFixed64:function(t,n){n.length&&this.writeMessage(t,m,n)},writeBytesField:function(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n)},writeFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n)},writeVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeVarint(n)},writeSVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n)},writeStringField:function(t,n){this.writeTag(t,e.Bytes),this.writeString(n)},writeFloatField:function(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n)},writeDoubleField:function(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n)},writeBooleanField:function(t,n){this.writeVarintField(t,Boolean(n))}}},72:function(t){t.exports=function(){"use strict";function t(t,r,e,o,s){!function t(i,r,e,o,s){for(;o>e;){if(o-e>600){var u=o-e+1,h=r-e+1,f=Math.log(u),a=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*a*(u-a)/u)*(h-u/2<0?-1:1);t(i,r,Math.max(e,Math.floor(r-h*a/u+c)),Math.min(o,Math.floor(r+(u-h)*a/u+c)),s)}var v=i[r],l=e,d=o;for(n(i,e,r),s(i[o],v)>0&&n(i,e,o);l<d;){for(n(i,l,d),l++,d--;s(i[l],v)<0;)l++;for(;s(i[d],v)>0;)d--}0===s(i[e],v)?n(i,e,d):n(i,++d,o),d<=r&&(e=d+1),r<=d&&(o=d-1)}}(t,r,e||0,o||t.length-1,s||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){s(t,0,t.children.length,n,t)}function s(t,n,i,r,e){e||(e=d(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<i;o++){var s=t.children[o];u(e,t.leaf?r(s):s)}return e}function u(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function h(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function a(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function l(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(n,i,r,e,o){for(var s=[i,r];s.length;)if(!((r=s.pop())-(i=s.pop())<=e)){var u=i+Math.ceil((r-i)/e/2)*e;t(n,u,i,r,o),s.push(i,u,u,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!l(t,n))return i;for(var r=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var s=n.children[o],u=n.leaf?r(s):s;l(t,u)&&(n.leaf?i.push(s):v(t,u)?this._all(s,i):e.push(s))}n=e.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!l(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var e=n.children[r],o=n.leaf?this.toBBox(e):e;if(l(t,o)){if(n.leaf||v(t,o))return!0;i.push(e)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,s=this.data,u=this.toBBox(t),h=[],f=[];s||h.length;){if(s||(s=h.pop(),r=h[h.length-1],i=f.pop(),o=!0),s.leaf){var a=e(t,s.children,n);if(-1!==a)return s.children.splice(a,1),h.push(s),this._condense(h),this}o||s.leaf||!v(s,u)?r?(i++,s=r.children[i],o=!1):s=null:(h.push(s),f.push(i),i=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var e,s=i-n+1,u=this._maxEntries;if(s<=u)return o(e=d(t.slice(n,i+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(s)/Math.log(u)),u=Math.ceil(s/Math.pow(u,r-1))),(e=d([])).leaf=!1,e.height=r;var h=Math.ceil(s/u),f=h*Math.ceil(Math.sqrt(u));p(t,n,i,f,this.compareMinX);for(var a=n;a<=i;a+=f){var c=Math.min(a+f-1,i);p(t,a,c,h,this.compareMinY);for(var v=a;v<=c;v+=h){var l=Math.min(v+h-1,c);e.children.push(this._build(t,v,l,r-1))}}return o(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var e=1/0,o=1/0,s=void 0,u=0;u<n.children.length;u++){var h=n.children[u],f=a(h),c=(v=t,l=h,(Math.max(l.maxX,v.maxX)-Math.min(l.minX,v.minX))*(Math.max(l.maxY,v.maxY)-Math.min(l.minY,v.minY))-f);c<o?(o=c,e=f<e?f:e,s=h):c===o&&f<e&&(e=f,s=h)}n=s||n.children[0]}var v,l;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),e=[],o=this._chooseSubtree(r,this.data,n,e);for(o.children.push(t),u(o,r);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(r,e,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,r);var s=this._chooseSplitIndex(i,e,r),u=d(i.children.splice(s,i.children.length-s));u.height=i.height,u.leaf=i.leaf,o(i,this.toBBox),o(u,this.toBBox),n?t[n-1].children.push(u):this._splitRoot(i,u)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,e,o,u,h,f,c,v=1/0,l=1/0,d=n;d<=i-n;d++){var p=s(t,0,d,this.toBBox),w=s(t,d,i,this.toBBox),g=(e=p,o=w,u=void 0,h=void 0,f=void 0,c=void 0,u=Math.max(e.minX,o.minX),h=Math.max(e.minY,o.minY),f=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,f-u)*Math.max(0,c-h)),y=a(p)+a(w);g<v?(v=g,r=d,l=y<l?y:l):g===v&&y<l&&(l=y,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:h,e=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var e=this.toBBox,o=s(t,0,n,e),h=s(t,i-n,i,e),f=c(o)+c(h),a=n;a<i-n;a++){var v=t.children[a];u(o,t.leaf?e(v):v),f+=c(o)}for(var l=i-n-1;l>=n;l--){var d=t.children[l];u(h,t.leaf?e(d):d),f+=c(h)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)u(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r}()},760:function(t){var n=function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",s=e.asyncIterator||"@@asyncIterator",u=e.toStringTag||"@@toStringTag";function h(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{h({},"")}catch(t){h=function(t,n,i){return t[n]=i}}function f(t,n,i,r){var e=n&&n.prototype instanceof w?n:w,o=Object.create(e.prototype),s=new T(r||[]);return o._invoke=function(t,n,i){var r=c;return function(e,o){if(r===l)throw new Error("Generator is already running");if(r===d){if("throw"===e)throw o;return A()}for(i.method=e,i.arg=o;;){var s=i.delegate;if(s){var u=S(s,i);if(u){if(u===p)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===c)throw r=d,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=l;var h=a(t,n,i);if("normal"===h.type){if(r=i.done?d:v,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=d,i.method="throw",i.arg=h.arg)}}}(t,i,s),o}function a(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var c="suspendedStart",v="suspendedYield",l="executing",d="completed",p={};function w(){}function g(){}function y(){}var m={};h(m,o,(function(){return this}));var b=Object.getPrototypeOf,M=b&&b(b(P([])));M&&M!==i&&r.call(M,o)&&(m=M);var _=y.prototype=w.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(n){h(t,n,(function(t){return this._invoke(n,t)}))}))}function O(t,n){function i(e,o,s,u){var h=a(t[e],t,o);if("throw"!==h.type){var f=h.arg,c=f.value;return c&&"object"==typeof c&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,s,u)}),(function(t){i("throw",t,s,u)})):n.resolve(c).then((function(t){f.value=t,s(f)}),(function(t){return i("throw",t,s,u)}))}u(h.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function S(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,S(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var e=a(r,t.iterator,i.arg);if("throw"===e.type)return i.method="throw",i.arg=e.arg,i.delegate=null,p;var o=e.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function j(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function E(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,s=function i(){for(;++e<t.length;)if(r.call(t,e))return i.value=t[e],i.done=!1,i;return i.value=n,i.done=!0,i};return s.next=s}}return{next:A}}function A(){return{value:n,done:!0}}return g.prototype=y,h(_,"constructor",y),h(y,"constructor",g),g.displayName=h(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},x(O.prototype),h(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(n,i,r,e,o){void 0===o&&(o=Promise);var s=new O(f(n,i,r,e),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(_),h(_,u,"Generator"),h(_,o,(function(){return this})),h(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function e(r,e){return u.type="throw",u.arg=t,i.next=r,e&&(i.method="next",i.arg=n),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return e("end");if(s.tryLoc<=this.prev){var h=r.call(s,"catchLoc"),f=r.call(s,"finallyLoc");if(h&&f){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return e(s.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return e(s.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var e=r.arg;E(i)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:P(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),p}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},195:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return YO}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e))}var s,u="6.15.1",h=(s=function(t,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+u.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return h(n,t),n}(Error);function a(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),v="propertychange",l=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,e,o=i||p,s=0,u=t.length,h=!1;s<u;)(e=+o(t[r=s+(u-s>>1)],n))<0?s=r+1:(u=r,h=!e);return h?s:~s}function p(t,n){return t>n?1:t<n?-1:0}function w(t,n){return t.indexOf(n)>=0}function g(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var e=void 0;if(i>0){for(e=1;e<r;++e)if(t[e]<n)return e-1}else if(i<0){for(e=1;e<r;++e)if(t[e]<=n)return e}else for(e=1;e<r;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof i?i(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e}return r-1}function y(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function m(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,e=0;e<r;e++)t[t.length]=i[e]}function b(t,n){for(var i,r=t.length>>>0,e=0;e<r;e++)if(n(i=t[e],e,t))return i;return null}function M(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function _(t,n){var i;return!t.every((function(r,e){return i=e,!n(r,e,t)}))?i:-1}function x(t,n,i){var r=n||p;return t.every((function(n,e){if(0===e)return!0;var o=r(t[e-1],n);return!(o>0||i&&0===o)}))}function O(){return!0}function S(){return!1}function j(){}function E(t){var n,i,r,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===r&&M(o,i)||(e=!0,r=this,i=o,n=t.apply(this,arguments)),n}}function T(t){return function(){var n;try{n=t()}catch(t){return Promise.reject(t)}return n instanceof Promise?n:Promise.resolve(n)}()}var P="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,e=arguments.length;r<e;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function A(t){for(var n in t)delete t[n]}var C="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function N(t){var n;for(n in t)return!1;return!n}var k=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),L=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.i=null,i.u=null,i.v=null,i}return k(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.v||(this.v={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,i=n?t:t.type,r=this.v&&this.v[i];if(r){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,s=this.u||(this.u={}),u=this.i||(this.i={});i in s||(s[i]=0,u[i]=0),++s[i];for(var h=0,f=r.length;h<f;++h)if(!1===(o="handleEvent"in r[h]?r[h].handleEvent(e):r[h].call(this,e))||e.propagationStopped){o=!1;break}if(0==--s[i]){var a=u[i];for(delete u[i];a--;)this.removeEventListener(i,j);delete s[i]}return o}},n.prototype.disposeInternal=function(){this.v&&A(this.v)},n.prototype.getListeners=function(t){return this.v&&this.v[t]||void 0},n.prototype.hasListener=function(t){return!!this.v&&(t?t in this.v:Object.keys(this.v).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.v&&this.v[t];if(i){var r=i.indexOf(n);-1!==r&&(this.i&&t in this.i?(i[r]=j,++this.i[t]):(i.splice(r,1),0===i.length&&delete this.v[t]))}},n}(l),F="change",R="error",I="contextmenu",G="click",D="dblclick",z="dragenter",U="dragover",X="drop",B="keydown",V="keypress",q="load",W="resize",Z="touchmove",Y="wheel";function H(t,n,i,r,e){if(r&&r!==t&&(i=i.bind(r)),e){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var s={target:t,type:n,listener:i};return t.addEventListener(n,i),s}function J(t,n,i,r){return H(t,n,i,r,!0)}function $(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),A(t))}var K=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.l=0,n}return K(n,t),n.prototype.changed=function(){++this.l,this.dispatchEvent(F)},n.prototype.getRevision=function(){return this.l},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=H(this,t[e],n);return r}return H(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var e=0;e<r;++e)i[e]=J(this,t[e],n)}else i=J(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tt(i);else if(Array.isArray(t))for(var r=0,e=t.length;r<e;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(L);function tt(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)$(t[n]);else $(t)}Q.prototype.on,Q.prototype.once,Q.prototype.un;var nt=Q,it=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rt=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.key=i,e.oldValue=r,e}return it(n,t),n}(c),et=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.p=null,void 0!==n&&i.setProperties(n),i}return it(n,t),n.prototype.get=function(t){var n;return this.p&&this.p.hasOwnProperty(t)&&(n=this.p[t]),n},n.prototype.getKeys=function(){return this.p&&Object.keys(this.p)||[]},n.prototype.getProperties=function(){return this.p&&P({},this.p)||{}},n.prototype.hasProperties=function(){return!!this.p},n.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n)),i=v,this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},n.prototype.set=function(t,n,i){var r=this.p||(this.p={});if(i)r[t]=n;else{var e=r[t];r[t]=n,e!==n&&this.notify(t,e)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.p&&P(this.p||(this.p={}),t.p)},n.prototype.unset=function(t,n){if(this.p&&t in this.p){var i=this.p[t];delete this.p[t],N(this.p)&&(this.p=null),n||this.notify(t,i)}},n}(nt),ot="add",st="remove",ut=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ht="length",ft=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.element=i,e.index=r,e}return ut(n,t),n}(c),at=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var e=i||{};if(r.g=!!e.unique,r.M=n||[],r.g)for(var o=0,s=r.M.length;o<s;++o)r._(r.M[o],o);return r.O(),r}return ut(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this.M,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this.M},n.prototype.item=function(t){return this.M[t]},n.prototype.getLength=function(){return this.get(ht)},n.prototype.insertAt=function(t,n){this.g&&this._(n),this.M.splice(t,0,n),this.O(),this.dispatchEvent(new ft(ot,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.g&&this._(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this.M,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this.M[t];return this.M.splice(t,1),this.O(),this.dispatchEvent(new ft(st,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.g&&this._(n,t);var r=this.M[t];this.M[t]=n,this.dispatchEvent(new ft(st,r,t)),this.dispatchEvent(new ft(ot,n,t))}else{for(var e=i;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,n)}},n.prototype.O=function(){this.set(ht,this.M.length)},n.prototype._=function(t,n){for(var i=0,r=this.M.length;i<r;++i)if(this.M[i]===t&&i!==n)throw new f(58)},n}(et),ct=0,vt=1,lt=2,dt=3,pt=4;function wt(t){return Math.pow(t,3)}function gt(t){return 1-wt(1-t)}function yt(t){return 3*t*t-2*t*t*t}function mt(t){return t}var bt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mt=function(t){function n(n,i,r){var e=t.call(this)||this,o=r||{};return e.tileCoord=n,e.state=i,e.interimTile=null,e.key="",e.S=void 0===o.transition?250:o.transition,e.j={},e.interpolate=!!o.interpolate,e}return bt(n,t),n.prototype.changed=function(){this.dispatchEvent(F)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==lt)return this.S=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==lt){t.interimTile=null;break}t.getState()==vt?n=t:t.getState()==ct?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.S)return 1;var i=this.j[t];if(i){if(-1===i)return 1}else i=n,this.j[t]=i;var r=n-i+1e3/60;return r>=this.S?1:wt(r/this.S)},n.prototype.inTransition=function(t){return!!this.S&&-1!==this.j[t]},n.prototype.endTransition=function(t){this.S&&(this.j[t]=-1)},n}(L),_t=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xt=function(t){function n(n){var i=this,r=ct;return(i=t.call(this,n.tileCoord,r,{transition:n.transition,interpolate:n.interpolate})||this).T=n.loader,i.P=null,i.A=null,i.C=n.size||[256,256],i}return _t(n,t),n.prototype.getSize=function(){return this.C},n.prototype.getData=function(){return this.P},n.prototype.getError=function(){return this.A},n.prototype.load=function(){if(this.state===ct||this.state===dt){this.state=vt,this.changed();var t=this;this.T().then((function(n){t.P=n,t.state=lt,t.changed()})).catch((function(n){t.A=n,t.state=dt,t.changed()}))}},n}(Mt);function Ot(t,n){if(!t)throw new f(n)}var St=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function jt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(Ot("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var Et=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.N=void 0,i.k="geometry",i.L=null,i.R=void 0,i.G=null,i.addChangeListener(i.k,i.D),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var e=n;i.setProperties(e)}return i}return St(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.k)},n.prototype.getId=function(){return this.N},n.prototype.getGeometryName=function(){return this.k},n.prototype.getStyle=function(){return this.L},n.prototype.getStyleFunction=function(){return this.R},n.prototype.U=function(){this.changed()},n.prototype.D=function(){this.G&&($(this.G),this.G=null);var t=this.getGeometry();t&&(this.G=H(t,F,this.U,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.k,t)},n.prototype.setStyle=function(t){this.L=t,this.R=t?jt(t):void 0,this.changed()},n.prototype.setId=function(t){this.N=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.k,this.D),this.k=t,this.addChangeListener(this.k,this.D),this.D()},n}(et),Tt="XY",Pt="XYZ",At="XYM",Ct="XYZM",Nt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},kt={9001:Nt.METERS,9002:Nt.FEET,9003:Nt.USFEET,9101:Nt.RADIANS,9102:Nt.DEGREES};var Lt={};Lt[Nt.RADIANS]=6370997/(2*Math.PI),Lt[Nt.DEGREES]=2*Math.PI*6370997/360,Lt[Nt.FEET]=.3048,Lt[Nt.METERS]=1,Lt[Nt.USFEET]=1200/3937;var Ft,Rt=Nt,It="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Gt=-1!==It.indexOf("firefox"),Dt=-1!==It.indexOf("safari")&&-1==It.indexOf("chrom"),zt=Dt&&!!(It.indexOf("version/15.4")>=0||It.match(/cpu (os|iphone os) 15_4 like mac os x/)),Ut=-1!==It.indexOf("webkit")&&-1==It.indexOf("edge"),Xt=-1!==It.indexOf("macintosh"),Bt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Vt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,qt="undefined"!=typeof Image&&Image.prototype.decode,Wt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Zt=new Array(6);function Yt(){return[1,0,0,1,0,0]}function Ht(t){return $t(t,1,0,0,1,0,0)}function Jt(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=t[4],u=t[5],h=n[0],f=n[1],a=n[2],c=n[3],v=n[4],l=n[5];return t[0]=i*h+e*f,t[1]=r*h+o*f,t[2]=i*a+e*c,t[3]=r*a+o*c,t[4]=i*v+e*l+s,t[5]=r*v+o*l+u,t}function $t(t,n,i,r,e,o,s){return t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t}function Kt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Qt(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function tn(t,n){var i=Math.cos(n),r=Math.sin(n);return Jt(t,$t(Zt,i,r,-r,i,0,0))}function nn(t,n,i){return Jt(t,$t(Zt,n,0,0,i,0,0))}function rn(t,n,i){return $t(t,n,0,0,i,0,0)}function en(t,n,i){return Jt(t,$t(Zt,1,0,0,1,n,i))}function on(t,n,i,r,e,o,s,u){var h=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=e*h,t[2]=-r*h,t[3]=e*f,t[4]=s*r*f-u*r*h+n,t[5]=s*e*h+u*e*f+i,t}function sn(t,n){var i=un(n);Ot(0!==i,32);var r=n[0],e=n[1],o=n[2],s=n[3],u=n[4],h=n[5];return t[0]=s/i,t[1]=-e/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-s*u)/i,t[5]=-(r*h-e*u)/i,t}function un(t){return t[0]*t[3]-t[1]*t[2]}function hn(t){var n="matrix("+t.join(", ")+")";if(Vt)return n;var i=Ft||(Ft=document.createElement("div"));return i.style.transform=n,i.style.transform}var fn=0,an=1,cn=2,vn=4,ln=8,dn=16;function pn(t){for(var n=xn(),i=0,r=t.length;i<r;++i)Cn(n,t[i]);return n}function wn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function gn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function yn(t,n,i){var r,e;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(e=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*e}function mn(t,n){return Mn(t,n[0],n[1])}function bn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function Mn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function _n(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=n[0],u=n[1],h=fn;return s<i?h|=dn:s>e&&(h|=vn),u<r?h|=ln:u>o&&(h|=cn),h===fn&&(h=an),h}function xn(){return[1/0,1/0,-1/0,-1/0]}function On(t,n,i,r,e){return e?(e[0]=t,e[1]=n,e[2]=i,e[3]=r,e):[t,n,i,r]}function Sn(t){return On(1/0,1/0,-1/0,-1/0,t)}function jn(t,n){var i=t[0],r=t[1];return On(i,r,i,r,n)}function En(t,n,i,r,e){return kn(Sn(e),t,n,i,r)}function Tn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function Pn(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function An(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Cn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function Nn(t,n){for(var i=0,r=n.length;i<r;++i)Cn(t,n[i]);return t}function kn(t,n,i,r,e){for(;i<r;i+=e)Fn(t,n[i],n[i+1]);return t}function Ln(t,n){for(var i=0,r=n.length;i<r;++i)Nn(t,n[i]);return t}function Fn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Rn(t,n){var i;return(i=n(Gn(t)))||(i=n(Dn(t)))||(i=n(Zn(t)))?i:(i=n(Wn(t)))||!1}function In(t){var n=0;return Jn(t)||(n=Yn(t)*Vn(t)),n}function Gn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function zn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,n){var i;return"bottom-left"===n?i=Gn(t):"bottom-right"===n?i=Dn(t):"top-left"===n?i=Wn(t):"top-right"===n?i=Zn(t):Ot(!1,13),i}function Xn(t,n,i,r,e){var o=Bn(t,n,i,r),s=o[0],u=o[1],h=o[2],f=o[3],a=o[4],c=o[5],v=o[6],l=o[7];return On(Math.min(s,h,a,v),Math.min(u,f,c,l),Math.max(s,h,a,v),Math.max(u,f,c,l),e)}function Bn(t,n,i,r){var e=n*r[0]/2,o=n*r[1]/2,s=Math.cos(i),u=Math.sin(i),h=e*s,f=e*u,a=o*s,c=o*u,v=t[0],l=t[1];return[v-h+c,l-f-a,v-h-c,l-f+a,v+h-c,l+f+a,v+h+c,l+f-a,v-h+c,l-f-a]}function Vn(t){return t[3]-t[1]}function qn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return Hn(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):Sn(r),r}function Wn(t){return[t[0],t[3]]}function Zn(t){return[t[2],t[3]]}function Yn(t){return t[2]-t[0]}function Hn(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Jn(t){return t[2]<t[0]||t[3]<t[1]}function $n(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function Kn(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function Qn(t,n,i){var r=!1,e=_n(t,n),o=_n(t,i);if(e===an||o===an)r=!0;else{var s=t[0],u=t[1],h=t[2],f=t[3],a=n[0],c=n[1],v=i[0],l=i[1],d=(l-c)/(v-a),p=void 0,w=void 0;o&cn&&!(e&cn)&&(r=(p=v-(l-f)/d)>=s&&p<=h),r||!(o&vn)||e&vn||(r=(w=l-(v-h)*d)>=u&&w<=f),r||!(o&ln)||e&ln||(r=(p=v-(l-u)/d)>=s&&p<=h),r||!(o&dn)||e&dn||(r=(w=l-(v-s)*d)>=u&&w<=f)}return r}function ti(t,n,i,r){var e=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],u=0;u<r;++u)e.push(t[0]+o*u/r,t[1],t[2],t[1]+s*u/r,t[2]-o*u/r,t[3],t[0],t[3]-s*u/r);else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var h=[],f=[],a=(u=0,e.length);u<a;u+=2)h.push(e[u]),f.push(e[u+1]);return function(t,n,i){return On(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(h,f,i)}function ni(t,n){var i=n.getExtent(),r=zn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var e=Yn(i),o=Math.floor((r[0]-i[0])/e)*e;t[0]-=o,t[2]-=o}return t}function ii(t,n){if(n.canWrapX()){var i=n.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];ni(t,n);var r=Yn(i);if(Yn(t)>r)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}var ri=function(){function t(t){this.B=t.code,this.V=t.units,this.q=void 0!==t.extent?t.extent:null,this.W=void 0!==t.worldExtent?t.worldExtent:null,this.Z=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.H=void 0!==t.global&&t.global,this.$=!(!this.H||!this.q),this.K=t.getPointResolution,this.tt=null,this.nt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.$},t.prototype.getCode=function(){return this.B},t.prototype.getExtent=function(){return this.q},t.prototype.getUnits=function(){return this.V},t.prototype.getMetersPerUnit=function(){return this.nt||Lt[this.V]},t.prototype.getWorldExtent=function(){return this.W},t.prototype.getAxisOrientation=function(){return this.Z},t.prototype.isGlobal=function(){return this.H},t.prototype.setGlobal=function(t){this.H=t,this.$=!(!t||!this.q)},t.prototype.getDefaultTileGrid=function(){return this.tt},t.prototype.setDefaultTileGrid=function(t){this.tt=t},t.prototype.setExtent=function(t){this.q=t,this.$=!(!this.H||!t)},t.prototype.setWorldExtent=function(t){this.W=t},t.prototype.setGetPointResolution=function(t){this.K=t},t.prototype.getPointResolutionFunc=function(){return this.K},t}();function ei(t,n,i){return Math.min(Math.max(t,n),i)}var oi="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},si="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function ui(t,n,i,r,e,o){var s=e-i,u=o-r;if(0!==s||0!==u){var h=((t-i)*s+(n-r)*u)/(s*s+u*u);h>1?(i=e,r=o):h>0&&(i+=s*h,r+=u*h)}return hi(t,n,i,r)}function hi(t,n,i,r){var e=i-t,o=r-n;return e*e+o*o}function fi(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,e=Math.abs(t[i][i]),o=i+1;o<n;o++){var s=Math.abs(t[o][i]);s>e&&(e=s,r=o)}if(0===e)return null;var u=t[r];t[r]=t[i],t[i]=u;for(var h=i+1;h<n;h++)for(var f=-t[h][i]/t[i][i],a=i;a<n+1;a++)i==a?t[h][a]=0:t[h][a]+=f*t[i][a]}for(var c=new Array(n),v=n-1;v>=0;v--){c[v]=t[v][n]/t[v][v];for(var l=v-1;l>=0;l--)t[l][n]-=t[l][v]*c[v]}return c}function ai(t){return 180*t/Math.PI}function ci(t){return t*Math.PI/180}function vi(t,n){var i=t%n;return i*n<0?i+n:i}function li(t,n,i){return t+i*(n-t)}function di(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i}function pi(t,n){return Math.round(di(t,n))}function wi(t,n){return Math.floor(di(t,n))}function gi(t,n){return Math.ceil(di(t,n))}var yi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mi=6378137,bi=Math.PI*mi,Mi=[-bi,-bi,bi,bi],_i=[-180,-85,180,85],xi=mi*Math.log(Math.tan(Math.PI/2)),Oi=function(t){function n(n){return t.call(this,{code:n,units:Rt.METERS,extent:Mi,global:!0,worldExtent:_i,getPointResolution:function(t,n){return t/oi(n[1]/mi)}})||this}return yi(n,t),n}(ri),Si=[new Oi("EPSG:3857"),new Oi("EPSG:102100"),new Oi("EPSG:102113"),new Oi("EPSG:900913"),new Oi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Oi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ji(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e){o[s]=bi*t[s]/180;var u=mi*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>xi?u=xi:u<-xi&&(u=-xi),o[s+1]=u}return o}function Ei(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e)o[s]=180*t[s]/bi,o[s+1]=360*Math.atan(Math.exp(t[s+1]/mi))/Math.PI-90;return o}var Ti=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pi=6378137,Ai=[-180,-90,180,90],Ci=Math.PI*Pi/180,Ni=function(t){function n(n,i){return t.call(this,{code:n,units:Rt.DEGREES,extent:Ai,axisOrientation:i,global:!0,metersPerUnit:Ci,worldExtent:Ai})||this}return Ti(n,t),n}(ri),ki=[new Ni("CRS:84"),new Ni("EPSG:4326","neu"),new Ni("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ni("urn:ogc:def:crs:OGC:2:84"),new Ni("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ni("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ni("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Li={};function Fi(){Li={}}function Ri(t){return Li[t]||Li[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ii(t,n){Li[t]=n}var Gi={};function Di(){Gi={}}function zi(t,n,i){var r=t.getCode(),e=n.getCode();r in Gi||(Gi[r]={}),Gi[r][e]=i}function Ui(t,n){var i;return t in Gi&&n in Gi[t]&&(i=Gi[t][n]),i}function Xi(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,e=r.indexOf(".");return(e=-1===e?r.length:e)>n?r:new Array(1+n-e).join("0")+r}function Bi(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),e=0;e<Math.max(i.length,r.length);e++){var o=parseInt(i[e]||"0",10),s=parseInt(r[e]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function Vi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function qi(t,n){var i=n.getRadius(),r=n.getCenter(),e=r[0],o=r[1],s=t[0]-e,u=t[1]-o;0===s&&0===u&&(s=1);var h=Math.sqrt(s*s+u*u);return[e+i*s/h,o+i*u/h]}function Wi(t,n){var i,r,e=t[0],o=t[1],s=n[0],u=n[1],h=s[0],f=s[1],a=u[0],c=u[1],v=a-h,l=c-f,d=0===v&&0===l?0:(v*(e-h)+l*(o-f))/(v*v+l*l||0);return d<=0?(i=h,r=f):d>=1?(i=a,r=c):(i=h+d*v,r=f+d*l),[i,r]}function Zi(t,n,i){var r=vi(n+180,360)-180,e=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),u=Math.floor(e/3600),h=Math.floor((e-3600*u)/60),f=e-3600*u-60*h;return(f=Math.ceil(f*s)/s)>=60&&(f=0,h+=1),h>=60&&(h=0,u+=1),u+"° "+Xi(h,2)+"′ "+Xi(f,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function Yi(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Hi(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function Ji(t,n){var i=Math.cos(n),r=Math.sin(n),e=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=e,t[1]=o,t}function $i(t,n){return t[0]*=n,t[1]*=n,t}function Ki(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function Qi(t,n){return Math.sqrt(Ki(t,n))}function tr(t,n){return Ki(t,Wi(t,n))}function nr(t,n){return Yi(t,"{x}, {y}",n)}function ir(t,n){if(n.canWrapX()){var i=Yn(n.getExtent()),r=rr(t,n,i);r&&(t[0]-=r*i)}return t}function rr(t,n,i){var r=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Yn(r);e=Math.floor((t[0]-r[0])/o)}return e}var er=6371008.8;function or(t,n,i){var r=i||er,e=ci(t[1]),o=ci(n[1]),s=(o-e)/2,u=ci(n[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(u)*Math.sin(u)*Math.cos(e)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function sr(t,n){for(var i=0,r=0,e=t.length;r<e-1;++r)i+=or(t[r],t[r+1],n);return i}function ur(t,n){for(var i=0,r=t.length,e=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var u=t[s][0],h=t[s][1];i+=ci(u-e)*(2+Math.sin(ci(o))+Math.sin(ci(h))),e=u,o=h}return i*n*n/2}function hr(t,n,i,r){var e=r||er,o=ci(t[1]),s=ci(t[0]),u=n/e,h=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(i));return[ai(s+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(h))),ai(h)]}var fr=!0;function ar(t){fr=!(void 0===t||t)}function cr(t,n,i){var r;if(void 0!==n){for(var e=0,o=t.length;e<o;++e)n[e]=t[e];r=n}else r=t.slice();return r}function vr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,e=t.length;r<e;++r)n[r]=t[r];t=n}return t}function lr(t){Ii(t.getCode(),t),zi(t,t,cr)}function dr(t){t.forEach(lr)}function pr(t){return"string"==typeof t?Ri(t):t||null}function wr(t,n,i,r){var e,o=(t=pr(t)).getPointResolutionFunc();if(o){if(e=o(n,i),r&&r!==t.getUnits())(u=t.getMetersPerUnit())&&(e=e*u/Lt[r])}else{var s=t.getUnits();if(s==Rt.DEGREES&&!r||r==Rt.DEGREES)e=n;else{var u,h=xr(t,pr("EPSG:4326"));if(h===vr&&s!==Rt.DEGREES)e=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];e=(or((f=h(f,f,2)).slice(0,2),f.slice(2,4))+or(f.slice(4,6),f.slice(6,8)))/2}void 0!==(u=r?Lt[r]:t.getMetersPerUnit())&&(e/=u)}}return e}function gr(t){dr(t),t.forEach((function(n){t.forEach((function(t){n!==t&&zi(n,t,cr)}))}))}function yr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){zi(t,n,i),zi(n,t,r)}))}))}function mr(t,n){return t?"string"==typeof t?pr(t):t:pr(n)}function br(t){return function(n,i,r){for(var e=n.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(e),u=0;u<e;u+=o)for(var h=t(n.slice(u,u+o)),f=h.length,a=0,c=o;a<c;++a)s[u+a]=a>=f?n[u+a]:h[a];return s}}function Mr(t,n,i,r){var e=pr(t),o=pr(n);zi(e,o,br(i)),zi(o,e,br(r))}function _r(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||xr(t,n)===cr)&&i}function xr(t,n){var i=Ui(t.getCode(),n.getCode());return i||(i=vr),i}function Or(t,n){return xr(pr(t),pr(n))}function Sr(t,n,i){return Or(n,i)(t,void 0,t.length)}function jr(t,n,i,r){return ti(t,Or(n,i),void 0,r)}var Er=null;function Tr(t){Er=pr(t)}function Pr(){return Er}function Ar(t,n){return Er?Sr(t,n,Er):t}function Cr(t,n){return Er?Sr(t,Er,n):(fr&&!Hi(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(fr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Nr(t,n){return Er?jr(t,n,Er):t}function kr(t,n){return Er?jr(t,Er,n):t}function Lr(t,n){if(!Er)return t;var i=pr(n).getUnits(),r=Er.getUnits();return i&&r?t*Lt[i]/Lt[r]:t}function Fr(t,n){if(!Er)return t;var i=pr(n).getUnits(),r=Er.getUnits();return i&&r?t*Lt[r]/Lt[i]:t}function Rr(t,n,i){return function(r){var e,o;if(t.canWrapX()){var s=t.getExtent(),u=Yn(s);(o=rr(r=r.slice(0),t,u))&&(r[0]=r[0]-o*u),r[0]=ei(r[0],s[0],s[2]),r[1]=ei(r[1],s[1],s[3]),e=i(r)}else e=i(r);return o&&n.canWrapX()&&(e[0]+=o*Yn(n.getExtent())),e}}function Ir(){gr(Si),gr(ki),yr(ki,Si,ji,Ei)}function Gr(t,n,i,r,e,o){for(var s=o||[],u=0,h=n;h<i;h+=r){var f=t[h],a=t[h+1];s[u++]=e[0]*f+e[2]*a+e[4],s[u++]=e[1]*f+e[3]*a+e[5]}return o&&s.length!=u&&(s.length=u),s}function Dr(t,n,i,r,e,o,s){for(var u=s||[],h=Math.cos(e),f=Math.sin(e),a=o[0],c=o[1],v=0,l=n;l<i;l+=r){var d=t[l]-a,p=t[l+1]-c;u[v++]=a+d*h-p*f,u[v++]=c+d*f+p*h;for(var w=l+2;w<l+r;++w)u[v++]=t[w]}return s&&u.length!=v&&(u.length=v),u}function zr(t,n,i,r,e,o,s,u){for(var h=u||[],f=s[0],a=s[1],c=0,v=n;v<i;v+=r){var l=t[v]-f,d=t[v+1]-a;h[c++]=f+e*l,h[c++]=a+o*d;for(var p=v+2;p<v+r;++p)h[c++]=t[p]}return u&&h.length!=c&&(h.length=c),h}function Ur(t,n,i,r,e,o,s){for(var u=s||[],h=0,f=n;f<i;f+=r){u[h++]=t[f]+e,u[h++]=t[f+1]+o;for(var a=f+2;a<f+r;++a)u[h++]=t[a]}return s&&u.length!=h&&(u.length=h),u}Ir();var Xr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Br=[1,0,0,1,0,0],Vr=function(t){function n(){var n=t.call(this)||this;return n.q=[1/0,1/0,-1/0,-1/0],n.it=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Xr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,e){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.it!=this.getRevision()){var n=this.computeExtent(this.q);(isNaN(n[0])||isNaN(n[1]))&&Sn(n),this.it=this.getRevision()}return $n(this.q,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=pr(t),r=i.getUnits()==Rt.TILE_PIXELS?function(t,r,e){var o=i.getExtent(),s=i.getWorldExtent(),u=Vn(s)/Vn(o);return on(Br,s[0],s[3],u,-u,0,0,0),Gr(t,0,t.length,e,Br,r),Or(i,n)(t,r,e)}:Or(i,n);return this.applyTransform(r),this},n}(et),qr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Wr(t){var n;return t==Tt?n=2:t==Pt||t==At?n=3:t==Ct&&(n=4),n}function Zr(t,n,i){var r=t.getFlatCoordinates();if(r){var e=t.getStride();return Gr(r,0,r.length,e,n,i)}return null}var Yr=function(t){function n(){var n=t.call(this)||this;return n.layout=Tt,n.stride=2,n.flatCoordinates=null,n}return qr(n,t),n.prototype.computeExtent=function(t){return En(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Wr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Wr(t);else{for(var e=0;e<i;++e){if(0===n.length)return this.layout=Tt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=Tt:3==t?n=Pt:4==t&&(n=Ct);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Dr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var e=i;e||(e=zn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();zr(o,0,o.length,s,t,r,e,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Ur(i,0,i.length,r,t,n,i),this.changed()}},n}(Vr);function Hr(t,n,i,r,e,o,s){var u,h=t[n],f=t[n+1],a=t[i]-h,c=t[i+1]-f;if(0===a&&0===c)u=n;else{var v=((e-h)*a+(o-f)*c)/(a*a+c*c);if(v>1)u=i;else{if(v>0){for(var l=0;l<r;++l)s[l]=li(t[n+l],t[i+l],v);return void(s.length=r)}u=n}}for(l=0;l<r;++l)s[l]=t[u+l];s.length=r}function Jr(t,n,i,r,e){var o=t[n],s=t[n+1];for(n+=r;n<i;n+=r){var u=t[n],h=t[n+1],f=hi(o,s,u,h);f>e&&(e=f),o=u,s=h}return e}function $r(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=Jr(t,n,u,r,e),n=u}return e}function Kr(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=$r(t,n,u,r,e),n=u[u.length-1]}return e}function Qr(t,n,i,r,e,o,s,u,h,f,a){if(n==i)return f;var c,v;if(0===e){if((v=hi(s,u,t[n],t[n+1]))<f){for(c=0;c<r;++c)h[c]=t[n+c];return h.length=r,v}return f}for(var l=a||[NaN,NaN],d=n+r;d<i;)if(Hr(t,d-r,d,r,s,u,l),(v=hi(s,u,l[0],l[1]))<f){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r,d+=r}else d+=r*Math.max((Math.sqrt(v)-Math.sqrt(f))/e|0,1);if(o&&(Hr(t,i-r,n,r,s,u,l),(v=hi(s,u,l[0],l[1]))<f)){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r}return f}function te(t,n,i,r,e,o,s,u,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Qr(t,n,d,r,e,o,s,u,h,f,c),n=d}return f}function ne(t,n,i,r,e,o,s,u,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=te(t,n,d,r,e,o,s,u,h,f,c),n=d[d.length-1]}return f}function ie(t,n,i,r){for(var e=0,o=i.length;e<o;++e)t[n++]=i[e];return n}function re(t,n,i,r){for(var e=0,o=i.length;e<o;++e)for(var s=i[e],u=0;u<r;++u)t[n++]=s[u];return n}function ee(t,n,i,r,e){for(var o=e||[],s=0,u=0,h=i.length;u<h;++u){var f=re(t,n,i[u],r);o[s++]=f,n=f}return o.length=s,o}function oe(t,n,i,r,e){for(var o=e||[],s=0,u=0,h=i.length;u<h;++u){var f=ee(t,n,i[u],r,o[s]);o[s++]=f,n=f[f.length-1]}return o.length=s,o}function se(t,n,i,r,e,o,s){var u=(i-n)/r;if(u<3){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var h=new Array(u);h[0]=1,h[u-1]=1;for(var f=[n,i-r],a=0;f.length>0;){for(var c=f.pop(),v=f.pop(),l=0,d=t[v],p=t[v+1],w=t[c],g=t[c+1],y=v+r;y<c;y+=r){var m=ui(t[y],t[y+1],d,p,w,g);m>l&&(a=y,l=m)}l>e&&(h[(a-n)/r]=1,v+r<a&&f.push(v,a),a+r<c&&f.push(a,c))}for(y=0;y<u;++y)h[y]&&(o[s++]=t[n+y*r],o[s++]=t[n+y*r+1]);return s}function ue(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h];s=se(t,n,a,r,e,o,s),u.push(s),n=a}return s}function he(t,n,i,r,e,o,s){if(i<=n+r){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var u=t[n],h=t[n+1];o[s++]=u,o[s++]=h;var f=u,a=h;for(n+=r;n<i;n+=r)hi(u,h,f=t[n],a=t[n+1])>e&&(o[s++]=f,o[s++]=a,u=f,h=a);return f==u&&a==h||(o[s++]=f,o[s++]=a),s}function fe(t,n){return n*Math.round(t/n)}function ae(t,n,i,r,e,o,s){if(n==i)return s;var u,h,f=fe(t[n],e),a=fe(t[n+1],e);n+=r,o[s++]=f,o[s++]=a;do{if(u=fe(t[n],e),h=fe(t[n+1],e),(n+=r)==i)return o[s++]=u,o[s++]=h,s}while(u==f&&h==a);for(;n<i;){var c=fe(t[n],e),v=fe(t[n+1],e);if(n+=r,c!=u||v!=h){var l=u-f,d=h-a,p=c-f,w=v-a;l*w==d*p&&(l<0&&p<l||l==p||l>0&&p>l)&&(d<0&&w<d||d==w||d>0&&w>d)?(u=c,h=v):(o[s++]=u,o[s++]=h,f=u,a=h,u=c,h=v)}}return o[s++]=u,o[s++]=h,s}function ce(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h];s=ae(t,n,a,r,e,o,s),u.push(s),n=a}return s}function ve(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];s=ce(t,n,a,r,e,o,s,c),u.push(c),n=a[a.length-1]}return s}function le(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=n;u<i;u+=r)o[s++]=t.slice(u,u+r);return o.length=s,o}function de(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,h=i.length;u<h;++u){var f=i[u];o[s++]=le(t,n,f,r,o[s]),n=f}return o.length=s,o}function pe(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,h=i.length;u<h;++u){var f=i[u];o[s++]=de(t,n,f,r,o[s]),n=f[f.length-1]}return o.length=s,o}function we(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],h=t[n+1];e+=s*u-o*h,o=u,s=h}return e/2}function ge(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=we(t,n,u,r),n=u}return e}function ye(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=ge(t,n,u,r),n=u[u.length-1]}return e}var me=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),be=function(t){function n(n,i){var r=t.call(this)||this;return r.rt=-1,r.et=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return me(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<yn(this.getExtent(),t,n)?r:(this.et!=this.getRevision()&&(this.rt=Math.sqrt(Jr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.et=this.getRevision()),Qr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.rt,!0,t,n,i,r))},n.prototype.getArea=function(){return we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,Tt)},n.prototype.getType=function(){return"LinearRing"},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=re(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Yr),Me=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_e=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return Me(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=hi(t,n,e[0],e[1]);if(o<r){for(var s=this.stride,u=0;u<s;++u)i[u]=e[u];return i.length=s,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return jn(this.flatCoordinates,t)},n.prototype.getType=function(){return"Point"},n.prototype.intersectsExtent=function(t){return Mn(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ie(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Yr);function xe(t,n,i,r,e){return!Rn(e,(function(e){return!Oe(t,n,i,r,e[0],e[1])}))}function Oe(t,n,i,r,e,o){for(var s=0,u=t[i-r],h=t[i-r+1];n<i;n+=r){var f=t[n],a=t[n+1];h<=o?a>o&&(f-u)*(o-h)-(e-u)*(a-h)>0&&s++:a<=o&&(f-u)*(o-h)-(e-u)*(a-h)<0&&s--,u=f,h=a}return 0!==s}function Se(t,n,i,r,e,o){if(0===i.length)return!1;if(!Oe(t,n,i[0],r,e,o))return!1;for(var s=1,u=i.length;s<u;++s)if(Oe(t,i[s-1],i[s],r,e,o))return!1;return!0}function je(t,n,i,r,e,o){if(0===i.length)return!1;for(var s=0,u=i.length;s<u;++s){var h=i[s];if(Se(t,n,h,r,e,o))return!0;n=h[h.length-1]}return!1}function Ee(t,n,i,r,e,o,s){for(var u,h,f,a,c,v,l,d=e[o+1],w=[],g=0,y=i.length;g<y;++g){var m=i[g];for(a=t[m-r],v=t[m-r+1],u=n;u<m;u+=r)c=t[u],l=t[u+1],(d<=v&&l<=d||v<=d&&d<=l)&&(f=(d-v)/(l-v)*(c-a)+a,w.push(f)),a=c,v=l}var b=NaN,M=-1/0;for(w.sort(p),a=w[0],u=1,h=w.length;u<h;++u){c=w[u];var _=Math.abs(c-a);_>M&&Se(t,n,i,r,f=(a+c)/2,d)&&(b=f,M=_),a=c}return isNaN(b)&&(b=e[o]),s?(s.push(b,d,M),s):[b,d,M]}function Te(t,n,i,r,e){for(var o=[],s=0,u=i.length;s<u;++s){var h=i[s];o=Ee(t,n,h,r,e,2*s,o),n=h[h.length-1]}return o}function Pe(t,n,i,r,e){var o;for(n+=r;n<i;n+=r)if(o=e(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function Ae(t,n,i,r,e){var o=kn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!Hn(e,o)&&(!!bn(e,o)||(o[0]>=e[0]&&o[2]<=e[2]||(o[1]>=e[1]&&o[3]<=e[3]||Pe(t,n,i,r,(function(t,n){return Qn(e,t,n)})))))}function Ce(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){if(Ae(t,n,i[o],r,e))return!0;n=i[o]}return!1}function Ne(t,n,i,r,e){return!!Ae(t,n,i,r,e)||(!!Oe(t,n,i,r,e[0],e[1])||(!!Oe(t,n,i,r,e[0],e[3])||(!!Oe(t,n,i,r,e[2],e[1])||!!Oe(t,n,i,r,e[2],e[3]))))}function ke(t,n,i,r,e){if(!Ne(t,n,i[0],r,e))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(xe(t,i[o-1],i[o],r,e)&&!Ae(t,i[o-1],i[o],r,e))return!1;return!0}function Le(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(ke(t,n,u,r,e))return!0;n=u[u.length-1]}return!1}function Fe(t,n,i,r){for(;n<i-r;){for(var e=0;e<r;++e){var o=t[n+e];t[n+e]=t[i-r+e],t[i-r+e]=o}n+=r,i-=r}}function Re(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],h=t[n+1];e+=(u-o)*(h+s),o=u,s=h}return 0===e?void 0:e>0}function Ie(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var h=i[s],f=Re(t,n,h,r);if(0===s){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=h}return!0}function Ge(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(!Ie(t,n,u,r,e))return!1;u.length&&(n=u[u.length-1])}return!0}function De(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var h=i[s],f=Re(t,n,h,r);(0===s?o&&f||!o&&!f:o&&!f||!o&&f)&&Fe(t,n,h,r),n=h}return n}function ze(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o)n=De(t,n,i[o],r,e);return n}function Ue(t,n){for(var i=[],r=0,e=0,o=0,s=n.length;o<s;++o){var u=n[o];if(Re(t,r,u,2)){if(0===i.length)continue;i[i.length-1].push(n[e])}else i.push(n.slice(e,o+1));e=o+1,r=u}return i}var Xe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Be=function(t){function n(n,i,r){var e=t.call(this)||this;return e.ot=[],e.st=-1,e.ut=null,e.rt=-1,e.et=-1,e.ht=-1,e.ft=null,void 0!==i&&r?(e.setFlatCoordinates(i,n),e.ot=r):e.setCoordinates(n,i),e}return Xe(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ot.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.ot.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<yn(this.getExtent(),t,n)?r:(this.et!=this.getRevision()&&(this.rt=Math.sqrt($r(this.flatCoordinates,0,this.ot,this.stride,0)),this.et=this.getRevision()),te(this.flatCoordinates,0,this.ot,this.stride,this.rt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Se(this.getOrientedFlatCoordinates(),0,this.ot,this.stride,t,n)},n.prototype.getArea=function(){return ge(this.getOrientedFlatCoordinates(),0,this.ot,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?De(n=this.getOrientedFlatCoordinates().slice(),0,this.ot,this.stride,t):n=this.flatCoordinates,de(n,0,this.ot,this.stride)},n.prototype.getEnds=function(){return this.ot},n.prototype.getFlatInteriorPoint=function(){if(this.st!=this.getRevision()){var t=zn(this.getExtent());this.ut=Ee(this.getOrientedFlatCoordinates(),0,this.ot,this.stride,t,0),this.st=this.getRevision()}return this.ut},n.prototype.getInteriorPoint=function(){return new _e(this.getFlatInteriorPoint(),At)},n.prototype.getLinearRingCount=function(){return this.ot.length},n.prototype.getLinearRing=function(t){return t<0||this.ot.length<=t?null:new be(this.flatCoordinates.slice(0===t?0:this.ot[t-1],this.ot[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ot,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o],h=new be(n.slice(e,u),t);r.push(h),e=u}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.ht!=this.getRevision()){var t=this.flatCoordinates;Ie(t,0,this.ot,this.stride)?this.ft=t:(this.ft=t.slice(),this.ft.length=De(this.ft,0,this.ot,this.stride)),this.ht=this.getRevision()}return this.ft},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ce(this.flatCoordinates,0,this.ot,this.stride,Math.sqrt(t),i,0,r),new n(i,Tt,r)},n.prototype.getType=function(){return"Polygon"},n.prototype.intersectsExtent=function(t){return ke(this.getOrientedFlatCoordinates(),0,this.ot,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ot);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Yr),Ve=Be;function qe(t,n,i,r){for(var e=i||32,o=[],s=0;s<e;++s)m(o,hr(t,n,2*Math.PI*s/e,r));return o.push(o[0],o[1]),new Be(o,Tt,[o.length])}function We(t){var n=t[0],i=t[1],r=t[2],e=t[3],o=[n,i,n,e,r,e,r,i,n,i];return new Be(o,Tt,[o.length])}function Ze(t,n,i){for(var r=n||32,e=t.getStride(),o=t.getLayout(),s=t.getCenter(),u=e*(r+1),h=new Array(u),f=0;f<u;f+=e){h[f]=0,h[f+1]=0;for(var a=2;a<e;a++)h[f+a]=s[a]}var c=[h.length],v=new Be(h,o,c);return Ye(v,s,t.getRadius(),i),v}function Ye(t,n,i,r){for(var e=t.getFlatCoordinates(),o=t.getStride(),s=e.length/o-1,u=r||0,h=0;h<=s;++h){var f=h*o,a=u+2*vi(h,s)*Math.PI/s;e[f]=n[0]+i*Math.cos(a),e[f+1]=n[1]+i*Math.sin(a)}t.changed()}var He=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Je="accuracy",$e="accuracyGeometry",Ke="altitude",Qe="altitudeAccuracy",to="heading",no="position",io="projection",ro="speed",eo="tracking",oo="trackingOptions",so=function(t){function n(n){var i=t.call(this,R)||this;return i.code=n.code,i.message=n.message,i}return He(n,t),n}(c),uo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ct=null,i.vt=vr,i.lt=void 0,i.addChangeListener(io,i.dt),i.addChangeListener(eo,i.wt),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return He(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.dt=function(){var t=this.getProjection();t&&(this.vt=xr(pr("EPSG:4326"),t),this.ct&&this.set(no,this.vt(this.ct)))},n.prototype.wt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.lt?this.lt=navigator.geolocation.watchPosition(this.gt.bind(this),this.yt.bind(this),this.getTrackingOptions()):t||void 0===this.lt||(navigator.geolocation.clearWatch(this.lt),this.lt=void 0)}},n.prototype.gt=function(t){var n=t.coords;this.set(Je,n.accuracy),this.set(Ke,null===n.altitude?void 0:n.altitude),this.set(Qe,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(to,null===n.heading?void 0:ci(n.heading)),this.ct?(this.ct[0]=n.longitude,this.ct[1]=n.latitude):this.ct=[n.longitude,n.latitude];var i=this.vt(this.ct);this.set(no,i),this.set(ro,null===n.speed?void 0:n.speed);var r=qe(this.ct,n.accuracy);r.applyTransform(this.vt),this.set($e,r),this.changed()},n.prototype.yt=function(t){this.dispatchEvent(new so(t))},n.prototype.getAccuracy=function(){return this.get(Je)},n.prototype.getAccuracyGeometry=function(){return this.get($e)||null},n.prototype.getAltitude=function(){return this.get(Ke)},n.prototype.getAltitudeAccuracy=function(){return this.get(Qe)},n.prototype.getHeading=function(){return this.get(to)},n.prototype.getPosition=function(){return this.get(no)},n.prototype.getProjection=function(){return this.get(io)},n.prototype.getSpeed=function(){return this.get(ro)},n.prototype.getTracking=function(){return this.get(eo)},n.prototype.getTrackingOptions=function(){return this.get(oo)},n.prototype.setProjection=function(t){this.set(io,pr(t))},n.prototype.setTracking=function(t){this.set(eo,t)},n.prototype.setTrackingOptions=function(t){this.set(oo,t)},n}(et),ho=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fo=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.extent=n,o.bt=r,o.resolution=i,o.state=e,o}return ho(n,t),n.prototype.changed=function(){this.dispatchEvent(F)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.bt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(L),ao=0,co=1,vo=2,lo=3,po=4,wo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function go(t,n,i){var r=t,e=!0,o=!1,s=!1,u=[J(r,q,(function(){s=!0,o||n()}))];return r.src&&qt?(o=!0,r.decode().then((function(){e&&n()})).catch((function(t){e&&(s?n():i())}))):u.push(J(r,R,i)),function(){e=!1,u.forEach($)}}var yo=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,r,ao)||this;return u.Mt=e,u._t=new Image,null!==o&&(u._t.crossOrigin=o),u.xt=null,u.state=ao,u.Ot=s,u}return wo(n,t),n.prototype.getImage=function(){return this._t},n.prototype.St=function(){this.state=lo,this.jt(),this.changed()},n.prototype.Et=function(){void 0===this.resolution&&(this.resolution=Vn(this.extent)/this._t.height),this.state=vo,this.jt(),this.changed()},n.prototype.load=function(){this.state!=ao&&this.state!=lo||(this.state=co,this.changed(),this.Ot(this,this.Mt),this.xt=go(this._t,this.Et.bind(this),this.St.bind(this)))},n.prototype.setImage=function(t){this._t=t,this.resolution=Vn(this.extent)/this._t.height},n.prototype.jt=function(){this.xt&&(this.xt(),this.xt=null)},n}(fo),mo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bo=function(t){function n(n,i,r,e,o){var s=this,u=void 0!==o?ao:vo;return(s=t.call(this,n,i,r,u)||this).T=void 0!==o?o:null,s.Tt=e,s.A=null,s}return mo(n,t),n.prototype.getError=function(){return this.A},n.prototype.Pt=function(t){t?(this.A=t,this.state=lo):this.state=vo,this.changed()},n.prototype.load=function(){this.state==ao&&(this.state=co,this.changed(),this.T(this.Pt.bind(this)))},n.prototype.getImage=function(){return this.Tt},n}(fo);function Mo(t,n,i,r){var e;return e=i&&i.length?i.shift():Vt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",r)}function _o(t){var n=t.canvas;n.width=1,n.height=1,t.clearRect(0,0,1,1)}function xo(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function Oo(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function So(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function jo(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Eo(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function To(t,n){for(var i=t.childNodes,r=0;;++r){var e=i[r],o=n[r];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--r):t.appendChild(o))}}var Po=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ao=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.At=e,u.Mt=r,u.key=r,u._t=new Image,null!==e&&(u._t.crossOrigin=e),u.xt=null,u.Ct=o,u}return Po(n,t),n.prototype.getImage=function(){return this._t},n.prototype.setImage=function(t){this._t=t,this.state=lt,this.jt(),this.changed()},n.prototype.St=function(){var t;this.state=dt,this.jt(),this._t=((t=Mo(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Et=function(){var t=this._t;t.naturalWidth&&t.naturalHeight?this.state=lt:this.state=pt,this.jt(),this.changed()},n.prototype.load=function(){this.state==dt&&(this.state=ct,this._t=new Image,null!==this.At&&(this._t.crossOrigin=this.At)),this.state==ct&&(this.state=vt,this.changed(),this.Ct(this,this.Mt),this.xt=go(this._t,this.Et.bind(this),this.St.bind(this)))},n.prototype.jt=function(){this.xt&&(this.xt(),this.xt=null)},n}(Mt),Co=function(){function t(t,n,i){this.Nt=t,this.kt=n,this.Lt=i,this.Ft=[],this.Rt=0,this.It=0}return t.prototype.begin=function(){this.Ft.length=0,this.Rt=0,this.It=0},t.prototype.update=function(t,n){this.Ft.push(t,n,Date.now())},t.prototype.end=function(){if(this.Ft.length<6)return!1;var t=Date.now()-this.Lt,n=this.Ft.length-3;if(this.Ft[n+2]<t)return!1;for(var i=n-3;i>0&&this.Ft[i+2]>t;)i-=3;var r=this.Ft[n+2]-this.Ft[i+2];if(r<1e3/60)return!1;var e=this.Ft[n]-this.Ft[i],o=this.Ft[n+1]-this.Ft[i+1];return this.Rt=Math.atan2(o,e),this.It=Math.sqrt(e*e+o*o)/r,this.It>this.kt},t.prototype.getDistance=function(){return(this.kt-this.It)/this.Nt},t.prototype.getAngle=function(){return this.Rt},t}(),No=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,ko=/^([a-z]*)$|^hsla?\(.*\)$/i;function Lo(t){return"string"==typeof t?t:Do(t)}function Fo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var Ro=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var e=0;for(var o in t)0==(3&e++)&&(delete t[o],--n)}r=function(t){var n,i,r,e,o;ko.exec(t)&&(t=Fo(t));if(No.exec(t)){var s=t.length-1,u=void 0;u=s<=4?1:2;var h=4===s||8===s;n=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),r=parseInt(t.substr(1+2*u,u),16),e=h?parseInt(t.substr(1+3*u,u),16):255,1==u&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,h&&(e=(e<<4)+e)),o=[n,i,r,e/255]}else 0==t.indexOf("rgba(")?Go(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Go(o)):Ot(!1,14);return o}(i),t[i]=r,++n}return r}}();function Io(t){return Array.isArray(t)?t:Ro(t)}function Go(t){return t[0]=ei(t[0]+.5|0,0,255),t[1]=ei(t[1]+.5|0,0,255),t[2]=ei(t[2]+.5|0,0,255),t[3]=ei(t[3],0,1),t}function Do(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function zo(t){return ko.test(t)&&(t=Fo(t)),No.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Uo=function(){function t(){this.Gt={},this.Dt=0,this.zt=32}return t.prototype.clear=function(){this.Gt={},this.Dt=0},t.prototype.canExpireCache=function(){return this.Dt>this.zt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Gt){var i=this.Gt[n];0!=(3&t++)||i.hasListener()||(delete this.Gt[n],--this.Dt)}}},t.prototype.get=function(t,n,i){var r=Xo(t,n,i);return r in this.Gt?this.Gt[r]:null},t.prototype.set=function(t,n,i,r){var e=Xo(t,n,i);this.Gt[e]=r,++this.Dt},t.prototype.setSize=function(t){this.zt=t,this.expire()},t}();function Xo(t,n,i){return n+":"+t+":"+(i?Lo(i):"null")}var Bo=Uo,Vo=new Uo,qo="opacity",Wo="visible",Zo="extent",Yo="zIndex",Ho="maxResolution",Jo="minResolution",$o="maxZoom",Ko="minZoom",Qo="source",ts="map",ns=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),is=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.Ut=n.background;var r=P({},n);return"object"==typeof n.properties&&(delete r.properties,P(r,n.properties)),r[qo]=void 0!==n.opacity?n.opacity:1,Ot("number"==typeof r[qo],64),r[Wo]=void 0===n.visible||n.visible,r[Yo]=n.zIndex,r[Ho]=void 0!==n.maxResolution?n.maxResolution:1/0,r[Jo]=void 0!==n.minResolution?n.minResolution:0,r[Ko]=void 0!==n.minZoom?n.minZoom:-1/0,r[$o]=void 0!==n.maxZoom?n.maxZoom:1/0,i.Xt=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.Bt=null,i}return ns(n,t),n.prototype.getBackground=function(){return this.Ut},n.prototype.getClassName=function(){return this.Xt},n.prototype.getLayerState=function(t){var n=this.Bt||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=ei(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.Bt=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(Zo)},n.prototype.getMaxResolution=function(){return this.get(Ho)},n.prototype.getMinResolution=function(){return this.get(Jo)},n.prototype.getMinZoom=function(){return this.get(Ko)},n.prototype.getMaxZoom=function(){return this.get($o)},n.prototype.getOpacity=function(){return this.get(qo)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Wo)},n.prototype.getZIndex=function(){return this.get(Yo)},n.prototype.setBackground=function(t){this.Ut=t,this.changed()},n.prototype.setExtent=function(t){this.set(Zo,t)},n.prototype.setMaxResolution=function(t){this.set(Ho,t)},n.prototype.setMinResolution=function(t){this.set(Jo,t)},n.prototype.setMaxZoom=function(t){this.set($o,t)},n.prototype.setMinZoom=function(t){this.set(Ko,t)},n.prototype.setOpacity=function(t){Ot("number"==typeof t,64),this.set(qo,t)},n.prototype.setVisible=function(t){this.set(Wo,t)},n.prototype.setZIndex=function(t){this.set(Yo,t)},n.prototype.disposeInternal=function(){this.Bt&&(this.Bt.layer=null,this.Bt=null),t.prototype.disposeInternal.call(this)},n}(et),rs="prerender",es="postrender",os="precompose",ss="postcompose",us="rendercomplete",hs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function fs(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var as=function(t){function n(n){var i=this,r=P({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.Vt=null,i.qt=null,i.Wt=null,i.Zt=null,i.rendered=!1,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(Qo,i.Yt);var e=n.source?n.source:null;return i.setSource(e),i}return hs(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(Qo)||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},n.prototype.Ht=function(){this.changed()},n.prototype.Yt=function(){this.Wt&&($(this.Wt),this.Wt=null);var t=this.getSource();t&&(this.Wt=H(t,F,this.Ht,this)),this.changed()},n.prototype.getFeatures=function(t){return this.Zt?this.Zt.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.getData=function(t){return this.Zt&&this.rendered?this.Zt.getData(t):null},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(ts,t)},n.prototype.getMapInternal=function(){return this.get(ts)},n.prototype.setMap=function(t){this.Vt&&($(this.Vt),this.Vt=null),t||this.changed(),this.qt&&($(this.qt),this.qt=null),t&&(this.Vt=H(t,os,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);Ot(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.qt=H(this,F,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(Qo,t)},n.prototype.getRenderer=function(){return this.Zt||(this.Zt=this.createRenderer()),this.Zt},n.prototype.hasRenderer=function(){return!!this.Zt},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.Zt&&(this.Zt.dispose(),delete this.Zt),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(is),cs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function vs(t,n){Vo.expire()}var ls=function(t){function n(n){var i=t.call(this)||this;return i.Jt=n,i}return cs(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;on(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),sn(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o,s,u){var h,f=n.viewState;function a(t,n,i,r){return e.call(o,n,t?i:null,r)}var c=f.projection,v=ir(t.slice(),c),l=[[0,0]];if(c.canWrapX()&&r){var d=Yn(c.getExtent());l.push([-d,0],[d,0])}for(var p=n.layerStatesArray,w=p.length,g=[],y=[],m=0;m<l.length;m++)for(var b=w-1;b>=0;--b){var M=p[b],_=M.layer;if(_.hasRenderer()&&fs(M,f)&&s.call(u,_)){var x=_.getRenderer(),O=_.getSource();if(x&&O){var S=O.getWrapX()?v:t,j=a.bind(null,M.managed);y[0]=S[0]+l[m][0],y[1]=S[1]+l[m][1],h=x.forEachFeatureAtCoordinate(y,n,i,j,g)}if(h)return h}}if(0!==g.length){var E=1/g.length;return g.forEach((function(t,n){return t.distanceSq+=n*E})),g.sort((function(t,n){return t.distanceSq-n.distanceSq})),g.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},n.prototype.forEachLayerAtPixel=function(t,n,i,e,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,O,this,e,o)},n.prototype.getMap=function(){return this.Jt},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Vo.canExpireCache()&&t.postRenderFunctions.push(vs)},n}(l),ds=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ps=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=e,o}return ds(n,t),n}(c),ws="ol-hidden",gs="ol-selectable",ys="ol-unselectable",ms="ol-unsupported",bs="ol-control",Ms="ol-collapsed",_s=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),xs=["style","variant","weight","size","lineHeight","family"],Os=function(t){var n=t.match(_s);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,e=xs.length;r<e;++r){var o=n[r+1];void 0!==o&&(i[xs[r]]=o)}return i.families=i.family.split(/,\s?/),i},Ss="10px sans-serif",js="#000",Es="round",Ts=[],Ps="round",As=10,Cs="#000",Ns="center",ks="middle",Ls=[0,0,0,0],Fs=new et,Rs=new L;Rs.setSize=function(){console.warn("labelCache is deprecated.")};var Is,Gs,Ds=null,zs={},Us=function(){var t,n,i="32px ",r=["monospace","serif"],e=r.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,u){for(var h=!0,f=0;f<e;++f){var a=r[f];if(n=Vs(t+" "+s+" "+i+a,o),u!=a){var c=Vs(t+" "+s+" "+i+u+","+a,o);h=h&&c!=n}}return!!h}function u(){for(var n=!0,i=Fs.getKeys(),r=0,e=i.length;r<e;++r){var o=i[r];Fs.get(o)<100&&(s.apply(this,o.split("\n"))?(A(zs),Ds=null,Is=void 0,Fs.set(o,100)):(Fs.set(o,Fs.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=Os(n);if(i)for(var r=i.families,e=0,o=r.length;e<o;++e){var h=r[e],f=i.style+"\n"+i.weight+"\n"+h;void 0===Fs.get(f)&&(Fs.set(f,100,!0),s(i.style,i.weight,h)||(Fs.set(f,0,!0),void 0===t&&(t=setInterval(u,32))))}}}(),Xs=function(t){var n=zs[t];if(null==n){if(Vt){var i=Os(t),r=Bs(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Gs||((Gs=document.createElement("div")).innerHTML="M",Gs.style.minHeight="0",Gs.style.maxHeight="none",Gs.style.height="auto",Gs.style.padding="0",Gs.style.border="none",Gs.style.position="absolute",Gs.style.display="block",Gs.style.left="-99999px"),Gs.style.font=t,document.body.appendChild(Gs),n=Gs.offsetHeight,document.body.removeChild(Gs);zs[t]=n}return n};function Bs(t,n){return Ds||(Ds=Mo(1,1)),t!=Is&&(Ds.font=t,Is=Ds.font),Ds.measureText(n)}function Vs(t,n){return Bs(t,n).width}function qs(t,n,i){if(n in i)return i[n];var r=n.split("\n").reduce((function(n,i){return Math.max(n,Vs(t,i))}),0);return i[n]=r,r}function Ws(t,n){for(var i=[],r=[],e=[],o=0,s=0,u=0,h=0,f=0,a=n.length;f<=a;f+=2){var c=n[f];if("\n"!==c&&f!==a){var v=n[f+1]||t.font,l=Vs(v,c);i.push(l),s+=l;var d=Xs(v);r.push(d),h=Math.max(h,d)}else o=Math.max(o,s),e.push(s),s=0,u+=h}return{width:o,height:u,widths:i,heights:r,lineWidths:e}}function Zs(t,n,i,r,e,o,s,u,h,f,a){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(h,f),t.scale(a[0],a[1]),function(t,n){for(var i=t.contextInstructions,r=0,e=i.length;r<e;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):a[0]<0||a[1]<0?(t.translate(h,f),t.scale(a[0],a[1]),t.drawImage(r,e,o,s,u,0,0,s,u)):t.drawImage(r,e,o,s,u,h,f,s*a[0],u*a[1]),t.restore()}var Ys=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hs=function(t){function n(n){var i=t.call(this,n)||this;i.$t=H(Fs,v,n.redrawText.bind(n)),i.Kt=document.createElement("div");var r=i.Kt.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.Kt.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(i.Kt,e.firstChild||null),i.Qt=[],i.tn=!0,i}return Ys(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new ps(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){$(this.$t),this.Kt.parentNode.removeChild(this.Kt),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(os,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.Qt.length=0;for(var r=[],e=null,o=0,s=n.length;o<s;++o){var u=n[o];t.layerIndex=o;var h=u.layer,f=h.getSourceState();if(!fs(u,i)||"ready"!=f&&"undefined"!=f)h.unrender();else{var a=h.render(t,e);a&&(a!==e&&(this.Qt.push(a),e=a),"getDeclutter"in h&&r.push(h))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);To(this.Kt,this.Qt),this.dispatchRenderEvent(ss,t),this.tn||(this.Kt.style.display="",this.tn=!0),this.scheduleExpireIconCache(t)}else this.tn&&(this.Kt.style.display="none",this.tn=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,e){for(var o=n.viewState,s=n.layerStatesArray,u=s.length-1;u>=0;--u){var h=s[u],f=h.layer;if(f.hasRenderer()&&fs(h,o)&&e(f)){var a=f.getRenderer().getDataAtPixel(t,n,i);if(a){var c=r(f,a);if(c)return c}}}},n}(ls),Js=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$s=function(t){function n(n,i){var r=t.call(this,n)||this;return r.layer=i,r}return Js(n,t),n}(c),Ks="layers",Qs=function(t){function n(n){var i=this,r=n||{},e=P({},r);delete e.layers;var o=r.layers;return(i=t.call(this,e)||this).on,i.once,i.un,i.nn=[],i.rn={},i.addChangeListener(Ks,i.en),o?Array.isArray(o)?o=new at(o.slice(),{unique:!0}):Ot("function"==typeof o.getArray,43):o=new at(void 0,{unique:!0}),i.setLayers(o),i}return Js(n,t),n.prototype.sn=function(){this.changed()},n.prototype.en=function(){this.nn.forEach($),this.nn.length=0;var t=this.getLayers();for(var n in this.nn.push(H(t,ot,this.hn,this),H(t,st,this.fn,this)),this.rn)this.rn[n].forEach($);A(this.rn);for(var i=t.getArray(),r=0,e=i.length;r<e;r++){var o=i[r];this.an(o),this.dispatchEvent(new $s("addlayer",o))}this.changed()},n.prototype.an=function(t){var i=[H(t,v,this.sn,this),H(t,F,this.sn,this)];t instanceof n&&i.push(H(t,"addlayer",this.cn,this),H(t,"removelayer",this.vn,this)),this.rn[o(t)]=i},n.prototype.cn=function(t){this.dispatchEvent(new $s("addlayer",t.layer))},n.prototype.vn=function(t){this.dispatchEvent(new $s("removelayer",t.layer))},n.prototype.hn=function(t){var n=t.element;this.an(n),this.dispatchEvent(new $s("addlayer",n)),this.changed()},n.prototype.fn=function(t){var n=t.element,i=o(n);this.rn[i].forEach($),delete this.rn[i],this.dispatchEvent(new $s("removelayer",n)),this.changed()},n.prototype.getLayers=function(){return this.get(Ks)},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),r=0,e=i.length;r<e;++r)this.dispatchEvent(new $s("removelayer",i[r]));this.set(Ks,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),e=r.zIndex;t||void 0!==r.zIndex||(e=0);for(var o=i,s=n.length;o<s;o++){var u=n[o];u.opacity*=r.opacity,u.visible=u.visible&&r.visible,u.maxResolution=Math.min(u.maxResolution,r.maxResolution),u.minResolution=Math.max(u.minResolution,r.minResolution),u.minZoom=Math.max(u.minZoom,r.minZoom),u.maxZoom=Math.min(u.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==u.extent?u.extent=qn(u.extent,r.extent):u.extent=r.extent),void 0===u.zIndex&&(u.zIndex=e)}return n},n.prototype.getSourceState=function(){return"ready"},n}(is),tu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nu=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.map=i,e.frameState=void 0!==r?r:null,e}return tu(n,t),n}(c),iu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ru=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.ln=null,u.dn=null,u.dragging=void 0!==e&&e,u.activePointers=s,u}return iu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.ln||(this.ln=this.map.getEventPixel(this.originalEvent)),this.ln},set:function(t){this.ln=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.dn||(this.dn=this.map.getCoordinateFromPixel(this.pixel)),this.dn},set:function(t){this.dn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(nu),eu={SINGLECLICK:"singleclick",CLICK:G,DBLCLICK:D,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ou="pointermove",su="pointerdown",uu="pointerup",hu="pointerout",fu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),au=function(t){function n(n,i){var r=t.call(this,n)||this;r.Jt=n,r.pn,r.wn=!1,r.gn=!1,r.yn=[],r.mn=void 0===i?1:i,r.bn=null;var e=r.Jt.getViewport();return r.Mn=[],r._n={},r.Kt=e,r.xn=H(e,su,r.On,r),r.Sn,r.jn=H(e,ou,r.En,r),r.Tn=r.Pn.bind(r),r.Kt.addEventListener(Z,r.Tn,!!Wt&&{passive:!1}),r}return fu(n,t),n.prototype.An=function(t){var n=new ru(eu.CLICK,this.Jt,t);this.dispatchEvent(n),void 0!==this.pn?(clearTimeout(this.pn),this.pn=void 0,n=new ru(eu.DBLCLICK,this.Jt,t),this.dispatchEvent(n)):this.pn=setTimeout(function(){this.pn=void 0;var n=new ru(eu.SINGLECLICK,this.Jt,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Cn=function(t){var n=t,i=n.pointerId;if(n.type==eu.POINTERUP||n.type==eu.POINTERCANCEL){for(var r in delete this._n[i],this._n)if(this._n[r].target!==n.target){delete this._n[r];break}}else n.type!=eu.POINTERDOWN&&n.type!=eu.POINTERMOVE||(this._n[i]=n);this.Mn=C(this._n)},n.prototype.Nn=function(t){this.Cn(t);var n=new ru(eu.POINTERUP,this.Jt,t,void 0,void 0,this.Mn);this.dispatchEvent(n),this.wn&&!n.defaultPrevented&&!this.gn&&this.kn(t)&&this.An(this.bn),0===this.Mn.length&&(this.yn.forEach($),this.yn.length=0,this.gn=!1,this.bn=null)},n.prototype.kn=function(t){return 0===t.button},n.prototype.On=function(t){this.wn=0===this.Mn.length,this.Cn(t);var n=new ru(eu.POINTERDOWN,this.Jt,t,void 0,void 0,this.Mn);for(var i in this.dispatchEvent(n),this.bn={},t){var r=t[i];this.bn[i]="function"==typeof r?j:r}if(0===this.yn.length){var e=this.Jt.getOwnerDocument();this.yn.push(H(e,eu.POINTERMOVE,this.Ln,this),H(e,eu.POINTERUP,this.Nn,this),H(this.Kt,eu.POINTERCANCEL,this.Nn,this)),this.Kt.getRootNode&&this.Kt.getRootNode()!==e&&this.yn.push(H(this.Kt.getRootNode(),eu.POINTERUP,this.Nn,this))}},n.prototype.Ln=function(t){if(this.Fn(t)){this.Cn(t),this.gn=!0;var n=new ru(eu.POINTERDRAG,this.Jt,t,this.gn,void 0,this.Mn);this.dispatchEvent(n)}},n.prototype.En=function(t){this.Sn=t;var n=!(!this.bn||!this.Fn(t));this.dispatchEvent(new ru(eu.POINTERMOVE,this.Jt,t,n))},n.prototype.Pn=function(t){var n=this.Sn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Fn=function(t){return this.gn||Math.abs(t.clientX-this.bn.clientX)>this.mn||Math.abs(t.clientY-this.bn.clientY)>this.mn},n.prototype.disposeInternal=function(){this.jn&&($(this.jn),this.jn=null),this.Kt.removeEventListener(Z,this.Tn),this.xn&&($(this.xn),this.xn=null),this.yn.forEach($),this.yn.length=0,this.Kt=null,t.prototype.disposeInternal.call(this)},n}(L),cu="postrender",vu="movestart",lu="moveend",du="loadstart",pu="loadend",wu="layergroup",gu="size",yu="target",mu="view",bu=1/0,Mu=function(){function t(t,n){this.Rn=t,this.In=n,this.Gn=[],this.Dn=[],this.zn={}}return t.prototype.clear=function(){this.Gn.length=0,this.Dn.length=0,A(this.zn)},t.prototype.dequeue=function(){var t=this.Gn,n=this.Dn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.Un(0));var r=this.In(i);return delete this.zn[r],i},t.prototype.enqueue=function(t){Ot(!(this.In(t)in this.zn),31);var n=this.Rn(t);return n!=bu&&(this.Gn.push(t),this.Dn.push(n),this.zn[this.In(t)]=!0,this.Xn(0,this.Gn.length-1),!0)},t.prototype.getCount=function(){return this.Gn.length},t.prototype.Bn=function(t){return 2*t+1},t.prototype.Vn=function(t){return 2*t+2},t.prototype.qn=function(t){return t-1>>1},t.prototype.Wn=function(){var t;for(t=(this.Gn.length>>1)-1;t>=0;t--)this.Un(t)},t.prototype.isEmpty=function(){return 0===this.Gn.length},t.prototype.isKeyQueued=function(t){return t in this.zn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.In(t))},t.prototype.Un=function(t){for(var n=this.Gn,i=this.Dn,r=n.length,e=n[t],o=i[t],s=t;t<r>>1;){var u=this.Bn(t),h=this.Vn(t),f=h<r&&i[h]<i[u]?h:u;n[t]=n[f],i[t]=i[f],t=f}n[t]=e,i[t]=o,this.Xn(s,t)},t.prototype.Xn=function(t,n){for(var i=this.Gn,r=this.Dn,e=i[n],o=r[n];n>t;){var s=this.qn(n);if(!(r[s]>o))break;i[n]=i[s],r[n]=r[s],n=s}i[n]=e,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Rn,e=this.Gn,o=this.Dn,s=0,u=e.length;for(n=0;n<u;++n)(i=r(t=e[n]))==bu?delete this.zn[this.In(t)]:(o[s]=i,e[s++]=t);e.length=s,o.length=s,this.Wn()},t}(),_u=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xu=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Zn=r.handleTileChange.bind(r),r.Yn=i,r.Hn=0,r.Jn={},r}return _u(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(F,this.Zn);return i},n.prototype.getTilesLoading=function(){return this.Hn},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===lt||i===dt||i===pt){n.removeEventListener(F,this.Zn);var r=n.getKey();r in this.Jn&&(delete this.Jn[r],--this.Hn),this.Yn()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,e=0;this.Hn<t&&e<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ct||r in this.Jn||(this.Jn[r]=!0,++this.Hn,++e,i.load())},n}(Mu);function Ou(t,n,i,r,e){if(!t||!(i in t.wantedTiles))return bu;if(!t.wantedTiles[i][n.getKey()])return bu;var o=t.viewState.center,s=r[0]-o[0],u=r[1]-o[1];return 65536*Math.log(e)+Math.sqrt(s*s+u*u)/e}var Su=0,ju=1,Eu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Tu=256;function Pu(t,n,i){return function(r,e,o,s,u){if(r){if(!e&&!n)return r;var h=n?0:o[0]*e,f=n?0:o[1]*e,a=u?u[0]:0,c=u?u[1]:0,v=t[0]+h/2+a,l=t[2]-h/2+a,d=t[1]+f/2+c,p=t[3]-f/2+c;v>l&&(l=v=(l+v)/2),d>p&&(p=d=(p+d)/2);var w=ei(r[0],v,l),g=ei(r[1],d,p);if(s&&i&&e){var y=30*e;w+=-y*Math.log(1+Math.max(0,v-r[0])/y)+y*Math.log(1+Math.max(0,r[0]-l)/y),g+=-y*Math.log(1+Math.max(0,d-r[1])/y)+y*Math.log(1+Math.max(0,r[1]-p)/y)}return[w,g]}}}function Au(t){return t}function Cu(t,n,i,r){var e=Yn(n)/i[0],o=Vn(n)/i[1];return r?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o))}function Nu(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ei(r,i/2,2*n)}function ku(t,n,i,r){return function(e,o,s,u){if(void 0!==e){var h=t[0],f=t[t.length-1],a=i?Cu(h,i,s,r):h;if(u)return void 0===n||n?Nu(e,a,f):ei(e,f,a);var c=Math.min(a,e),v=Math.floor(g(t,c,o));return t[v]>a&&v<t.length-1?t[v+1]:t[v]}}}function Lu(t,n,i,r,e,o){return function(s,u,h,f){if(void 0!==s){var a=e?Cu(n,e,h,o):n,c=void 0!==i?i:0;if(f)return void 0===r||r?Nu(s,a,c):ei(s,c,a);var v=Math.ceil(Math.log(n/a)/Math.log(t)-1e-9),l=-u*(.5-1e-9)+.5,d=Math.min(a,s),p=Math.floor(Math.log(n/d)/Math.log(t)+l),w=Math.max(v,p);return ei(n/Math.pow(t,w),c,a)}}}function Fu(t,n,i,r,e){return function(o,s,u,h){if(void 0!==o){var f=r?Cu(t,r,u,e):t;return(void 0===i||i)&&h?Nu(o,f,n):ei(o,n,f)}}}function Ru(t){return void 0!==t?0:void 0}function Iu(t){return void 0!==t?t:void 0}function Gu(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Du(t){var n=t||ci(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Uu(t,n){setTimeout((function(){t(n)}),0)}function Xu(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Pu(t.extent,t.constrainOnlyCenter,n)}var i=mr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Pu(r,!1,!1)}return Au}function Bu(t){var n,i,r,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,a=mr(t.projection,"EPSG:3857"),c=a.getExtent(),v=t.constrainOnlyCenter,l=t.extent;if(u||l||!a.isGlobal()||(v=!1,l=c),void 0!==t.resolutions){var d=t.resolutions;i=d[e],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?ku(d,h,!v&&l,f):Fu(i,r,h,!v&&l,f)}else{var p=(c?Math.max(Yn(c),Vn(c)):360*Lt[Rt.DEGREES]/a.getMetersPerUnit())/Tu/Math.pow(2,0),w=p/Math.pow(2,28);void 0!==(i=t.maxResolution)?e=0:i=p/Math.pow(s,e),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):p/Math.pow(s,o):w),o=e+Math.floor(Math.log(i/r)/Math.log(s)),r=i/Math.pow(s,o-e),n=t.constrainResolution?Lu(s,i,r,h,!v&&l,f):Fu(i,r,h,!v&&l,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:e,zoomFactor:s}}function Vu(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Du():!1===n?Iu:"number"==typeof n?Gu(n):Iu}return Ru}function qu(t){return!(t.sourceCenter&&t.targetCenter&&!Hi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Wu(t,n,i,r,e){var o=Math.cos(-e),s=Math.sin(-e),u=t[0]*o-t[1]*s,h=t[1]*o+t[0]*s;return[(u+=(n[0]/2-i[0])*r)*o-(h+=(i[1]-n[1]/2)*r)*(s=-s),h*o+u*s]}var Zu=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=P({},n);return i.$n=[0,0],i.Kn=[],i.Qn,i.ti=mr(r.projection,"EPSG:3857"),i.ni=[100,100],i.ii=null,i.ri,i.ei,i.oi=null,i.si,i.ui,i.hi=void 0,r.projection&&ar(),r.center&&(r.center=Cr(r.center,i.ti)),r.extent&&(r.extent=kr(r.extent,i.ti)),i.fi(r),i}return zu(n,t),n.prototype.fi=function(t){var n=P({},t);for(var i in Eu)delete n[i];this.setProperties(n,!0);var r=Bu(t);this.ai=r.maxResolution,this.ci=r.minResolution,this.vi=r.zoomFactor,this.li=t.resolutions,this.di=t.padding,this.pi=r.minZoom;var e=Xu(t),o=r.constraint,s=Vu(t);this.wi={center:e,resolution:o,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.di},set:function(t){var n=this.di;this.di=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(r[3]-n[3]+n[1]-r[1]),s=e/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-s])}},enumerable:!1,configurable:!0}),n.prototype.gi=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),P({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=P({},r)).center=Cr(r.center,this.getProjection())),r.anchor&&((r=P({},r)).anchor=Cr(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var e=arguments[r];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(r!==i){for(var o=Date.now(),s=this.ii.slice(),u=this.ri,h=this.ei,f=[];r<i;++r){var a=arguments[r],c={start:o,complete:!1,anchor:a.anchor,duration:void 0!==a.duration?a.duration:1e3,easing:a.easing||yt,callback:n};if(a.center&&(c.sourceCenter=s,c.targetCenter=a.center.slice(),s=c.targetCenter),void 0!==a.zoom?(c.sourceResolution=u,c.targetResolution=this.getResolutionForZoom(a.zoom),u=c.targetResolution):a.resolution&&(c.sourceResolution=u,c.targetResolution=a.resolution,u=c.targetResolution),void 0!==a.rotation){c.sourceRotation=h;var v=vi(a.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+v,h=c.targetRotation}qu(c)?c.complete=!0:o+=c.duration,f.push(c)}this.Kn.push(f),this.setHint(Su,1),this.yi()}else n&&Uu(n,!0)},n.prototype.getAnimating=function(){return this.$n[Su]>0},n.prototype.getInteracting=function(){return this.$n[ju]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(Su,-this.$n[Su]);for(var n=0,i=this.Kn.length;n<i;++n){var r=this.Kn[n];if(r[0].callback&&Uu(r[0].callback,!1),!t)for(var e=0,o=r.length;e<o;++e){var s=r[e];if(!s.complete){t=s.anchor;break}}}this.Kn.length=0,this.hi=t,this.oi=null,this.si=NaN,this.ui=NaN},n.prototype.yi=function(){if(void 0!==this.Qn&&(cancelAnimationFrame(this.Qn),this.Qn=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.Kn.length-1;i>=0;--i){for(var r=this.Kn[i],e=!0,o=0,s=r.length;o<s;++o){var u=r[o];if(!u.complete){var h=t-u.start,f=u.duration>0?h/u.duration:1;f>=1?(u.complete=!0,f=1):e=!1;var a=u.easing(f);if(u.sourceCenter){var c=u.sourceCenter[0],v=u.sourceCenter[1],l=u.targetCenter[0],d=u.targetCenter[1];this.oi=u.targetCenter;var p=c+a*(l-c),w=v+a*(d-v);this.ii=[p,w]}if(u.sourceResolution&&u.targetResolution){var g=1===a?u.targetResolution:u.sourceResolution+a*(u.targetResolution-u.sourceResolution);if(u.anchor){var y=this.mi(this.getRotation()),m=this.wi.resolution(g,0,y,!0);this.ii=this.calculateCenterZoom(m,u.anchor)}this.si=u.targetResolution,this.ri=g,this.bi(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var b=1===a?vi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+a*(u.targetRotation-u.sourceRotation);if(u.anchor){var M=this.wi.rotation(b,!0);this.ii=this.calculateCenterRotate(M,u.anchor)}this.ui=u.targetRotation,this.ei=b}if(this.bi(!0),n=!0,!u.complete)break}}if(e){this.Kn[i]=null,this.setHint(Su,-1),this.oi=null,this.si=NaN,this.ui=NaN;var _=r[0].callback;_&&Uu(_,!0)}}this.Kn=this.Kn.filter(Boolean),n&&void 0===this.Qn&&(this.Qn=requestAnimationFrame(this.yi.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(Ji(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Vi(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),e=this.getResolution();void 0!==r&&void 0!==e&&(i=[n[0]-t*(n[0]-r[0])/e,n[1]-t*(n[1]-r[1])/e]);return i},n.prototype.mi=function(t){var n=this.ni;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.ni=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Ar(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(Eu.CENTER)},n.prototype.getConstraints=function(){return this.wi},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.$n[0],t[1]=this.$n[1],t):this.$n.slice()},n.prototype.calculateExtent=function(t){return Nr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.Mi(),i=this.getCenterInternal();Ot(i,1);var r=this.getResolution();Ot(void 0!==r,2);var e=this.getRotation();return Ot(void 0!==e,3),Xn(i,r,e,n)},n.prototype.getMaxResolution=function(){return this.ai},n.prototype.getMinResolution=function(){return this.ci},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ci)},n.prototype.setMaxZoom=function(t){this.fi(this.gi({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.ai)},n.prototype.setMinZoom=function(t){this.fi(this.gi({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.fi(this.gi({constrainResolution:t}))},n.prototype.getProjection=function(){return this.ti},n.prototype.getResolution=function(){return this.get(Eu.RESOLUTION)},n.prototype.getResolutions=function(){return this.li},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(kr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.Mi(),r=Yn(t)/i[0],e=Vn(t)/i[1];return Math.max(r,e)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.ai),r=this.ci,e=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*e)}},n.prototype.getRotation=function(){return this.get(Eu.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.ai),r=this.ci,e=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/e}},n.prototype.Mi=function(t){var n=this.mi(t),i=this.di;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),e=this.di;if(e){var o=this.Mi();r=Wu(r,this.mi(),[o[0]/2+e[3],o[1]/2+e[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.oi,nextResolution:this.si,nextRotation:this.ui,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.pi||0;if(this.li){var e=g(this.li,t,1);r=e,n=this.li[e],i=e==this.li.length-1?2:n/this.li[e+1]}else n=this.ai,i=this.vi;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.li){if(this.li.length<=1)return 0;var n=ei(Math.floor(t),0,this.li.length-2),i=this.li[n]/this.li[n+1];return this.li[n]/Math.pow(i,ei(t-n,0,1))}return this.ai/Math.pow(this.vi,t-this.pi)},n.prototype.fit=function(t,n){var i;if(Ot(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Ot(!Jn(t),25),i=We(r=kr(t,this.getProjection()));else if("Circle"===t.getType()){var r;(i=We(r=kr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),zn(r))}else{var e=Pr();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),s=1/0,u=1/0,h=-1/0,f=-1/0,a=0,c=e.length;a<c;a+=o){var v=e[a]*i-e[a+1]*r,l=e[a]*r+e[a+1]*i;s=Math.min(s,v),u=Math.min(u,l),h=Math.max(h,v),f=Math.max(f,l)}return[s,u,h,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.Mi());var e,o=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;e=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var u=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(u,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);h=isNaN(h)?e:Math.max(h,e),h=this.getConstrainedResolution(h,s?0:1);var f=this.getRotation(),a=Math.sin(f),c=Math.cos(f),v=zn(u);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var l=v[0]*c-v[1]*a,d=v[1]*c+v[0]*a,p=this.getConstrainedCenter([l,d],h),w=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:h,center:p,duration:i.duration,easing:i.easing},w):(this.ri=h,this.ii=p,this.bi(!1,!0),Uu(w,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Cr(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(Wu(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var e,o=this.di;if(o&&t){var s=this.Mi(-i),u=Wu(t,r,[s[0]/2+o[3],s[1]/2+o[0]],n,i);e=[t[0]-u[0],t[1]-u[1]]}return e},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=Ar(this.ii,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.ii;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Cr(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.mi(this.getRotation()),e=this.wi.resolution(this.ri*t,0,r,i);n&&(this.ii=this.calculateCenterZoom(e,n)),this.ri*=t,this.bi()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.vi,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Cr(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.wi.rotation(this.ei+t,i);n&&(this.ii=this.calculateCenterRotate(r,n)),this.ei+=t,this.bi()},n.prototype.setCenter=function(t){this.setCenterInternal(t?Cr(t,this.getProjection()):t)},n.prototype.setCenterInternal=function(t){this.ii=t,this.bi()},n.prototype.setHint=function(t,n){return this.$n[t]+=n,this.changed(),this.$n[t]},n.prototype.setResolution=function(t){this.ri=t,this.bi()},n.prototype.setRotation=function(t){this.ei=t,this.bi()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.bi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.wi.rotation(this.ei,i),e=this.mi(r),o=this.wi.resolution(this.ri,0,e,i),s=this.wi.center(this.ii,o,e,i,this.calculateCenterShift(this.ii,o,r,e));this.get(Eu.ROTATION)!==r&&this.set(Eu.ROTATION,r),this.get(Eu.RESOLUTION)!==o&&(this.set(Eu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(Eu.CENTER)&&Hi(this.get(Eu.CENTER),s)||this.set(Eu.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.hi=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,e=n||0,o=this.wi.rotation(this.ei),s=this.mi(o),u=this.wi.resolution(this.ri,e,s),h=this.wi.center(this.ii,u,s,!1,this.calculateCenterShift(this.ii,u,o,s));if(0===r&&!this.hi)return this.ri=u,this.ei=o,this.ii=h,void this.bi();var f=i||(0===r?this.hi:void 0);this.hi=void 0,this.getResolution()===u&&this.getRotation()===o&&this.getCenterInternal()&&Hi(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:u,duration:r,easing:gt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(ju,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Cr(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(ju,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.mi(this.getRotation());return this.wi.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.mi(this.getRotation());return this.wi.resolution(t,i,r)},n}(et);function Yu(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i}function Hu(t){return t[0]>0&&t[1]>0}function Ju(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function $u(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var Ku=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Qu(t){t instanceof as?t.setMapInternal(null):t instanceof Qs&&t.getLayers().forEach(Qu)}function th(t,n){if(t instanceof as)t.setMapInternal(n);else if(t instanceof Qs)for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r)th(i[r],n)}var nh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,e,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Qs({layers:t.layers});o[wu]=s,o[yu]=t.target,o[mu]=t.view instanceof Zu?t.view:new Zu,void 0!==t.controls&&(Array.isArray(t.controls)?i=new at(t.controls.slice()):(Ot("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new at(t.interactions.slice()):(Ot("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new at(t.overlays.slice()):(Ot("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new at;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:e,values:o}}(n);i._i,i.xi=!0,i.Oi=i.handleBrowserEvent.bind(i),i.Si=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.bt=void 0!==n.pixelRatio?n.pixelRatio:Bt,i.ji,i.Ei,i.Ti=function(){this.Ei=void 0,this.Pi(Date.now())}.bind(i),i.Ai=[1,0,0,1,0,0],i.Ci=[1,0,0,1,0,0],i.Ni=0,i.ki=null,i.Li=null,i.Fi=null,i.Ri=null,i.Ii=null,i.Gi=document.createElement("div"),i.Gi.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Gi.style.position="relative",i.Gi.style.overflow="hidden",i.Gi.style.width="100%",i.Gi.style.height="100%",i.Di=document.createElement("div"),i.Di.style.position="absolute",i.Di.style.zIndex="0",i.Di.style.width="100%",i.Di.style.height="100%",i.Di.style.pointerEvents="none",i.Di.className="ol-overlaycontainer",i.Gi.appendChild(i.Di),i.zi=document.createElement("div"),i.zi.style.position="absolute",i.zi.style.zIndex="0",i.zi.style.width="100%",i.zi.style.height="100%",i.zi.style.pointerEvents="none",i.zi.className="ol-overlaycontainer-stopevent",i.Gi.appendChild(i.zi),i.Ui=null,i.mn=n.moveTolerance,i.Xi=r.keyboardEventTarget,i.Bi=null,i.controls=r.controls||new at,i.interactions=r.interactions||new at,i.Vi=r.overlays,i.qi={},i.Zt=null,i.Wi=[],i.Zi=new xu(i.getTilePriority.bind(i),i.Yi.bind(i)),i.addChangeListener(wu,i.Hi),i.addChangeListener(mu,i.Ji),i.addChangeListener(gu,i.$i),i.addChangeListener(yu,i.Ki),i.setProperties(r.values);var e=i;return!n.view||n.view instanceof Zu||n.view.then((function(t){e.setView(new Zu(t))})),i.controls.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.Vi.addEventListener(ot,function(t){this.Qi(t.element)}.bind(i)),i.Vi.addEventListener(st,function(t){var n=t.element.getId();void 0!==n&&delete this.qi[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.Vi.forEach(i.Qi.bind(i)),i}return Ku(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.tr=function(t){th(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.Qi=function(t){var n=t.getId();void 0!==n&&(this.qi[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.Vi.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.ki&&this.Zt){var r=this.getCoordinateFromPixelInternal(t),e=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:O,s=!1!==i.checkWrapped;return this.Zt.forEachFeatureAtCoordinate(r,this.ki,e,s,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.getAllLayers=function(){var t=[];return function n(i){i.forEach((function(i){i instanceof Qs?n(i.getLayers()):t.push(i)}))}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.ki&&this.Zt){var r=i||{},e=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||O;return this.Zt.forEachLayerAtPixel(t,this.ki,e,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.ki||!this.Zt)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.Zt.hasFeatureAtCoordinate(i,this.ki,e,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Gi.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(yu)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Ar(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.ki;return n?Qt(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.Vi},n.prototype.getOverlayById=function(t){var n=this.qi[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(wu)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof at)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n];if(r.visible){var e=r.layer.getRenderer();if(e&&!e.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Cr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.ki;return n?Qt(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.Zt},n.prototype.getSize=function(){return this.get(gu)},n.prototype.getView=function(){return this.get(mu)},n.prototype.getViewport=function(){return this.Gi},n.prototype.getOverlayContainer=function(){return this.Di},n.prototype.getOverlayContainerStopEvent=function(){return this.zi},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return Ou(this.ki,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new ru(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.ki){var n=t.originalEvent,i=n.type;if(i===su||i===Y||i===B){var r=this.getOwnerDocument(),e=this.Gi.getRootNode?this.Gi.getRootNode():r,o=n.target;if(this.zi.contains(o)||!(e===r?r.documentElement:e).contains(o))return}if(t.frameState=this.ki,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),u=s.length-1;u>=0;u--){var h=s[u];if(h.getMap()===this&&h.getActive()&&this.getTargetElement())if(!h.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.ki,n=this.Zi;if(!n.isEmpty()){var i=this.Si,r=i;if(t){var e=t.viewHints;if(e[Su]||e[ju]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}t&&this.Zt&&!t.animate&&(!0===this._i?(this.hasListener(us)&&this.Zt.dispatchRenderEvent(us,t),!1===this.xi&&(this.xi=!0,this.dispatchEvent(new nu(pu,this,t)))):!0===this.xi&&(this.xi=!1,this.dispatchEvent(new nu(du,this,t))));for(var s=this.Wi,u=0,h=s.length;u<h;++u)s[u](this,t);s.length=0},n.prototype.$i=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.Ki=function(){if(this.Ui){for(var t=0,n=this.Bi.length;t<n;++t)$(this.Bi[t]);this.Bi=null,this.Gi.removeEventListener(I,this.Oi),this.Gi.removeEventListener(Y,this.Oi),this.Ui.dispose(),this.Ui=null,jo(this.Gi)}var i=this.getTargetElement();if(i){for(var r in i.appendChild(this.Gi),this.Zt||(this.Zt=this.createRenderer()),this.Ui=new au(this,this.mn),eu)this.Ui.addEventListener(eu[r],this.handleMapBrowserEvent.bind(this));this.Gi.addEventListener(I,this.Oi,!1),this.Gi.addEventListener(Y,this.Oi,!!Wt&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.Xi?this.Xi:i;this.Bi=[H(o,B,this.handleBrowserEvent,this),H(o,V,this.handleBrowserEvent,this),H(e,W,this.updateSize,this)]}else this.Zt&&(clearTimeout(this.ji),this.ji=void 0,this.Wi.length=0,this.Zt.dispose(),this.Zt=null),this.Ei&&(cancelAnimationFrame(this.Ei),this.Ei=void 0);this.updateSize()},n.prototype.Yi=function(){this.render()},n.prototype.nr=function(){this.render()},n.prototype.Ji=function(){this.Fi&&($(this.Fi),this.Fi=null),this.Ri&&($(this.Ri),this.Ri=null);var t=this.getView();t&&(this.ir(),this.Fi=H(t,v,this.nr,this),this.Ri=H(t,F,this.nr,this),t.resolveConstraints(0)),this.render()},n.prototype.Hi=function(){this.Ii&&(this.Ii.forEach($),this.Ii=null);var t=this.getLayerGroup();t&&(this.tr(new $s("addlayer",t)),this.Ii=[H(t,v,this.render,this),H(t,F,this.render,this),H(t,"addlayer",this.tr,this),H(t,"removelayer",this.rr,this)]),this.render()},n.prototype.isRendered=function(){return!!this.ki},n.prototype.renderSync=function(){this.Ei&&cancelAnimationFrame(this.Ei),this.Ti()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.Zt&&void 0===this.Ei&&(this.Ei=requestAnimationFrame(this.Ti))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.rr=function(t){Qu(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Pi=function(t){var n=this,i=this.getSize(),r=this.getView(),e=this.ki,s=null;if(void 0!==i&&Hu(i)&&r&&r.isDef()){var u=r.getHints(this.ki?this.ki.viewHints:void 0),h=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.Ai,declutterTree:null,extent:Xn(h.center,h.resolution,h.rotation,i),index:this.Ni++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.bt,pixelToCoordinateTransform:this.Ci,postRenderFunctions:[],size:i,tileQueue:this.Zi,time:t,usedTiles:{},viewState:h,viewHints:u,wantedTiles:{},mapId:o(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var f=isNaN(h.nextRotation)?h.rotation:h.nextRotation;s.nextExtent=Xn(h.nextCenter,h.nextResolution,f,i)}}if(this.ki=s,this.Zt.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.Wi,s.postRenderFunctions),e)(!this.Li||!Jn(this.Li)&&!Tn(s.extent,this.Li))&&(this.dispatchEvent(new nu(vu,this,e)),this.Li=Sn(this.Li));this.Li&&!s.viewHints[Su]&&!s.viewHints[ju]&&!Tn(s.extent,this.Li)&&(this.dispatchEvent(new nu(lu,this,s)),gn(s.extent,this.Li))}this.dispatchEvent(new nu(cu,this,s)),this._i=this.hasListener(du)||this.hasListener(pu)||this.hasListener(us)?!this.Zi.getTilesLoading()&&!this.Zi.getCount()&&!this.getLoadingOrNotReady():void 0,this.ji||(this.ji=setTimeout((function(){n.ji=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.rr(new $s("removelayer",n)),this.set(wu,t)},n.prototype.setSize=function(t){this.set(gu,t)},n.prototype.setTarget=function(t){this.set(yu,t)},n.prototype.setView=function(t){if(!t||t instanceof Zu)this.set(mu,t);else{this.set(mu,new Zu);var n=this;t.then((function(t){n.setView(new Zu(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),e=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(e)||!Hu(n=[r,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.ir()},n.prototype.ir=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Gi);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(et),ih=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rh=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.er=null,i.Jt=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return ih(n,t),n.prototype.disposeInternal=function(){jo(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.Jt},n.prototype.setMap=function(t){this.Jt&&jo(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)$(this.listenerKeys[n]);(this.listenerKeys.length=0,this.Jt=t,t)&&((this.er?this.er:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(H(t,cu,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.er="string"==typeof t?document.getElementById(t):t},n}(et),eh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oh=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).sr=document.createElement("ul"),i.ur=void 0===r.collapsed||r.collapsed,i.hr=i.ur,i.ar=void 0!==r.collapsible,i.cr=void 0===r.collapsible||r.collapsible,i.cr||(i.ur=!1);var e=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.expandClassName?r.expandClassName:e+"-expand",u=void 0!==r.collapseLabel?r.collapseLabel:"›",h=void 0!==r.collapseClassName?r.collapseClassName:e+"-collapse";"string"==typeof u?(i.vr=document.createElement("span"),i.vr.textContent=u,i.vr.className=h):i.vr=u;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.lr=document.createElement("span"),i.lr.textContent=f,i.lr.className=s):i.lr=f;var a=i.cr&&!i.ur?i.vr:i.lr;i.dr=document.createElement("button"),i.dr.setAttribute("type","button"),i.dr.setAttribute("aria-expanded",String(!i.ur)),i.dr.title=o,i.dr.appendChild(a),i.dr.addEventListener(G,i.pr.bind(i),!1);var c=e+" "+"ol-unselectable "+bs+(i.ur&&i.cr?" ol-collapsed":"")+(i.cr?"":" ol-uncollapsible"),v=i.element;return v.className=c,v.appendChild(i.dr),v.appendChild(i.sr),i.wr=[],i.tn=!0,i}return eh(n,t),n.prototype.gr=function(t){for(var n={},i=[],r=!0,e=t.layerStatesArray,o=0,s=e.length;o<s;++o){var u=e[o];if(fs(u,t.viewState)){var h=u.layer.getSource();if(h){var f=h.getAttributions();if(f){var a=f(t);if(a)if(r=r&&!1!==h.getAttributionsCollapsible(),Array.isArray(a))for(var c=0,v=a.length;c<v;++c)a[c]in n||(i.push(a[c]),n[a[c]]=!0);else a in n||(i.push(a),n[a]=!0)}}}}return this.ar||this.setCollapsible(r),i},n.prototype.yr=function(t){if(t){var n=this.gr(t),i=n.length>0;if(this.tn!=i&&(this.element.style.display=i?"":"none",this.tn=i),!M(n,this.wr)){Eo(this.sr);for(var r=0,e=n.length;r<e;++r){var o=document.createElement("li");o.innerHTML=n[r],this.sr.appendChild(o)}this.wr=n}}else this.tn&&(this.element.style.display="none",this.tn=!1)},n.prototype.pr=function(t){t.preventDefault(),this.mr(),this.hr=this.ur},n.prototype.mr=function(){this.element.classList.toggle(Ms),this.ur?So(this.vr,this.lr):So(this.lr,this.vr),this.ur=!this.ur,this.dr.setAttribute("aria-expanded",String(!this.ur))},n.prototype.getCollapsible=function(){return this.cr},n.prototype.setCollapsible=function(t){this.cr!==t&&(this.cr=t,this.element.classList.toggle("ol-uncollapsible"),this.hr&&this.mr())},n.prototype.setCollapsed=function(t){this.hr=t,this.cr&&this.ur!==t&&this.mr()},n.prototype.getCollapsed=function(){return this.ur},n.prototype.render=function(t){this.yr(t.frameState)},n}(rh),sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uh=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var e=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",s=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.lr=null,"string"==typeof o?(i.lr=document.createElement("span"),i.lr.className=s,i.lr.textContent=o):(i.lr=o,i.lr.classList.add(s));var u=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=e+"-reset",h.setAttribute("type","button"),h.title=u,h.appendChild(i.lr),h.addEventListener(G,i.pr.bind(i),!1);var f=e+" "+"ol-unselectable "+bs,a=i.element;return a.className=f,a.appendChild(h),i.br=r.resetNorth?r.resetNorth:void 0,i.Mr=void 0!==r.duration?r.duration:250,i._r=void 0===r.autoHide||r.autoHide,i.Sr=void 0,i._r&&i.element.classList.add(ws),i}return sh(n,t),n.prototype.pr=function(t){t.preventDefault(),void 0!==this.br?this.br():this.jr()},n.prototype.jr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.Mr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Mr,easing:gt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.Sr){var r="rotate("+i+"rad)";if(this._r){var e=this.element.classList.contains(ws);e||0!==i?e&&0!==i&&this.element.classList.remove(ws):this.element.classList.add(ws)}this.lr.style.transform=r}this.Sr=i}},n}(rh),hh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fh=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var e=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,s=void 0!==r.zoomInClassName?r.zoomInClassName:e+"-in",u=void 0!==r.zoomOutClassName?r.zoomOutClassName:e+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",a=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=a,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(G,i.pr.bind(i,o),!1);var l=document.createElement("button");l.className=u,l.setAttribute("type","button"),l.title=c,l.appendChild("string"==typeof f?document.createTextNode(f):f),l.addEventListener(G,i.pr.bind(i,-o),!1);var d=e+" "+"ol-unselectable "+bs,p=i.element;return p.className=d,p.appendChild(v),p.appendChild(l),i.Mr=void 0!==r.duration?r.duration:250,i}return hh(n,t),n.prototype.pr=function(t,n){n.preventDefault(),this.Er(t)},n.prototype.Er=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.Mr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.Mr,easing:gt})):n.setZoom(r)}}},n}(rh);function ah(t){var n=t||{},i=new at;return(void 0===n.zoom||n.zoom)&&i.push(new fh(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new uh(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new oh(n.attributionOptions)),i}var ch="active",vh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function lh(t,n,i){var r=t.getCenterInternal();if(r){var e=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:mt,center:t.getConstrainedCenter(e)})}}function dh(t,n,i,r){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==r?r:250,easing:gt})}}var ph=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.Jt=null,i.setActive(!0),i}return vh(n,t),n.prototype.getActive=function(){return this.get(ch)},n.prototype.getMap=function(){return this.Jt},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(ch,t)},n.prototype.setMap=function(t){this.Jt=t},n}(et),wh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Tr=r.delta?r.delta:1,i.Mr=void 0!==r.duration?r.duration:250,i}return wh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==eu.DBLCLICK){var i=t.originalEvent,r=t.map,e=t.coordinate,o=i.shiftKey?-this.Tr:this.Tr;dh(r.getView(),o,e,this.Mr),i.preventDefault(),n=!0}return!n},n}(ph),yh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function mh(t){for(var n=t.length,i=0,r=0,e=0;e<n;e++)i+=t[e].clientX,r+=t[e].clientY;return[i/n,r/n]}var bh=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.targetPointers=[],i}return yh(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Pr(t),this.handlingDownUpSequence){if(t.type==eu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==eu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==eu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==eu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.Pr=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},n}(ph);function Mh(t){var n=arguments;return function(t){for(var i=!0,r=0,e=n.length;r<e&&(i=i&&n[r](t));++r);return i}}var _h=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},xh=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Oh=function(t){var n=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return n.contains(i)},Sh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Oh(t)},jh=O,Eh=function(t){var n=t.originalEvent;return 0==n.button&&!(Ut&&Xt&&n.ctrlKey)},Th=S,Ph=function(t){return t.type==eu.SINGLECLICK},Ah=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Ch=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Nh=function(t){var n=t.originalEvent,i=n.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!n.target.isContentEditable},kh=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"mouse"==n.pointerType},Lh=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),n.isPrimary&&0===n.button},Fh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rh=function(t){function n(n){var i=t.call(this,{stopDown:S})||this,r=n||{};i.Ar=r.kinetic,i.lastCentroid=null,i.Cr,i.Nr=!1;var e=r.condition?r.condition:Mh(Ah,Lh);return i.kr=r.onFocusOnly?Mh(Sh,e):e,i.Lr=!1,i}return Fh(n,t),n.prototype.handleDragEvent=function(t){this.Nr||(this.Nr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=mh(n);if(n.length==this.Cr){if(this.Ar&&this.Ar.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],e=t.map.getView();$i(r,e.getResolution()),Ji(r,e.getRotation()),e.adjustCenterInternal(r)}}else this.Ar&&this.Ar.begin();this.lastCentroid=i,this.Cr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Lr&&this.Ar&&this.Ar.end()){var r=this.Ar.getDistance(),e=this.Ar.getAngle(),o=i.getCenterInternal(),s=n.getPixelFromCoordinateInternal(o),u=n.getCoordinateFromPixelInternal([s[0]-r*Math.cos(e),s[1]-r*Math.sin(e)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:gt})}return this.Nr&&(this.Nr=!1,i.endInteraction()),!1}return this.Ar&&this.Ar.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.kr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Ar&&this.Ar.begin(),this.Lr=this.targetPointers.length>1,!0}return!1},n}(bh),Ih=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gh=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:S})||this).kr=r.condition?r.condition:xh,i.Fr=void 0,i.Mr=void 0!==r.duration?r.duration:250,i}return Ih(n,t),n.prototype.handleDragEvent=function(t){if(kh(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Ru){var r=n.getSize(),e=t.pixel,o=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2);if(void 0!==this.Fr){var s=o-this.Fr;i.adjustRotationInternal(-s)}this.Fr=o}}},n.prototype.handleUpEvent=function(t){return!kh(t)||(t.map.getView().endInteraction(this.Mr),!1)},n.prototype.handleDownEvent=function(t){return!!kh(t)&&(!(!Eh(t)||!this.kr(t))&&(t.map.getView().beginInteraction(),this.Fr=void 0,!0))},n}(bh),Dh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zh=function(t){function n(n){var i=t.call(this)||this;return i.Rr=null,i.Kt=document.createElement("div"),i.Kt.style.position="absolute",i.Kt.style.pointerEvents="auto",i.Kt.className="ol-box "+n,i.Jt=null,i.Ir=null,i.Gr=null,i}return Dh(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.Dr=function(){var t=this.Ir,n=this.Gr,i="px",r=this.Kt.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.Jt){this.Jt.getOverlayContainer().removeChild(this.Kt);var n=this.Kt.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.Jt=t,this.Jt&&this.Jt.getOverlayContainer().appendChild(this.Kt)},n.prototype.setPixels=function(t,n){this.Ir=t,this.Gr=n,this.createOrUpdateGeometry(),this.Dr()},n.prototype.createOrUpdateGeometry=function(){var t=this.Ir,n=this.Gr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.Jt.getCoordinateFromPixelInternal,this.Jt);i[4]=i[0].slice(),this.Rr?this.Rr.setCoordinates([i]):this.Rr=new Ve([i])},n.prototype.getGeometry=function(){return this.Rr},n}(l),Uh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xh="boxstart",Bh="boxdrag",Vh="boxend",qh="boxcancel",Wh=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.coordinate=i,e.mapBrowserEvent=r,e}return Uh(n,t),n}(c),Zh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.zr=new zh(r.className||"ol-dragbox"),i.Ur=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Ir=null,i.kr=r.condition?r.condition:Eh,i.Xr=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Uh(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],e=i[1]-n[1];return r*r+e*e>=this.Ur},n.prototype.getGeometry=function(){return this.zr.getGeometry()},n.prototype.handleDragEvent=function(t){this.zr.setPixels(this.Ir,t.pixel),this.dispatchEvent(new Wh(Bh,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.zr.setMap(null);var n=this.Xr(t,this.Ir,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Wh(n?Vh:qh,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.kr(t)&&(this.Ir=t.pixel,this.zr.setMap(t.map),this.zr.setPixels(this.Ir,this.Ir),this.dispatchEvent(new Wh(Xh,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(bh),Yh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hh=function(t){function n(n){var i=this,r=n||{},e=r.condition?r.condition:Ch;return(i=t.call(this,{condition:e,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Mr=void 0!==r.duration?r.duration:200,i.Br=void 0!==r.out&&r.out,i}return Yh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.Br){var r=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(r),o=n.getResolution()/e;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.Mr,easing:gt})},n}(Zh),Jh=37,$h=38,Kh=39,Qh=40,tf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nf=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Vr=function(t){return Ah(t)&&Nh(t)},i.kr=void 0!==r.condition?r.condition:i.Vr,i.Mr=void 0!==r.duration?r.duration:100,i.qr=void 0!==r.pixelDelta?r.pixelDelta:128,i}return tf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B){var i=t.originalEvent,r=i.keyCode;if(this.kr(t)&&(r==Qh||r==Jh||r==Kh||r==$h)){var e=t.map.getView(),o=e.getResolution()*this.qr,s=0,u=0;r==Qh?u=-o:r==Jh?s=-o:r==Kh?s=o:u=o;var h=[s,u];Ji(h,e.getRotation()),lh(e,h,this.Mr),i.preventDefault(),n=!0}}return!n},n}(ph),rf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ef=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.kr=r.condition?r.condition:Nh,i.Tr=r.delta?r.delta:1,i.Mr=void 0!==r.duration?r.duration:100,i}return rf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B||t.type==V){var i=t.originalEvent,r=i.charCode;if(this.kr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var e=t.map,o=r=="+".charCodeAt(0)?this.Tr:-this.Tr;dh(e.getView(),o,void 0,this.Mr),i.preventDefault(),n=!0}}return!n},n}(ph),of=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sf="trackpad",uf="wheel",hf=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).Wr=0,i.Zr=0,i.rt=void 0!==r.maxDelta?r.maxDelta:1,i.Mr=void 0!==r.duration?r.duration:250,i.Yr=void 0!==r.timeout?r.timeout:80,i.Hr=void 0===r.useAnchor||r.useAnchor,i.Jr=void 0!==r.constrainResolution&&r.constrainResolution;var e=r.condition?r.condition:jh;return i.kr=r.onFocusOnly?Mh(Sh,e):e,i.$r=null,i.Kr=void 0,i.Qr,i.te=void 0,i.ne=400,i.ie,i.re=300,i}return of(n,t),n.prototype.ee=function(){this.ie=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.Zr?this.Zr>0?1:-1:0,this.$r)},n.prototype.handleEvent=function(t){if(!this.kr(t))return!0;if(t.type!==Y)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.Hr&&(this.$r=t.coordinate),t.type==Y&&(n=r.deltaY,Gt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Bt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.Zr=n;var e=Date.now();void 0===this.Kr&&(this.Kr=e),(!this.te||e-this.Kr>this.ne)&&(this.te=Math.abs(n)<4?sf:uf);var o=i.getView();if(this.te===sf&&!o.getConstrainResolution()&&!this.Jr)return this.ie?clearTimeout(this.ie):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.ie=setTimeout(this.ee.bind(this),this.Yr),o.adjustZoom(-n/this.re,this.$r),this.Kr=e,!1;this.Wr+=n;var s=Math.max(this.Yr-(e-this.Kr),0);return clearTimeout(this.Qr),this.Qr=setTimeout(this.oe.bind(this,i),s),!1},n.prototype.oe=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-ei(this.Wr,-this.rt*this.re,this.rt*this.re)/this.re;(n.getConstrainResolution()||this.Jr)&&(i=i?i>0?1:-1:0),dh(n,i,this.$r,this.Mr),this.te=void 0,this.Wr=0,this.$r=null,this.Kr=void 0,this.Qr=void 0},n.prototype.setMouseAnchor=function(t){this.Hr=t,t||(this.$r=null)},n}(ph),ff=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),af=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).se=null,i.Fr=void 0,i.ue=!1,i.he=0,i.fe=void 0!==r.threshold?r.threshold:.3,i.Mr=void 0!==r.duration?r.duration:250,i}return ff(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],e=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Fr){var o=e-this.Fr;this.he+=o,!this.ue&&Math.abs(this.he)>this.fe&&(this.ue=!0),n=o}this.Fr=e;var s=t.map,u=s.getView();if(u.getConstraints().rotation!==Ru){var h=s.getViewport().getBoundingClientRect(),f=mh(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.se=s.getCoordinateFromPixelInternal(f),this.ue&&(s.render(),u.adjustRotationInternal(n,this.se))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.Mr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.se=null,this.Fr=void 0,this.ue=!1,this.he=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(bh),cf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vf=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).se=null,i.Mr=void 0!==r.duration?r.duration:400,i.ae=void 0,i.ce=1,i}return cf(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],e=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(e*e+o*o);void 0!==this.ae&&(n=this.ae/s),this.ae=s;var u=t.map,h=u.getView();1!=n&&(this.ce=n);var f=u.getViewport().getBoundingClientRect(),a=mh(this.targetPointers);a[0]-=f.left,a[1]-=f.top,this.se=u.getCoordinateFromPixelInternal(a),u.render(),h.adjustResolutionInternal(n,this.se)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.ce>1?1:-1;return n.endInteraction(this.Mr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.se=null,this.ae=void 0,this.ce=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(bh);function lf(t){var n=t||{},i=new at,r=new Co(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Gh),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new gh({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new Rh({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new af),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new vf({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new nf),i.push(new ef({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new hf({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new Hh({duration:n.zoomDuration})),i}var df=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pf=function(t){function n(n){return(n=P({},n)).controls||(n.controls=ah()),n.interactions||(n.interactions=lf({onFocusOnly:!0})),t.call(this,n)||this}return df(n,t),n.prototype.createRenderer=function(){return new Hs(this)},n}(nh),wf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gf="element",yf="map",mf="offset",bf="position",Mf="positioning",_f=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!=typeof r&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={vt:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(gf,i.handleElementChanged),i.addChangeListener(yf,i.handleMapChanged),i.addChangeListener(mf,i.handleOffsetChanged),i.addChangeListener(bf,i.handlePositionChanged),i.addChangeListener(Mf,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(n.positioning||"top-left"),void 0!==n.position&&i.setPosition(n.position),i}return wf(n,t),n.prototype.getElement=function(){return this.get(gf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(yf)||null},n.prototype.getOffset=function(){return this.get(mf)},n.prototype.getPosition=function(){return this.get(bf)},n.prototype.getPositioning=function(){return this.get(Mf)},n.prototype.handleElementChanged=function(){Eo(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(jo(this.element),$(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=H(t,cu,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(gf,t)},n.prototype.setMap=function(t){this.set(yf,t)},n.prototype.setOffset=function(t){this.set(mf,t)},n.prototype.setPosition=function(t){this.set(bf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(bf)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),e=this.getRect(r,[xo(r),Oo(r)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!bn(i,e)){var u=e[0]-i[0],h=i[2]-e[2],f=e[1]-i[1],a=i[3]-e[3],c=[0,0];if(u<0?c[0]=u-s:h<0&&(c[0]=Math.abs(h)+s),f<0?c[1]=f-s:a<0&&(c[1]=Math.abs(a)+s),0!==c[0]||0!==c[1]){var v=n.getView().getCenterInternal(),l=n.getPixelFromCoordinateInternal(v);if(!l)return;var d=[l[0]+c[0],l[1]+c[1]],p=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,e=i.top+window.pageYOffset;return[r,e,r+n[0],e+n[1]]},n.prototype.setPositioning=function(t){this.set(Mf,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",s=Math.round(t[1]+r[1])+"px",u="0%",h="0%";"bottom-right"==e||"center-right"==e||"top-right"==e?u="-100%":"bottom-center"!=e&&"center-center"!=e&&"top-center"!=e||(u="-50%"),"bottom-left"==e||"bottom-center"==e||"bottom-right"==e?h="-100%":"center-left"!=e&&"center-center"!=e&&"center-right"!=e||(h="-50%");var f="translate(".concat(u,", ").concat(h,") translate(").concat(o,", ").concat(s,")");this.rendered.vt!=f&&(this.rendered.vt=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(et),xf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.ve=0,this.le={},this.de=null,this.pe=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.ve=0,this.le={},this.de=null,this.pe=null},t.prototype.containsKey=function(t){return this.le.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.de;n;)t(n.we,n.ge,this),n=n.newer},t.prototype.get=function(t,n){var i=this.le[t];return Ot(void 0!==i,15),i===this.pe||(i===this.de?(this.de=this.de.newer,this.de.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.pe,this.pe.newer=i,this.pe=i),i.we},t.prototype.remove=function(t){var n=this.le[t];return Ot(void 0!==n,15),n===this.pe?(this.pe=n.older,this.pe&&(this.pe.newer=null)):n===this.de?(this.de=n.newer,this.de&&(this.de.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.le[t],--this.ve,n.we},t.prototype.getCount=function(){return this.ve},t.prototype.getKeys=function(){var t,n=new Array(this.ve),i=0;for(t=this.pe;t;t=t.older)n[i++]=t.ge;return n},t.prototype.getValues=function(){var t,n=new Array(this.ve),i=0;for(t=this.pe;t;t=t.older)n[i++]=t.we;return n},t.prototype.peekLast=function(){return this.de.we},t.prototype.peekLastKey=function(){return this.de.ge},t.prototype.peekFirstKey=function(){return this.pe.ge},t.prototype.peek=function(t){if(this.containsKey(t))return this.le[t].we},t.prototype.pop=function(){var t=this.de;return delete this.le[t.ge],t.newer&&(t.newer.older=null),this.de=t.newer,this.de||(this.pe=null),--this.ve,t.we},t.prototype.replace=function(t,n){this.get(t),this.le[t].we=n},t.prototype.set=function(t,n){Ot(!(t in this.le),16);var i={ge:t,newer:null,older:this.pe,we:n};this.pe?this.pe.newer=i:this.de=i,this.pe=i,this.le[t]=i,++this.ve},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Of(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function Sf(t,n,i){return t+"/"+n+"/"+i}function jf(t){return Sf(t[0],t[1],t[2])}function Ef(t){return t.split("/").map(Number)}function Tf(t){return(t[1]<<t[0])+t[2]}function Pf(t,n){var i=t[0],r=t[1],e=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,e)}var Af=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Af(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Ef(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(jf(n.tileCoord)),n.release())}.bind(this))}},n}(xf),Nf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function kf(t,n,i,r,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=i,e.maxY=r,e):new Nf(t,n,i,r)}var Lf=Nf,Ff=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rf=[],If=function(t){function n(n,i,r,e){var o=t.call(this,n,i,{transition:0})||this;return o.ye={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.me={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=r,o}return Ff(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.ye||(this.ye[n]=Mo(1,1,Rf)),this.ye[n]},n.prototype.hasContext=function(t){return o(t)in this.ye},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.me||(this.me[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.me[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.ye){var i=this.ye[n];_o(i),Rf.push(i.canvas),delete this.ye[n]}t.prototype.release.call(this)},n}(Mt);function Gf(t){return Array.isArray(t)?Do(t):t}var Df=!1;function zf(t,n,i,r,e,o,s){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(i,r,e):t,!0),"arraybuffer"==n.getType()&&(u.responseType="arraybuffer"),u.withCredentials=Df,u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var r=n.getType(),h=void 0;"json"==r||"text"==r?h=u.responseText:"xml"==r?(h=u.responseXML)||(h=(new DOMParser).parseFromString(u.responseText,"application/xml")):"arraybuffer"==r&&(h=u.response),h?o(n.readFeatures(h,{extent:i,featureProjection:e}),n.readProjection(h)):s()}else s()},u.onerror=s,u.send()}function Uf(t,n){return function(i,r,e,o,s){var u=this;zf(t,n,i,r,e,(function(t,n){u.addFeatures(t),void 0!==o&&o(t)}),s||j)}}function Xf(t,n){return[[-1/0,-1/0,1/0,1/0]]}var Bf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Vf(t,n,i,r){var e=document.createElement("script"),s="olc_"+o(n);function u(){delete window[s],e.parentNode.removeChild(e)}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;var h=setTimeout((function(){u(),i&&i()}),1e4);window[s]=function(t){clearTimeout(h),u(),n(t)},document.head.appendChild(e)}var qf,Wf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return Bf(n,t),n}(Error),Zf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return Bf(n,t),n}(Error);function Yf(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var e=void 0;try{e=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(e)}else i(new Wf(r))})),r.addEventListener("error",(function(t){i(new Zf(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function Hf(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href}var Jf=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),$f=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kf=function(t){function n(n,i,r,e,o,s,u){var h=t.call(this)||this;return h.ye=n,h.bt=i,h.q=r,h.vt=e,h.be=o,h.Me=s,h._e=u,h.xe=null,h.Oe=null,h.Se=null,h.je=null,h.Ee=null,h._t=null,h.Te=0,h.Pe=0,h.Ae=0,h.Ce=0,h.Ne=0,h.ke=0,h.Le=!1,h.Fe=0,h.Re=[0,0],h.Ie=0,h.Ge="",h.De=0,h.ze=0,h.Ue=!1,h.Xe=0,h.Be=[0,0],h.Ve=null,h.qe=null,h.We=null,h.Ze=[],h.Ye=[1,0,0,1,0,0],h}return $f(n,t),n.prototype.He=function(t,n,i,r){if(this._t){var e=Gr(t,n,i,r,this.vt,this.Ze),o=this.ye,s=this.Ye,u=o.globalAlpha;1!=this.Ce&&(o.globalAlpha=u*this.Ce);var h=this.Fe;this.Le&&(h+=this.be);for(var f=0,a=e.length;f<a;f+=2){var c=e[f]-this.Te,v=e[f+1]-this.Pe;if(0!==h||1!=this.Re[0]||1!=this.Re[1]){var l=c+this.Te,d=v+this.Pe;on(s,l,d,1,1,h,-l,-d),o.setTransform.apply(o,s),o.translate(l,d),o.scale(this.Re[0],this.Re[1]),o.drawImage(this._t,this.Ne,this.ke,this.Ie,this.Ae,-this.Te,-this.Pe,this.Ie,this.Ae),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this._t,this.Ne,this.ke,this.Ie,this.Ae,c,v,this.Ie,this.Ae)}1!=this.Ce&&(o.globalAlpha=u)}},n.prototype.Je=function(t,n,i,r){if(this.We&&""!==this.Ge){this.Ve&&this.$e(this.Ve),this.qe&&this.Ke(this.qe),this.Qe(this.We);var e=Gr(t,n,i,r,this.vt,this.Ze),o=this.ye,s=this.Xe;for(this.Ue&&(s+=this.be);n<i;n+=r){var u=e[n]+this.De,h=e[n+1]+this.ze;if(0!==s||1!=this.Be[0]||1!=this.Be[1]){var f=on(this.Ye,u,h,1,1,s,-u,-h);o.setTransform.apply(o,f),o.translate(u,h),o.scale(this.Be[0],this.Be[1]),this.qe&&o.strokeText(this.Ge,0,0),this.Ve&&o.fillText(this.Ge,0,0),o.setTransform(1,0,0,1,0,0)}else this.qe&&o.strokeText(this.Ge,u,h),this.Ve&&o.fillText(this.Ge,u,h)}}},n.prototype.no=function(t,n,i,r,e){var o=this.ye,s=Gr(t,n,i,r,this.vt,this.Ze);o.moveTo(s[0],s[1]);var u=s.length;e&&(u-=2);for(var h=2;h<u;h+=2)o.lineTo(s[h],s[h+1]);return e&&o.closePath(),i},n.prototype.io=function(t,n,i,r){for(var e=0,o=i.length;e<o;++e)n=this.no(t,n,i[e],r,!0);return n},n.prototype.drawCircle=function(t){if(Hn(this.q,t.getExtent())){if(this.je||this.Ee){this.je&&this.$e(this.je),this.Ee&&this.Ke(this.Ee);var n=Zr(t,this.vt,this.Ze),i=n[2]-n[0],r=n[3]-n[1],e=Math.sqrt(i*i+r*r),o=this.ye;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.je&&o.fill(),this.Ee&&o.stroke()}""!==this.Ge&&this.Je(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.vt=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&Hn(this.q,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.Me&&(t=t.simplifyTransformed(this.Me,this._e));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.He(n,0,n.length,i),""!==this.Ge&&this.Je(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.Me&&(t=t.simplifyTransformed(this.Me,this._e));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.He(n,0,n.length,i),""!==this.Ge&&this.Je(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.Me&&(t=t.simplifyTransformed(this.Me,this._e)),Hn(this.q,t.getExtent())){if(this.Ee){this.Ke(this.Ee);var n=this.ye,i=t.getFlatCoordinates();n.beginPath(),this.no(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.Ge){var r=t.getFlatMidpoint();this.Je(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.Me&&(t=t.simplifyTransformed(this.Me,this._e));var n=t.getExtent();if(Hn(this.q,n)){if(this.Ee){this.Ke(this.Ee);var i=this.ye,r=t.getFlatCoordinates(),e=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var u=0,h=o.length;u<h;++u)e=this.no(r,e,o[u],s,!1);i.stroke()}if(""!==this.Ge){var f=t.getFlatMidpoints();this.Je(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.Me&&(t=t.simplifyTransformed(this.Me,this._e)),Hn(this.q,t.getExtent())){if(this.Ee||this.je){this.je&&this.$e(this.je),this.Ee&&this.Ke(this.Ee);var n=this.ye;n.beginPath(),this.io(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.je&&n.fill(),this.Ee&&n.stroke()}if(""!==this.Ge){var i=t.getFlatInteriorPoint();this.Je(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.Me&&(t=t.simplifyTransformed(this.Me,this._e)),Hn(this.q,t.getExtent())){if(this.Ee||this.je){this.je&&this.$e(this.je),this.Ee&&this.Ke(this.Ee);var n=this.ye,i=t.getOrientedFlatCoordinates(),r=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var s=0,u=e.length;s<u;++s){var h=e[s];r=this.io(i,r,h,o)}this.je&&n.fill(),this.Ee&&n.stroke()}if(""!==this.Ge){var f=t.getFlatInteriorPoints();this.Je(f,0,f.length,2)}}},n.prototype.$e=function(t){var n=this.ye,i=this.xe;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.xe={fillStyle:t.fillStyle})},n.prototype.Ke=function(t){var n=this.ye,i=this.Oe;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(M(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Oe={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.Qe=function(t){var n=this.ye,i=this.Se,r=t.textAlign?t.textAlign:Ns;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.Se={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.je={fillStyle:Gf(r||js)}}else this.je=null;if(n){var e=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),u=n.getLineDashOffset(),h=n.getLineJoin(),f=n.getWidth(),a=n.getMiterLimit(),c=s||Ts;this.Ee={lineCap:void 0!==o?o:Es,lineDash:1===this.bt?c:c.map((function(t){return t*i.bt})),lineDashOffset:(u||0)*this.bt,lineJoin:void 0!==h?h:Ps,lineWidth:(void 0!==f?f:1)*this.bt,miterLimit:void 0!==a?a:As,strokeStyle:Gf(e||Cs)}}else this.Ee=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this._t=t.getImage(this.bt),this.Te=i[0]*this.bt,this.Pe=i[1]*this.bt,this.Ae=n[1]*this.bt,this.Ce=t.getOpacity(),this.Ne=r[0],this.ke=r[1],this.Le=t.getRotateWithView(),this.Fe=t.getRotation(),this.Re=t.getScaleArray(),this.Ie=n[0]*this.bt}else this._t=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.Ve={fillStyle:Gf(i||js)}}else this.Ve=null;var r=t.getStroke();if(r){var e=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),u=r.getLineDashOffset(),h=r.getLineJoin(),f=r.getWidth(),a=r.getMiterLimit();this.qe={lineCap:void 0!==o?o:Es,lineDash:s||Ts,lineDashOffset:u||0,lineJoin:void 0!==h?h:Ps,lineWidth:void 0!==f?f:1,miterLimit:void 0!==a?a:As,strokeStyle:Gf(e||Cs)}}else this.qe=null;var c=t.getFont(),v=t.getOffsetX(),l=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation(),w=t.getScaleArray(),g=t.getText(),y=t.getTextAlign(),m=t.getTextBaseline();this.We={font:void 0!==c?c:Ss,textAlign:void 0!==y?y:Ns,textBaseline:void 0!==m?m:ks},this.Ge=void 0!==g?Array.isArray(g)?g.reduce((function(t,n,i){return t+(i%2?" ":n)}),""):g:"",this.De=void 0!==v?this.bt*v:0,this.ze=void 0!==l?this.bt*l:0,this.Ue=void 0!==d&&d,this.Xe=void 0!==p?p:0,this.Be=[this.bt*w[0],this.bt*w[1]]}else this.Ge=""},n}(Jf),Qf={Point:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=vo)return;var h=t;if(e){var f=s.getDeclutterMode();if("none"!==f)if(h=e,"obstacle"===f){var a=t.getBuilder(i.getZIndex(),"Image");a.setImageStyle(s,o),a.drawPoint(n,r)}else u&&u.getText()&&(o={})}var c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawPoint(n,r)}if(u&&u.getText()){var v=t;e&&(v=e);var l=v.getBuilder(i.getZIndex(),"Text");l.setTextStyle(u,o),l.drawText(n,r)}},LineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(n,r)}var u=i.getText();if(u&&u.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(u),h.drawText(n,r)}},Polygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),"Text");f.setTextStyle(h),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=vo)return;var h=t;if(e){var f=s.getDeclutterMode();if("none"!==f)if(h=e,"obstacle"===f){var a=t.getBuilder(i.getZIndex(),"Image");a.setImageStyle(s,o),a.drawMultiPoint(n,r)}else u&&u.getText()&&(o={})}var c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawMultiPoint(n,r)}if(u&&u.getText()){var v=t;e&&(v=e);var l=v.getBuilder(i.getZIndex(),"Text");l.setTextStyle(u,o),l.drawText(n,r)}},MultiLineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(n,r)}var u=i.getText();if(u&&u.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(u),h.drawText(n,r)}},MultiPolygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(s||o){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawMultiPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),"Text");f.setTextStyle(h),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,e){var o,s,u=n.getGeometriesArray();for(o=0,s=u.length;o<s;++o){(0,Qf[u[o].getType()])(t,u[o],i,r,e)}},Circle:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Circle");u.setFillStrokeStyle(o,s),u.drawCircle(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),"Text");f.setTextStyle(h),f.drawText(n,r)}}};function ta(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function na(t,n){var i=ia(t,n);return i*i}function ia(t,n){return.5*t/n}function ra(t,n,i,r,e,o,s){var u=!1,h=i.getImage();if(h){var f=h.getImageState();f==vo||f==lo?h.unlistenImageChange(e):(f==ao&&h.load(),h.listenImageChange(e),u=!0)}return function(t,n,i,r,e,o){var s=i.getGeometryFunction()(n);if(!s)return;var u=s.simplifyTransformed(r,e);if(i.getRenderer())ea(t,u,i,n);else{(0,Qf[u.getType()])(t,u,i,n,o)}}(t,n,i,r,o,s),u}function ea(t,n,i,r){if("GeometryCollection"!=n.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,s=e.length;o<s;++o)ea(t,e[o],i,r)}function oa(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,i=t.inversePixelTransform[0],r=t.frameState,e=Jt(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=na(r.viewState.resolution,i),s=Pr();return s&&(n=xr(s,r.viewState.projection)),new Kf(t.context,i,r.extent,e,r.viewState.rotation,o,n)}var sa,ua={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},ha={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},fa=[];function aa(t,n,i,r,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,e)),t.restore()}function ca(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function va(t,n,i,r){var e=Sr(i,n,t),o=wr(n,r,i),s=n.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var h=t.getExtent();if(!h||mn(h,e)){var f=wr(t,o,e)/o;isFinite(f)&&f>0&&(o/=f)}return o}function la(t,n,i,r){var e=zn(i),o=va(t,n,e,r);return(!isFinite(o)||o<=0)&&Rn(i,(function(i){return o=va(t,n,i,r),isFinite(o)&&o>0})),o}function da(t,n,i,r,e,o,s,u,h,f,a,c){var v=Mo(Math.round(i*t),Math.round(i*n),fa);if(c||P(v,ua),0===h.length)return v.canvas;function l(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,n,i){An(d,t.extent)}));var p=Yn(d),w=Vn(d),g=Mo(Math.round(i*p/r),Math.round(i*w/r));c||P(g,ua);var y=i/r;h.forEach((function(t,n,i){var r=t.extent[0]-d[0],e=-(t.extent[3]-d[3]),o=Yn(t.extent),s=Vn(t.extent);t.image.width>0&&t.image.height>0&&g.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*y,e*y,o*y,s*y)}));var m=Wn(s);return u.getTriangles().forEach((function(t,n,e){var s=t.source,u=t.target,h=s[0][0],f=s[0][1],a=s[1][0],p=s[1][1],w=s[2][0],y=s[2][1],b=l((u[0][0]-m[0])/o),M=l(-(u[0][1]-m[1])/o),_=l((u[1][0]-m[0])/o),x=l(-(u[1][1]-m[1])/o),O=l((u[2][0]-m[0])/o),S=l(-(u[2][1]-m[1])/o),j=h,E=f;h=0,f=0;var T=fi([[a-=j,p-=E,0,0,_-b],[w-=j,y-=E,0,0,O-b],[0,0,a,p,x-M],[0,0,w,y,S-M]]);if(T){if(v.save(),v.beginPath(),function(){if(void 0===sa){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",aa(t,4,5,4,0),aa(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;sa=ca(n,0)||ca(n,4)||ca(n,8)}return sa}()||!c){v.moveTo(_,x);for(var P=b-_,A=M-x,C=0;C<4;C++)v.lineTo(_+l((C+1)*P/4),x+l(C*A/3)),3!=C&&v.lineTo(_+l((C+1)*P/4),x+l((C+1)*A/3));v.lineTo(O,S)}else v.moveTo(_,x),v.lineTo(b,M),v.lineTo(O,S);v.clip(),v.transform(T[0],T[2],T[1],T[3],b,M),v.translate(d[0]-j,d[3]-E),v.scale(r/i,-r/i),v.drawImage(g.canvas,0,0),v.restore()}})),a&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach((function(t,n,i){var r=t.target,e=(r[0][0]-m[0])/o,s=-(r[0][1]-m[1])/o,u=(r[1][0]-m[0])/o,h=-(r[1][1]-m[1])/o,f=(r[2][0]-m[0])/o,a=-(r[2][1]-m[1])/o;v.beginPath(),v.moveTo(u,h),v.lineTo(e,s),v.lineTo(f,a),v.closePath(),v.stroke()})),v.restore()),v.canvas}var pa=[0,0,0],wa=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.li=t.resolutions,Ot(x(this.li,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.li.length-1;i<r;++i)if(n){if(this.li[i]/this.li[i+1]!==n){n=void 0;break}}else n=this.li[i]/this.li[i+1];this.vi=n,this.maxZoom=this.li.length-1,this.ro=void 0!==t.origin?t.origin:null,this.eo=null,void 0!==t.origins&&(this.eo=t.origins,Ot(this.eo.length==this.li.length,20));var e=t.extent;void 0===e||this.ro||this.eo||(this.ro=Wn(e)),Ot(!this.ro&&this.eo||this.ro&&!this.eo,18),this.oo=null,void 0!==t.tileSizes&&(this.oo=t.tileSizes,Ot(this.oo.length==this.li.length,19)),this.so=void 0!==t.tileSize?t.tileSize:this.oo?null:Tu,Ot(!this.so&&this.oo||this.so&&!this.oo,22),this.q=void 0!==e?e:null,this.uo=null,this.ho=[0,0],this.fo=[0,0,0,0],void 0!==t.sizes?this.uo=t.sizes.map((function(t,n){var i=new Lf(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var r=this.getTileRangeForExtentAndZ(e,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):e&&this.ao(e)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),e=r.minX,o=r.maxX;e<=o;++e)for(var s=r.minY,u=r.maxY;s<=u;++s)i([n,e,s])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var e,o,s=null,u=t[0]-1;for(2===this.vi?(e=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(n(u,2===this.vi?kf(e=Math.floor(e/2),e,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,u,i)))return!0;--u}return!1},t.prototype.getExtent=function(){return this.q},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.ro?this.ro:this.eo[t]},t.prototype.getResolution=function(t){return this.li[t]},t.prototype.getResolutions=function(){return this.li},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.vi){var r=2*t[1],e=2*t[2];return kf(r,r+1,e,e+1,n)}var o=this.getTileCoordExtent(t,i||this.fo);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],e=t[1],o=t[2];if(n===r)return kf(e,o,e,o,i);if(this.vi){var s=Math.pow(this.vi,n-r),u=Math.floor(e*s),h=Math.floor(o*s);return n<r?kf(u,u,h,h,i):kf(u,Math.floor(s*(e+1))-1,h,Math.floor(s*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.fo);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),e=this.getResolution(t),o=$u(this.getTileSize(t),this.ho),s=r[0]+n.minX*o[0]*e,u=r[0]+(n.maxX+1)*o[0]*e;return On(s,r[1]+n.minY*o[1]*e,u,r[1]+(n.maxY+1)*o[1]*e,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=pa;this.co(t[0],t[3],n,!1,r);var e=r[1],o=r[2];return this.co(t[2],t[1],n,!0,r),kf(e,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=$u(this.getTileSize(t[0]),this.ho);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),e=$u(this.getTileSize(t[0]),this.ho),o=i[0]+t[1]*e[0]*r,s=i[1]-(t[2]+1)*e[1]*r;return On(o,s,o+e[0]*r,s+e[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.vo(t[0],t[1],n,!1,i)},t.prototype.vo=function(t,n,i,r,e){var o=this.getZForResolution(i),s=i/this.getResolution(o),u=this.getOrigin(o),h=$u(this.getTileSize(o),this.ho),f=s*(t-u[0])/i/h[0],a=s*(u[1]-n)/i/h[1];return r?(f=gi(f,5)-1,a=gi(a,5)-1):(f=wi(f,5),a=wi(a,5)),Of(o,f,a,e)},t.prototype.co=function(t,n,i,r,e){var o=this.getOrigin(i),s=this.getResolution(i),u=$u(this.getTileSize(i),this.ho),h=(t-o[0])/s/u[0],f=(o[1]-n)/s/u[1];return r?(h=gi(h,5)-1,f=gi(f,5)-1):(h=wi(h,5),f=wi(f,5)),Of(i,h,f,e)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.co(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.li[t[0]]},t.prototype.getTileSize=function(t){return this.so?this.so:this.oo[t]},t.prototype.getFullTileRange=function(t){return this.uo?this.uo[t]:this.q?this.getTileRangeForExtentAndZ(this.q,t):null},t.prototype.getZForResolution=function(t,n){return ei(g(this.li,t,n||0),this.minZoom,this.maxZoom)},t.prototype.tileCoordIntersectsViewport=function(t,n){return Ne(n,0,n.length,2,this.getTileCoordExtent(t))},t.prototype.ao=function(t){for(var n=this.li.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.uo=i},t}();function ga(t){var n=t.getDefaultTileGrid();return n||(n=_a(t),t.setDefaultTileGrid(n)),n}function ya(t,n,i){var r=n[0],e=t.getTileCoordCenter(n),o=xa(i);if(mn(o,e))return n;var s=Yn(o),u=Math.ceil((o[0]-e[0])/s);return e[0]+=s*u,t.getTileCoordForCoordAndZ(e,r)}function ma(t,n,i,r){var e=void 0!==r?r:"top-left",o=Ma(t,n,i);return new wa({extent:t,origin:Un(t,e),resolutions:o,tileSize:i})}function ba(t){var n=t||{},i=n.extent||pr("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:Ma(i,n.maxZoom,n.tileSize,n.maxResolution)};return new wa(r)}function Ma(t,n,i,r){for(var e=void 0!==n?n:42,o=Vn(t),s=Yn(t),u=$u(void 0!==i?i:Tu),h=r>0?r:Math.max(s/u[0],o/u[1]),f=e+1,a=new Array(f),c=0;c<f;++c)a[c]=h/Math.pow(2,c);return a}function _a(t,n,i,r){return ma(xa(t),n,i,r)}function xa(t){var n=(t=pr(t)).getExtent();if(!n){var i=180*Lt[Rt.DEGREES]/t.getMetersPerUnit();n=On(-i,-i,i,i)}return n}function Oa(t,n){var i=/\{z\}/g,r=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(s,u,h){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(e,s[2].toString()).replace(o,(function(){var t=s[0],i=n.getFullTileRange(t);return Ot(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}function Sa(t,n){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=Oa(t[e],n);return ja(r)}function ja(t){return 1===t.length?t[0]:function(n,i,r){if(n){var e=vi(Tf(n),t.length);return t[e](n,i,r)}}}function Ea(t,n,i){}function Ta(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),e=i[2].charCodeAt(0),o=void 0;for(o=r;o<=e;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),u=parseInt(i[1],10);u<=s;u++)n.push(t.replace(i[0],u.toString()));return n}return n.push(t),n}function Pa(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Aa="http://www.w3.org/2001/XMLSchema-instance";function Ca(t,n){return nc().createElementNS(t,n)}function Na(t,n){return ka(t,n,[]).join("")}function ka(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)ka(r,n,i)}return i}function La(t){return"documentElement"in t}function Fa(t,n,i){return t.getAttributeNS(n,i)||""}function Ra(t){return(new DOMParser).parseFromString(t,"application/xml")}function Ia(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&m(r[r.length-1],e)}}function Ga(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&r[r.length-1].push(e)}}function Da(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&(r[r.length-1]=e)}}function za(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);if(void 0!==o){var s=e[e.length-1],u=void 0!==n?n:r.localName,h=void 0;u in s?h=s[u]:(h=[],s[u]=h),h.push(o)}}}function Ua(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);void 0!==o&&(e[e.length-1][void 0!==n?n:r.localName]=o)}}function Xa(t,n){return function(i,r,e){t.call(void 0!==n?n:this,i,r,e),e[e.length-1].node.appendChild(i)}}function Ba(t,n){var i,r;return function(n,e,o){if(void 0===i){i={};var s={};s[n.localName]=t,i[n.namespaceURI]=s,r=Va(n.localName)}Ja(i,r,e,o)}}function Va(t,n){var i=t;return function(t,r,e){var o=r[r.length-1].node,s=i;return void 0===s&&(s=e),Ca(void 0!==n?n:o.namespaceURI,s)}}var qa=Va();function Wa(t,n){for(var i=n.length,r=new Array(i),e=0;e<i;++e)r[e]=t[n[e]];return r}function Za(t,n,i){var r,e,o=void 0!==i?i:{};for(r=0,e=t.length;r<e;++r)o[t[r]]=n;return o}function Ya(t,n,i,r){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var s=o[e.localName];void 0!==s&&s.call(r,e,i)}}}function Ha(t,n,i,r,e){return r.push(t),Ya(n,i,r,e),r.pop()}function Ja(t,n,i,r,e,o){for(var s,u,h=(void 0!==e?e:i).length,f=0;f<h;++f)void 0!==(s=i[f])&&void 0!==(u=n.call(void 0!==o?o:this,s,r,void 0!==e?e[f]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,s,r)}function $a(t,n,i,r,e,o,s){return e.push(t),Ja(n,i,r,e,o,s),e.pop()}var Ka=void 0;function Qa(){return void 0===Ka&&"undefined"!=typeof XMLSerializer&&(Ka=new XMLSerializer),Ka}var tc=void 0;function nc(){return void 0===tc&&"undefined"!=typeof document&&(tc=document.implementation.createDocument("","",null)),tc}function ic(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var ec=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oc=function(t){function n(n){var i=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return i.lo=n.matrixIds,i}return ec(n,t),n.prototype.getMatrixId=function(t){return this.lo[t]},n.prototype.getMatrixIds=function(){return this.lo},n}(wa),sc=oc;function uc(t,n,i){var r=[],e=[],o=[],s=[],u=[],h=void 0!==i?i:[],f=pr(t.SupportedCRS),a=f.getMetersPerUnit(),c="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,n){return n.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(n){if(!(h.length>0)||b(h,(function(i){return n.Identifier==i.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===i.TileMatrix}))){e.push(n.Identifier);var i=28e-5*n.ScaleDenominator/a,f=n.TileWidth,v=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),r.push(i),s.push(f==v?f:[f,v]),u.push([n.MatrixWidth,n.MatrixHeight])}})),new oc({extent:n,origins:o,resolutions:r,matrixIds:e,tileSizes:s,sizes:u})}var hc=function(){function t(t){this.do=t.opacity,this.po=t.rotateWithView,this.Sr=t.rotation,this.wo=t.scale,this.yo=$u(t.scale),this.mo=t.displacement,this.bo=t.declutterMode}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.do},t.prototype.getRotateWithView=function(){return this.po},t.prototype.getRotation=function(){return this.Sr},t.prototype.getScale=function(){return this.wo},t.prototype.getScaleArray=function(){return this.yo},t.prototype.getDisplacement=function(){return this.mo},t.prototype.getDeclutterMode=function(){return this.bo},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setDisplacement=function(t){this.mo=t},t.prototype.setOpacity=function(t){this.do=t},t.prototype.setRotateWithView=function(t){this.po=t},t.prototype.setRotation=function(t){this.Sr=t},t.prototype.setScale=function(t){this.wo=t,this.yo=$u(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),fc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ac=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],declutterMode:n.declutterMode})||this).Tt=void 0,i.Mo=null,i._o=void 0!==n.fill?n.fill:null,i.ro=[0,0],i.Ft=n.points,i.xo=void 0!==n.radius?n.radius:n.radius1,i.Oo=n.radius2,i.Rt=void 0!==n.angle?n.angle:0,i.So=void 0!==n.stroke?n.stroke:null,i.C=null,i.jo=null,i.render(),i}return fc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){var t=this.C;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},n.prototype.getAngle=function(){return this.Rt},n.prototype.getFill=function(){return this._o},n.prototype.setFill=function(t){this._o=t,this.render()},n.prototype.getHitDetectionImage=function(){return this.Mo||this.Eo(this.jo),this.Mo},n.prototype.getImage=function(t){var n=this.Tt[t];if(!n){var i=this.jo,r=Mo(i.size*t,i.size*t);this.To(i,r,t),n=r.canvas,this.Tt[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.C},n.prototype.getImageState=function(){return vo},n.prototype.getOrigin=function(){return this.ro},n.prototype.getPoints=function(){return this.Ft},n.prototype.getRadius=function(){return this.xo},n.prototype.getRadius2=function(){return this.Oo},n.prototype.getSize=function(){return this.C},n.prototype.getStroke=function(){return this.So},n.prototype.setStroke=function(t){this.So=t,this.render()},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.Po=function(t,n,i){if(0===n||this.Ft===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.xo,e=void 0===this.Oo?r:this.Oo;if(r<e){var o=r;r=e,e=o}var s=void 0===this.Oo?this.Ft:2*this.Ft,u=2*Math.PI/s,h=e*Math.sin(u),f=r-Math.sqrt(e*e-h*h),a=Math.sqrt(h*h+f*f),c=a/h;if("miter"===t&&c<=i)return c*n;var v=n/2/c,l=n/2*(f/a),d=Math.sqrt((r+v)*(r+v)+l*l)-r;if(void 0===this.Oo||"bevel"===t)return 2*d;var p=r*Math.sin(u),w=e-Math.sqrt(r*r-p*p),g=Math.sqrt(p*p+w*w)/p;if(g<=i){var y=g*n/2-e-r;return 2*Math.max(d,y)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=Ps,i=0,r=null,e=0,o=0;this.So&&(null===(t=this.So.getColor())&&(t=Cs),t=Gf(t),void 0===(o=this.So.getWidth())&&(o=1),r=this.So.getLineDash(),e=this.So.getLineDashOffset(),void 0===(n=this.So.getLineJoin())&&(n=Ps),void 0===(i=this.So.getMiterLimit())&&(i=As));var s=this.Po(n,o,i),u=Math.max(this.xo,this.Oo||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+s),lineDash:r,lineDashOffset:e,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.jo=this.createRenderOptions();var t=this.jo.size;this.Tt={},this.C=[t,t]},n.prototype.To=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.Ao(n),this._o){var r=this._o.getColor();null===r&&(r=js),n.fillStyle=Gf(r),n.fill()}this.So&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.Eo=function(t){if(this._o){var n=this._o.getColor(),i=0;if("string"==typeof n&&(n=Io(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=Mo(t.size,t.size);this.Mo=r.canvas,this.Co(t,r)}}this.Mo||(this.Mo=this.getImage(1))},n.prototype.Ao=function(t){var n=this.Ft,i=this.xo;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.Oo?i:this.Oo;void 0!==this.Oo&&(n*=2);for(var e=this.Rt-Math.PI/2,o=2*Math.PI/n,s=0;s<n;s++){var u=e+s*o,h=s%2==0?i:r;t.lineTo(h*Math.cos(u),h*Math.sin(u))}t.closePath()}},n.prototype.Co=function(t,n){n.translate(t.size/2,t.size/2),this.Ao(n),n.fillStyle=js,n.fill(),this.So&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(hc),cc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vc=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this}return cc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.xo=t,this.render()},n}(ac),lc=function(){function t(t){var n=t||{};this.No=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.No},t.prototype.setColor=function(t){this.No=t},t}(),dc="fraction",pc="pixels",wc="bottom-left",gc="bottom-right",yc="top-left",mc="top-right",bc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mc=null,_c=function(t){function n(n,i,r,e,o,s){var u=t.call(this)||this;return u.ko=null,u._t=n||new Image,null!==e&&(u._t.crossOrigin=e),u.Tt={},u.No=s,u.xt=null,u.Lo=o,u.C=r,u.Mt=i,u.Fo,u}return bc(n,t),n.prototype.Ro=function(){if(void 0===this.Fo&&this.Lo===vo){Mc||(Mc=Mo(1,1)),Mc.drawImage(this._t,0,0);try{Mc.getImageData(0,0,1,1),this.Fo=!1}catch(t){Mc=null,this.Fo=!0}}return!0===this.Fo},n.prototype.Io=function(){this.dispatchEvent(F)},n.prototype.St=function(){this.Lo=lo,this.jt(),this.Io()},n.prototype.Et=function(){this.Lo=vo,this.C?(this._t.width=this.C[0],this._t.height=this.C[1]):this.C=[this._t.width,this._t.height],this.jt(),this.Io()},n.prototype.getImage=function(t){return this.Go(t),this.Tt[t]?this.Tt[t]:this._t},n.prototype.getPixelRatio=function(t){return this.Go(t),this.Tt[t]?t:1},n.prototype.getImageState=function(){return this.Lo},n.prototype.getHitDetectionImage=function(){if(!this.ko)if(this.Ro()){var t=this.C[0],n=this.C[1],i=Mo(t,n);i.fillRect(0,0,t,n),this.ko=i.canvas}else this.ko=this._t;return this.ko},n.prototype.getSize=function(){return this.C},n.prototype.getSrc=function(){return this.Mt},n.prototype.load=function(){if(this.Lo==ao){this.Lo=co;try{this._t.src=this.Mt}catch(t){this.St()}this.xt=go(this._t,this.Et.bind(this),this.St.bind(this))}},n.prototype.Go=function(t){if(this.No&&!this.Tt[t]&&this.Lo===vo){var n=document.createElement("canvas");this.Tt[t]=n,n.width=Math.ceil(this._t.width*t),n.height=Math.ceil(this._t.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this._t,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.Ro())i.fillStyle=Lo(this.No),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this._t,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),e=r.data,o=this.No[0]/255,s=this.No[1]/255,u=this.No[2]/255,h=this.No[3],f=0,a=e.length;f<a;f+=4)e[f]*=o,e[f+1]*=s,e[f+2]*=u,e[f+3]*=h;i.putImageData(r,0,0)}}},n.prototype.jt=function(){this.xt&&(this.xt(),this.xt=null)},n}(L);function xc(t,n,i,r,e,o){var s=Vo.get(n,r,o);return s||(s=new _c(t,n,i,r,e,o),Vo.set(n,r,o,s)),s}var Oc=_c,Sc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jc=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.opacity?r.opacity:1,s=void 0!==r.rotation?r.rotation:0,u=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:e,rotation:s,scale:u,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:h,declutterMode:r.declutterMode})||this).se=void 0!==r.anchor?r.anchor:[.5,.5],i.Do=null,i.zo=void 0!==r.anchorOrigin?r.anchorOrigin:yc,i.Uo=void 0!==r.anchorXUnits?r.anchorXUnits:dc,i.Xo=void 0!==r.anchorYUnits?r.anchorYUnits:dc,i.At=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null;i.Bo=r.imgSize;var a=r.src;Ot(!(void 0!==a&&f),4),Ot(!f||f&&i.Bo,5),void 0!==a&&0!==a.length||!f||(a=f.src||o(f)),Ot(void 0!==a&&a.length>0,6);var c=void 0!==r.src?ao:vo;return i.No=void 0!==r.color?Io(r.color):null,i.Vo=xc(f,a,void 0!==i.Bo?i.Bo:null,i.At,c,i.No),i.qo=void 0!==r.offset?r.offset:[0,0],i.Wo=void 0!==r.offsetOrigin?r.offsetOrigin:yc,i.ro=null,i.C=void 0!==r.size?r.size:null,i}return Sc(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.se.slice(),anchorOrigin:this.zo,anchorXUnits:this.Uo,anchorYUnits:this.Xo,color:this.No&&this.No.slice?this.No.slice():this.No||void 0,crossOrigin:this.At,imgSize:this.Bo,offset:this.qo.slice(),offsetOrigin:this.Wo,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.C?this.C.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},n.prototype.getAnchor=function(){var t=this.Do;if(!t){t=this.se;var n=this.getSize();if(this.Uo==dc||this.Xo==dc){if(!n)return null;t=this.se.slice(),this.Uo==dc&&(t[0]*=n[0]),this.Xo==dc&&(t[1]*=n[1])}if(this.zo!=yc){if(!n)return null;t===this.se&&(t=this.se.slice()),this.zo!=mc&&this.zo!=gc||(t[0]=-t[0]+n[0]),this.zo!=wc&&this.zo!=gc||(t[1]=-t[1]+n[1])}this.Do=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},n.prototype.setAnchor=function(t){this.se=t,this.Do=null},n.prototype.getColor=function(){return this.No},n.prototype.getImage=function(t){return this.Vo.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Vo.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Vo.getSize()},n.prototype.getImageState=function(){return this.Vo.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Vo.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.ro)return this.ro;var t=this.qo;if(this.Wo!=yc){var n=this.getSize(),i=this.Vo.getSize();if(!n||!i)return null;t=t.slice(),this.Wo!=mc&&this.Wo!=gc||(t[0]=i[0]-n[0]-t[0]),this.Wo!=wc&&this.Wo!=gc||(t[1]=i[1]-n[1]-t[1])}return this.ro=t,this.ro},n.prototype.getSrc=function(){return this.Vo.getSrc()},n.prototype.getSize=function(){return this.C?this.C:this.Vo.getSize()},n.prototype.listenImageChange=function(t){this.Vo.addEventListener(F,t)},n.prototype.load=function(){this.Vo.load()},n.prototype.unlistenImageChange=function(t){this.Vo.removeEventListener(F,t)},n}(hc),Ec=function(){function t(t){var n=t||{};this.No=void 0!==n.color?n.color:null,this.Zo=n.lineCap,this.Yo=void 0!==n.lineDash?n.lineDash:null,this.Ho=n.lineDashOffset,this.Jo=n.lineJoin,this.$o=n.miterLimit,this.Ko=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.No},t.prototype.getLineCap=function(){return this.Zo},t.prototype.getLineDash=function(){return this.Yo},t.prototype.getLineDashOffset=function(){return this.Ho},t.prototype.getLineJoin=function(){return this.Jo},t.prototype.getMiterLimit=function(){return this.$o},t.prototype.getWidth=function(){return this.Ko},t.prototype.setColor=function(t){this.No=t},t.prototype.setLineCap=function(t){this.Zo=t},t.prototype.setLineDash=function(t){this.Yo=t},t.prototype.setLineDashOffset=function(t){this.Ho=t},t.prototype.setLineJoin=function(t){this.Jo=t},t.prototype.setMiterLimit=function(t){this.$o=t},t.prototype.setWidth=function(t){this.Ko=t},t}(),Tc=function(){function t(t){var n=t||{};this.Rr=null,this.Qo=kc,void 0!==n.geometry&&this.setGeometry(n.geometry),this._o=void 0!==n.fill?n.fill:null,this._t=void 0!==n.image?n.image:null,this.Zt=void 0!==n.renderer?n.renderer:null,this.ts=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.So=void 0!==n.stroke?n.stroke:null,this.Ge=void 0!==n.text?n.text:null,this.ns=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.Zt},t.prototype.setRenderer=function(t){this.Zt=t},t.prototype.setHitDetectionRenderer=function(t){this.ts=t},t.prototype.getHitDetectionRenderer=function(){return this.ts},t.prototype.getGeometry=function(){return this.Rr},t.prototype.getGeometryFunction=function(){return this.Qo},t.prototype.getFill=function(){return this._o},t.prototype.setFill=function(t){this._o=t},t.prototype.getImage=function(){return this._t},t.prototype.setImage=function(t){this._t=t},t.prototype.getStroke=function(){return this.So},t.prototype.setStroke=function(t){this.So=t},t.prototype.getText=function(){return this.Ge},t.prototype.setText=function(t){this.Ge=t},t.prototype.getZIndex=function(){return this.ns},t.prototype.setGeometry=function(t){"function"==typeof t?this.Qo=t:"string"==typeof t?this.Qo=function(n){return n.get(t)}:t?void 0!==t&&(this.Qo=function(){return t}):this.Qo=kc,this.Rr=t},t.prototype.setZIndex=function(t){this.ns=t},t}();function Pc(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else Ot("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var Ac=null;function Cc(t,n){if(!Ac){var i=new lc({color:"rgba(255,255,255,0.4)"}),r=new Ec({color:"#3399CC",width:1.25});Ac=[new Tc({image:new vc({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return Ac}function Nc(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new Tc({fill:new lc({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Tc({stroke:new Ec({color:n,width:5})}),new Tc({stroke:new Ec({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Tc({image:new vc({radius:6,fill:new lc({color:i}),stroke:new Ec({color:n,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function kc(t){return t.getGeometry()}var Lc=Tc,Fc="point",Rc="line",Ic=function(){function t(t){var n=t||{};this.rs=n.font,this.Sr=n.rotation,this.po=n.rotateWithView,this.wo=n.scale,this.yo=$u(void 0!==n.scale?n.scale:1),this.Ge=n.text,this.es=n.textAlign,this.os=n.justify,this.ss=n.textBaseline,this._o=void 0!==n.fill?n.fill:new lc({color:"#333"}),this.us=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.hs=void 0!==n.placement?n.placement:Fc,this.fs=!!n.overflow,this.So=void 0!==n.stroke?n.stroke:null,this.cs=void 0!==n.offsetX?n.offsetX:0,this.vs=void 0!==n.offsetY?n.offsetY:0,this.ls=n.backgroundFill?n.backgroundFill:null,this.ds=n.backgroundStroke?n.backgroundStroke:null,this.di=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.fs},t.prototype.getFont=function(){return this.rs},t.prototype.getMaxAngle=function(){return this.us},t.prototype.getPlacement=function(){return this.hs},t.prototype.getOffsetX=function(){return this.cs},t.prototype.getOffsetY=function(){return this.vs},t.prototype.getFill=function(){return this._o},t.prototype.getRotateWithView=function(){return this.po},t.prototype.getRotation=function(){return this.Sr},t.prototype.getScale=function(){return this.wo},t.prototype.getScaleArray=function(){return this.yo},t.prototype.getStroke=function(){return this.So},t.prototype.getText=function(){return this.Ge},t.prototype.getTextAlign=function(){return this.es},t.prototype.getJustify=function(){return this.os},t.prototype.getTextBaseline=function(){return this.ss},t.prototype.getBackgroundFill=function(){return this.ls},t.prototype.getBackgroundStroke=function(){return this.ds},t.prototype.getPadding=function(){return this.di},t.prototype.setOverflow=function(t){this.fs=t},t.prototype.setFont=function(t){this.rs=t},t.prototype.setMaxAngle=function(t){this.us=t},t.prototype.setOffsetX=function(t){this.cs=t},t.prototype.setOffsetY=function(t){this.vs=t},t.prototype.setPlacement=function(t){this.hs=t},t.prototype.setRotateWithView=function(t){this.po=t},t.prototype.setFill=function(t){this._o=t},t.prototype.setRotation=function(t){this.Sr=t},t.prototype.setScale=function(t){this.wo=t,this.yo=$u(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.So=t},t.prototype.setText=function(t){this.Ge=t},t.prototype.setTextAlign=function(t){this.es=t},t.prototype.setJustify=function(t){this.os=t},t.prototype.setTextBaseline=function(t){this.ss=t},t.prototype.setBackgroundFill=function(t){this.ls=t},t.prototype.setBackgroundStroke=function(t){this.ds=t},t.prototype.setPadding=function(t){this.di=t},t}(),Gc=function(){function t(t,n){this.name=t,this.data=n,this.ps=null}return t.prototype.getTexture=function(t){if(!this.ps){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.ps=n}return this.ps},t}(),Dc=!0,zc=function(){function t(t,n,i,r,e,o){this.ws=t,this.gs=n;var s={},u=Or(this.gs,this.ws);this.ys=function(t){var n=t[0]+"/"+t[1];return s[n]||(s[n]=u(t)),s[n]},this.bs=r,this.Ms=e*e,this._s=[],this.xs=!1,this.Os=this.ws.canWrapX()&&!!r&&!!this.ws.getExtent()&&Yn(r)==Yn(this.ws.getExtent()),this.Ss=this.ws.getExtent()?Yn(this.ws.getExtent()):null,this.js=this.gs.getExtent()?Yn(this.gs.getExtent()):null;var h=Wn(i),f=Zn(i),a=Dn(i),c=Gn(i),v=this.ys(h),l=this.ys(f),d=this.ys(a),p=this.ys(c),w=10+(o?Math.max(0,Math.ceil(si(In(i)/(o*o*256*256)))):0);if(this.Es(h,f,a,c,v,l,d,p,w),this.xs){var g=1/0;this._s.forEach((function(t,n,i){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this._s.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.Ss/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-g>this.Ss/2&&(n[0][0]-=this.Ss),n[1][0]-g>this.Ss/2&&(n[1][0]-=this.Ss),n[2][0]-g>this.Ss/2&&(n[2][0]-=this.Ss);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.Ss/2&&(t.source=n)}}.bind(this))}s={}}return t.prototype.Ts=function(t,n,i,r,e,o){this._s.push({source:[r,e,o],target:[t,n,i]})},t.prototype.Es=function(t,n,i,r,e,o,s,u,h){var f=pn([e,o,s,u]),a=this.Ss?Yn(f)/this.Ss:null,c=this.Ss,v=this.ws.canWrapX()&&a>.5&&a<1,l=!1;if(h>0){if(this.gs.isGlobal()&&this.js)l=Yn(pn([t,n,i,r]))/this.js>.25||l;!v&&this.ws.isGlobal()&&a&&(l=a>.25||l)}if(!(!l&&this.bs&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||Hn(f,this.bs)){var d=0;if(!(l||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])))if(h>0)l=!0;else if(1!=(d=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!l){var p=[(t[0]+i[0])/2,(t[1]+i[1])/2],w=this.ys(p),g=void 0;if(v)g=(vi(e[0],c)+vi(s[0],c))/2-vi(w[0],c);else g=(e[0]+s[0])/2-w[0];var y=(e[1]+s[1])/2-w[1];l=g*g+y*y>this.Ms}if(l){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var m=[(n[0]+i[0])/2,(n[1]+i[1])/2],b=this.ys(m),M=[(r[0]+t[0])/2,(r[1]+t[1])/2],_=this.ys(M);this.Es(t,n,m,M,e,o,b,_,h-1),this.Es(M,m,i,r,_,b,s,u,h-1)}else{var x=[(t[0]+n[0])/2,(t[1]+n[1])/2],O=this.ys(x),S=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.ys(S);this.Es(t,x,S,r,e,O,j,u,h-1),this.Es(x,n,i,S,O,o,s,j,h-1)}return}}if(v){if(!this.Os)return;this.xs=!0}0==(11&d)&&this.Ts(t,i,r,e,s,u),0==(14&d)&&this.Ts(t,i,n,e,s,o),d&&(0==(13&d)&&this.Ts(n,r,t,o,u,e),0==(7&d)&&this.Ts(n,r,i,o,u,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this._s.forEach((function(n,i,r){var e=n.source;Cn(t,e[0]),Cn(t,e[1]),Cn(t,e[2])})),t},t.prototype.getTriangles=function(){return this._s},t}(),Uc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xc=function(t){function n(n,i,r,e,o,s,u,h,f,a,c,v){var l=t.call(this,o,ct,{interpolate:!!v})||this;l.Ps=void 0!==c&&c,l.bt=u,l.As=h,l.Tt=null,l.Cs=i,l.Ns=e,l.ks=s||o,l.Ls=[],l.Fs=null,l.Rs=0;var d=e.getTileCoordExtent(l.ks),p=l.Ns.getExtent(),w=l.Cs.getExtent(),g=p?qn(d,p):d;if(0===In(g))return l.state=pt,l;var y=n.getExtent();y&&(w=w?qn(w,y):y);var m=e.getResolution(l.ks[0]),b=la(n,r,g,m);if(!isFinite(b)||b<=0)return l.state=pt,l;var M=void 0!==a?a:.5;if(l.Is=new zc(n,r,g,w,b*M,m),0===l.Is.getTriangles().length)return l.state=pt,l;l.Rs=i.getZForResolution(b);var _=l.Is.calculateSourceExtent();if(w&&(n.canWrapX()?(_[1]=ei(_[1],w[1],w[3]),_[3]=ei(_[3],w[1],w[3])):_=qn(_,w)),In(_)){for(var x=i.getTileRangeForExtentAndZ(_,l.Rs),O=x.minX;O<=x.maxX;O++)for(var S=x.minY;S<=x.maxY;S++){var j=f(l.Rs,O,S,u);j&&l.Ls.push(j)}0===l.Ls.length&&(l.state=pt)}else l.state=pt;return l}return Uc(n,t),n.prototype.getImage=function(){return this.Tt},n.prototype.Gs=function(){var t=[];if(this.Ls.forEach(function(n,i,r){n&&n.getState()==lt&&t.push({extent:this.Cs.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.Ls.length=0,0===t.length)this.state=dt;else{var n=this.ks[0],i=this.Ns.getTileSize(n),r="number"==typeof i?i:i[0],e="number"==typeof i?i:i[1],o=this.Ns.getResolution(n),s=this.Cs.getResolution(this.Rs),u=this.Ns.getTileCoordExtent(this.ks);this.Tt=da(r,e,this.bt,s,this.Cs.getExtent(),o,u,this.Is,t,this.As,this.Ps,this.interpolate),this.state=lt}this.changed()},n.prototype.load=function(){if(this.state==ct){this.state=vt,this.changed();var t=0;this.Fs=[],this.Ls.forEach(function(n,i,r){var e=n.getState();if(e==ct||e==vt){t++;var o=H(n,F,(function(i){var r=n.getState();r!=lt&&r!=dt&&r!=pt||($(o),0===--t&&(this.Ds(),this.Gs()))}),this);this.Fs.push(o)}}.bind(this)),0===t?setTimeout(this.Gs.bind(this),0):this.Ls.forEach((function(t,n,i){t.getState()==ct&&t.load()}))}},n.prototype.Ds=function(){this.Fs.forEach($),this.Fs=null},n.prototype.release=function(){this.Tt&&(_o(this.Tt.getContext("2d")),fa.push(this.Tt),this.Tt=null),t.prototype.release.call(this)},n}(Mt),Bc=34962,Vc=34963,qc=35044,Wc=35048,Zc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Yc(t,n){for(var i=P({preserveDrawingBuffer:!0,antialias:!zt},n),r=Zc.length,e=0;e<r;++e)try{var o=t.getContext(Zc[e],i);if(o)return o}catch(t){}return null}var Hc=qc;function Jc(t){switch(t){case Bc:return Float32Array;case Vc:return Uint32Array;default:return Float32Array}}var $c=function(){function t(t,n){this.array=null,this.type=t,Ot(t===Bc||t===Vc,62),this.usage=void 0!==n?n:Hc}return t.prototype.ofSize=function(t){this.array=new(Jc(this.type))(t)},t.prototype.fromArray=function(t){var n=Jc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Jc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Kc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Qc(t,n,i){var r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function tv(t,n,i,r,e,o){var s,u,h=t.getGL();i instanceof Float32Array?(s=h.FLOAT,t.getExtension("OES_texture_float"),u=null!==t.getExtension("OES_texture_float_linear")):(s=h.UNSIGNED_BYTE,u=!0);Qc(h,n,o&&u);var f,a=i.byteLength/r[1],c=1;switch(a%8==0?c=8:a%4==0?c=4:a%2==0&&(c=2),e){case 1:f=h.LUMINANCE;break;case 2:f=h.LUMINANCE_ALPHA;break;case 3:f=h.RGB;break;case 4:f=h.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e))}var v=h.getParameter(h.UNPACK_ALIGNMENT);h.pixelStorei(h.UNPACK_ALIGNMENT,c),h.texImage2D(h.TEXTURE_2D,0,f,r[0],r[1],0,f,s,i),h.pixelStorei(h.UNPACK_ALIGNMENT,v)}var nv=null;var iv=function(t){function n(n){var i=t.call(this)||this;i.tile,i.textures=[],i.Yi=i.Yi.bind(i),i.zs=$u(n.grid.getTileSize(n.tile.tileCoord[0])),i.As=n.gutter||0,i.bandCount=NaN,i.Us=n.helper;var r=new $c(Bc,qc);return r.fromArray([0,1,1,1,1,0,0,0]),i.Us.flushBufferData(r),i.coords=r,i.setTile(n.tile),i}return Kc(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(F,this.Yi),this.tile=t,this.textures.length=0,this.loaded=t.getState()===lt,this.loaded)this.Xs();else{if(t instanceof Ao){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(F,this.Yi)}},n.prototype.Xs=function(){var t=this.Us,n=t.getGL(),i=this.tile;if(i instanceof Ao||i instanceof Xc){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i,r){Qc(t,n,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage(),i.interpolate)}var e=i.getSize(),o=[e[0]+2*this.As,e[1]+2*this.As],s=i.getData(),u=s instanceof Float32Array,h=o[0]*o[1],f=u?Float32Array:Uint8Array,a=f.BYTES_PER_ELEMENT,c=s.byteLength/o[1];this.bandCount=Math.floor(c/a/o[0]);var v=Math.ceil(this.bandCount/4);if(1===v){r=n.createTexture();return this.textures.push(r),void tv(t,r,s,o,this.bandCount,i.interpolate)}for(var l=new Array(v),d=0;d<v;++d){r=n.createTexture();this.textures.push(r);var p=d<v-1?4:this.bandCount%4;l[d]=new f(h*p)}for(var w=0,g=0,y=o[0]*this.bandCount,m=0;m<o[1];++m){for(var b=0;b<y;++b){var M=s[g+b],_=Math.floor(w/this.bandCount),x=b%this.bandCount;(O=l[d=Math.floor(x/4)])[_*(p=O.length/h)+x%4]=M,++w}g+=c/a}for(d=0;d<v;++d){var O;tv(t,r=this.textures[d],O=l[d],o,p=O.length/h,i.interpolate)}},n.prototype.Yi=function(){this.tile.getState()===lt&&(this.loaded=!0,this.Xs(),this.dispatchEvent(F))},n.prototype.disposeInternal=function(){var t=this.Us.getGL();this.Us.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(F,this.Yi)},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i,r=this.zs[0],e=this.zs[1],o=this.As;if(this.tile instanceof xt){var s=this.tile.getSize(),u=s[0],h=s[1],f=u+2*o,a=h+2*o,c=o+Math.floor(u*(t/r)),v=o+Math.floor(h*(n/e)),l=this.tile.getData();if(l instanceof DataView){var d=l.byteLength/(f*a),p=d*(v*f+c),w=l.buffer.slice(p,p+d);return new DataView(w)}var g=this.bandCount*(v*f+c);return l.slice(g,g+this.bandCount)}nv||((i=document.createElement("canvas")).width=1,i.height=1,nv=i.getContext("2d")),nv.clearRect(0,0,1,1);var y,m=this.tile.getImage(),b=m.width-2*o,M=m.height-2*o,_=o+Math.floor(b*(t/r)),x=o+Math.floor(M*(n/e));try{nv.drawImage(m,_,x,1,1,0,0,1,1),y=nv.getImageData(0,0,1,1).data}catch(t){return nv=null,null}return y},n}(L),rv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ev=function(t){function n(n){var i=t.call(this)||this;return i.ready=!0,i.Bs=i.Vs.bind(i),i.qs=n,i.declutterExecutorGroup=null,i}return rv(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,e){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,e,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.qs},n.prototype.handleFontsChanged=function(){},n.prototype.Vs=function(t){t.target.getState()===vo&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=vo&&n!=lo&&t.addEventListener(F,this.Bs),n==ao&&(t.load(),n=t.getState()),n==vo},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()},n.prototype.disposeInternal=function(){delete this.qs,t.prototype.disposeInternal.call(this)},n}(nt),ov="webglcontextlost",sv="webglcontextrestored",uv=function(){function t(t){this.Ws=t.webGlContext;var n=this.Ws;this.Zs=t.scaleRatio||1,this.Ys=n.createTexture(),this.Hs=null,this.Js=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(r),this.$s=n.createProgram(),n.attachShader(this.$s,i),n.attachShader(this.$s,r),n.linkProgram(this.$s),this.Ks=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.Ks),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Qs=n.getAttribLocation(this.$s,"a_position"),this.tu=n.getUniformLocation(this.$s,"u_screenSize"),this.nu=n.getUniformLocation(this.$s,"u_opacity"),this.iu=n.getUniformLocation(this.$s,"u_image"),this.ru=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.ru.push({value:t.uniforms[i],location:n.getUniformLocation(this.$s,i)})}.bind(this))}return t.prototype.getGL=function(){return this.Ws},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.Zs,n.drawingBufferHeight*this.Zs];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.Hs||this.Hs[0]!==i[0]||this.Hs[1]!==i[1]){this.Hs=i;var r=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.Ys),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.Ys,0)}},t.prototype.apply=function(t,n,i,r){var e=this.getGL(),s=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Ys),!n){var u=o(e.canvas);if(!t.renderTargets[u]){var h=e.getContextAttributes();h&&h.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.Ks),e.useProgram(this.$s),e.enableVertexAttribArray(this.Qs),e.vertexAttribPointer(this.Qs,2,e.FLOAT,!1,0,0),e.uniform2f(this.tu,s[0],s[1]),e.uniform1i(this.iu,0);var f=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.nu,f),this.applyUniforms(t),i&&i(e,t),e.drawArrays(e.TRIANGLES,0,6),r&&r(e,t)},t.prototype.getFrameBuffer=function(){return this.Js},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.ru.forEach((function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(e.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(e.location,n[0],n[1]);case 3:return void i.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(e.location,n)}))},t}(),hv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fv="u_projectionMatrix",av="u_offsetScaleMatrix",cv="u_offsetRotateMatrix",vv="u_time",lv="u_zoom",dv="u_resolution",pv={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},wv={};function gv(t){return"shared/"+t}var yv=0;function mv(t){switch(t){case pv.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case pv.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case pv.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case pv.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var bv=function(t){function n(n){var i,r=t.call(this)||this,e=n||{};r.eu=r.handleWebGLContextLost.bind(r),r.ou=r.handleWebGLContextRestored.bind(r),r.su=e.canvasCacheKey?gv(e.canvasCacheKey):(i="unique/"+yv,yv+=1,i),r.Tt=function(t){var n=wv[t];if(!n){var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",n={users:0,canvas:i},wv[t]=n}return n.users+=1,n.canvas}(r.su),r.Ws=Yc(r.Tt),r.uu={},r.hu={},r.fu=null,r.Tt.addEventListener(ov,r.eu),r.Tt.addEventListener(sv,r.ou),r.au=[1,0,0,1,0,0],r.cu=[1,0,0,1,0,0],r.vu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.lu={},r.du={},r.ru=[],e.uniforms&&r.setUniforms(e.uniforms);var o=r.getGL();return r.pu=e.postProcesses?e.postProcesses.map((function(t){return new uv({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new uv({webGlContext:o})],r.wu=null,r.Kr=Date.now(),r}return hv(n,t),n.prototype.setUniforms=function(t){for(var n in this.ru=[],t)this.ru.push({name:n,value:t[n]});this.lu={}},n.prototype.canvasCacheKeyMatches=function(t){return this.su===gv(t)},n.prototype.getExtension=function(t){if(t in this.hu)return this.hu[t];var n=this.Ws.getExtension(t);return this.hu[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.uu[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.uu[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.uu[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.uu[i]},n.prototype.disposeInternal=function(){this.Tt.removeEventListener(ov,this.eu),this.Tt.removeEventListener(sv,this.ou),function(t){var n=wv[t];if(n&&(n.users-=1,!(n.users>0))){var i=Yc(n.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete wv[t]}}(this.su),delete this.Ws,delete this.Tt},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),e=t.size,o=t.pixelRatio;r.width=e[0]*o,r.height=e[1]*o,r.style.width=e[0]+"px",r.style.height=e[1]+"px",i.useProgram(this.fu);for(var s=this.pu.length-1;s>=0;s--)this.pu[s].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.fu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),e=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,e[0],e[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.fu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,e=n-t,o=4*t;i.drawElements(i.TRIANGLES,e,r,o)},n.prototype.finalizeDraw=function(t,n,i){for(var r=0,e=this.pu.length;r<e;r++)r===e-1?this.pu[r].apply(t,null,n,i):this.pu[r].apply(t,this.pu[r+1])},n.prototype.getCanvas=function(){return this.Tt},n.prototype.getGL=function(){return this.Ws},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=Ht(this.cu);nn(r,2/n[0],2/n[1]);var e=Ht(this.au);0!==i&&tn(e,-i),this.setUniformMatrixValue(av,rc(this.vu,r)),this.setUniformMatrixValue(cv,rc(this.vu,e)),this.setUniformFloatValue(vv,.001*(Date.now()-this.Kr)),this.setUniformFloatValue(lv,t.viewState.zoom),this.setUniformFloatValue(dv,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.ru.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(e.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,rc(this.vu,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(e.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.fu&&(this.getGL().useProgram(t),this.fu=t,this.lu={},this.du={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),e=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,e),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var s="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(r));throw new Error(s)}if(i.deleteShader(r),!i.getShaderParameter(e,i.COMPILE_STATUS)){s="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}if(i.deleteShader(e),!i.getProgramParameter(o,i.LINK_STATUS)){s="GL program linking failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.lu[t]&&(this.lu[t]=this.getGL().getUniformLocation(this.fu,t)),this.lu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.du[t]&&(this.du[t]=this.getGL().getAttribLocation(this.fu,t)),this.du[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return Ht(n),on(n,0,0,2/(e*i[0]),2/(e*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.gu=function(t,n,i,r,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,e))},n.prototype.enableAttributes=function(t){for(var n=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*mv(r.type)}return n}(t),i=0,r=0;r<t.length;r++){var e=t[r];this.gu(e.name,e.size,e.type||5126,n,i),i+=e.size*mv(e.type)}},n.prototype.handleWebGLContextLost=function(){A(this.uu),this.fu=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),e=i||r.createTexture(),o=r.RGBA,s=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,e),n?r.texImage2D(r.TEXTURE_2D,0,o,s,u,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,s,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e},n}(l),Mv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_v="GENERATE_BUFFERS",xv=function(t){function n(n,i){var r=t.call(this,n)||this,e=i||{};return r.yu=[1,0,0,1,0,0],r.mu=null,r.bu=e.postProcesses,r.ru=e.uniforms,r.helper,n.addChangeListener(ts,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return Mv(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(os)){var r=new ps(os,void 0,n,t);i.dispatchEvent(r)}},n.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ss)){var r=new ps(ss,void 0,n,t);i.dispatchEvent(r)}},n.prototype.reset=function(t){this.ru=t.uniforms,this.helper&&this.helper.setUniforms(this.ru)},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var i=!0,r=-1,e=void 0,o=0,s=t.layerStatesArray.length;o<s;o++){var u=t.layerStatesArray[o].layer,h=u.getRenderer();if(h instanceof n){var f=u.getClassName();if((i||f!==e)&&(r+=1,i=!1),e=f,h===this)break}else i=!0}var a="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(a)||(this.removeHelper(),this.helper=new bv({postProcesses:this.bu,uniforms:this.ru,canvasCacheKey:a}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},n.prototype.Mu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){on(this.yu,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var e=new ps(t,this.yu,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.Mu(rs,t,n)},n.prototype.postRender=function(t,n){this.Mu(es,t,n)},n.prototype.getDataAtPixel=function(t,n,i){var r=Qt([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!mn(o,Qt(n.pixelToCoordinateTransform,t.slice())))return null;var s=e.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array;var u,h=Math.round(r[0]),f=Math.round(r[1]),a=this.mu;if(!a){var c=document.createElement("canvas");c.width=1,c.height=1,a=c.getContext("2d"),this.mu=a}a.clearRect(0,0,1,1);try{a.drawImage(e.canvas,h,f,1,1,0,0,1,1),u=a.getImageData(0,0,1,1).data}catch(t){return u}return 0===u[3]?null:u},n}(ev);var Ov=xv,Sv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jv="u_tileTextures",Ev="u_tileTransform",Tv="u_transitionAlpha",Pv="u_depth",Av="u_texturePixelWidth",Cv="u_texturePixelHeight",Nv="u_textureResolution",kv="u_textureOriginX",Lv="u_textureOriginY",Fv="u_renderExtent",Rv="u_resolution",Iv="u_zoom",Gv=[{name:"a_textureCoord",size:2,type:pv.FLOAT}],Dv={};function zv(t){return 2*(1-1/(t+1))-1}function Uv(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function Xv(t,n){var i=t.layerStatesArray[t.layerIndex];i.extent&&(n=qn(n,kr(i.extent,t.viewState.projection)));var r=i.layer.getRenderSource();if(!r.getWrapX()){var e=r.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=qn(n,e))}return n}function Bv(t,n){return"".concat(t.getKey(),",").concat(jf(n))}!function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms})||this;r.renderComplete=!1,r._u=[1,0,0,1,0,0],r.xu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Ou=new Lf(0,0,0,0),r.Su=Of(0,0,0),r.ju=[0,0],r.Eu,r.Tu=i.vertexShader,r.Pu=i.fragmentShader,r.Au=new $c(Vc,qc),r.Au.fromArray([0,1,3,1,2,3]);var e=void 0!==i.cacheSize?i.cacheSize:512;return r.Cu=new xf(e),r.Nu=i.paletteTextures||[],r.ki=null,r}Sv(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Tu=n.vertexShader,this.Pu=n.fragmentShader,this.Nu=n.paletteTextures||[],this.helper&&(this.Eu=this.helper.getProgram(this.Pu,this.Tu))},n.prototype.afterHelperCreated=function(){this.Eu=this.helper.getProgram(this.Pu,this.Tu),this.helper.flushBufferData(this.Au)},n.prototype.ku=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==lt||i==pt||i==dt&&!r},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&(!Jn(Xv(t,t.extent))&&"ready"===n.getState())},n.prototype.enqueueTiles=function(t,n,i,r){var e=t.viewState,s=this.getLayer(),u=s.getRenderSource(),h=u.getTileGridForProjection(e.projection),f=u.getGutterForProjection(e.projection),a=o(u);a in t.wantedTiles||(t.wantedTiles[a]={});for(var c=t.wantedTiles[a],v=this.Cu,l=Math.max(i-s.getPreload(),h.getMinZoom(),s.getMinZoom()),d=i;d>=l;--d)for(var p=h.getTileRangeForExtentAndZ(n,d,this.Ou),w=h.getResolution(d),g=p.minX;g<=p.maxX;++g)for(var y=p.minY;y<=p.maxY;++y){var m=Of(d,g,y,this.Su),b=Bv(u,m),M=void 0,_=void 0;if(v.containsKey(b)&&(_=(M=v.get(b)).tile),!M||M.tile.key!==u.getKey())if(_=u.getTile(d,g,y,t.pixelRatio,e.projection),M)if(this.ku(_))M.setTile(_);else{var x=_.getInterimTile();M.setTile(x)}else M=new iv({tile:_,grid:h,helper:this.helper,gutter:f}),v.set(b,M);Uv(r,M,d);var O=_.getKey();c[O]=!0,_.getState()===ct&&(t.tileQueue.isKeyQueued(O)||t.tileQueue.enqueue([_,a,h.getTileCoordCenter(m),w]))}},n.prototype.renderFrame=function(t){this.ki=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,r=this.getLayer().getRenderSource(),e=r.getTileGridForProjection(i.projection),s=r.getGutterForProjection(i.projection),u=Xv(t,t.extent),h=e.getZForResolution(i.resolution,r.zDirection),f={};if(t.nextExtent){var a=e.getZForResolution(i.nextResolution,r.zDirection),c=Xv(t,t.nextExtent);this.enqueueTiles(t,c,a,f)}this.enqueueTiles(t,u,h,f);for(var v={},l=o(this),d=t.time,w=!1,g=f[h],y=0,m=g.length;y<m;++y){var b=(z=(tt=g[y]).tile).tileCoord;if(tt.loaded){if(1===(U=z.getAlpha(l,d))){z.endTransition(l);continue}w=!0,v[X=jf(b)]=U}if(this.renderComplete=!1,!this.Lu(e,b,h+1,f))for(var M=e.getMinZoom(),_=h-1;_>=M;--_){if(this.Lu(e,b,_,f))break}}this.helper.useProgram(this.Eu),this.helper.prepareDraw(t,!w);for(var x=Object.keys(f).map(Number).sort(p),O=i.center[0],S=i.center[1],j=0,E=x.length;j<E;++j){var T=x[j],P=e.getResolution(T),A=$u(e.getTileSize(T),this.ju),C=e.getOrigin(T),N=A[0]+2*s,k=A[1]+2*s,L=N/k,F=(O-C[0])/(A[0]*P),R=(C[1]-S)/(A[1]*P),I=i.resolution/P,G=zv(T),D=f[T];for(y=0,m=D.length;y<m;++y){if((tt=D[y]).loaded){var z,U,X=jf(b=(z=tt.tile).tileCoord),B=b[1],V=b[2];Ht(this._u),nn(this._u,2/(t.size[0]*I/N),-2/(t.size[1]*I/N)),tn(this._u,i.rotation),nn(this._u,1,1/L),en(this._u,(A[0]*(B-F)-s)/N,(A[1]*(V-R)-s)/k),this.helper.setUniformMatrixValue(Ev,rc(this.xu,this._u)),this.helper.bindBuffer(tt.coords),this.helper.bindBuffer(this.Au),this.helper.enableAttributes(Gv);for(var q=0;q<tt.textures.length;){var W="TEXTURE"+q,Z="".concat(jv,"[").concat(q,"]");n.activeTexture(n[W]),n.bindTexture(n.TEXTURE_2D,tt.textures[q]),n.uniform1i(this.helper.getUniformLocation(Z),q),++q}for(var Y=0;Y<this.Nu.length;++Y){var H=this.Nu[Y];n.activeTexture(n["TEXTURE"+q]);var J=H.getTexture(n);n.bindTexture(n.TEXTURE_2D,J),n.uniform1i(this.helper.getUniformLocation(H.name),q),++q}(U=X in v?v[X]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Tv,U),this.helper.setUniformFloatValue(Pv,G),this.helper.setUniformFloatValue(Av,N),this.helper.setUniformFloatValue(Cv,k),this.helper.setUniformFloatValue(Nv,P),this.helper.setUniformFloatValue(kv,C[0]+B*A[0]*P-s*P),this.helper.setUniformFloatValue(Lv,C[1]-V*A[1]*P+s*P);var $=u;s>0&&qn($=e.getTileCoordExtent(b),u,$),this.helper.setUniformFloatVec4(Fv,$),this.helper.setUniformFloatValue(Rv,i.resolution),this.helper.setUniformFloatValue(Iv,i.zoom),this.helper.drawElements(0,this.Au.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var K=this.helper.getCanvas(),Q=this.Cu;Q.canExpireCache();){var tt;(tt=Q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){r.expireCache(n.viewState.projection,Dv)})),this.postRender(n,t),K},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.ki;if(!n)return null;var i=this.getLayer(),r=Qt(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=i.getExtent();if(o&&!mn(kr(o,e.projection),r))return null;var s,u,h,f=i.getSources(pn([r]),e.resolution);for(s=f.length-1;s>=0;--s)if("ready"===(u=f[s]).getState()){if(h=u.getTileGridForProjection(e.projection),u.getWrapX())break;var a=h.getExtent();if(!a||mn(a,r))break}if(s<0)return null;for(var c=this.Cu,v=h.getZForResolution(e.resolution);v>=h.getMinZoom();--v){var l=h.getTileCoordForCoordAndZ(r,v),d=Bv(u,l);if(c.containsKey(d)){var p=c.get(d);if(p.loaded){var w=h.getOrigin(v),g=$u(h.getTileSize(v)),y=h.getResolution(v),m=(r[0]-w[0])/y-l[1]*g[0],b=(w[1]-r[1])/y-l[2]*g[1];return p.getPixelData(m,b)}}}return null},n.prototype.Lu=function(t,n,i,r){var e=t.getTileRangeForTileCoordAndZ(n,i,this.Ou);if(!e)return!1;for(var o=!0,s=this.Cu,u=this.getLayer().getRenderSource(),h=e.minX;h<=e.maxX;++h)for(var f=e.minY;f<=e.maxY;++f){var a=Bv(u,[i,h,f]),c=!1;if(s.containsKey(a)){var v=s.get(a);v.loaded&&(Uv(r,v,i),c=!0)}c||(o=!1)}return o},n.prototype.removeHelper=function(){if(this.helper){var n=this.Cu;n.forEach((function(t){return t.dispose()})),n.clear()}t.prototype.removeHelper.call(this)},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.Eu),delete this.Eu,n.deleteBuffer(this.Au));t.prototype.disposeInternal.call(this),delete this.Au,delete this.Cu,delete this.ki}}(Ov);var Vv=1,qv=2,Wv=4,Zv=8,Yv=16,Hv=31,Jv=0,$v={};function Kv(t){if("number"==typeof t)return Vv;if("boolean"==typeof t)return Zv;if("string"==typeof t)return zo(t)?Wv|qv:qv;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Wv|Yv:Yv;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var i=$v[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.getReturnType(n.slice(1))}function Qv(t){return si(t)%1==0}function tl(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function nl(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(tl).join(", "),")")}function il(t){var n=Io(t).slice();return n.length<4&&n.push(1),nl(n.map((function(t,n){return n<3?t/255:t})))}function rl(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function el(t,n){return tl(rl(t,n))}function ol(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=$v[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.toGlsl(t,n.slice(1),i)}var e=Kv(n);if((e&Vv)>0)return tl(n);if((e&Zv)>0)return n.toString();if((e&qv)>0&&(void 0===i||i==qv))return el(t,n.toString());if((e&Wv)>0&&(void 0===i||i==Wv))return il(n);if((e&Yv)>0)return nl(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(i,")"))}function sl(t){if(!(Kv(t)&Vv))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function ul(t){for(var n=0;n<t.length;n++)sl(t[n])}function hl(t){if(!(Kv(t)&qv))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function fl(t){if(!(Kv(t)&Zv))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function al(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function cl(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function vl(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function ll(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function dl(t,n){if(!Qv(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function pl(t){return"u_var_"+t}$v.get={getReturnType:function(t){return Hv},toGlsl:function(t,n){al(n,1),hl(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},$v.var={getReturnType:function(t){return Hv},toGlsl:function(t,n){al(n,1),hl(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),pl(i)}};var wl="u_paletteTextures";$v.palette={getReturnType:function(t){return Wv},toGlsl:function(t,n){al(n,2),sl(n[0]);var i=ol(t,n[0]),r=n[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var e=r.length,o=new Uint8Array(4*e),s=0;s<e;s++){var u=r[s],h=void 0;if("string"==typeof u)h=Ro(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var f=u.length;if(4===f)h=u;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));h=[u[0],u[1],u[2],1]}}var a=4*s;o[a]=h[0],o[a+1]=h[1],o[a+2]=h[2],o[a+3]=255*h[3]}t.paletteTextures||(t.paletteTextures=[]);var c="".concat(wl,"[").concat(t.paletteTextures.length,"]"),v=new Gc(c,o);return t.paletteTextures.push(v),"texture2D(".concat(c,", vec2((").concat(i," + 0.5) / ").concat(e,".0, 0.5))")}};var gl="getBandValue";function yl(t){return{getReturnType:function(t){return Zv},toGlsl:function(n,i){al(i,2);for(var r=Hv,e=0;e<i.length;e++)r&=Kv(i[e]);if(r===Jv)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(i)," instead"));return r&=~Wv,"(".concat(ol(n,i[0],r)," ").concat(t," ").concat(ol(n,i[1],r),")")}}}function ml(t){return{getReturnType:function(t){return Zv},toGlsl:function(n,i){cl(i,2);for(var r=0;r<i.length;r++)fl(i[r]);var e="";return e=i.map((function(t){return ol(n,t)})).join(" ".concat(t," ")),e="(".concat(e,")")}}}$v.band={getReturnType:function(t){return Vv},toGlsl:function(t,n){cl(n,1),vl(n,3);var i=n[0];if(!(gl in t.functions)){for(var r="",e=t.bandCount||1,o=0;o<e;o++){var s=Math.floor(o/4),u=o%4;u===e-1&&1===u&&(u=3);var h="".concat(jv,"[").concat(s,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(h,", v_textureCoord + vec2(dx, dy))[").concat(u,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Av,";\n          float dy = yOffset / ").concat(Cv,";\n          ").concat(r,"\n        }\n      ")}var f=ol(t,i),a=ol(t,n[1]||0),c=ol(t,n[2]||0);return"".concat(gl,"(").concat(f,", ").concat(a,", ").concat(c,")")}},$v.time={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,0),"u_time"}},$v.zoom={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,0),"u_zoom"}},$v.resolution={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,0),"u_resolution"}},$v["*"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," * ").concat(ol(t,n[1]),")")}},$v["/"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," / ").concat(ol(t,n[1]),")")}},$v["+"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," + ").concat(ol(t,n[1]),")")}},$v["-"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," - ").concat(ol(t,n[1]),")")}},$v.clamp={getReturnType:function(t){return Vv},toGlsl:function(t,n){al(n,3),ul(n);var i=ol(t,n[1]),r=ol(t,n[2]);return"clamp(".concat(ol(t,n[0]),", ").concat(i,", ").concat(r,")")}},$v["%"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"mod(".concat(ol(t,n[0]),", ").concat(ol(t,n[1]),")")}},$v["^"]={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,2),ul(n),"pow(".concat(ol(t,n[0]),", ").concat(ol(t,n[1]),")")}},$v.abs={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"abs(".concat(ol(t,n[0]),")")}},$v.floor={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"floor(".concat(ol(t,n[0]),")")}},$v.round={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"floor(".concat(ol(t,n[0])," + 0.5)")}},$v.ceil={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"ceil(".concat(ol(t,n[0]),")")}},$v.sin={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"sin(".concat(ol(t,n[0]),")")}},$v.cos={getReturnType:function(t){return Vv},toGlsl:function(t,n){return al(n,1),ul(n),"cos(".concat(ol(t,n[0]),")")}},$v.atan={getReturnType:function(t){return Vv},toGlsl:function(t,n){return cl(n,1),vl(n,2),ul(n),2===n.length?"atan(".concat(ol(t,n[0]),", ").concat(ol(t,n[1]),")"):"atan(".concat(ol(t,n[0]),")")}},$v[">"]={getReturnType:function(t){return Zv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," > ").concat(ol(t,n[1]),")")}},$v[">="]={getReturnType:function(t){return Zv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," >= ").concat(ol(t,n[1]),")")}},$v["<"]={getReturnType:function(t){return Zv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," < ").concat(ol(t,n[1]),")")}},$v["<="]={getReturnType:function(t){return Zv},toGlsl:function(t,n){return al(n,2),ul(n),"(".concat(ol(t,n[0])," <= ").concat(ol(t,n[1]),")")}},$v["=="]=yl("=="),$v["!="]=yl("!="),$v["!"]={getReturnType:function(t){return Zv},toGlsl:function(t,n){return al(n,1),fl(n[0]),"(!".concat(ol(t,n[0]),")")}},$v.all=ml("&&"),$v.any=ml("||"),$v.between={getReturnType:function(t){return Zv},toGlsl:function(t,n){al(n,3),ul(n);var i=ol(t,n[1]),r=ol(t,n[2]),e=ol(t,n[0]);return"(".concat(e," >= ").concat(i," && ").concat(e," <= ").concat(r,")")}},$v.array={getReturnType:function(t){return Yv},toGlsl:function(t,n){cl(n,2),vl(n,4),ul(n);var i=n.map((function(n){return ol(t,n,Vv)}));return"vec".concat(n.length,"(").concat(i.join(", "),")")}},$v.color={getReturnType:function(t){return Wv},toGlsl:function(t,n){cl(n,3),vl(n,4),ul(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return ol(t,n,Vv)+(i<3?" / 255.0":"")}));return"vec".concat(n.length,"(").concat(r.join(", "),")")}},$v.interpolate={getReturnType:function(t){for(var n=Wv|Vv,i=3;i<t.length;i+=2)n&=Kv(t[i]);return n},toGlsl:function(t,n,i){ll(n),cl(n,6);var r,e=n[0];switch(e[0]){case"linear":r=1;break;case"exponential":r=e[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==i?i:Hv,s=$v.interpolate.getReturnType(n)&o;dl(n,s);for(var u=ol(t,n[1]),h=tl(r),f="",a=2;a<n.length-2;a+=2){var c=ol(t,n[a]),v=f||ol(t,n[a+1],s),l=ol(t,n[a+2]),d=ol(t,n[a+3],s);f="mix(".concat(v,", ").concat(d,", pow(clamp((").concat(u," - ").concat(c,") / (").concat(l," - ").concat(c,"), 0.0, 1.0), ").concat(h,"))")}return f}},$v.match={getReturnType:function(t){for(var n=Hv,i=2;i<t.length;i+=2)n&=Kv(t[i]);return n&=Kv(t[t.length-1])},toGlsl:function(t,n,i){ll(n),cl(n,4);var r=void 0!==i?i:Hv,e=$v.match.getReturnType(n)&r;dl(n,e);for(var o=ol(t,n[0]),s=ol(t,n[n.length-1],e),u=null,h=n.length-3;h>=1;h-=2){var f=ol(t,n[h]),a=ol(t,n[h+1],e);u="(".concat(o," == ").concat(f," ? ").concat(a," : ").concat(u||s,")")}return u}},$v.case={getReturnType:function(t){for(var n=Hv,i=1;i<t.length;i+=2)n&=Kv(t[i]);return n&=Kv(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(n),cl(n,3);var r=void 0!==i?i:Hv,e=$v.case.getReturnType(n)&r;dl(n,e);for(var o=0;o<n.length-1;o+=2)fl(n[o]);var s=ol(t,n[n.length-1],e),u=null;for(o=n.length-3;o>=0;o-=2){var h=ol(t,n[o]),f=ol(t,n[o+1],e);u="(".concat(h," ? ").concat(f," : ").concat(u||s,")")}return u}};var bl=function(){function t(t){this.Fu,this.Ru,this.Iu,this.Gu=void 0===t||t,this.Du=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.Iu;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.Ru&&(this.Ru=n)}else this.Fu=n,this.Ru=n,this.Gu&&(n.next=n,n.prev=n);this.Iu=n,this.Du++},t.prototype.removeItem=function(){var t=this.Iu;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.Iu=n||i,this.Fu===this.Ru?(this.Iu=void 0,this.Fu=void 0,this.Ru=void 0):this.Fu===t?this.Fu=this.Iu:this.Ru===t&&(this.Ru=i?this.Iu.prev:this.Iu),this.Du--}},t.prototype.firstItem=function(){if(this.Iu=this.Fu,this.Iu)return this.Iu.data},t.prototype.lastItem=function(){if(this.Iu=this.Ru,this.Iu)return this.Iu.data},t.prototype.nextItem=function(){if(this.Iu&&this.Iu.next)return this.Iu=this.Iu.next,this.Iu.data},t.prototype.getNextItem=function(){if(this.Iu&&this.Iu.next)return this.Iu.next.data},t.prototype.prevItem=function(){if(this.Iu&&this.Iu.prev)return this.Iu=this.Iu.prev,this.Iu.data},t.prototype.getPrevItem=function(){if(this.Iu&&this.Iu.prev)return this.Iu.prev.data},t.prototype.getCurrItem=function(){if(this.Iu)return this.Iu.data},t.prototype.setFirstItem=function(){this.Gu&&this.Iu&&(this.Fu=this.Iu,this.Ru=this.Iu.prev)},t.prototype.concat=function(t){if(t.Iu){if(this.Iu){var n=this.Iu.next;this.Iu.next=t.Fu,t.Fu.prev=this.Iu,n.prev=t.Ru,t.Ru.next=n,this.Du+=t.Du}else this.Iu=t.Iu,this.Fu=t.Fu,this.Ru=t.Ru,this.Du=t.Du;t.Iu=void 0,t.Fu=void 0,t.Ru=void 0,t.Du=0}},t.prototype.getLength=function(){return this.Du},t}(),Ml=i(72),_l=function(){function t(t){this.zu=new Ml(t),this.Uu={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.zu.insert(i),this.Uu[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,e=n.length;r<e;r++){var s=t[r],u=n[r],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[r]=h,this.Uu[o(u)]=h}this.zu.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.Uu[n];return delete this.Uu[n],null!==this.zu.remove(i)},t.prototype.update=function(t,n){var i=this.Uu[o(n)];Tn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.zu.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.zu.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.Xu(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.Xu(this.getInExtent(t),n)},t.prototype.Xu=function(t,n){for(var i,r=0,e=t.length;r<e;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return N(this.Uu)},t.prototype.clear=function(){this.zu.clear(),this.Uu={}},t.prototype.getExtent=function(t){var n=this.zu.toJSON();return On(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.zu.load(t.zu.all()),t.Uu)this.Uu[n]=t.Uu[n]},t}(),xl="tileloadstart",Ol="tileloadend",Sl="tileloaderror",jl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function El(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var Tl=function(t){function n(n){var i=t.call(this)||this;i.projection=pr(n.projection),i.Bu=El(n.attributions),i.Vu=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.Bt=void 0!==n.state?n.state:"ready",i.qu=void 0!==n.wrapX&&n.wrapX,i.Wu=!!n.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.Zu=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return jl(n,t),n.prototype.getAttributions=function(){return this.Bu},n.prototype.getAttributionsCollapsible=function(){return this.Vu},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.Zu},n.prototype.getState=function(){return this.Bt},n.prototype.getWrapX=function(){return this.qu},n.prototype.getInterpolate=function(){return this.Wu},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.Bu=El(t),this.changed()},n.prototype.setState=function(t){this.Bt=t,this.changed()},n}(et),Pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Al=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;i.on,i.once,i.un,i.Yu=void 0!==n.opaque&&n.opaque,i.Hu=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return i.tileGrid&&$u(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new Cf(n.cacheSize||0),i.tmpSize=[0,0],i.ge=n.key||"",i.tileOptions={transition:n.transition,interpolate:n.interpolate},i.zDirection=n.zDirection?n.zDirection:0,i}return Pl(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,s,u,h=!0,f=i.minX;f<=i.maxX;++f)for(var a=i.minY;a<=i.maxY;++a)s=Sf(n,f,a),u=!1,e.containsKey(s)&&(u=(o=e.get(s)).getState()===lt)&&(u=!1!==r(o)),u||(h=!1);return h},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.ge},n.prototype.setKey=function(t){this.ge!==t&&(this.ge=t,this.changed())},n.prototype.getOpaque=function(t){return this.Yu},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,n,i,e,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:ga(t)},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return Ot(null===n||_r(n,t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.Hu},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),e=this.getTilePixelRatio(n),o=$u(r.getTileSize(t),this.tmpSize);return 1==e?o:Ju(o,e,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=ya(r,t,i)),Pf(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(Tl),Cl=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return Pl(n,t),n}(c),Nl=Al,kl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ll=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.Ju=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.$u={},r}return kl(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.$u[r]=!0,n=xl):r in this.$u&&(delete this.$u[r],n=e==dt?Sl:e==lt?Ol:void 0),null!=n&&this.dispatchEvent(new Cl(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=Ta(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.Ju?this.setTileUrlFunction(Sa(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Sf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(Nl),Fl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Rl(t,n){t.getImage().src=n}var Il=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Rl,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:r,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:Ao,i.tileCacheForProjection={},i.tileGridForProjection={},i.Ku=n.reprojectionErrorThreshold,i.Qu=!1,i}return Fl(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[r];e.expireCache(e==i?n:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!_r(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!_r(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!_r(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ga(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||_r(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Cf(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.th=function(t,n,i,r,e,o){var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),h=u?this.tileUrlFunction(u,r,e):void 0,f=new this.tileClass(s,void 0!==h?ct:pt,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(F,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,e){var o=this.getProjection();if(o&&e&&!_r(o,e)){var s=this.getTileCacheForProjection(e),u=[t,n,i],h=void 0,f=jf(u);s.containsKey(f)&&(h=s.get(f));var a=this.getKey();if(h&&h.key==a)return h;var c=this.getTileGridForProjection(o),v=this.getTileGridForProjection(e),l=this.getTileCoordForTileUrlFunction(u,e),d=new Xc(o,c,e,v,u,l,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.Ku,this.Qu,this.getInterpolate());return d.key=a,h?(d.interimTile=h,d.refreshInterimChain(),s.replace(f,d)):s.set(f,d),d}return this.getTileInternal(t,n,i,r,o||e)},n.prototype.getTileInternal=function(t,n,i,r,e){var o=null,s=Sf(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=u){var h=o;o=this.th(t,n,i,r,e,u),h.getState()==ct?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.th(t,n,i,r,e,u),this.tileCache.set(s,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.Qu!=t){for(var n in this.Qu=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=pr(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(Ll),Gl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Dl(t){var n,i,r=t[0],e=new Array(r),o=1<<r-1;for(n=0;n<r;++n)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),e[n]=String.fromCharCode(i),o>>=1;return e.join("")}var zl=function(t){function n(n){var i=this,r=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(i=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:pr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).nh=r,i.ih=void 0!==n.culture?n.culture:"en-us",i.rh=void 0!==n.maxZoom?n.maxZoom:-1,i.eh=n.key,i.oh=n.imagerySet,Vf("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.oh+"?uriScheme=https&include=ImageryProviders&key="+i.eh+"&c="+i.ih,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return Gl(n,t),n.prototype.getApiKey=function(){return this.eh},n.prototype.getImagerySet=function(){return this.oh},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],i=-1==this.rh?n.zoomMax:this.rh,r=xa(this.getProjection()),e=this.nh?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],s=ba({extent:r,minZoom:n.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=s;var u=this.ih,h=this.nh;if(this.tileUrlFunction=ja(n.imageUrlSubdomains.map((function(t){var i=[0,0,0],r=n.imageUrl.replace("{subdomain}",t).replace("{culture}",u);return function(t,n,e){if(t){Of(t[0],t[1],t[2],i);var o=r;return h&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",Dl(i))}}}))),n.imageryProviders){var f=xr(pr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(r.resolution,this.zDirection),s=e.getTileCoordForCoordAndZ(r.center,o)[0];return n.imageryProviders.map((function(n){for(var r=!1,e=n.coverageAreas,o=0,u=e.length;o<u;++o){var h=e[o];if(s>=h.zoomMin&&s<=h.zoomMax){var a=h.bbox;if(Hn(ti([a[1],a[0],a[3],a[2]],f),t.extent)){r=!0;break}}}r&&i.push(n.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}.bind(this))}this.setState("ready")}else this.setState("error")},n}(Il),Ul="addfeature",Xl="changefeature",Bl="clear",Vl="removefeature",ql="featuresloadstart",Wl="featuresloadend",Zl="featuresloaderror",Yl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hl=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.feature=i,e.features=r,e}return Yl(n,t),n}(c),Jl=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.T=j,i.sh=r.format,i.uh=void 0===r.overlaps||r.overlaps,i.hh=r.url,void 0!==r.loader?i.T=r.loader:void 0!==i.hh&&(Ot(i.sh,7),i.T=Uf(i.hh,i.sh)),i.fh=void 0!==r.strategy?r.strategy:Xf;var e,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.ah=s?new _l:null,i.lh=new _l,i.dh=0,i.ph={},i.wh={},i.gh={},i.yh={},i.mh=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(e=r.features).getArray()),s||void 0!==e||(e=new at(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==e&&i.bh(e),i}return Yl(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.Mh(n,t)){this._h(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.ah&&this.ah.insert(r,t)}else this.ph[n]=t;this.dispatchEvent(new Hl(Ul,t))}else this.mh&&this.mh.remove(t)},n.prototype._h=function(t,n){this.yh[t]=[H(n,F,this.xh,this),H(n,v,this.xh,this)]},n.prototype.Mh=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.wh?i=!1:this.wh[r.toString()]=n),i&&(Ot(!(t in this.gh),30),this.gh[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],e=0,s=t.length;e<s;e++){var u=o(f=t[e]);this.Mh(u,f)&&i.push(f)}e=0;for(var h=i.length;e<h;e++){var f;u=o(f=i[e]);this._h(u,f);var a=f.getGeometry();if(a){var c=a.getExtent();n.push(c),r.push(f)}else this.ph[u]=f}if(this.ah&&this.ah.load(n,r),this.hasListener(Ul)){e=0;for(var v=i.length;e<v;e++)this.dispatchEvent(new Hl(Ul,i[e]))}},n.prototype.bh=function(t){var n=!1;this.addEventListener(Ul,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(Vl,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(st,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.mh=t},n.prototype.clear=function(t){if(t){for(var n in this.yh){this.yh[n].forEach($)}this.mh||(this.yh={},this.wh={},this.gh={})}else if(this.ah){var i=function(t){this.removeFeatureInternal(t)}.bind(this);for(var r in this.ah.forEach(i),this.ph)this.removeFeatureInternal(this.ph[r])}this.mh&&this.mh.clear(),this.ah&&this.ah.clear(),this.ph={};var e=new Hl(Bl);this.dispatchEvent(e),this.changed()},n.prototype.forEachFeature=function(t){if(this.ah)return this.ah.forEach(t);this.mh&&this.mh.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.ah)return this.ah.forEachInExtent(t,n);this.mh&&this.mh.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.mh},n.prototype.getFeatures=function(){var t;return this.mh?t=this.mh.getArray().slice(0):this.ah&&(t=this.ah.getAll(),N(this.ph)||m(t,C(this.ph))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.ah){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.ah.getInExtent(t);var r=ii(t,n);return[].concat.apply([],r.map((function(t){return i.ah.getInExtent(t)})))}return this.mh?this.mh.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],e=null,o=[NaN,NaN],s=1/0,u=[-1/0,-1/0,1/0,1/0],h=n||O;return this.ah.forEachInExtent(u,(function(t){if(h(t)){var n=t.getGeometry(),f=s;if((s=n.closestPointXY(i,r,o,s))<f){e=t;var a=Math.sqrt(s);u[0]=i-a,u[1]=r-a,u[2]=i+a,u[3]=r+a}}})),e},n.prototype.getExtent=function(t){return this.ah.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.wh[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.gh[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.sh},n.prototype.getOverlaps=function(){return this.uh},n.prototype.getUrl=function(){return this.hh},n.prototype.xh=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var e=r.getExtent();i in this.ph?(delete this.ph[i],this.ah&&this.ah.insert(e,n)):this.ah&&this.ah.update(e,n)}else i in this.ph||(this.ah&&this.ah.remove(n),this.ph[i]=n);var s=n.getId();if(void 0!==s){var u=s.toString();this.wh[u]!==n&&(this.Oh(n),this.wh[u]=n)}else this.Oh(n),this.gh[i]=n;this.changed(),this.dispatchEvent(new Hl(Xl,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.wh:o(t)in this.gh},n.prototype.isEmpty=function(){return this.ah?this.ah.isEmpty()&&N(this.ph):!this.mh||0===this.mh.getLength()},n.prototype.loadFeatures=function(t,n,i){for(var r=this.lh,e=this.fh(t,n,i),o=function(t,o){var u=e[t];r.forEachInExtent(u,(function(t){return bn(t.extent,u)}))||(++s.dh,s.dispatchEvent(new Hl(ql)),s.T.call(s,u,n,i,function(t){--this.dh,this.dispatchEvent(new Hl(Wl,void 0,t))}.bind(s),function(){--this.dh,this.dispatchEvent(new Hl(Zl))}.bind(s)),r.insert(u,{extent:u.slice()}))},s=this,u=0,h=e.length;u<h;++u)o(u);this.loading=!(this.T.length<4)&&this.dh>0},n.prototype.refresh=function(){this.clear(!0),this.lh.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.lh;i.forEachInExtent(t,(function(i){if(Tn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.ph?delete this.ph[n]:this.ah&&this.ah.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var n=o(t),i=this.yh[n];if(i){i.forEach($),delete this.yh[n];var r=t.getId();return void 0!==r&&delete this.wh[r.toString()],delete this.gh[n],this.dispatchEvent(new Hl(Vl,t)),t}},n.prototype.Oh=function(t){var n=!1;for(var i in this.wh)if(this.wh[i]===t){delete this.wh[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.T=t},n.prototype.setUrl=function(t){Ot(this.sh,7),this.hh=t,this.setLoader(Uf(t,this.sh))},n}(Tl),$l=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return Ot("Point"==n.getType(),10),n},i.Sh=n.createCluster,i.source=null,i.jh=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return $l(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(F,this.jh),this.source=t,t&&t.addEventListener(F,this.jh),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},e=0,s=i.length;e<s;e++){var u=i[e];if(!(o(u)in r)){var h=this.geometryFunction(u);if(h){jn(h.getCoordinates(),t),wn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var e=this.geometryFunction(t[r]);e?Vi(i,e.getCoordinates()):t.splice(r,1)}$i(i,1/t.length);var o=zn(n),s=this.interpolationRatio,u=new _e([i[0]*(1-s)+o[0]*s,i[1]*(1-s)+o[1]*s]);return this.Sh?this.Sh(u,t):new Et({geometry:u,features:t})},n}(Jl),Ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),td=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;if(void 0===e&&r&&(e=ba({extent:xa(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:r,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).As=void 0!==n.gutter?n.gutter:0,i.so=n.tileSize?$u(n.tileSize):null,!i.so&&n.tilePixelRatio&&e){var o=$u(e.getTileSize(0));i.so=[o[0]*n.tilePixelRatio,o[1]*n.tilePixelRatio]}return i.oo=null,i.$u={},i.T=n.loader,i.Yi=i.Yi.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return Ql(n,t),n.prototype.setTileSizes=function(t){this.oo=t},n.prototype.getTileSize=function(t){if(this.oo)return this.oo[t];if(this.so)return this.so;var n=this.getTileGrid();return n?$u(n.getTileSize(t)):[256,256]},n.prototype.getGutterForProjection=function(t){return this.As},n.prototype.setLoader=function(t){this.T=t},n.prototype.getTile=function(t,n,i,r,e){var o=this.getTileSize(t),s=Sf(t,n,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var u=this.T;var h=P({tileCoord:[t,n,i],loader:function(){return T((function(){return u(t,n,i)}))},size:o},this.tileOptions),f=new xt(h);return f.key=this.getKey(),f.addEventListener(F,this.Yi),this.tileCache.set(s,f),f},n.prototype.Yi=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.$u[r]=!0,n=xl):r in this.$u&&(delete this.$u[r],n=e==dt?Sl:e==lt?Ol:void 0),n&&this.dispatchEvent(new Cl(n,i))},n}(Nl),nd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),id=function(t){function n(n,i,r,e,o,s,u){var h=this,f=n.getExtent(),a=i.getExtent(),c=a?qn(r,a):r,v=va(n,i,zn(c),e),l=new zc(n,i,c,f,.5*v,e),d=s(l.calculateSourceExtent(),v,o),p=d?ao:po,w=d?d.getPixelRatio():1;return(h=t.call(this,r,e,w,p)||this).gs=i,h.bs=f,h.Is=l,h.ri=e,h.Eh=r,h.Th=d,h.Ph=w,h.Wu=u,h.Tt=null,h.Ah=null,h}return nd(n,t),n.prototype.disposeInternal=function(){this.state==co&&this.Ch(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Tt},n.prototype.getProjection=function(){return this.gs},n.prototype.Gs=function(){var t=this.Th.getState();if(t==vo){var n=Yn(this.Eh)/this.ri,i=Vn(this.Eh)/this.ri;this.Tt=da(n,i,this.Ph,this.Th.getResolution(),this.bs,this.ri,this.Eh,this.Is,[{extent:this.Th.getExtent(),image:this.Th.getImage()}],0,void 0,this.Wu)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==ao){this.state=co,this.changed();var t=this.Th.getState();t==vo||t==lo?this.Gs():(this.Ah=H(this.Th,F,(function(t){var n=this.Th.getState();n!=vo&&n!=lo||(this.Ch(),this.Gs())}),this),this.Th.load())}},n.prototype.Ch=function(){$(this.Ah),this.Ah=null},n}(fo),rd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ed="imageloadstart",od="imageloadend",sd="imageloaderror",ud=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return rd(n,t),n}(c);function hd(t,n){t.getImage().src=n}var fd=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:r})||this).on,i.once,i.un,i.li=void 0!==n.resolutions?n.resolutions:null,i.Nh=null,i.kh=0,i}return rd(n,t),n.prototype.getResolutions=function(){return this.li},n.prototype.findNearestResolution=function(t){if(this.li){var n=g(this.li,t,0);t=this.li[n]}return t},n.prototype.getImage=function(t,n,i,r){var e=this.getProjection();if(e&&r&&!_r(e,r)){if(this.Nh){if(this.kh==this.getRevision()&&_r(this.Nh.getProjection(),r)&&this.Nh.getResolution()==n&&Tn(this.Nh.getExtent(),t))return this.Nh;this.Nh.dispose(),this.Nh=null}return this.Nh=new id(e,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,e)}.bind(this),this.getInterpolate()),this.kh=this.getRevision(),this.Nh}return e&&(r=e),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,e){return r()},n.prototype.handleImageChange=function(t){var n,i=t.target;switch(i.getState()){case co:this.loading=!0,n=ed;break;case vo:this.loading=!1,n=od;break;case lo:this.loading=!1,n=sd;break;default:return}this.hasListener(n)&&this.dispatchEvent(new ud(n,i))},n}(Tl),ad=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cd=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).At=void 0!==r.crossOrigin?r.crossOrigin:null,i.nh=void 0===r.hidpi||r.hidpi,i.hh=r.url,i.Ot=void 0!==r.imageLoadFunction?r.imageLoadFunction:hd,i.Lh=r.params||{},i._t=null,i.Fh=[0,0],i.Rh=0,i.Ih=void 0!==r.ratio?r.ratio:1.5,i}return ad(n,t),n.prototype.getParams=function(){return this.Lh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.hh)return null;n=this.findNearestResolution(n),i=this.nh?i:1;var e=this._t;if(e&&this.Rh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&bn(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};P(o,this.Lh);var s=((t=t.slice())[0]+t[2])/2,u=(t[1]+t[3])/2;if(1!=this.Ih){var h=this.Ih*Yn(t)/2,f=this.Ih*Vn(t)/2;t[0]=s-h,t[1]=u-f,t[2]=s+h,t[3]=u+f}var a=n/i,c=Math.ceil(Yn(t)/a),v=Math.ceil(Vn(t)/a);t[0]=s-a*c/2,t[2]=s+a*c/2,t[1]=u-a*v/2,t[3]=u+a*v/2,this.Fh[0]=c,this.Fh[1]=v;var l=this.Gh(t,this.Fh,i,r,o);return this._t=new yo(t,n,i,l,this.At,this.Ot),this.Rh=this.getRevision(),this._t.addEventListener(F,this.handleImageChange.bind(this)),this._t},n.prototype.getImageLoadFunction=function(){return this.Ot},n.prototype.Gh=function(t,n,i,r,e){var o=r.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*i);var s=this.hh,u=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==s&&Ot(!1,50),Pa(u,e)},n.prototype.getUrl=function(){return this.hh},n.prototype.setImageLoadFunction=function(t){this._t=null,this.Ot=t,this.changed()},n.prototype.setUrl=function(t){t!=this.hh&&(this.hh=t,this._t=null,this.changed())},n.prototype.updateParams=function(t){P(this.Lh,t),this._t=null,this.changed()},n}(fd),vd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ld=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).Dh=r.canvasFunction,i.Tt=null,i.Rh=0,i.Ih=void 0!==r.ratio?r.ratio:1.5,i}return vd(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var e=this.Tt;if(e&&this.Rh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&bn(e.getExtent(),t))return e;Kn(t=t.slice(),this.Ih);var o=[Yn(t)/n*i,Vn(t)/n*i],s=this.Dh.call(this,t,n,i,o,r);return s&&(e=new bo(t,n,i,s)),this.Tt=e,this.Rh=this.getRevision(),e},n}(fd),dd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pd=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:hd,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(i=t.call(this,{attributions:n.attributions,interpolate:o,projection:pr(n.projection)})||this).hh=n.url,i.zh=n.imageExtent,i._t=new yo(i.zh,void 0,1,i.hh,r,e),i.Fh=n.imageSize?n.imageSize:null,i._t.addEventListener(F,i.handleImageChange.bind(i)),i}return dd(n,t),n.prototype.getImageExtent=function(){return this.zh},n.prototype.getImageInternal=function(t,n,i,r){return Hn(t,this._t.getExtent())?this._t:null},n.prototype.getUrl=function(){return this.hh},n.prototype.handleImageChange=function(n){if(this._t.getState()==vo){var i=this._t.getExtent(),r=this._t.getImage(),e=void 0,o=void 0;this.Fh?(e=this.Fh[0],o=this.Fh[1]):(e=r.width,o=r.height);var s=Yn(i),u=Vn(i),h=s/e,f=u/o,a=e,c=o;if(h>f?a=Math.round(s/f):c=Math.round(u/h),a!==e||c!==o){var v=Mo(a,c);this.getInterpolate()||P(v,ua);var l=v.canvas;v.drawImage(r,0,0,e,o,0,0,l.width,l.height),this._t.setImage(l)}}t.prototype.handleImageChange.call(this,n)},n}(fd),wd="1.3.0",gd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yd=[101,101],md=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).At=void 0!==r.crossOrigin?r.crossOrigin:null,i.hh=r.url,i.Ot=void 0!==r.imageLoadFunction?r.imageLoadFunction:hd,i.Lh=r.params||{},i.Uh=!0,i.Xh(),i.Bh=r.serverType,i.nh=void 0===r.hidpi||r.hidpi,i._t=null,i.Fh=[0,0],i.Rh=0,i.Ih=void 0!==r.ratio?r.ratio:1.5,i}return gd(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){if(void 0!==this.hh){var e=pr(i),o=this.getProjection();o&&o!==e&&(n=va(o,e,t,n),t=Sr(t,e,o));var s=Xn(t,n,0,yd),u={SERVICE:"WMS",VERSION:wd,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Lh.LAYERS};P(u,this.Lh,r);var h=wi((t[0]-s[0])/n,4),f=wi((s[3]-t[1])/n,4);return u[this.Uh?"I":"X"]=h,u[this.Uh?"J":"Y"]=f,this.Gh(s,yd,1,o||e,u)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.hh){var i={SERVICE:"WMS",VERSION:wd,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Lh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return P(i,n),Pa(this.hh,i)}},n.prototype.getParams=function(){return this.Lh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.hh)return null;n=this.findNearestResolution(n),1==i||this.nh&&void 0!==this.Bh||(i=1);var e=n/i,o=zn(t),s=Xn(o,e,0,[gi(Yn(t)/e,4),gi(Vn(t)/e,4)]),u=Xn(o,e,0,[gi(this.Ih*Yn(t)/e,4),gi(this.Ih*Vn(t)/e,4)]),h=this._t;if(h&&this.Rh==this.getRevision()&&h.getResolution()==n&&h.getPixelRatio()==i&&bn(h.getExtent(),s))return h;var f={SERVICE:"WMS",VERSION:wd,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};P(f,this.Lh),this.Fh[0]=pi(Yn(u)/e,4),this.Fh[1]=pi(Vn(u)/e,4);var a=this.Gh(u,this.Fh,i,r,f);return this._t=new yo(u,n,i,a,this.At,this.Ot),this.Rh=this.getRevision(),this._t.addEventListener(F,this.handleImageChange.bind(this)),this._t},n.prototype.getImageLoadFunction=function(){return this.Ot},n.prototype.Gh=function(t,n,i,r,e){if(Ot(void 0!==this.hh,9),e[this.Uh?"CRS":"SRS"]=r.getCode(),"STYLES"in this.Lh||(e.STYLES=""),1!=i)switch(this.Bh){case"geoserver":var o=90*i+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":e.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":e.DPI=90*i;break;default:Ot(!1,8)}e.WIDTH=n[0],e.HEIGHT=n[1];var s,u=r.getAxisOrientation();return s=this.Uh&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=s.join(","),Pa(this.hh,e)},n.prototype.getUrl=function(){return this.hh},n.prototype.setImageLoadFunction=function(t){this._t=null,this.Ot=t,this.changed()},n.prototype.setUrl=function(t){t!=this.hh&&(this.hh=t,this._t=null,this.changed())},n.prototype.updateParams=function(t){P(this.Lh,t),this.Xh(),this._t=null,this.changed()},n.prototype.Xh=function(){var t=this.Lh.VERSION||wd;this.Uh=Bi(t,"1.3")>=0},n}(fd),bd={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},Md={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function _d(t,n){for(var i,r,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){i=o.href;break}bd[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r}return i}function xd(t,n,i){for(var r,e,o={},s=0;s<t.length;++s){var u=t[s];if(o[u.type]=u.href,"item"===u.rel){if(u.type===n){r=u.href;break}Md[u.type]&&(e=u.href)}}if(!r&&i)for(s=0;s<i.length;++s){var h=i[s];if(o[h]){r=o[h];break}}if(!r){if(!e)throw new Error('Could not find "item" link');r=e}return r}function Od(t,n,i,r){var e=t.projection;if(!e&&!(e=pr(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),s=n.tileMatrices,u={},h=0;h<s.length;++h){var f=s[h];u[f.id]=f}var a={},c=[];if(r)for(h=0;h<r.length;++h){var v=(m=r[h]).tileMatrix;c.push(v),a[v]=m}else for(h=0;h<s.length;++h){v=s[h].id;c.push(v)}var l=c.length,d=new Array(l),p=new Array(l),w=new Array(l),g=new Array(l),y=[-1/0,-1/0,1/0,1/0];for(h=0;h<l;++h){v=c[h];var m,b=(f=u[v]).pointOfOrigin;if(d[h]=o?[b[1],b[0]]:b,p[h]=f.cellSize,w[h]=[f.matrixWidth,f.matrixHeight],g[h]=[f.tileWidth,f.tileHeight],m=a[v]){var M=f.cellSize*f.tileWidth,_=d[h][0]+m.minTileCol*M,x=d[h][0]+(m.maxTileCol+1)*M,O=f.cellSize*f.tileHeight,S=void 0,j=void 0;"bottomLeft"===f.cornerOfOrigin?(S=d[h][1]+m.minTileRow*O,j=d[h][1]+(m.maxTileRow+1)*O):(S=d[h][1]-(m.maxTileRow+1)*O,j=d[h][1]-m.minTileRow*O),qn(y,[_,S,x,j],y)}}var E=new wa({origins:d,resolutions:p,sizes:w,tileSizes:g,extent:r?y:void 0}),T=t.context,A=t.url;return{grid:E,urlTemplate:i,urlFunction:function(t,n,e){if(t){var o=c[t[0]],s=u[o],h="bottomLeft"===s.cornerOfOrigin,f={tileMatrix:o,tileCol:t[1],tileRow:h?-t[2]-1:t[2]};if(r){var v=a[s.id];if(f.tileCol<v.minTileCol||f.tileCol>v.maxTileCol||f.tileRow<v.minTileRow||f.tileRow>v.maxTileRow)return}P(f,T);var l=i.replace(/\{(\w+?)\}/g,(function(t,n){return f[n]}));return Hf(A,l)}}}}function Sd(t){return Yf(t.url).then((function(n){return function(t,n){var i,r=n.tileMatrixSetLimits;if("map"===n.dataType)i=_d(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=xd(n.links,t.mediaType,t.supportedMediaTypes)}if(n.tileMatrixSet)return Od(t,n.tileMatrixSet,i,r);var e=n.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return Yf(Hf(t.url,o)).then((function(n){return Od(t,n,i,r)}))}(t,n)}))}var jd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ed=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,Sd({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(i.Vh.bind(i)).catch(i.qh.bind(i)),i}return jd(n,t),n.prototype.Vh=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")},n.prototype.qh=function(t){console.error(t),this.setState("error")},n}(Il),Td=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pd=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",s=void 0!==r.tileGrid?r.tileGrid:ba({extent:xa(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).As=void 0!==r.gutter?r.gutter:0,i}return Td(n,t),n.prototype.getGutter=function(){return this.As},n}(Il),Ad=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cd='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Nd=function(t){function n(n){var i,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate),i=void 0!==r.attributions?r.attributions:[Cd];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",s=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:s,wrapX:r.wrapX,zDirection:r.zDirection})||this}return Ad(n,t),n}(Pd),kd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ld=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return kd(n,t),n}(as),Fd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rd=[],Id=null;var Gd,Dd=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.mu=null,i.frameState=null,i}return Fd(n,t),n.prototype.getImageData=function(t,n,i){var r,e;Id||((r=document.createElement("canvas")).width=1,r.height=1,Id=r.getContext("2d")),Id.clearRect(0,0,1,1);try{Id.drawImage(t,n,i,1,1,0,0,1,1),e=Id.getImageData(0,0,1,1).data}catch(t){return Id=null,null}return e},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0},n.prototype.useContainer=function(t,n,i){var r,e,o=this.getLayer().getClassName();t&&t.className===o&&(!i||t&&t.style.backgroundColor&&M(Io(t.style.backgroundColor),Io(i)))&&((u=t.firstElementChild)instanceof HTMLCanvasElement&&(e=u.getContext("2d")));if(e&&e.canvas.style.transform===n?(this.container=t,this.context=e,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var s=r.style;s.position="absolute",s.width="100%",s.height="100%";var u=(e=Mo()).canvas;r.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=e}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)},n.prototype.clipUnrotated=function(t,n,i){var r=Wn(i),e=Zn(i),o=Dn(i),s=Gn(i);Qt(n.coordinateToPixelTransform,r),Qt(n.coordinateToPixelTransform,e),Qt(n.coordinateToPixelTransform,o),Qt(n.coordinateToPixelTransform,s);var u=this.inversePixelTransform;Qt(u,r),Qt(u,e),Qt(u,o),Qt(u,s),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},n.prototype.Mu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var e=new ps(t,this.inversePixelTransform,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.frameState=n,this.Mu(rs,t,n)},n.prototype.postRender=function(t,n){this.Mu(es,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,e,o,s){var u=e/2,h=o/2,f=r/n,a=-f,c=-t[0]+s,v=-t[1];return on(this.tempTransform,u,h,f,a,-i,c,v)},n.prototype.getDataAtPixel=function(t,n,i){var r=Qt(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!mn(o,Qt(n.pixelToCoordinateTransform,t.slice())))return null;var s,u=Math.round(r[0]),h=Math.round(r[1]),f=this.mu;if(!f){var a=document.createElement("canvas");a.width=1,a.height=1,f=a.getContext("2d"),this.mu=f}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,u,h,1,1,0,0,1,1),s=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.mu=null,new Uint8Array):s}return 0===s[3]?null:s},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},n}(ev),zd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ud=function(t){function n(n){var i=t.call(this,n)||this;return i._t=null,i}return zd(n,t),n.prototype.getImage=function(){return this._t?this._t.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,e=r.resolution,o=this.getLayer().getSource(),s=t.viewHints,u=t.extent;if(void 0!==n.extent&&(u=qn(u,kr(n.extent,r.projection))),!s[Su]&&!s[ju]&&!Jn(u))if(o){var h=r.projection,f=o.getImage(u,e,i,h);f&&(this.loadImage(f)?this._t=f:f.getState()===po&&(this._t=null))}else this._t=null;return!!this._t},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=Qt(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!mn(e,r))return null;var o=this._t.getExtent(),s=this._t.getImage(),u=Yn(o),h=Math.floor(s.width*((r[0]-o[0])/u));if(h<0||h>=s.width)return null;var f=Vn(o),a=Math.floor(s.height*((o[3]-r[1])/f));return a<0||a>=s.height?null:this.getImageData(s,h,a)},n.prototype.renderFrame=function(t,n){var i=this._t,r=i.getExtent(),e=i.getResolution(),o=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,h=t.viewState,f=h.center,a=u*e/(h.resolution*o),c=t.extent,v=h.resolution,l=h.rotation,d=Math.round(Yn(c)/v*u),p=Math.round(Vn(c)/v*u);on(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,l,-d/2,-p/2),sn(this.inversePixelTransform,this.pixelTransform);var w=hn(this.pixelTransform);this.useContainer(n,w,this.getBackground(t));var g=this.context,y=g.canvas;y.width!=d||y.height!=p?(y.width=d,y.height=p):this.containerReused||g.clearRect(0,0,d,p);var m=!1,b=!0;if(s.extent){var M=kr(s.extent,h.projection);(m=(b=Hn(M,t.extent))&&!bn(M,t.extent))&&this.clipUnrotated(g,t,M)}var _=i.getImage(),x=on(this.tempTransform,d/2,p/2,a,a,0,o*(r[0]-f[0])/e,o*(f[1]-r[3])/e);this.renderedResolution=e*u/o;var O=_.width*x[0],S=_.height*x[3];if(this.getLayer().getSource().getInterpolate()||P(g,ua),this.preRender(g,t),b&&O>=.5&&S>=.5){var j=x[4],E=x[5],T=s.opacity,A=void 0;1!==T&&(A=g.globalAlpha,g.globalAlpha=T),g.drawImage(_,0,0,+_.width,+_.height,j,E,O,S),1!==T&&(g.globalAlpha=A)}return this.postRender(g,t),m&&g.restore(),P(g,ha),w!==y.style.transform&&(y.style.transform=w),this.container},n}(Dd),Xd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bd=function(t){function n(n){return t.call(this,n)||this}return Xd(n,t),n.prototype.createRenderer=function(){return new Ud(this)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(Ld),Vd="preload",qd="useInterimTilesOnError",Wd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zd=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return Wd(n,t),n.prototype.getPreload=function(){return this.get(Vd)},n.prototype.setPreload=function(t){this.set(Vd,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(qd)},n.prototype.setUseInterimTilesOnError=function(t){this.set(qd,t)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(as),Yd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hd=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.Wh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.Zh=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.Yh=new Lf(0,0,0,0),i}return Yd(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==lt||i==pt||i==dt&&!r},n.prototype.getTile=function(t,n,i,r){var e=r.pixelRatio,o=r.viewState.projection,s=this.getLayer(),u=s.getSource().getTile(t,n,i,e,o);return u.getState()==dt&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.Zh=!0):u.setState(lt)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=Qt(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!mn(e,r))return null;for(var o=n.pixelRatio,s=n.viewState.projection,u=n.viewState,h=i.getRenderSource(),f=h.getTileGridForProjection(u.projection),a=h.getTilePixelRatio(n.pixelRatio),c=f.getZForResolution(u.resolution);c>=f.getMinZoom();--c){var v=f.getTileCoordForCoordAndZ(r,c),l=h.getTile(c,v[1],v[2],o,s);if(!(l instanceof Ao||l instanceof Xc))return null;if(l.getState()===lt){var d=f.getOrigin(c),p=$u(f.getTileSize(c)),w=f.getResolution(c),g=Math.floor(a*((r[0]-d[0])/w-v[1]*p[0])),y=Math.floor(a*((d[1]-r[1])/w-v[2]*p[1])),m=Math.round(a*h.getGutterForProjection(u.projection));return this.getImageData(l.getImage(),g+m,y+m)}}return null},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,e=r.projection,s=r.resolution,u=r.center,h=r.rotation,f=t.pixelRatio,a=this.getLayer(),c=a.getSource(),v=c.getRevision(),l=c.getTileGridForProjection(e),d=l.getZForResolution(s,c.zDirection),w=l.getResolution(d),g=t.extent,y=t.viewState.resolution,m=c.getTilePixelRatio(f),b=Math.round(Yn(g)/y*f),M=Math.round(Vn(g)/y*f),_=i.extent&&kr(i.extent,e);_&&(g=qn(g,kr(i.extent,e)));var x=w*b/2/m,O=w*M/2/m,S=[u[0]-x,u[1]-O,u[0]+x,u[1]+O],j=l.getTileRangeForExtentAndZ(g,d),E={};E[d]={};var T=this.createLoadedTileFinder(c,e,E),A=this.tmpExtent,C=this.Yh;this.Zh=!1;for(var N=h?Bn(r.center,y,h,t.size):void 0,k=j.minX;k<=j.maxX;++k)for(var L=j.minY;L<=j.maxY;++L)if(!h||l.tileCoordIntersectsViewport([d,k,L],N)){var F=this.getTile(d,k,L,t);if(this.isDrawableTile(F)){var R=o(this);if(F.getState()==lt)E[d][F.tileCoord.toString()]=F,(ot=F.inTransition(R))&&1!==i.opacity&&(F.endTransition(R),ot=!1),this.Zh||!ot&&-1!==this.renderedTiles.indexOf(F)||(this.Zh=!0);if(1===F.getAlpha(R,t.time))continue}var I=l.getTileCoordChildTileRange(F.tileCoord,C,A),G=!1;I&&(G=T(d+1,I)),G||l.forEachTileCoordParentTileRange(F.tileCoord,T,C,A)}var D=w/s*f/m;on(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,h,-b/2,-M/2);var z=hn(this.pixelTransform);this.useContainer(n,z,this.getBackground(t));var U=this.context,X=U.canvas;sn(this.inversePixelTransform,this.pixelTransform),on(this.tempTransform,b/2,M/2,D,D,0,-b/2,-M/2),X.width!=b||X.height!=M?(X.width=b,X.height=M):this.containerReused||U.clearRect(0,0,b,M),_&&this.clipUnrotated(U,t,_),c.getInterpolate()||P(U,ua),this.preRender(U,t),this.renderedTiles.length=0;var B,V,q,W=Object.keys(E).map(Number);W.sort(p),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],V=[]):W=W.reverse();for(var Z=W.length-1;Z>=0;--Z){var Y=W[Z],H=c.getTilePixelSize(Y,f,e),J=l.getResolution(Y)/w,$=H[0]*J*D,K=H[1]*J*D,Q=l.getTileCoordForCoordAndZ(Wn(S),Y),tt=l.getTileCoordExtent(Q),nt=Qt(this.tempTransform,[m*(tt[0]-S[0])/w,m*(S[3]-tt[3])/w]),it=m*c.getGutterForProjection(e),rt=E[Y];for(var et in rt){var ot,st=(F=rt[et]).tileCoord,ut=Q[1]-st[1],ht=Math.round(nt[0]-(ut-1)*$),ft=Q[2]-st[2],at=Math.round(nt[1]-(ft-1)*K),ct=ht-(k=Math.round(nt[0]-ut*$)),vt=at-(L=Math.round(nt[1]-ft*K)),dt=d===Y,pt=!1;if(!(ot=dt&&1!==F.getAlpha(o(this),t.time)))if(B){q=[k,L,k+ct,L,k+ct,L+vt,k,L+vt];for(var wt=0,gt=B.length;wt<gt;++wt)if(d!==Y&&Y<V[wt]){var yt=B[wt];Hn([k,L,k+ct,L+vt],[yt[0],yt[3],yt[4],yt[7]])&&(pt||(U.save(),pt=!0),U.beginPath(),U.moveTo(q[0],q[1]),U.lineTo(q[2],q[3]),U.lineTo(q[4],q[5]),U.lineTo(q[6],q[7]),U.moveTo(yt[6],yt[7]),U.lineTo(yt[4],yt[5]),U.lineTo(yt[2],yt[3]),U.lineTo(yt[0],yt[1]),U.clip())}B.push(q),V.push(Y)}else U.clearRect(k,L,ct,vt);this.drawTileImage(F,t,k,L,ct,vt,it,dt),B&&!ot?(pt&&U.restore(),this.renderedTiles.unshift(F)):this.renderedTiles.push(F),this.updateUsedTiles(t.usedTiles,c,F)}}return this.renderedRevision=v,this.renderedResolution=w,this.extentChanged=!this.Wh||!Tn(this.Wh,S),this.Wh=S,this.renderedPixelRatio=f,this.renderedProjection=e,this.manageTilePyramid(t,c,l,f,e,g,d,a.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),i.extent&&U.restore(),P(U,ha),z!==X.style.transform&&(X.style.transform=z),this.container},n.prototype.drawTileImage=function(t,n,i,r,e,s,u,h){var f=this.getTileImage(t);if(f){var a=o(this),c=n.layerStatesArray[n.layerIndex],v=c.opacity*(h?t.getAlpha(a,n.time):1),l=v!==this.context.globalAlpha;l&&(this.context.save(),this.context.globalAlpha=v),this.context.drawImage(f,u,u,f.width-2*u,f.height-2*u,i,r,e,s),l&&this.context.restore(),v!==c.opacity?n.animate=!0:h&&t.endTransition(a)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,e,s,u,h,f){var a=o(n);a in t.wantedTiles||(t.wantedTiles[a]={});var c,v,l,d,p,w,g=t.wantedTiles[a],y=t.tileQueue,m=i.getMinZoom(),b=t.viewState.rotation,M=b?Bn(t.viewState.center,t.viewState.resolution,b,t.size):void 0,_=0;for(w=m;w<=u;++w)for(v=i.getTileRangeForExtentAndZ(s,w,v),l=i.getResolution(w),d=v.minX;d<=v.maxX;++d)for(p=v.minY;p<=v.maxY;++p)b&&!i.tileCoordIntersectsViewport([w,d,p],M)||(u-w<=h?(++_,(c=n.getTile(w,d,p,r,e)).getState()==ct&&(g[c.getKey()]=!0,y.isKeyQueued(c.getKey())||y.enqueue([c,a,i.getTileCoordCenter(c.tileCoord),l])),void 0!==f&&f(c)):n.useTile(w,d,p,e));n.updateCacheSize(_,e)},n}(Dd),Jd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$d=function(t){function n(n){return t.call(this,n)||this}return Jd(n,t),n.prototype.createRenderer=function(){return new Hd(this)},n}(Zd),Kd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qd=!0;try{new ImageData(10,10)}catch(t){Qd=!1}function tp(t,n,i){if(Qd)return new ImageData(t,n,i);Gd||(Gd=document.createElement("canvas").getContext("2d"));var r=Gd.createImageData(n,i);return r.data.set(t),r}function np(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,e=n.meta,o=n.imageOps,s=n.width,u=n.height,h=r.length,f=r[0].byteLength;if(o){for(var a=new Array(h),c=0;c<h;++c)a[c]=i(new Uint8ClampedArray(r[c]),s,u);return t(a,e).data.buffer}var v=new Uint8ClampedArray(f),l=new Array(h),d=new Array(h);for(c=0;c<h;++c)l[c]=new Uint8ClampedArray(r[c]),d[c]=[0,0,0,0];for(var p=0;p<f;p+=4){for(var w=0;w<h;++w){var g=l[w];d[w][0]=g[p],d[w][1]=g[p+1],d[w][2]=g[p+2],d[w][3]=g[p+3]}var y=t(d,e);v[p]=y[0],v[p+1]=y[1],v[p+2]=y[2],v[p+3]=y[3]}return v.buffer}}function ip(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+np.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r}var rp=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var e=new Array(i);if(i)for(var o=0;o<i;++o)e[o]=ip(n,r._onWorkerMessage.bind(r,o));else e[0]=function(t,n){var i=np(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=e,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return Kd(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/e),u=0;u<e;++u){for(var h=u*s,f=[],a=0,c=r.length;a<c;++a)f.push(r[a].slice(h,h+s));this._workers[u].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:i},f)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=i.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(r);for(var o=4*Math.ceil(e/4/r),s=0;s<r;++s){var u=this._dataLookup[s].buffer,h=s*o;t.set(new Uint8ClampedArray(u),h),n[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,tp(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(l),ep="beforeoperations",op="afteroperations",sp="pixel",up="image",hp=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.extent=i.extent,e.resolution=i.viewState.resolution/i.pixelRatio,e.data=r,e}return Kd(n,t),n}(c),fp=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.Hh=null,i.Jh=void 0!==n.operationType?n.operationType:sp,i.$h=void 0!==n.threads?n.threads:1,i.Kh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=vp(t[r]);return i}(n.sources);for(var r,e=i.changed.bind(i),s=0,u=i.Kh.length;s<u;++s)i.Kh[s].addEventListener(F,e);return i.Zi=new xu((function(){return 1}),i.changed.bind(i)),i.Qh,i.tf=null,i.Rh,i.ki={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.Kh,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.Zi,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(i),renderTargets:{}},i.setAttributions((function(t){for(var i=[],r=0,e=n.sources.length;r<e;++r){var o=n.sources[r],s=(o instanceof Tl?o:o.getSource()).getAttributions();if("function"==typeof s){var u=s(t);i.push.apply(i,u)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return Kd(n,t),n.prototype.setOperation=function(t,n){this.Hh&&this.Hh.dispose(),this.Hh=new rp({operation:t,imageOps:this.Jh===up,queue:1,lib:n,threads:this.$h}),this.changed()},n.prototype.nf=function(t,n,i){var r=P({},this.ki);r.viewState=P({},r.viewState);var e=zn(t);r.extent=t.slice(),r.size[0]=Math.round(Yn(t)/n),r.size[1]=Math.round(Vn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=e,o.projection=i,o.resolution=n,r},n.prototype.if=function(){for(var t=!0,n=0,i=this.Kh.length;n<i;++n)if("ready"!==this.Kh[n].getSource().getState()){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.if())return null;var e=this.nf(t,n,r);if(this.Qh=e,this.tf){var o=this.tf.getResolution(),s=this.tf.getExtent();n===o&&Tn(t,s)||(this.tf=null)}return this.tf&&this.getRevision()===this.Rh||this.rf(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.tf},n.prototype.rf=function(){for(var t=this.Qh,n=this.Kh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var e=cp(this.Kh[r],t);if(!e)return;i[r]=e}var o={};this.dispatchEvent(new hp(ep,t,o)),this.Hh.process(i,o,this.ef.bind(this,t))},n.prototype.ef=function(t,n,i,r){if(!n&&i){var e=t.extent,o=t.viewState.resolution;if(o===this.Qh.viewState.resolution&&Tn(e,this.Qh.extent)){var s;if(this.tf)s=this.tf.getImage().getContext("2d");else s=Mo(Math.round(Yn(e)/o),Math.round(Vn(e)/o)),this.tf=new bo(e,o,1,s.canvas);s.putImageData(i,0,0),this.changed(),this.Rh=this.getRevision(),this.dispatchEvent(new hp(op,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.Hh&&this.Hh.dispose(),t.prototype.disposeInternal.call(this)},n}(fd);fp.prototype.dispose;var ap=null;function cp(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],e=n.size[1];if(0===r||0===e)return null;var o,s=i.renderFrame(n,null);if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===e)return o.getContext("2d").getImageData(0,0,r,e)}if(ap){var u=ap.canvas;u.width!==r||u.height!==e?ap=Mo(r,e):ap.clearRect(0,0,r,e)}else ap=Mo(r,e);return ap.drawImage(o,0,0,r,e),ap.getImageData(0,0,r,e)}function vp(t){var n;return t instanceof Tl?t instanceof Nl?n=new $d({source:t}):t instanceof fd&&(n=new Bd({source:t})):n=t,n}var lp=fp,dp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pp=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Cd],wp={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},gp={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},yp=function(t){function n(n){var i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=n.layer.indexOf("-"),e=-1==r?n.layer:n.layer.slice(0,r),o=gp[e],s=wp[n.layer],u=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+s.extension;return t.call(this,{attributions:pp,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:i,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:s.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:u,wrapX:n.wrapX,zDirection:n.zDirection})||this}return dp(n,t),n}(Pd),mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bp=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).Lh=r.params||{},i.nh=void 0===r.hidpi||r.hidpi,i.fo=[1/0,1/0,-1/0,-1/0],i.setKey(i.sf()),i}return mp(n,t),n.prototype.sf=function(){var t=0,n=[];for(var i in this.Lh)n[t++]=i+"-"+this.Lh[i];return n.join("/")},n.prototype.getParams=function(){return this.Lh},n.prototype.Gh=function(t,n,i,r,e,o){var s=this.urls;if(s){var u,h=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=i.join(","),o.BBOXSR=h,o.IMAGESR=h,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)u=s[0];else u=s[vi(Tf(t),s.length)];return Pa(u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},n.prototype.getTilePixelRatio=function(t){return this.nh?t:1},n.prototype.updateParams=function(t){P(this.Lh,t),this.setKey(this.sf())},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.nh||(n=1);var e=r.getTileCoordExtent(t,this.fo),o=$u(r.getTileSize(t[0]),this.tmpSize);1!=n&&(o=Ju(o,n,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return P(s,this.Lh),this.Gh(t,o,e,n,i,s)}},n}(Il),Mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_p=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],e=$u(i.tileGrid.getTileSize(r)),o=Mo(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas)}})||this}return Mp(n,t),n}(Pd),xp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Op=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:pr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).uf=null,i.so=n.tileSize,n.url)if(n.jsonp)Vf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var e=new XMLHttpRequest;e.addEventListener("load",i.hf.bind(i)),e.addEventListener("error",i.ff.bind(i)),e.open("GET",n.url),e.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return i}return xp(n,t),n.prototype.hf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.ff=function(t){this.handleTileJSONError()},n.prototype.getTileJSON=function(){return this.uf},n.prototype.handleTileJSONResponse=function(t){var n,i=pr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=xr(i,r);n=ti(t.bounds,e)}var o=xa(r),s=t.minzoom||0,u=ba({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.so});if(this.tileGrid=u,this.tileUrlFunction=Sa(t.tiles,u),void 0!==t.attribution&&!this.getAttributions()){var h=void 0!==n?n:o;this.setAttributions((function(n){return Hn(h,n.extent)?[t.attribution]:null}))}this.uf=t,this.setState("ready")},n.prototype.handleTileJSONError=function(){this.setState("error")},n}(Il),Sp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jp=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.params||{},s=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).As=void 0!==r.gutter?r.gutter:0,i.Lh=o,i.Uh=!0,i.Bh=r.serverType,i.nh=void 0===r.hidpi||r.hidpi,i.fo=[1/0,1/0,-1/0,-1/0],i.Xh(),i.setKey(i.sf()),i}return Sp(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var e=pr(i),o=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(e));var u=s.getZForResolution(n,this.zDirection),h=s.getTileCoordForCoordAndZ(t,u);if(!(s.getResolutions().length<=h[0])){var f=s.getResolution(h[0]),a=s.getTileCoordExtent(h,this.fo),c=$u(s.getTileSize(h[0]),this.tmpSize),v=this.As;0!==v&&(c=Yu(c,v,this.tmpSize),a=wn(a,f*v,a)),o&&o!==e&&(f=va(o,e,t,f),a=jr(a,e,o),t=Sr(t,e,o));var l={SERVICE:"WMS",VERSION:wd,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Lh.LAYERS};P(l,this.Lh,r);var d=Math.floor((t[0]-a[0])/f),p=Math.floor((a[3]-t[1])/f);return l[this.Uh?"I":"X"]=d,l[this.Uh?"J":"Y"]=p,this.Gh(h,c,a,1,o||e,l)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:wd,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Lh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return P(i,n),Pa(this.urls[0],i)}},n.prototype.getGutter=function(){return this.As},n.prototype.getParams=function(){return this.Lh},n.prototype.Gh=function(t,n,i,r,e,o){var s=this.urls;if(s){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Uh?"CRS":"SRS"]=e.getCode(),"STYLES"in this.Lh||(o.STYLES=""),1!=r)switch(this.Bh){case"geoserver":var u=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":o.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":o.DPI=90*r;break;default:Ot(!1,52)}var h,f=e.getAxisOrientation(),a=i;if(this.Uh&&"ne"==f.substr(0,2)){var c=void 0;c=i[0],a[0]=i[1],a[1]=c,c=i[2],a[2]=i[3],a[3]=c}if(o.BBOX=a.join(","),1==s.length)h=s[0];else h=s[vi(Tf(t),s.length)];return Pa(h,o)}},n.prototype.getTilePixelRatio=function(t){return this.nh&&void 0!==this.Bh?t:1},n.prototype.sf=function(){var t=0,n=[];for(var i in this.Lh)n[t++]=i+"-"+this.Lh[i];return n.join("/")},n.prototype.updateParams=function(t){P(this.Lh,t),this.Xh(),this.setKey(this.sf())},n.prototype.Xh=function(){var t=this.Lh.VERSION||wd;this.Uh=Bi(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.nh&&void 0!==this.Bh||(n=1);var e=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.fo),s=$u(r.getTileSize(t[0]),this.tmpSize),u=this.As;0!==u&&(s=Yu(s,u,this.tmpSize),o=wn(o,e*u,o)),1!=n&&(s=Ju(s,n,this.tmpSize));var h={SERVICE:"WMS",VERSION:wd,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return P(h,this.Lh),this.Gh(t,s,o,n,i,h)}},n}(Il),Ep=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tp=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i)||this;return u.Mt=r,u.q=e,u.af=o,u.cf=null,u.vf=null,u.P=null,u.lf=s,u}return Ep(n,t),n.prototype.getImage=function(){return null},n.prototype.getData=function(t){if(!this.cf||!this.vf)return null;var n=(t[0]-this.q[0])/(this.q[2]-this.q[0]),i=(t[1]-this.q[1])/(this.q[3]-this.q[1]),r=this.cf[Math.floor((1-i)*this.cf.length)];if("string"!=typeof r)return null;var e=r.charCodeAt(Math.floor(n*r.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.vf){var s=this.vf[e];o=this.P&&s in this.P?this.P[s]:s}return o},n.prototype.forDataAtCoordinate=function(t,n,i){this.state==pt&&!0===i?(this.state=ct,J(this,F,(function(i){n(this.getData(t))}),this),this.df()):!0===i?setTimeout(function(){n(this.getData(t))}.bind(this),0):n(this.getData(t))},n.prototype.getKey=function(){return this.Mt},n.prototype.qh=function(){this.state=dt,this.changed()},n.prototype.Pt=function(t){this.cf=t.grid,this.vf=t.keys,this.P=t.data,this.state=lt,this.changed()},n.prototype.df=function(){if(this.state==ct)if(this.state=vt,this.lf)Vf(this.Mt,this.Pt.bind(this),this.qh.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.hf.bind(this)),t.addEventListener("error",this.ff.bind(this)),t.open("GET",this.Mt),t.send()}},n.prototype.hf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.qh()}this.Pt(i)}else this.qh()},n.prototype.ff=function(t){this.qh()},n.prototype.load=function(){this.af?this.df():this.setState(pt)},n}(Mt),Pp=function(t){function n(n){var i=t.call(this,{projection:pr("EPSG:3857"),state:"loading",zDirection:n.zDirection})||this;if(i.af=void 0===n.preemptive||n.preemptive,i.pf=Ea,i.wf=void 0,i.lf=n.jsonp||!1,n.url)if(i.lf)Vf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var r=new XMLHttpRequest;r.addEventListener("load",i.hf.bind(i)),r.addEventListener("error",i.ff.bind(i)),r.open("GET",n.url),r.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return i}return Ep(n,t),n.prototype.hf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.ff=function(t){this.handleTileJSONError()},n.prototype.getTemplate=function(){return this.wf},n.prototype.forDataAtCoordinateAndResolution=function(t,n,i,r){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r)}else!0===r?setTimeout((function(){i(null)}),0):i(null)},n.prototype.handleTileJSONError=function(){this.setState("error")},n.prototype.handleTileJSONResponse=function(t){var n,i=pr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=xr(i,r);n=ti(t.bounds,e)}var o=xa(r),s=t.minzoom||0,u=ba({extent:o,maxZoom:t.maxzoom||22,minZoom:s});this.tileGrid=u,this.wf=t.template;var h=t.grids;if(h){if(this.pf=Sa(h,u),void 0!==t.attribution){var f=void 0!==n?n:o;this.setAttributions((function(n){return Hn(f,n.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")},n.prototype.getTile=function(t,n,i,r,e){var o=Sf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),h=this.pf(u,r,e),f=new Tp(s,void 0!==h?ct:pt,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.af,this.lf);return this.tileCache.set(o,f),f},n.prototype.useTile=function(t,n,i){var r=Sf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(Nl),Ap=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cp=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:"KVP",o=n.tileGrid,s=n.urls;return void 0===s&&void 0!==n.url&&(s=Ta(n.url)),(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:s,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).gf=void 0!==n.version?n.version:"1.0.0",i.sh=void 0!==n.format?n.format:"image/jpeg",i.yf=void 0!==n.dimensions?n.dimensions:{},i.qs=n.layer,i.mf=n.matrixSet,i.L=n.style,i.bf=e,i.setKey(i.Mf()),s&&s.length>0&&(i.tileUrlFunction=ja(s.map(i.createFromWMTSTemplate.bind(i)))),i}return Ap(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(ja(t.map(this.createFromWMTSTemplate.bind(this))),n)},n.prototype.getDimensions=function(){return this.yf},n.prototype.getFormat=function(){return this.sh},n.prototype.getLayer=function(){return this.qs},n.prototype.getMatrixSet=function(){return this.mf},n.prototype.getRequestEncoding=function(){return this.bf},n.prototype.getStyle=function(){return this.L},n.prototype.getVersion=function(){return this.gf},n.prototype.Mf=function(){var t=0,n=[];for(var i in this.yf)n[t++]=i+"-"+this.yf[i];return n.join("/")},n.prototype.updateDimensions=function(t){P(this.yf,t),this.setKey(this.Mf())},n.prototype.createFromWMTSTemplate=function(t){var n=this.bf,i={layer:this.qs,style:this.L,tilematrixset:this.mf};"KVP"==n&&P(i,{Service:"WMTS",Request:"GetTile",Version:this.gf,Format:this.sh}),t="KVP"==n?Pa(t,i):t.replace(/\{(\w+?)\}/g,(function(t,n){return n.toLowerCase()in i?i[n.toLowerCase()]:t}));var r=this.tileGrid,e=this.yf;return function(i,o,s){if(i){var u={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};P(u,e);var h=t;return h="KVP"==n?Pa(h,u):h.replace(/\{(\w+?)\}/g,(function(t,n){return u[n]}))}}},n}(Il);var Np=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kp="default",Lp="truncated",Fp=function(t){function n(n,i,r,e,o,s,u){var h=t.call(this,i,r,e,o,s,u)||this;return h._f=null,h.so=n,h}return Np(n,t),n.prototype.getImage=function(){if(this._f)return this._f;var n=t.prototype.getImage.call(this);if(this.state==lt){var i=this.so;if(n.width==i[0]&&n.height==i[1])return this._f=n,n;var r=Mo(i[0],i[1]);return r.drawImage(n,0,0),this._f=r.canvas,r.canvas}return n},n}(Ao),Rp=function(t){function n(n){var i=this,r=n,e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.size,s=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:kp,u=r.tilePixelRatio||1,h=o[0],f=o[1],a=[],c=r.tileSize||Tu,v=c*u;switch(s){case kp:for(;h>v||f>v;)a.push([Math.ceil(h/v),Math.ceil(f/v)]),v+=v;break;case Lp:for(var l=h,d=f;l>v||d>v;)a.push([Math.ceil(l/v),Math.ceil(d/v)]),l>>=1,d>>=1;break;default:Ot(!1,53)}a.push([1,1]),a.reverse();for(var p=[u],w=[0],g=1,y=a.length;g<y;g++)p.push(u<<g),w.push(a[g-1][0]*a[g-1][1]+w[g-1]);p.reverse();var m=new wa({tileSize:c,extent:r.extent||[0,-f,h,0],resolutions:p}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var M=Ta(b),_=c*u;var x=ja(M.map((function(t){return function(n,i,r){if(n){var e=n[0],o=n[1],s=n[2],u=o+s*a[e][0],h={z:e,x:o,y:s,tileIndex:u,TileGroup:"TileGroup"+((u+w[e])/_|0)};return t.replace(/\{(\w+?)\}/g,(function(t,n){return h[n]}))}}}))),O=Fp.bind(null,$u(c*u));(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,tilePixelRatio:u,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:O,tileGrid:m,tileUrlFunction:x,transition:r.transition})||this).zDirection=r.zDirection;var S=x(m.getTileCoordForCoordAndResolution(zn(m.getExtent()),p[p.length-1]),1,null),j=new Image;return j.addEventListener("error",function(){_=c,this.changed()}.bind(i)),j.src=S,i}return Np(n,t),n}(Il),Ip={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Gp=[Ip.FILL],Dp=[Ip.STROKE],zp=[Ip.BEGIN_PATH],Up=[Ip.CLOSE_PATH],Xp=Ip,Bp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vp=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=r,o.xf=null,o.Of=null,o.Sf=null,o.instructions=[],o.coordinates=[],o.jf=[],o.hitDetectionInstructions=[],o.state={},o}return Bp(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.jf,e=this.coordinates,o=e.length,s=0,u=t.length;s<u;s+=n)r[0]=t[s],r[1]=t[s+1],mn(i,r)&&(e[o++]=r[0],e[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,e,o){var s=this.coordinates,u=s.length,h=this.getBufferedMaxExtent();o&&(n+=r);var f,a,c,v=t[n],l=t[n+1],d=this.jf,p=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(c=_n(h,d))!==a?(p&&(s[u++]=v,s[u++]=l,p=!1),s[u++]=d[0],s[u++]=d[1]):c===an?(s[u++]=d[0],s[u++]=d[1],p=!1):p=!0,v=d[0],l=d[1],a=c;return(e&&p||f===n+r)&&(s[u++]=v,s[u++]=l),u},n.prototype.Ef=function(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o],h=this.appendFlatLineCoordinates(t,n,u,r,!1,!1);e.push(h),n=u}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var e,o,s,u,h,f=t.getType(),a=t.getStride(),c=this.coordinates.length;switch(f){case"MultiPolygon":e=t.getOrientedFlatCoordinates(),u=[];var v=t.getEndss();h=0;for(var l=0,d=v.length;l<d;++l){var p=[];h=this.Ef(e,h,v[l],a,p),u.push(p)}this.instructions.push([Xp.CUSTOM,c,u,t,i,pe]),this.hitDetectionInstructions.push([Xp.CUSTOM,c,u,t,r||i,pe]);break;case"Polygon":case"MultiLineString":s=[],e="Polygon"==f?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.Ef(e,0,t.getEnds(),a,s),this.instructions.push([Xp.CUSTOM,c,s,t,i,de]),this.hitDetectionInstructions.push([Xp.CUSTOM,c,s,t,r||i,de]);break;case"LineString":case"Circle":e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,a,!1,!1),this.instructions.push([Xp.CUSTOM,c,o,t,i,le]),this.hitDetectionInstructions.push([Xp.CUSTOM,c,o,t,r||i,le]);break;case"MultiPoint":e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,a))>c&&(this.instructions.push([Xp.CUSTOM,c,o,t,i,le]),this.hitDetectionInstructions.push([Xp.CUSTOM,c,o,t,r||i,le]));break;case"Point":e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([Xp.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([Xp.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.xf=[Xp.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.xf),this.Of=[Xp.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Of)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,e=n.length,o=-1;for(t=0;t<e;++t)(r=(i=n[t])[0])==Xp.END_GEOMETRY?o=t:r==Xp.BEGIN_GEOMETRY&&(i[2]=t,y(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Gf(r||js)}else i.fillStyle=void 0;if(n){var e=n.getColor();i.strokeStyle=Gf(e||Cs);var o=n.getLineCap();i.lineCap=void 0!==o?o:Es;var s=n.getLineDash();i.lineDash=s?s.slice():Ts;var u=n.getLineDashOffset();i.lineDashOffset=u||0;var h=n.getLineJoin();i.lineJoin=void 0!==h?h:Ps;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var a=n.getMiterLimit();i.miterLimit=void 0!==a?a:As,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.Sf=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[Xp.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[Xp.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,e=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||e!=t.currentLineDash&&!M(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=h)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.xf[2]=this.instructions.length,this.xf=null,this.Of[2]=this.hitDetectionInstructions.length,this.Of=null;var n=[Xp.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.Sf&&(this.Sf=gn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;wn(this.Sf,t,this.Sf)}return this.Sf},n}(Jf),qp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wp=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.ko=null,o._t=null,o.Tf=void 0,o.Pf=void 0,o.Af=void 0,o.Cf=void 0,o.do=void 0,o.Nf=void 0,o.kf=void 0,o.po=void 0,o.Sr=void 0,o.wo=void 0,o.Ko=void 0,o.bo=void 0,o.Lf=void 0,o}return qp(n,t),n.prototype.drawPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Xp.DRAW_IMAGE,e,o,this._t,this.Pf*this.Tf,this.Af*this.Tf,Math.ceil(this.Cf*this.Tf),this.do,this.Nf*this.Tf,this.kf*this.Tf,this.po,this.Sr,[this.wo[0]*this.pixelRatio/this.Tf,this.wo[1]*this.pixelRatio/this.Tf],Math.ceil(this.Ko*this.Tf),this.bo,this.Lf]),this.hitDetectionInstructions.push([Xp.DRAW_IMAGE,e,o,this.ko,this.Pf,this.Af,this.Cf,this.do,this.Nf,this.kf,this.po,this.Sr,this.wo,this.Ko,this.bo,this.Lf]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Xp.DRAW_IMAGE,e,o,this._t,this.Pf*this.Tf,this.Af*this.Tf,Math.ceil(this.Cf*this.Tf),this.do,this.Nf*this.Tf,this.kf*this.Tf,this.po,this.Sr,[this.wo[0]*this.pixelRatio/this.Tf,this.wo[1]*this.pixelRatio/this.Tf],Math.ceil(this.Ko*this.Tf),this.bo,this.Lf]),this.hitDetectionInstructions.push([Xp.DRAW_IMAGE,e,o,this.ko,this.Pf,this.Af,this.Cf,this.do,this.Nf,this.kf,this.po,this.Sr,this.wo,this.Ko,this.bo,this.Lf]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Pf=void 0,this.Af=void 0,this.ko=null,this._t=null,this.Tf=void 0,this.Cf=void 0,this.wo=void 0,this.do=void 0,this.Nf=void 0,this.kf=void 0,this.po=void 0,this.Sr=void 0,this.Ko=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),e=t.getOrigin();this.Tf=t.getPixelRatio(this.pixelRatio),this.Pf=i[0],this.Af=i[1],this.ko=t.getHitDetectionImage(),this._t=t.getImage(this.pixelRatio),this.Cf=r[1],this.do=t.getOpacity(),this.Nf=e[0],this.kf=e[1],this.po=t.getRotateWithView(),this.Sr=t.getRotation(),this.wo=t.getScaleArray(),this.Ko=r[0],this.bo=t.getDeclutterMode(),this.Lf=n},n}(Vp),Zp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yp=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Zp(n,t),n.prototype.Ff=function(t,n,i,r){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),s=[Xp.MOVE_TO_LINE_TO,e,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Xp.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ts,0],zp);var o=t.getFlatCoordinates(),s=t.getStride();this.Ff(o,0,o.length,s),this.hitDetectionInstructions.push(Dp),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Xp.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],zp);for(var o=t.getEnds(),s=t.getFlatCoordinates(),u=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Ff(s,h,o[f],u);this.hitDetectionInstructions.push(Dp),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(Dp),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(Dp),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(zp)},n}(Vp),Hp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jp=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Hp(n,t),n.prototype.Rf=function(t,n,i,r){var e=this.state,o=void 0!==e.fillStyle,s=void 0!==e.strokeStyle,u=i.length;this.instructions.push(zp),this.hitDetectionInstructions.push(zp);for(var h=0;h<u;++h){var f=i[h],a=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,r,!0,!s),v=[Xp.MOVE_TO_LINE_TO,a,c];this.instructions.push(v),this.hitDetectionInstructions.push(v),s&&(this.instructions.push(Up),this.hitDetectionInstructions.push(Up)),n=f}return o&&(this.instructions.push(Gp),this.hitDetectionInstructions.push(Gp)),s&&(this.instructions.push(Dp),this.hitDetectionInstructions.push(Dp)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.If(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xp.SET_FILL_STYLE,js]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xp.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var h=[Xp.CIRCLE,u];this.instructions.push(zp,h),this.hitDetectionInstructions.push(zp,h),void 0!==i.fillStyle&&(this.instructions.push(Gp),this.hitDetectionInstructions.push(Gp)),void 0!==i.strokeStyle&&(this.instructions.push(Dp),this.hitDetectionInstructions.push(Dp)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.If(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xp.SET_FILL_STYLE,js]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xp.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),u=t.getStride();this.Rf(s,0,o,u),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.If(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xp.SET_FILL_STYLE,js]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xp.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),u=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Rf(s,h,o[f],u);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,e=i.length;r<e;++r)i[r]=fe(i[r],n);return t.prototype.finish.call(this)},n.prototype.If=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Vp);function $p(t,n,i,r,e){var o,s,u,h,f,a,c,v,l,d=i,p=i,w=0,g=0,y=i;for(o=i;o<r;o+=e){var m=n[o],b=n[o+1];void 0!==h&&(v=m-h,l=b-f,u=Math.sqrt(v*v+l*l),void 0!==a&&(g+=s,Math.acos((a*v+c*l)/(s*u))>t&&(g>w&&(w=g,d=y,p=o),g=0,y=o-e)),s=u,a=v,c=l),h=m,f=b}return(g+=u)>w?[y,o]:[d,p]}var Kp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qp={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},tw=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.Gf=null,o.Ge="",o.De=0,o.ze=0,o.Ue=void 0,o.Xe=0,o.Ve=null,o.fillStates={},o.qe=null,o.strokeStates={},o.We={},o.textStates={},o.Df="",o.zf="",o.Uf="",o.Lf=void 0,o}return Kp(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.Ve,r=this.qe,e=this.We;if(""!==this.Ge&&e&&(i||r)){var o=this.coordinates,s=o.length,u=t.getType(),h=null,f=t.getStride();if(e.placement!==Rc||"LineString"!=u&&"MultiLineString"!=u&&"Polygon"!=u&&"MultiPolygon"!=u){var a=e.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),f=2;break;case"Polygon":h=t.getFlatInteriorPoint(),e.overflow||a.push(h[2]/this.resolution),f=3;break;case"MultiPolygon":var c=t.getFlatInteriorPoints();h=[];for(_=0,x=c.length;_<x;_+=3)e.overflow||a.push(c[_+2]/this.resolution),h.push(c[_],c[_+1]);if(0===h.length)return;f=2}if((A=this.appendFlatPointCoordinates(h,f))===s)return;if(a&&(A-s)/2!=h.length/f){var v=s/2;a=a.filter((function(t,n){var i=o[2*(v+n)]===h[n*f]&&o[2*(v+n)+1]===h[n*f+1];return i||--v,i}))}this.Xf(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var l=e.padding;if(l!=Ls&&(e.scale[0]<0||e.scale[1]<0)){var d=e.padding[0],p=e.padding[1],w=e.padding[2],g=e.padding[3];e.scale[0]<0&&(p=-p,g=-g),e.scale[1]<0&&(d=-d,w=-w),l=[d,p,w,g]}var y=this.pixelRatio;this.instructions.push([Xp.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.Ue,this.Xe,[1,1],NaN,void 0,this.Lf,l==Ls?Ls:l.map((function(t){return t*y})),!!e.backgroundFill,!!e.backgroundStroke,this.Ge,this.Df,this.Uf,this.zf,this.De,this.ze,a]);var m=1/y;this.hitDetectionInstructions.push([Xp.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.Ue,this.Xe,[m,m],NaN,void 0,this.Lf,l,!!e.backgroundFill,!!e.backgroundStroke,this.Ge,this.Df,this.Uf,this.zf,this.De,this.ze,a]),this.endGeometry(n)}else{if(!Hn(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(h=t.getFlatCoordinates(),"LineString"==u)b=[h.length];else if("MultiLineString"==u)b=t.getEnds();else if("Polygon"==u)b=t.getEnds().slice(0,1);else if("MultiPolygon"==u){var M=t.getEndss();b=[];for(var _=0,x=M.length;_<x;++_)b.push(M[_][0])}this.beginGeometry(t,n);for(var O=e.textAlign,S=0,j=void 0,E=0,T=b.length;E<T;++E){if(null==O){var P=$p(e.maxAngle,h,S,b[E],f);S=P[0],j=P[1]}else j=b[E];for(var _=S;_<j;_+=f)o.push(h[_],h[_+1]);var A=o.length;S=b[E],this.Bf(s,A),s=A}this.endGeometry(n)}}},n.prototype.Xf=function(){var t=this.qe,n=this.We,i=this.Ve,r=this.Uf;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.Df;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Ns,justify:n.justify,textBaseline:n.textBaseline||ks,scale:n.scale});var o=this.zf;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.Bf=function(t,n){var i=this.qe,r=this.We,e=this.Uf,o=this.Df,s=this.zf;this.Xf();var u=this.pixelRatio,h=Qp[r.textBaseline],f=this.ze*u,a=this.Ge,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Xp.DRAW_CHARS,t,n,h,r.overflow,s,r.maxAngle,u,f,e,c*u,a,o,1]),this.hitDetectionInstructions.push([Xp.DRAW_CHARS,t,n,h,r.overflow,s,r.maxAngle,1,f,e,c,a,o,1/u])},n.prototype.setTextStyle=function(t,n){var i,r,e;if(t){var s=t.getFill();s?((r=this.Ve)||(r={},this.Ve=r),r.fillStyle=Gf(s.getColor()||js)):(r=null,this.Ve=r);var u=t.getStroke();if(u){(e=this.qe)||(e={},this.qe=e);var h=u.getLineDash(),f=u.getLineDashOffset(),a=u.getWidth(),c=u.getMiterLimit();e.lineCap=u.getLineCap()||Es,e.lineDash=h?h.slice():Ts,e.lineDashOffset=void 0===f?0:f,e.lineJoin=u.getLineJoin()||Ps,e.lineWidth=void 0===a?1:a,e.miterLimit=void 0===c?As:c,e.strokeStyle=Gf(u.getColor()||Cs)}else e=null,this.qe=e;i=this.We;var v=t.getFont()||Ss;Us(v);var l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=v,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||ks,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ls,i.scale=void 0===l?[1,1]:l;var d=t.getOffsetX(),p=t.getOffsetY(),w=t.getRotateWithView(),g=t.getRotation();this.Ge=t.getText()||"",this.De=void 0===d?0:d,this.ze=void 0===p?0:p,this.Ue=void 0!==w&&w,this.Xe=void 0===g?0:g,this.Uf=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.Df=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.zf=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.Ge="";this.Lf=n},n}(Vp),nw={Circle:Jp,Default:Vp,Image:Wp,LineString:Yp,Polygon:Jp,Text:tw},iw=function(){function t(t,n,i,r){this.Vf=t,this.qf=n,this.bt=r,this.Wf=i,this.Zf={}}return t.prototype.finish=function(){var t={};for(var n in this.Zf){t[n]=t[n]||{};var i=this.Zf[n];for(var r in i){var e=i[r].finish();t[n][r]=e}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.Zf[i];void 0===r&&(r={},this.Zf[i]=r);var e=r[n];void 0===e&&(e=new(0,nw[n])(this.Vf,this.qf,this.Wf,this.bt),r[n]=e);return e},t}();function rw(t,n,i,r,e,o,s,u,h,f,a,c){var v=t[n],l=t[n+1],d=0,p=0,w=0,g=0;function y(){d=v,p=l,v=t[n+=r],l=t[n+1],g+=w,w=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p))}do{y()}while(n<i-r&&g+w<o);for(var m=0===w?0:(o-g)/w,b=li(d,v,m),M=li(p,l,m),_=n-r,x=g,O=o+u*h(f,e,a);n<i-r&&g+w<O;)y();var S,j=li(d,v,m=0===w?0:(O-g)/w),E=li(p,l,m);if(c){var T=[b,M,j,E];Dr(T,0,4,2,c,T,T),S=T[0]>T[2]}else S=b>j;var P,A=Math.PI,C=[],N=_+r===n;if(w=0,g=x,v=t[n=_],l=t[n+1],N){y(),P=Math.atan2(l-p,v-d),S&&(P+=P>0?-A:A);var k=(j+b)/2,L=(E+M)/2;return C[0]=[k,L,(O-o)/2,P,e],C}for(var F=0,R=(e=e.replace(/\n/g," ")).length;F<R;){y();var I=Math.atan2(l-p,v-d);if(S&&(I+=I>0?-A:A),void 0!==P){var G=I-P;if(G+=G>A?-2*A:G<-A?2*A:0,Math.abs(G)>s)return null}P=I;for(var D=F,z=0;F<R;++F){var U=u*h(f,e[S?R-F-1:F],a);if(n+r<i&&g+w<o+z+U/2)break;z+=U}if(F!==D){var X=S?e.substring(R-D,R-F):e.substring(D,F);k=li(d,v,m=0===w?0:(o+z/2-g)/w),L=li(p,l,m);C.push([k,L,z/2,I,X]),o+=z}}return C}function ew(t,n,i,r){for(var e=t[n],o=t[n+1],s=0,u=n+r;u<i;u+=r){var h=t[u],f=t[u+1];s+=Math.sqrt((h-e)*(h-e)+(f-o)*(f-o)),e=h,o=f}return s}var ow=[1/0,1/0,-1/0,-1/0],sw=[],uw=[],hw=[],fw=[];function aw(t){return t[3].declutterBox}var cw=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function vw(t,n){return"start"!==n&&"end"!==n||cw.test(t)||(n="start"===n?"left":"right"),Qp[n]}function lw(t,n,i){return i>0&&t.push("\n",""),t.push(n,""),t}var dw=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.Yf,this.instructions=r.instructions,this.coordinates=r.coordinates,this.Hf={},this.Jf=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.Ze=null,this.be=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.$f={},this.Gf={}}return t.prototype.createLabel=function(t,n,i,r){var e=t+n+i+r;if(this.Gf[e])return this.Gf[e];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,u=this.textStates[n],h=this.pixelRatio,f=[u.scale[0]*h,u.scale[1]*h],a=Array.isArray(t),c=u.justify?Qp[u.justify]:vw(Array.isArray(t)?t[0]:t,u.textAlign||Ns),v=r&&o.lineWidth?o.lineWidth:0,l=a?t:t.split("\n").reduce(lw,[]),d=Ws(u,l),p=d.width,w=d.height,g=d.widths,y=d.heights,m=d.lineWidths,b=p+v,M=[],_=(b+2)*f[0],x=(w+v)*f[1],O={width:_<0?Math.floor(_):Math.ceil(_),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:M};(1==f[0]&&1==f[1]||M.push("scale",f),r)&&(M.push("strokeStyle",o.strokeStyle),M.push("lineWidth",v),M.push("lineCap",o.lineCap),M.push("lineJoin",o.lineJoin),M.push("miterLimit",o.miterLimit),(Vt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(M.push("setLineDash",[o.lineDash]),M.push("lineDashOffset",o.lineDashOffset)));i&&M.push("fillStyle",s.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");for(var S,j=.5-c,E=c*b+j*v,T=[],P=[],A=0,C=0,N=0,k=0,L=0,F=l.length;L<F;L+=2){var R=l[L];if("\n"!==R){var I=l[L+1]||u.font;I!==S&&(r&&T.push("font",I),i&&P.push("font",I),S=I),A=Math.max(A,y[N]);var G=[R,E+j*g[N]+c*(g[N]-m[k]),.5*(v+A)+C];E+=g[N],r&&T.push("strokeText",G),i&&P.push("fillText",G),++N}else C+=A,A=0,E=c*b+j*v,++k}return Array.prototype.push.apply(M,T),Array.prototype.push.apply(M,P),this.Gf[e]=O,O},t.prototype.Kf=function(t,n,i,r,e,o,s){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.Yf=o[2],this._o(t)),s&&(this.Qf(t,s),t.stroke())},t.prototype.ta=function(t,n,i,r,e,o,s,u,h,f,a,c,v,l,d,p){var w,g=i-(s*=c[0]),y=r-(u*=c[1]),m=e+h>t?t-h:e,b=o+f>n?n-f:o,M=l[3]+m*c[0]+l[1],_=l[0]+b*c[1]+l[2],x=g-l[3],O=y-l[0];return(d||0!==a)&&(sw[0]=x,fw[0]=x,sw[1]=O,uw[1]=O,uw[0]=x+M,hw[0]=uw[0],hw[1]=O+_,fw[1]=hw[1]),0!==a?(Qt(w=on([1,0,0,1,0,0],i,r,1,1,a,-i,-r),sw),Qt(w,uw),Qt(w,hw),Qt(w,fw),On(Math.min(sw[0],uw[0],hw[0],fw[0]),Math.min(sw[1],uw[1],hw[1],fw[1]),Math.max(sw[0],uw[0],hw[0],fw[0]),Math.max(sw[1],uw[1],hw[1],fw[1]),ow)):On(Math.min(x,x+M),Math.min(O,O+_),Math.max(x,x+M),Math.max(O,O+_),ow),v&&(g=Math.round(g),y=Math.round(y)),{drawImageX:g,drawImageY:y,drawImageW:m,drawImageH:b,originX:h,originY:f,declutterBox:{minX:ow[0],minY:ow[1],maxX:ow[2],maxY:ow[3],value:p},canvasTransform:w,scale:c}},t.prototype.na=function(t,n,i,r,e,o,s){var u=!(!o&&!s),h=r.declutterBox,f=t.canvas,a=s?s[2]*r.scale[0]/2:0;return h.minX-a<=f.width/n&&h.maxX+a>=0&&h.minY-a<=f.height/n&&h.maxY+a>=0&&(u&&this.Kf(t,sw,uw,hw,fw,o,s),Zs(t,r.canvasTransform,e,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype._o=function(t){if(this.Yf){var n=Qt(this.Jf,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.be)}t.fill(),this.Yf&&t.restore()},t.prototype.Qf=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.ia=function(t,n,i,r){var e=this.textStates[n],o=this.createLabel(t,n,r,i),s=this.strokeStates[i],u=this.pixelRatio,h=vw(Array.isArray(t)?t[0]:t,e.textAlign||Ns),f=Qp[e.textBaseline||ks],a=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:h*(o.width/u-2*e.scale[0])+2*(.5-h)*a,anchorY:f*o.height/u+2*(.5-f)*a}},t.prototype.ra=function(t,n,i,r,e,o,s,u){var h;this.Ze&&M(i,this.Jf)?h=this.Ze:(this.Ze||(this.Ze=[]),h=Gr(this.coordinates,0,this.coordinates.length,2,i,this.Ze),Kt(this.Jf,i));for(var f,a,c,v,l,d,p,w,g,y,m,b,_,x,O,S,j=0,E=r.length,T=0,P=0,A=0,C=null,N=null,k=this.Hf,L=this.be,F=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},I=this.instructions!=r||this.overlaps?0:200;j<E;){var G=r[j];switch(G[0]){case Xp.BEGIN_GEOMETRY:_=G[1],S=G[3],_.getGeometry()?void 0===s||Hn(s,S.getExtent())?++j:j=G[2]+1:j=G[2];break;case Xp.BEGIN_PATH:P>I&&(this._o(t),P=0),A>I&&(t.stroke(),A=0),P||A||(t.beginPath(),v=NaN,l=NaN),++j;break;case Xp.CIRCLE:var D=h[T=G[1]],z=h[T+1],U=h[T+2]-D,X=h[T+3]-z,B=Math.sqrt(U*U+X*X);t.moveTo(D+B,z),t.arc(D,z,B,0,2*Math.PI,!0),++j;break;case Xp.CLOSE_PATH:t.closePath(),++j;break;case Xp.CUSTOM:T=G[1],f=G[2];var V=G[3],q=G[4],W=6==G.length?G[5]:void 0;R.geometry=V,R.feature=_,j in k||(k[j]=[]);var Z=k[j];W?W(h,T,f,2,Z):(Z[0]=h[T],Z[1]=h[T+1],Z.length=2),q(Z,R),++j;break;case Xp.DRAW_IMAGE:T=G[1],f=G[2],w=G[3],a=G[4],c=G[5];var Y=G[6],H=G[7],J=G[8],$=G[9],K=G[10],Q=G[11],tt=G[12],nt=G[13],it=G[14],rt=G[15];if(!w&&G.length>=20){g=G[19],y=G[20],m=G[21],b=G[22];var et=this.ia(g,y,m,b);w=et.label,G[3]=w;var ot=G[23];a=(et.anchorX-ot)*this.pixelRatio,G[4]=a;var st=G[24];c=(et.anchorY-st)*this.pixelRatio,G[5]=c,Y=w.height,G[6]=Y,nt=w.width,G[13]=nt}var ut=void 0;G.length>25&&(ut=G[25]);var ht=void 0,ft=void 0,at=void 0;G.length>17?(ht=G[16],ft=G[17],at=G[18]):(ht=Ls,ft=!1,at=!1),K&&F?Q+=L:K||F||(Q-=L);for(var ct=0;T<f;T+=2)if(!(ut&&ut[ct++]<nt/this.pixelRatio)){var vt=[t,n,w,Dt=this.ta(w.width,w.height,h[T],h[T+1],nt,Y,a,c,J,$,Q,tt,e,ht,ft||at,_),H,ft?C:null,at?N:null];if(u){if("none"===it)continue;if("obstacle"===it){u.insert(Dt.declutterBox);continue}var lt=void 0,dt=void 0;if(rt){var pt=f-T;if(!rt[pt]){rt[pt]=vt;continue}if(lt=rt[pt],delete rt[pt],dt=aw(lt),u.collides(dt))continue}if(u.collides(Dt.declutterBox))continue;lt&&(u.insert(dt),this.na.apply(this,lt)),u.insert(Dt.declutterBox)}this.na.apply(this,vt)}++j;break;case Xp.DRAW_CHARS:var wt=G[1],gt=G[2],yt=G[3],mt=G[4];b=G[5];var bt=G[6],Mt=G[7],_t=G[8];m=G[9];var xt=G[10];g=G[11],y=G[12];var Ot=[G[13],G[13]],St=this.textStates[y],jt=St.font,Et=[St.scale[0]*Mt,St.scale[1]*Mt],Tt=void 0;jt in this.$f?Tt=this.$f[jt]:(Tt={},this.$f[jt]=Tt);var Pt=ew(h,wt,gt,2),At=Math.abs(Et[0])*qs(jt,g,Tt);if(mt||At<=Pt){var Ct=this.textStates[y].textAlign,Nt=rw(h,wt,gt,2,g,(Pt-At)*Qp[Ct],bt,Math.abs(Et[0]),qs,jt,Tt,F?0:this.be);t:if(Nt){var kt=[],Lt=void 0,Ft=void 0,Rt=void 0,It=void 0,Gt=void 0;if(m)for(Lt=0,Ft=Nt.length;Lt<Ft;++Lt){Rt=(Gt=Nt[Lt])[4],It=this.createLabel(Rt,y,"",m),a=Gt[2]+(Et[0]<0?-xt:xt),c=yt*It.height+2*(.5-yt)*xt*Et[1]/Et[0]-_t;var Dt=this.ta(It.width,It.height,Gt[0],Gt[1],It.width,It.height,a,c,0,0,Gt[3],Ot,!1,Ls,!1,_);if(u&&u.collides(Dt.declutterBox))break t;kt.push([t,n,It,Dt,1,null,null])}if(b)for(Lt=0,Ft=Nt.length;Lt<Ft;++Lt){Rt=(Gt=Nt[Lt])[4],It=this.createLabel(Rt,y,b,""),a=Gt[2],c=yt*It.height-_t;Dt=this.ta(It.width,It.height,Gt[0],Gt[1],It.width,It.height,a,c,0,0,Gt[3],Ot,!1,Ls,!1,_);if(u&&u.collides(Dt.declutterBox))break t;kt.push([t,n,It,Dt,1,null,null])}u&&u.load(kt.map(aw));for(var zt=0,Ut=kt.length;zt<Ut;++zt)this.na.apply(this,kt[zt])}}++j;break;case Xp.END_GEOMETRY:if(void 0!==o){var Xt=o(_=G[1],S);if(Xt)return Xt}++j;break;case Xp.FILL:I?P++:this._o(t),++j;break;case Xp.MOVE_TO_LINE_TO:for(T=G[1],f=G[2],x=h[T],p=(O=h[T+1])+.5|0,(d=x+.5|0)===v&&p===l||(t.moveTo(x,O),v=d,l=p),T+=2;T<f;T+=2)d=(x=h[T])+.5|0,p=(O=h[T+1])+.5|0,T!=f-2&&d===v&&p===l||(t.lineTo(x,O),v=d,l=p);++j;break;case Xp.SET_FILL_STYLE:C=G,this.Yf=G[2],P&&(this._o(t),P=0,A&&(t.stroke(),A=0)),t.fillStyle=G[1],++j;break;case Xp.SET_STROKE_STYLE:N=G,A&&(t.stroke(),A=0),this.Qf(t,G),++j;break;case Xp.STROKE:I?A++:t.stroke(),++j;break;default:++j}}P&&this._o(t),A&&t.stroke()},t.prototype.execute=function(t,n,i,r,e,o){this.be=r,this.ra(t,n,i,this.instructions,e,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,e){return this.be=i,this.ra(t,1,n,this.hitDetectionInstructions,!0,r,e)},t}(),pw=["Polygon","Circle","LineString","Image","Text","Default"],ww=function(){function t(t,n,i,r,e,o){this.qf=t,this.uh=r,this.bt=i,this.Wf=n,this.ea=o,this.oa={},this.sa=null,this.ua=[1,0,0,1,0,0],this.ha(e)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.ha=function(t){for(var n in t){var i=this.oa[n];void 0===i&&(i={},this.oa[n]=i);var r=t[n];for(var e in r){var o=r[e];i[e]=new dw(this.Wf,this.bt,this.uh,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.oa)for(var i=this.oa[n],r=0,e=t.length;r<e;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o){var s=2*(r=Math.round(r))+1,u=on(this.ua,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.sa;h&&(this.sa=Mo(s,s));var f,a=this.sa;a.canvas.width!==s||a.canvas.height!==s?(a.canvas.width=s,a.canvas.height=s):h||a.clearRect(0,0,s,s),void 0!==this.ea&&(Cn(f=[1/0,1/0,-1/0,-1/0],t),wn(f,n*(this.ea+r),f));var c,v=yw(r);function l(t,n){for(var i=a.getImageData(0,0,s,s).data,u=0,h=v.length;u<h;u++)if(i[v[u]]>0){if(!o||"Image"!==c&&"Text"!==c||-1!==o.indexOf(t)){var f=(v[u]-3)/4,l=r-f%s,d=r-(f/s|0),p=e(t,n,l*l+d*d);if(p)return p}a.clearRect(0,0,s,s);break}}var d,w,g,y,m,b=Object.keys(this.oa).map(Number);for(b.sort(p),d=b.length-1;d>=0;--d){var M=b[d].toString();for(g=this.oa[M],w=pw.length-1;w>=0;--w)if(void 0!==(y=g[c=pw[w]])&&(m=y.executeHitDetection(a,u,i,l,f)))return m}},t.prototype.getClipCoords=function(t){var n=this.qf;if(!n)return null;var i=n[0],r=n[1],e=n[2],o=n[3],s=[i,r,i,o,e,o,e,r];return Gr(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return N(this.oa)},t.prototype.execute=function(t,n,i,r,e,o,s){var u=Object.keys(this.oa).map(Number);u.sort(p),this.qf&&(t.save(),this.clip(t,i));var h,f,a,c,v,l,d=o||pw;for(s&&u.reverse(),h=0,f=u.length;h<f;++h){var w=u[h].toString();for(v=this.oa[w],a=0,c=d.length;a<c;++a){void 0!==(l=v[d[a]])&&l.execute(t,n,i,r,e,s)}}this.qf&&t.restore()},t}(),gw={};function yw(t){if(void 0!==gw[t])return gw[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),e=0;e<=t;++e)for(var o=0;o<=t;++o){var s=e*e+o*o;if(s>i)break;var u=r[s];u||(u=[],r[s]=u),u.push(4*((t+e)*n+(t+o))+3),e>0&&u.push(4*((t-e)*n+(t+o))+3),o>0&&(u.push(4*((t+e)*n+(t-o))+3),e>0&&u.push(4*((t-e)*n+(t-o))+3))}for(var h=[],f=(e=0,r.length);e<f;++e)r[e]&&h.push.apply(h,r[e]);return gw[t]=h,h}var mw=ww,bw=.5;function Mw(t,n,i,r,e,o,s){var u=Mo(t[0]*bw,t[1]*bw);u.imageSmoothingEnabled=!1;for(var h=u.canvas,f=new Kf(u,bw,e,null,s),a=i.length,c=Math.floor(16777215/a),v={},l=1;l<=a;++l){var d=i[l-1],w=d.getStyleFunction()||r;if(r){var g=w(d,o);if(g){Array.isArray(g)||(g=[g]);for(var y="#"+("000000"+(l*c).toString(16)).slice(-6),m=0,b=g.length;m<b;++m){var M=g[m],_=M.getGeometryFunction()(d);if(_&&Hn(e,_.getExtent())){var x=M.clone(),O=x.getFill();O&&O.setColor(y);var S=x.getStroke();S&&(S.setColor(y),S.setLineDash(null)),x.setText(void 0);var j=M.getImage();if(j&&0!==j.getOpacity()){var E=j.getImageSize();if(!E)continue;var T=Mo(E[0],E[1],void 0,{alpha:!1}),P=T.canvas;T.fillStyle=y,T.fillRect(0,0,P.width,P.height),x.setImage(new jc({img:P,imgSize:E,anchor:j.getAnchor(),anchorXUnits:pc,anchorYUnits:pc,offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}var A=x.getZIndex()||0;(k=v[A])||(k={},v[A]=k,k.Polygon=[],k.Circle=[],k.LineString=[],k.Point=[]),k[_.getType().replace("Multi","")].push(_,x)}}}}}for(var C=Object.keys(v).map(Number).sort(p),N=(l=0,C.length);l<N;++l){var k=v[C[l]];for(var L in k){var F=k[L];for(m=0,b=F.length;m<b;m+=2){f.setStyle(F[m+1]);for(var R=0,I=n.length;R<I;++R)f.setTransform(n[R]),f.drawGeometry(F[m])}}}return u.getImageData(0,0,h.width,h.height)}function _w(t,n,i){var r=[];if(i){var e=Math.floor(Math.round(t[0])*bw),o=Math.floor(Math.round(t[1])*bw),s=4*(ei(e,0,i.width-1)+ei(o,0,i.height-1)*i.width),u=i.data[s],h=i.data[s+1],f=i.data[s+2]+256*(h+256*u),a=Math.floor(16777215/n.length);f&&f%a==0&&r.push(n[f/a-1])}return r}var xw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ow=function(t){function n(n){var i=t.call(this,n)||this;return i.fa=i.aa.bind(i),i.ca,i.va=null,i.la=null,i.Rh=-1,i.da=NaN,i.Wh=[1/0,1/0,-1/0,-1/0],i.pa=[1/0,1/0,-1/0,-1/0],i.wa,i.ga=null,i.ya=null,i.ma=null,i.ba=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.Ma=null,i.do=1,i}return xw(n,t),n.prototype.renderWorlds=function(t,n,i){var r=n.extent,e=n.viewState,o=e.center,s=e.resolution,u=e.projection,h=e.rotation,f=u.getExtent(),a=this.getLayer().getSource(),c=n.pixelRatio,v=n.viewHints,l=!(v[Su]||v[ju]),d=this.Ma,p=Math.round(n.size[0]*c),w=Math.round(n.size[1]*c),g=a.getWrapX()&&u.canWrapX(),y=g?Yn(f):null,m=g?Math.ceil((r[2]-f[2])/y)+1:1,b=g?Math.floor((r[0]-f[0])/y):0;do{var M=this.getRenderTransform(o,s,h,c,p,w,b*y);t.execute(d,1,M,h,l,void 0,i)}while(++b<m)},n.prototype._a=function(){if(1!==this.do){var t=Mo(this.context.canvas.width,this.context.canvas.height,Rd);this.Ma=t}else this.Ma=this.context},n.prototype.xa=function(){if(1!==this.do){var t=this.context.globalAlpha;this.context.globalAlpha=this.do,this.context.drawImage(this.Ma.canvas,0,0),this.context.globalAlpha=t,_o(this.Ma),Rd.push(this.Ma.canvas),this.Ma=null}},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this._a(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.xa())},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];rn(this.pixelTransform,1/i,1/i),sn(this.inversePixelTransform,this.pixelTransform);var e=hn(this.pixelTransform);this.useContainer(n,e,this.getBackground(t));var o=this.context,s=o.canvas,u=this.ba,h=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*i),a=Math.round(t.size[1]*i);s.width!=f||s.height!=a?(s.width=f,s.height=a,s.style.transform!==e&&(s.style.transform=e)):this.containerReused||o.clearRect(0,0,f,a),this.preRender(o,t);var c=t.viewState,v=c.projection;this.do=r.opacity,this._a();var l=!1,d=!0;if(r.extent&&this.clipping){var p=kr(r.extent,v);(l=(d=Hn(p,t.extent))&&!bn(p,t.extent))&&this.clipUnrotated(this.Ma,t,p)}return d&&this.renderWorlds(u,t),l&&this.Ma.restore(),this.xa(),this.postRender(o,t),this.wa!==c.rotation&&(this.wa=c.rotation,this.va=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.va&&!this.ca){var i=[this.context.canvas.width,this.context.canvas.height];Qt(this.pixelTransform,i);var r=this.ga,e=this.da,o=this.wa,s=this.ya,u=this.pa,h=this.getLayer(),f=[],a=i[0]*bw,c=i[1]*bw;f.push(this.getRenderTransform(r,e,o,bw,a,c,0).slice());var v=h.getSource(),l=s.getExtent();if(v.getWrapX()&&s.canWrapX()&&!bn(l,u)){for(var d=u[0],p=Yn(l),w=0,g=void 0;d<l[0];)g=p*--w,f.push(this.getRenderTransform(r,e,o,bw,a,c,g).slice()),d+=p;for(w=0,d=u[2];d>l[2];)g=p*++w,f.push(this.getRenderTransform(r,e,o,bw,a,c,g).slice()),d-=p}this.va=Mw(i,f,this.la,h.getStyleFunction(),u,e,o)}n(_w(t,this.la,this.va))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=this;if(this.ba){var u,h=n.viewState.resolution,f=n.viewState.rotation,a=this.getLayer(),c={},v=function(t,n,i){var s=o(t),u=c[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return c[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,a,n);u.geometry=n,u.distanceSq=i}}else{if(0===i)return c[s]=!0,r(t,a,n);e.push(c[s]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},l=[this.ba];return this.declutterExecutorGroup&&l.push(this.declutterExecutorGroup),l.some((function(r){return u=r.forEachFeatureAtCoordinate(t,h,f,i,v,r===s.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map((function(t){return t.value})):null)})),u}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.ba&&t.changed()},n.prototype.aa=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[Su],e=t.viewHints[ju],o=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!s&&e)return this.ca=!0,!0;this.ca=!1;var u=t.extent,h=t.viewState,f=h.projection,a=h.resolution,c=t.pixelRatio,v=n.getRevision(),l=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=ta);var p=h.center.slice(),w=wn(u,l*a),g=w.slice(),y=[w.slice()],m=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!bn(m,t.extent)){var b=Yn(m),_=Math.max(Yn(w)/2,b);w[0]=m[0]-_,w[2]=m[2]+_,ir(p,f);var x=ni(y[0],f);x[0]<m[0]&&x[2]<m[2]?y.push([x[0]+b,x[1],x[2]+b,x[3]]):x[0]>m[0]&&x[2]>m[2]&&y.push([x[0]-b,x[1],x[2]-b,x[3]])}if(this.ready&&this.da==a&&this.Rh==v&&this.ma==d&&bn(this.pa,w))return M(this.Wh,g)||(this.va=null,this.Wh=g),this.ga=p,this.replayGroupChanged=!1,!0;this.ba=null;var O,S=new iw(ia(a,c),w,a,c);this.getLayer().getDeclutter()&&(O=new iw(ia(a,c),w,a,c));var j,E=Pr();if(E){for(var T=0,P=y.length;T<P;++T){var A=Nr(y[T],f);i.loadFeatures(A,Lr(a,f),E)}j=xr(E,f)}else for(T=0,P=y.length;T<P;++T)i.loadFeatures(y[T],a,f);var C=na(a,c),N=!0,k=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,a)),i){var e=this.renderFeature(t,C,i,S,j,O);N=N&&!e}}.bind(this),L=Nr(w,f),F=i.getFeaturesInExtent(L);d&&F.sort(d);for(T=0,P=F.length;T<P;++T)k(F[T]);this.la=F,this.ready=N;var R=S.finish(),I=new mw(w,a,c,i.getOverlaps(),R,n.getRenderBuffer());return O&&(this.declutterExecutorGroup=new mw(w,a,c,i.getOverlaps(),O.finish(),n.getRenderBuffer())),this.da=a,this.Rh=v,this.ma=d,this.Wh=g,this.pa=w,this.ga=p,this.ya=f,this.ba=I,this.va=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,e,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var u=0,h=i.length;u<h;++u)s=ra(r,t,i[u],n,this.fa,e,o)||s;else s=ra(r,t,i,n,this.fa,e,o);return s},n}(Dd),Sw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jw=function(t){function n(n){var i=t.call(this,n)||this;return i.Oa=new Ow(n),i.Sa=n.getImageRatio(),i.ja=[1,0,0,1,0,0],i.Ea=null,i}return Sw(n,t),n.prototype.disposeInternal=function(){this.Oa.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.Oa)return new Promise((function(t){return t([])}));var n=Qt(this.ja,Qt(this.Ea,t.slice()));return this.Oa.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.Oa.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,e=t.viewHints,o=this.Oa,s=t.extent;1!==this.Sa&&Kn(s=s.slice(0),this.Sa);var u=Yn(s)/r,h=Vn(s)/r;if(!e[Su]&&!e[ju]&&!Jn(s)){o.useContainer(null,null);var f=o.context,a=t.layerStatesArray[t.layerIndex];f.globalAlpha=a.opacity;var c=P({},a,{opacity:1}),v=P({},t,{declutterTree:new Ml(9),extent:s,size:[u,h],viewState:P({},t.viewState,{rotation:0}),layerStatesArray:[c],layerIndex:0}),l=!0,d=new bo(s,r,n,f.canvas,(function(t){o.prepareFrame(v)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(v,null)&&(o.renderDeclutter(v),l=!1),t())}));d.addEventListener(F,function(){if(d.getState()===vo){this._t=l?null:d;var t=d.getResolution(),r=d.getPixelRatio(),e=t*n/r;this.renderedResolution=e,this.ja=on(this.ja,u/2,h/2,1/e,-1/e,0,-i.center[0],-i.center[1])}}.bind(this)),d.load()}return this._t&&(this.Ea=t.pixelToCoordinateTransform.slice()),!!this._t},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,e,o){return this.Oa?this.Oa.forEachFeatureAtCoordinate(n,i,r,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,e,o)},n}(Ud),Ew=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tw=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return Ew(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<yn(this.getExtent(),t,n))return r;for(var e=this.flatCoordinates,o=this.stride,s=0,u=e.length;s<u;s+=o){var h=hi(t,n,e[s],e[s+1]);if(h<r){r=h;for(var f=0;f<o;++f)i[f]=e[s+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new _e(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],e=0,o=t.length;e<o;e+=i){var s=new _e(t.slice(e,e+i),n);r.push(s)}return r},n.prototype.getType=function(){return"MultiPoint"},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,e=n.length;r<e;r+=i){if(Mn(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=re(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Yr);function Pw(t,n,i,r,e,o,s){var u,h,f=(i-n)/r;if(1===f)u=n;else if(2===f)u=n,h=e;else if(0!==f){for(var a=t[n],c=t[n+1],v=0,l=[0],p=n+r;p<i;p+=r){var w=t[p],g=t[p+1];v+=Math.sqrt((w-a)*(w-a)+(g-c)*(g-c)),l.push(v),a=w,c=g}var y=e*v,m=d(l,y);m<0?(h=(y-l[-m-2])/(l[-m-1]-l[-m-2]),u=n+(-m-2)*r):u=n+m*r}var b=s>1?s:2,M=o||new Array(b);for(p=0;p<b;++p)M[p]=void 0===u?NaN:void 0===h?t[u+p]:li(t[u+p],t[u+r+p],h);return M}function Aw(t,n,i,r,e,o){if(i==n)return null;var s;if(e<t[n+r-1])return o?((s=t.slice(n,n+r))[r-1]=e,s):null;if(t[i-1]<e)return o?((s=t.slice(i-r,i))[r-1]=e,s):null;if(e==t[n+r-1])return t.slice(n,n+r);for(var u=n/r,h=i/r;u<h;){var f=u+h>>1;e<t[(f+1)*r-1]?h=f:u=f+1}var a=t[u*r-1];if(e==a)return t.slice((u-1)*r,(u-1)*r+r);var c=(e-a)/(t[(u+1)*r-1]-a);s=[];for(var v=0;v<r-1;++v)s.push(li(t[(u-1)*r+v],t[u*r+v],c));return s.push(e),s}function Cw(t,n,i,r,e,o,s){if(s)return Aw(t,n,i[i.length-1],r,e,o);var u;if(e<t[r-1])return o?((u=t.slice(0,r))[r-1]=e,u):null;if(t[t.length-1]<e)return o?((u=t.slice(t.length-r))[r-1]=e,u):null;for(var h=0,f=i.length;h<f;++h){var a=i[h];if(n!=a){if(e<t[n+r-1])return null;if(e<=t[a-1])return Aw(t,n,a,r,e,!1);n=a}}return null}var Nw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kw=function(t){function n(n,i){var r=t.call(this)||this;return r.Ta=null,r.Pa=-1,r.rt=-1,r.et=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Nw(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?m(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<yn(this.getExtent(),t,n)?r:(this.et!=this.getRevision()&&(this.rt=Math.sqrt(Jr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.et=this.getRevision()),Qr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.rt,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return Pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=At&&this.layout!=Ct)return null;var i=void 0!==n&&n;return Aw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return Pw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return ew(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.Pa!=this.getRevision()&&(this.Ta=this.getCoordinateAt(.5,this.Ta),this.Pa=this.getRevision()),this.Ta},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,Tt)},n.prototype.getType=function(){return"LineString"},n.prototype.intersectsExtent=function(t){return Ae(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=re(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Yr),Lw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fw=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.ot=[],e.rt=-1,e.et=-1,Array.isArray(n[0]))e.setCoordinates(n,i);else if(void 0!==i&&r)e.setFlatCoordinates(i,n),e.ot=r;else{for(var o=e.getLayout(),s=n,u=[],h=[],f=0,a=s.length;f<a;++f){var c=s[f];0===f&&(o=c.getLayout()),m(u,c.getFlatCoordinates()),h.push(u.length)}e.setFlatCoordinates(o,u),e.ot=h}return e}return Lw(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ot.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.ot.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<yn(this.getExtent(),t,n)?r:(this.et!=this.getRevision()&&(this.rt=Math.sqrt($r(this.flatCoordinates,0,this.ot,this.stride,0)),this.et=this.getRevision()),te(this.flatCoordinates,0,this.ot,this.stride,this.rt,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=At&&this.layout!=Ct||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,e=void 0!==i&&i;return Cw(this.flatCoordinates,0,this.ot,this.stride,t,r,e)},n.prototype.getCoordinates=function(){return de(this.flatCoordinates,0,this.ot,this.stride)},n.prototype.getEnds=function(){return this.ot},n.prototype.getLineString=function(t){return t<0||this.ot.length<=t?null:new kw(this.flatCoordinates.slice(0===t?0:this.ot[t-1],this.ot[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ot,i=this.layout,r=[],e=0,o=0,s=n.length;o<s;++o){var u=n[o],h=new kw(t.slice(e,u),i);r.push(h),e=u}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.ot,e=this.stride,o=0,s=r.length;o<s;++o){var u=r[o];m(t,Pw(n,i,u,e,.5)),i=u}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ue(this.flatCoordinates,0,this.ot,this.stride,t,i,0,r),new n(i,Tt,r)},n.prototype.getType=function(){return"MultiLineString"},n.prototype.intersectsExtent=function(t){return Ce(this.flatCoordinates,0,this.ot,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ot);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Yr);function Rw(t,n,i,r){for(var e=[],o=[1/0,1/0,-1/0,-1/0],s=0,u=i.length;s<u;++s){var h=i[s];o=En(t,n,h[0],r),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=h[h.length-1]}return e}var Iw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gw=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.Aa=[],e.Ca=-1,e.Na=null,e.rt=-1,e.et=-1,e.ht=-1,e.ft=null,!r&&!Array.isArray(n[0])){for(var o=e.getLayout(),s=n,u=[],h=[],f=0,a=s.length;f<a;++f){var c=s[f];0===f&&(o=c.getLayout());for(var v=u.length,l=c.getEnds(),d=0,p=l.length;d<p;++d)l[d]+=v;m(u,c.getFlatCoordinates()),h.push(l)}i=o,n=u,r=h}return void 0!==i&&r?(e.setFlatCoordinates(i,n),e.Aa=r):e.setCoordinates(n,i),e}return Iw(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;m(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,e=(n=t.getEnds().slice()).length;r<e;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.Aa.push();this.Aa.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.Aa.length,i=new Array(t),r=0;r<t;++r)i[r]=this.Aa[r].slice();var e=new n(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e},n.prototype.closestPointXY=function(t,n,i,r){return r<yn(this.getExtent(),t,n)?r:(this.et!=this.getRevision()&&(this.rt=Math.sqrt(Kr(this.flatCoordinates,0,this.Aa,this.stride,0)),this.et=this.getRevision()),ne(this.getOrientedFlatCoordinates(),0,this.Aa,this.stride,this.rt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return je(this.getOrientedFlatCoordinates(),0,this.Aa,this.stride,t,n)},n.prototype.getArea=function(){return ye(this.getOrientedFlatCoordinates(),0,this.Aa,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?ze(n=this.getOrientedFlatCoordinates().slice(),0,this.Aa,this.stride,t):n=this.flatCoordinates,pe(n,0,this.Aa,this.stride)},n.prototype.getEndss=function(){return this.Aa},n.prototype.getFlatInteriorPoints=function(){if(this.Ca!=this.getRevision()){var t=Rw(this.flatCoordinates,0,this.Aa,this.stride);this.Na=Te(this.getOrientedFlatCoordinates(),0,this.Aa,this.stride,t),this.Ca=this.getRevision()}return this.Na},n.prototype.getInteriorPoints=function(){return new Tw(this.getFlatInteriorPoints().slice(),At)},n.prototype.getOrientedFlatCoordinates=function(){if(this.ht!=this.getRevision()){var t=this.flatCoordinates;Ge(t,0,this.Aa,this.stride)?this.ft=t:(this.ft=t.slice(),this.ft.length=ze(this.ft,0,this.Aa,this.stride)),this.ht=this.getRevision()}return this.ft},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ve(this.flatCoordinates,0,this.Aa,this.stride,Math.sqrt(t),i,0,r),new n(i,Tt,r)},n.prototype.getPolygon=function(t){if(t<0||this.Aa.length<=t)return null;var n;if(0===t)n=0;else{var i=this.Aa[t-1];n=i[i.length-1]}var r=this.Aa[t].slice(),e=r[r.length-1];if(0!==n)for(var o=0,s=r.length;o<s;++o)r[o]-=n;return new Ve(this.flatCoordinates.slice(n,e),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.Aa,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o].slice(),h=u[u.length-1];if(0!==e)for(var f=0,a=u.length;f<a;++f)u[f]-=e;var c=new Ve(n.slice(e,h),t,u);r.push(c),e=h}return r},n.prototype.getType=function(){return"MultiPolygon"},n.prototype.intersectsExtent=function(t){return Le(this.getOrientedFlatCoordinates(),0,this.Aa,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=oe(this.flatCoordinates,0,t,this.stride,this.Aa);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(Yr),Dw=[1,0,0,1,0,0],zw=function(){function t(t,n,i,r,e){this.styleFunction,this.q,this.N=e,this.ka=t,this.La=n,this.Na=null,this.Fa=null,this.ot=i,this.Ra=r}return t.prototype.get=function(t){return this.Ra[t]},t.prototype.getExtent=function(){return this.q||(this.q="Point"===this.ka?jn(this.La):En(this.La,0,this.La.length,2)),this.q},t.prototype.getFlatInteriorPoint=function(){if(!this.Na){var t=zn(this.getExtent());this.Na=Ee(this.La,0,this.ot,2,t,0)}return this.Na},t.prototype.getFlatInteriorPoints=function(){if(!this.Na){var t=Rw(this.La,0,this.ot,2);this.Na=Te(this.La,0,this.ot,2,t)}return this.Na},t.prototype.getFlatMidpoint=function(){return this.Fa||(this.Fa=Pw(this.La,0,this.La.length,2,.5)),this.Fa},t.prototype.getFlatMidpoints=function(){if(!this.Fa){this.Fa=[];for(var t=this.La,n=0,i=this.ot,r=0,e=i.length;r<e;++r){var o=i[r],s=Pw(t,n,o,2,.5);m(this.Fa,s),n=o}}return this.Fa},t.prototype.getId=function(){return this.N},t.prototype.getOrientedFlatCoordinates=function(){return this.La},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Ra},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.ka},t.prototype.transform=function(t){var n=(t=pr(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Vn(i)/Vn(n);on(Dw,i[0],i[3],r,-r,0,0,0),Gr(this.La,0,this.La.length,2,Dw,this.La)}},t.prototype.getEnds=function(){return this.ot},t}();function Uw(t){var n=t.getType();switch(n){case"Point":return new _e(t.getFlatCoordinates());case"MultiPoint":return new Tw(t.getFlatCoordinates(),Tt);case"LineString":return new kw(t.getFlatCoordinates(),Tt);case"MultiLineString":return new Fw(t.getFlatCoordinates(),Tt,t.getEnds());case"Polygon":var i=t.getFlatCoordinates(),r=t.getEnds(),e=Ue(i,r);return e.length>1?new Gw(i,Tt,e):new Ve(i,Tt,r);default:throw new Error("Invalid geometry type:"+n)}}zw.prototype.getEndss=zw.prototype.getEnds,zw.prototype.getFlatCoordinates=zw.prototype.getOrientedFlatCoordinates;var Xw=zw;var Bw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vw="renderOrder",qw=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(i=t.call(this,e)||this).Ia=void 0!==r.declutter&&r.declutter,i.ea=void 0!==r.renderBuffer?r.renderBuffer:100,i.L=null,i.R=void 0,i.setStyle(r.style),i.Ga=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.Da=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return Bw(n,t),n.prototype.getDeclutter=function(){return this.Ia},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.ea},n.prototype.getRenderOrder=function(){return this.get(Vw)},n.prototype.getStyle=function(){return this.L},n.prototype.getStyleFunction=function(){return this.R},n.prototype.getUpdateWhileAnimating=function(){return this.Ga},n.prototype.getUpdateWhileInteracting=function(){return this.Da},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Ml(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Vw,t)},n.prototype.setStyle=function(t){this.L=void 0!==t?t:Cc,this.R=null===t?void 0:Pc(this.L),this.changed()},n}(as),Ww=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zw=function(t){function n(n){return t.call(this,n)||this}return Ww(n,t),n.prototype.createRenderer=function(){return new Ow(this)},n}(qw);function Yw(t,n,i){for(var r,e,o,s,u,h,f=[],a=t(0),c=t(1),v=n(a),l=n(c),d=[c,a],p=[l,v],w=[1,0],g={},y=1e5;--y>0&&w.length>0;)o=w.pop(),a=d.pop(),v=p.pop(),(h=o.toString())in g||(f.push(v[0],v[1]),g[h]=!0),s=w.pop(),c=d.pop(),l=p.pop(),ui((e=n(r=t(u=(o+s)/2)))[0],e[1],v[0],v[1],l[0],l[1])<i?(f.push(l[0],l[1]),g[h=s.toString()]=!0):(w.push(s,u,u,o),p.push(l,e,e,v),d.push(c,r,r,a));return f}function Hw(t,n,i,r,e){return Yw((function(r){return[t,n+(i-n)*r]}),Or(pr("EPSG:4326"),r),e)}function Jw(t,n,i,r,e){return Yw((function(r){return[n+(i-n)*r,t]}),Or(pr("EPSG:4326"),r),e)}var $w=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kw=new Ec({color:"rgba(0,0,0,0.2)"}),Qw=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],tg=function(t){function n(n){var i=this,r=n||{},e=P({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(i=t.call(this,e)||this).ti=null,i.za=1/0,i.Ua=1/0,i.Xa=-1/0,i.Ba=-1/0,i.Va=1/0,i.qa=1/0,i.Wa=-1/0,i.Za=-1/0,i.Ya=void 0!==r.targetSize?r.targetSize:100,i.Ha=void 0!==r.maxLines?r.maxLines:100,i.Ja=[],i.$a=[],i.Ka=void 0!==r.strokeStyle?r.strokeStyle:Kw,i.Qa=void 0,i.tc=void 0,i.nc=null,i.ic=null,i.rc=null,i.ec=null,i.oc=null,i.sc=null,i.uc=null,r.showLabels&&(i.hc=null==r.lonLabelFormatter?Zi.bind(i,"EW"):r.lonLabelFormatter,i.fc=null==r.latLabelFormatter?Zi.bind(i,"NS"):r.latLabelFormatter,i.ac=null==r.lonLabelPosition?0:r.lonLabelPosition,i.cc=null==r.latLabelPosition?1:r.latLabelPosition,i.vc=new Lc({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new Ic({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new lc({color:"rgba(0,0,0,1)"}),stroke:new Ec({color:"rgba(255,255,255,1)",width:3})})}),i.lc=function(t){var n=t.get("graticule_label");return this.vc.getText().setText(n),this.vc}.bind(i),i.dc=new Lc({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new Ic({font:"12px Calibri,sans-serif",textAlign:"right",fill:new lc({color:"rgba(0,0,0,1)"}),stroke:new Ec({color:"rgba(255,255,255,1)",width:3})})}),i.wc=function(t){var n=t.get("graticule_label");return this.dc.getText().setText(n),this.dc}.bind(i),i.sc=[],i.uc=[],i.addEventListener(es,i.gc.bind(i))),i.yc=void 0!==r.intervals?r.intervals:Qw,i.setSource(new Jl({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new at,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.mc=[],i.bc=new Lc({stroke:i.Ka}),i.Mc=null,i.Wh=null,i.da=null,i.setRenderOrder(null),i}return $w(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.ti&&this.getSource().getWrapX()&&ni(i,this.ti),this.Mc&&(Pn(this.Mc,i,n)?i=this.Mc.slice():this.getSource().removeLoadedExtent(this.Mc)),[i]},n.prototype.loaderFunction=function(t,n,i){this.Mc=t;var r=this.getSource(),e=qn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.Wh&&Tn(this.Wh,e)&&this.da===n||(this.Wh=e,this.da=n,Jn(e)))){var o=zn(e),s=n*n/4;(!this.ti||!_r(this.ti,i))&&this._c(i),this.xc(e,o,n,s);var u,h=this.Ja.length+this.$a.length;for(this.sc&&(h+=this.Ja.length),this.uc&&(h+=this.$a.length);h>this.mc.length;)u=new Et,this.mc.push(u);var f=r.getFeaturesCollection();f.clear();var a,c,v=0;for(a=0,c=this.Ja.length;a<c;++a)(u=this.mc[v++]).setGeometry(this.Ja[a]),u.setStyle(this.bc),f.push(u);for(a=0,c=this.$a.length;a<c;++a)(u=this.mc[v++]).setGeometry(this.$a[a]),u.setStyle(this.bc),f.push(u)}},n.prototype.Oc=function(t,n,i,r,e,o){var s=this.Sc(t,n,i,r,o);if(Hn(s.getExtent(),e)){if(this.sc){var u=this.hc(t);o in this.sc?this.sc[o].text=u:this.sc[o]={geom:new _e([]),text:u}}this.Ja[o++]=s}return o},n.prototype.jc=function(t,n,i,r,e,o){var s=this.Ec(t,n,i,r,o);if(Hn(s.getExtent(),e)){if(this.uc){var u=this.fc(t);o in this.uc?this.uc[o].text=u:this.uc[o]={geom:new _e([]),text:u}}this.$a[o++]=s}return o},n.prototype.gc=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,e=t.frameState.extent,o=zn(e),s=e;if(n){var u=r[0]*i,h=r[1]*i;s=[o[0]-u/2,o[1]-h/2,o[0]+u/2,o[1]+h/2]}var f=0,a=0,c=this.cc<.5,v=this.ti.getExtent(),l=Yn(v);this.getSource().getWrapX()&&this.ti.canWrapX()&&!bn(v,e)&&(f=Math.floor((e[0]-v[0])/l),a=Math.ceil((e[2]-v[2])/l),c=c!==Math.abs(n)>Math.PI/2);for(var d=oa(t),p=f;p<=a;++p){var w=this.Ja.length+this.$a.length,g=void 0,y=void 0,m=void 0,b=void 0;if(this.sc)for(y=0,m=this.sc.length;y<m;++y){var M=this.Ja[y];if(n||0!==p)(_=M.clone()).translate(p*l,0),_.rotate(-n,o),(b=this.Tc(_,s,y)).rotate(n,o);else b=this.Tc(M,e,y);(g=this.mc[w++]).setGeometry(b),g.set("graticule_label",this.sc[y].text),d.drawFeature(g,this.lc(g))}if(this.uc&&(p===f&&c||p===a&&!c))for(y=0,m=this.$a.length;y<m;++y){var _;M=this.$a[y];if(n||0!==p)(_=M.clone()).translate(p*l,0),_.rotate(-n,o),(b=this.Pc(_,s,y)).rotate(n,o);else b=this.Pc(M,e,y);(g=this.mc[w++]).setGeometry(b),g.set("graticule_label",this.uc[y].text),d.drawFeature(g,this.wc(g))}}},n.prototype.xc=function(t,n,i,r){var e=this.Ac(i);if(-1==e)return this.Ja.length=0,this.$a.length=0,this.sc&&(this.sc.length=0),void(this.uc&&(this.uc.length=0));var o=!1,s=this.ti.getExtent(),u=Yn(s);this.getSource().getWrapX()&&this.ti.canWrapX()&&!bn(s,t)&&(Yn(t)>=u?(t[0]=s[0],t[2]=s[2]):o=!0);var h=[ei(n[0],this.Wa,this.Va),ei(n[1],this.Za,this.qa)],f=this.tc(h);isNaN(f[1])&&(f[1]=Math.abs(this.za)>=Math.abs(this.Xa)?this.za:this.Xa);var a,c,v,l,d=ei(f[0],this.Ba,this.Ua),p=ei(f[1],this.Xa,this.za),w=this.Ha,g=t;o||(g=[ei(t[0],this.Wa,this.Va),ei(t[1],this.Za,this.qa),ei(t[2],this.Wa,this.Va),ei(t[3],this.Za,this.qa)]);var y=ti(g,this.tc,void 0,8),m=y[3],b=y[2],M=y[1],_=y[0];if(o||(mn(g,this.ic)&&(_=this.Ba,M=this.Xa),mn(g,this.rc)&&(b=this.Ua,M=this.Xa),mn(g,this.ec)&&(_=this.Ba,m=this.za),mn(g,this.oc)&&(b=this.Ua,m=this.za),m=ei(m,p,this.za),b=ei(b,d,this.Ua),M=ei(M,this.Xa,p),_=ei(_,this.Ba,d)),l=ei(d=Math.floor(d/e)*e,this.Ba,this.Ua),c=this.Oc(l,M,m,r,t,0),a=0,o)for(;(l-=e)>=_&&a++<w;)c=this.Oc(l,M,m,r,t,c);else for(;l!=this.Ba&&a++<w;)l=Math.max(l-e,this.Ba),c=this.Oc(l,M,m,r,t,c);if(l=ei(d,this.Ba,this.Ua),a=0,o)for(;(l+=e)<=b&&a++<w;)c=this.Oc(l,M,m,r,t,c);else for(;l!=this.Ua&&a++<w;)l=Math.min(l+e,this.Ua),c=this.Oc(l,M,m,r,t,c);for(this.Ja.length=c,this.sc&&(this.sc.length=c),v=ei(p=Math.floor(p/e)*e,this.Xa,this.za),c=this.jc(v,_,b,r,t,0),a=0;v!=this.Xa&&a++<w;)v=Math.max(v-e,this.Xa),c=this.jc(v,_,b,r,t,c);for(v=ei(p,this.Xa,this.za),a=0;v!=this.za&&a++<w;)v=Math.min(v+e,this.za),c=this.jc(v,_,b,r,t,c);this.$a.length=c,this.uc&&(this.uc.length=c)},n.prototype.Ac=function(t){for(var n=this.nc[0],i=this.nc[1],r=-1,e=Math.pow(this.Ya*t,2),o=[],s=[],u=0,h=this.yc.length;u<h;++u){var f=ei(this.yc[u]/2,0,90),a=ei(i,-90+f,90-f);if(o[0]=n-f,o[1]=a-f,s[0]=n+f,s[1]=a+f,this.Qa(o,o),this.Qa(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=e)break;r=this.yc[u]}return r},n.prototype.Sc=function(t,n,i,r,e){var o=Hw(t,n,i,this.ti,r),s=this.Ja[e];return s?(s.setFlatCoordinates(Tt,o),s.changed()):(s=new kw(o,Tt),this.Ja[e]=s),s},n.prototype.Tc=function(t,n,i){var r=t.getFlatCoordinates(),e=1,o=r.length-1;r[e]>r[o]&&(e=o,o=1);var s=Math.max(n[1],r[e]),u=Math.min(n[3],r[o]),h=ei(n[1]+Math.abs(n[1]-n[3])*this.ac,s,u),f=[r[e-1]+(r[o-1]-r[e-1])*(h-r[e])/(r[o]-r[e]),h],a=this.sc[i].geom;return a.setCoordinates(f),a},n.prototype.getMeridians=function(){return this.Ja},n.prototype.Ec=function(t,n,i,r,e){var o=Jw(t,n,i,this.ti,r),s=this.$a[e];return s?(s.setFlatCoordinates(Tt,o),s.changed()):s=new kw(o,Tt),s},n.prototype.Pc=function(t,n,i){var r=t.getFlatCoordinates(),e=0,o=r.length-2;r[e]>r[o]&&(e=o,o=0);var s=Math.max(n[0],r[e]),u=Math.min(n[2],r[o]),h=ei(n[0]+Math.abs(n[0]-n[2])*this.cc,s,u),f=[h,r[e+1]+(r[o+1]-r[e+1])*(h-r[e])/(r[o]-r[e])],a=this.uc[i].geom;return a.setCoordinates(f),a},n.prototype.getParallels=function(){return this.$a},n.prototype._c=function(t){var n=pr("EPSG:4326"),i=t.getWorldExtent();this.za=i[3],this.Ua=i[2],this.Xa=i[1],this.Ba=i[0];var r=Or(t,n);if(this.Ba<this.Ua)this.tc=r;else{var e=this.Ba+this.Ua/2;this.Ua+=360,this.tc=function(t,n,i){for(var o=i||2,s=r(t,n,o),u=0,h=s.length;u<h;u+=o)s[u]<e&&(s[u]+=360);return s}}this.Qa=Or(n,t);var o=ti([this.Ba,this.Xa,this.Ua,this.za],this.Qa,void 0,8);this.Wa=o[0],this.Va=o[2],this.Za=o[1],this.qa=o[3],this.ic=this.Qa([this.Ba,this.Xa]),this.rc=this.Qa([this.Ua,this.Xa]),this.ec=this.Qa([this.Ba,this.za]),this.oc=this.Qa([this.Ua,this.za]),this.nc=this.tc(zn(t.getExtent())),isNaN(this.nc[1])&&(this.nc[1]=Math.abs(this.za)>=Math.abs(this.Xa)?this.za:this.Xa),this.ti=t},n}(Zw),ng=new Uint8Array(4),ig=function(){function t(t,n){this.Us=t;var i=t.getGL();this.ps=i.createTexture(),this.Cc=i.createFramebuffer(),this.C=n||[1,1],this.P=new Uint8Array(0),this.Nc=!0,this.kc()}return t.prototype.setSize=function(t){M(t,this.C)||(this.C[0]=t[0],this.C[1]=t[1],this.kc())},t.prototype.getSize=function(){return this.C},t.prototype.clearCachedData=function(){this.Nc=!0},t.prototype.readAll=function(){if(this.Nc){var t=this.C,n=this.Us.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.Cc),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.P),this.Nc=!1}return this.P},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.C[0]||n>=this.C[1])return ng[0]=0,ng[1]=0,ng[2]=0,ng[3]=0,ng;this.readAll();var i=Math.floor(t)+(this.C[1]-Math.floor(n)-1)*this.C[0];return ng[0]=this.P[4*i],ng[1]=this.P[4*i+1],ng[2]=this.P[4*i+2],ng[3]=this.P[4*i+3],ng},t.prototype.getTexture=function(){return this.ps},t.prototype.getFramebuffer=function(){return this.Cc},t.prototype.kc=function(){var t=this.C,n=this.Us.getGL();this.ps=this.Us.createTexture(t,null,this.ps),n.bindFramebuffer(n.FRAMEBUFFER,this.Cc),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.ps,0),this.P=new Uint8Array(t[0]*t[1]*4)},t}();var rg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eg=function(t){function n(n,i){var r=this,e=i.uniforms||{},s=[1,0,0,1,0,0];e[fv]=s,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).ready=!1,r.Lc=-1,r.Fc=new $c(Bc,Wc),r.Rc=new $c(Bc,Wc),r.Ic=new $c(Vc,Wc),r.Tu=i.vertexShader,r.Pu=i.fragmentShader,r.Eu,r.Gc=!(!i.hitFragmentShader||!i.hitVertexShader),r.Dc=i.hitVertexShader,r.zc=i.hitFragmentShader,r.Uc;var u=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:pv.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:pv.FLOAT},{name:"a_index",size:1,type:pv.FLOAT}].concat(u),r.hitDetectionAttributes=[{name:"a_position",size:2,type:pv.FLOAT},{name:"a_index",size:1,type:pv.FLOAT},{name:"a_hitColor",size:4,type:pv.FLOAT},{name:"a_featureUid",size:1,type:pv.FLOAT}].concat(u),r.customAttributes=i.attributes?i.attributes:[],r.Li=[1/0,1/0,-1/0,-1/0],r.Xc=s,r.Bc=[1,0,0,1,0,0],r.Vc=[1,0,0,1,0,0],r.qc=new Float32Array(0),r.Wc=new Float32Array(0),r.Zc,r.Yc=0,r.Hc=function(){var t='const e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1,n=arguments.length;e<n;++e){const n=arguments[e];if(null!=n)for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";n.indexOf("firefox");-1!==n.indexOf("safari")&&-1==n.indexOf("chrom")&&(n.indexOf("version/15.4")>=0||n.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==n.indexOf("webkit")&&n.indexOf("edge"),n.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(e){}}(),new Array(6);const t="GENERATE_BUFFERS",o=[],r={vertexPosition:0,indexPosition:0};function i(e,n,t,o,r){e[n+0]=t,e[n+1]=o,e[n+2]=r}function s(e,n,t,s,f,c){const l=3+f,a=e[n+0],u=e[n+1],d=o;d.length=f;for(let t=0;t<d.length;t++)d[t]=e[n+2+t];let g=c?c.vertexPosition:0,x=c?c.indexPosition:0;const h=g/l;return i(t,g,a,u,0),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,1),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,2),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,3),d.length&&t.set(d,g+3),g+=l,s[x++]=h,s[x++]=h+1,s[x++]=h+3,s[x++]=h+1,s[x++]=h+2,s[x++]=h+3,r.vertexPosition=g,r.indexPosition=x,r}const f=self;f.onmessage=n=>{const o=n.data;if(o.type===t){const n=3,t=2,r=o.customAttributesCount,i=t+r,c=new Float32Array(o.renderInstructions),l=c.length/i,a=4*l*(r+n),u=new Uint32Array(6*l),d=new Float32Array(a);let g;for(let e=0;e<c.length;e+=i)g=s(c,e,d,u,r,g);const x=e({vertexBuffer:d.buffer,indexBuffer:u.buffer,renderInstructions:c.buffer},o);f.postMessage(x,[d.buffer,u.buffer,c.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),r.Hc.addEventListener("message",function(t){var n=t.data;if(n.type===_v){var i=n.projectionTransform;n.hitDetection?(this.Rc.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Rc)):(this.Fc.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Fc)),this.Ic.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.Ic),this.Bc=i,sn(this.Vc,this.Bc),n.hitDetection?this.Wc=new Float32Array(t.data.renderInstructions):(this.qc=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.Yc&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.Jc={},r.$c=0;var h=r.getLayer().getSource();return r.Kc=[H(h,Ul,r.Qc,r),H(h,Xl,r.tv,r),H(h,Vl,r.nv,r),H(h,Bl,r.iv,r)],h.forEachFeature(function(t){this.Jc[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.$c++}.bind(r)),r}return rg(n,t),n.prototype.afterHelperCreated=function(){this.Eu=this.helper.getProgram(this.Pu,this.Tu),this.Gc&&(this.Uc=this.helper.getProgram(this.zc,this.Dc),this.Zc=new ig(this.helper))},n.prototype.Qc=function(t){var n=t.feature;this.Jc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.$c++},n.prototype.tv=function(t){var n=t.feature;this.Jc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.nv=function(t){var n=t.feature;delete this.Jc[o(n)],this.$c--},n.prototype.iv=function(){this.Jc={},this.$c=0},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState.projection,r=this.getLayer().getSource().getWrapX()&&i.canWrapX(),e=i.getExtent(),o=t.extent,s=r?Yn(e):null,u=r?Math.ceil((o[2]-e[2])/s)+1:1,h=r?Math.floor((o[0]-e[0])/s):0,f=h,a=this.Ic.getSize();do{this.helper.makeProjectionTransform(t,this.Xc),en(this.Xc,f*s,0),Jt(this.Xc,this.Vc),this.helper.applyUniforms(t),this.helper.drawElements(0,a)}while(++f<u);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var c=this.helper.getCanvas();return this.Gc&&(this.renderHitDetection(t,h,u,s),this.Zc.clearCachedData()),this.postRender(n,t),c},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,e=!t.viewHints[Su]&&!t.viewHints[ju],o=!Tn(this.Li,t.extent),s=this.Lc<i.getRevision();if(s&&(this.Lc=i.getRevision()),e&&(o||s)){var u=r.projection,h=r.resolution,f=n instanceof qw?n.getRenderBuffer():0,a=wn(t.extent,f*h);i.loadFeatures(a,h,u),this.rv(t),this.Li=t.extent.slice()}return this.helper.useProgram(this.Eu),this.helper.prepareDraw(t),this.helper.bindBuffer(this.Fc),this.helper.bindBuffer(this.Ic),this.helper.enableAttributes(this.attributes),!0},n.prototype.rv=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,e=(2+this.customAttributes.length)*this.$c;if(this.qc&&this.qc.length===e||(this.qc=new Float32Array(e)),this.Gc){var o=(7+this.customAttributes.length)*this.$c;this.Wc&&this.Wc.length===o||(this.Wc=new Float32Array(o))}var s,u,h,f,a,c=[],v=[],l=0,d=0;for(var p in this.Jc)if((r=(i=this.Jc[p]).geometry)&&"Point"===r.getType()){c[0]=r.getFlatCoordinates()[0],c[1]=r.getFlatCoordinates()[1],Qt(n,c),u=d+6,h=void 0,f=void 0,a=void 0,f=256,a=255,(h=v||[])[0]=Math.floor(u/f/f/f)/a,h[1]=Math.floor(u/f/f)%f/a,h[2]=Math.floor(u/f)%f/a,h[3]=u%f/a,s=h,this.qc[l++]=c[0],this.qc[l++]=c[1],this.Gc&&(this.Wc[d++]=c[0],this.Wc[d++]=c[1],this.Wc[d++]=s[0],this.Wc[d++]=s[1],this.Wc[d++]=s[2],this.Wc[d++]=s[3],this.Wc[d++]=Number(p));for(var w=void 0,g=0;g<this.customAttributes.length;g++)w=this.customAttributes[g].callback(i.feature,i.properties),this.qc[l++]=w,this.Gc&&(this.Wc[d++]=w)}var y={type:_v,renderInstructions:this.qc.buffer,customAttributesCount:this.customAttributes.length};if(y.projectionTransform=n,y.generateBuffersRun=++this.Yc,this.ready=!1,this.Hc.postMessage(y,[this.qc.buffer]),this.qc=null,this.Gc){var m={type:_v,renderInstructions:this.Wc.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=n,m.hitDetection=!0,this.Hc.postMessage(m,[this.Wc.buffer]),this.Wc=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){if(Ot(this.Gc,66),this.Wc){var o=Qt(n.coordinateToPixelTransform,t.slice()),s=this.Zc.readPixel(o[0]/2,o[1]/2),u=function(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+Math.round(t[3]*r)}([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),h=this.Wc[u],f=Math.floor(h).toString(),a=this.getLayer().getSource().getFeatureByUid(f);return a?r(a,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t,n,i,r){if(this.Rc.getSize()){var e=n;this.Zc.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Uc),this.helper.prepareDrawToRenderTarget(t,this.Zc,!0),this.helper.bindBuffer(this.Rc),this.helper.bindBuffer(this.Ic),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.Xc),en(this.Xc,e*r,0),Jt(this.Xc,this.Vc),this.helper.applyUniforms(t);var o=this.Ic.getSize();this.helper.drawElements(0,o)}while(++e<i)}},n.prototype.disposeInternal=function(){this.Hc.terminate(),this.qs=null,this.Kc.forEach((function(t){$(t)})),this.Kc=null,t.prototype.disposeInternal.call(this)},n}(Ov),og=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sg="blur",ug="gradient",hg="radius",fg=["#00f","#0ff","#0f0","#ff0","#f00"];var ag=function(t){function n(n){var i=this,r=n||{},e=P({},r);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(i=t.call(this,e)||this).ev=null,i.addChangeListener(ug,i.ov),i.setGradient(r.gradient?r.gradient:fg),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.sv="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return og(n,t),n.prototype.getBlur=function(){return this.get(sg)},n.prototype.getGradient=function(){return this.get(ug)},n.prototype.getRadius=function(){return this.get(hg)},n.prototype.ov=function(){this.ev=function(t){for(var n=1,i=256,r=Mo(n,i),e=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),s=0,u=t.length;s<u;++s)e.addColorStop(s*o,t[s]);return r.fillStyle=e,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(sg,t)},n.prototype.setGradient=function(t){this.set(ug,t)},n.prototype.setRadius=function(t){this.set(hg,t)},n.prototype.createRenderer=function(){return new eg(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.sv(t);return void 0!==n?ei(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(hg)+this.get(sg))}.bind(this),u_blurSlope:function(){return this.get(hg)/Math.max(1,this.get(sg))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.ev}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(qw),cg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vg=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.imageRatio,(i=t.call(this,e)||this).uv=void 0!==r.imageRatio?r.imageRatio:1,i}return cg(n,t),n.prototype.getImageRatio=function(){return this.uv},n.prototype.createRenderer=function(){return new jw(this)},n}(qw),lg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dg="addfeatures",pg=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=e,o}return lg(n,t),n}(c),wg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:O})||this).on,i.once,i.un,i.hv=!1,i.fv=[];for(var e=r.formatConstructors?r.formatConstructors:[],o=0,s=e.length;o<s;++o){var u=e[o];"function"==typeof u&&(u=new u),i.fv.push(u),i.hv=i.hv||"arraybuffer"===u.getType()}return i.ti=r.projection?pr(r.projection):null,i.av=null,i.cv=r.source||null,i.target=r.target?r.target:null,i}return lg(n,t),n.prototype.vv=function(t,n){var i,r=n.target.result,e=this.getMap(),o=this.ti;o||(o=e.getView().getProjection());for(var s=this.fv,u=0,h=s.length;u<h;++u){var f=s[u],a=r;this.hv&&"arraybuffer"!==f.getType()&&(void 0===i&&(i=(new TextDecoder).decode(r)),a=i);var c=this.lv(f,a,{featureProjection:o});if(c&&c.length>0){this.cv&&(this.cv.clear(),this.cv.addFeatures(c)),this.dispatchEvent(new pg(dg,t,c,o));break}}},n.prototype.dv=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.av=[H(n,X,this.handleDrop,this),H(n,z,this.handleStop,this),H(n,U,this.handleStop,this),H(n,X,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.dv(),this.getActive()&&!n&&this.pv(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.pv(),t.prototype.setMap.call(this,n),this.getActive()&&this.dv()},n.prototype.lv=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.pv=function(){this.av&&(this.av.forEach($),this.av=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var e=n.item(i),o=new FileReader;o.addEventListener(q,this.vv.bind(this,e)),this.hv?o.readAsArrayBuffer(e):o.readAsText(e)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(ph),gg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yg=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).kr=r.condition?r.condition:Ch,i.Fr=void 0,i.wv=void 0,i.ce=0,i.Mr=void 0!==r.duration?r.duration:400,i}return gg(n,t),n.prototype.handleDragEvent=function(t){if(kh(t)){var n=t.map,i=n.getSize(),r=t.pixel,e=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,e),u=Math.sqrt(e*e+o*o),h=n.getView();if(void 0!==this.Fr){var f=this.Fr-s;h.adjustRotationInternal(f)}this.Fr=s,void 0!==this.wv&&h.adjustResolutionInternal(this.wv/u),void 0!==this.wv&&(this.ce=this.wv/u),this.wv=u}},n.prototype.handleUpEvent=function(t){if(!kh(t))return!0;var n=t.map.getView(),i=this.ce>1?1:-1;return n.endInteraction(this.Mr,i),this.ce=0,!1},n.prototype.handleDownEvent=function(t){return!!kh(t)&&(!!this.kr(t)&&(t.map.getView().beginInteraction(),this.Fr=void 0,this.wv=void 0,!0))},n}(bh),mg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bg=function(t){function n(n,i,r){var e=t.call(this)||this;if(void 0!==r&&void 0===i)e.setFlatCoordinates(r,n);else{var o=i||0;e.setCenterAndRadius(n,o,r)}return e}return mg(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=t-e[0],s=n-e[1],u=o*o+s*s;if(u<r){if(0===u)for(var h=0;h<this.stride;++h)i[h]=e[h];else{var f=this.getRadius()/Math.sqrt(u);i[0]=e[0]+f*o,i[1]=e[1]+f*s;for(h=2;h<this.stride;++h)i[h]=e[h]}return i.length=this.stride,u}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],e=n-i[1];return r*r+e*e<=this.gv()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return On(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.gv())},n.prototype.gv=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return"Circle"},n.prototype.intersectsExtent=function(t){if(Hn(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Rn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var e=1;e<n;++e)r[n+e]=t[e];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,e=ie(r,0,t,this.stride);r[e++]=r[0]+n;for(var o=1,s=this.stride;o<s;++o)r[e++]=r[o];r.length=e,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Dr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Ur(i,0,i.length,r,t,n,i)),this.changed()},n}(Yr);bg.prototype.transform;var Mg=bg,_g=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xg="Point",Og="LineString",Sg="Polygon",jg="Circle",Eg="drawstart",Tg="drawend",Pg="drawabort",Ag=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return _g(n,t),n}(c);var Cg=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=S),(i=t.call(this,r)||this).on,i.once,i.un,i.yv=!1,i.mv=null,i.bv,i.Mv,i._v,i.xv=!1,i.cv=n.source?n.source:null,i.Ov=n.features?n.features:null,i.Sv=n.snapTolerance?n.snapTolerance:12,i.ka=n.type,i.te=function(t){switch(t){case"Point":case"MultiPoint":return xg;case"LineString":case"MultiLineString":return Og;case"Polygon":case"MultiPolygon":return Sg;case"Circle":return jg;default:throw new Error("Invalid type: "+t)}}(i.ka),i.jv=!!n.stopClick,i.Ev=n.minPoints?n.minPoints:i.te===Sg?3:2,i.Tv=i.te===jg?2:n.maxPoints?n.maxPoints:1/0,i.Pv=n.finishCondition?n.finishCondition:O,i.Av=n.geometryLayout?n.geometryLayout:Tt;var e,o=n.geometryFunction;if(!o){var s,u=i.te;if(u===jg)o=function(t,n,i){var r=n||new Mg([NaN,NaN]),e=Cr(t[0],i),o=Ki(e,Cr(t[t.length-1],i));r.setCenterAndRadius(e,Math.sqrt(o),this.Av);var s=Pr();return s&&r.transform(i,s),r};else u===xg?s=_e:u===Og?s=kw:u===Sg&&(s=Ve),o=function(t,n,i){return n?u===Sg?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])],this.Av):n.setCoordinates([],this.Av):n.setCoordinates(t,this.Av):n=new s(t,this.Av),n}}return i.Qo=o,i.Cv=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Nv=null,i.kv=null,i.Lv=null,i.Fv=null,i.Rv=null,i.Iv=null,i.Gv=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Dv=new Zw({source:new Jl({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=Nc(),function(t,n){return e[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.k=n.geometryName,i.kr=n.condition?n.condition:Ah,i.zv,n.freehand?i.zv=jh:i.zv=n.freehandCondition?n.freehandCondition:Ch,i.addChangeListener(ch,i.Uv),i}return _g(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Uv()},n.prototype.getOverlay=function(){return this.Dv},n.prototype.handleEvent=function(n){n.originalEvent.type===I&&n.originalEvent.preventDefault(),this.xv=this.te!==xg&&this.zv(n);var i=n.type===eu.POINTERMOVE,r=!0;!this.xv&&this.Mv&&n.type===eu.POINTERDRAG&&(Date.now()-this.Mv>=this.Cv?(this.mv=n.pixel,this.yv=!this.xv,i=!0):this.Mv=void 0,this.yv&&void 0!==this.bv&&(clearTimeout(this.bv),this.bv=void 0));return this.xv&&n.type===eu.POINTERDRAG&&null!==this.kv?(this.Xv(n.coordinate),r=!1):this.xv&&n.type===eu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===eu.POINTERMOVE)&&this.xv?(this.Ln(n),this.yv&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===eu.POINTERDRAG&&void 0===this.bv)&&this.Ln(n):n.type===eu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.yv=!this.xv,this.xv?(this.mv=t.pixel,this.Nv||this.Bv(t.coordinate),!0):this.kr(t)?(this.Mv=Date.now(),this.bv=setTimeout(function(){this.Ln(new ru(eu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Cv),this.mv=t.pixel,!0):(this.Mv=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.bv&&(clearTimeout(this.bv),this.bv=void 0),this.Ln(t),this.yv){var i=!this.Nv;i&&this.Bv(t.coordinate),!i&&this.xv?this.finishDrawing():this.xv||i&&this.te!==xg||(this.Vv(t.pixel)?this.Pv(t)&&this.finishDrawing():this.Xv(t.coordinate)),n=!1}else this.xv&&this.abortDrawing();return!n&&this.jv&&t.preventDefault(),n},n.prototype.Ln=function(t){if(this._v=t.originalEvent.pointerType,this.mv&&(!this.xv&&this.yv||this.xv&&!this.yv)){var n=this.mv,i=t.pixel,r=n[0]-i[0],e=n[1]-i[1],o=r*r+e*e;if(this.yv=this.xv?o>this.Gv:o<=this.Gv,!this.yv)return}this.Nv?this.qv(t.coordinate):this.Wv(t.coordinate.slice())},n.prototype.Vv=function(t){var n=!1;if(this.kv){var i=!1,r=[this.Nv],e=this.te;if(e===xg)n=!0;else if(e===jg)n=2===this.Fv.length;else if(e===Og)i=this.Fv.length>this.Ev;else if(e===Sg){var o=this.Fv;i=o[0].length>this.Ev,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=this.getMap(),u=0,h=r.length;u<h;u++){var f=r[u],a=s.getPixelFromCoordinate(f),c=t[0]-a[0],v=t[1]-a[1],l=this.xv?1:this.Sv;if(n=Math.sqrt(c*c+v*v)<=l){this.Nv=f;break}}}return n},n.prototype.Wv=function(t){this.Lv?this.Lv.getGeometry().setCoordinates(t):(this.Lv=new Et(new _e(t)),this.Zv())},n.prototype.Yv=function(t){this.Rv||(this.Rv=new Et);var n=t.getLinearRing(0),i=this.Rv.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new kw(n.getFlatCoordinates(),n.getLayout()),this.Rv.setGeometry(i))},n.prototype.Bv=function(t){for(var n=this.getMap().getView().getProjection(),i=Wr(this.Av);t.length<i;)t.push(0);this.Nv=t,this.te===xg?this.Fv=t.slice():this.te===Sg?(this.Fv=[[t.slice(),t.slice()]],this.Iv=this.Fv[0]):this.Fv=[t.slice(),t.slice()],this.Iv&&(this.Rv=new Et(new kw(this.Iv)));var r=this.Qo(this.Fv,void 0,n);this.kv=new Et,this.k&&this.kv.setGeometryName(this.k),this.kv.setGeometry(r),this.Zv(),this.dispatchEvent(new Ag(Eg,this.kv))},n.prototype.qv=function(t){for(var n,i,r=this.getMap(),e=this.kv.getGeometry(),o=r.getView().getProjection(),s=Wr(this.Av);t.length<s;)t.push(0);(this.te===xg?i=this.Fv:this.te===Sg?(i=(n=this.Fv[0])[n.length-1],this.Vv(r.getPixelFromCoordinate(t))&&(t=this.Nv.slice())):i=(n=this.Fv)[n.length-1],i[0]=t[0],i[1]=t[1],this.Qo(this.Fv,e,o),this.Lv)&&this.Lv.getGeometry().setCoordinates(t);if("Polygon"===e.getType()&&this.te!==Sg)this.Yv(e);else if(this.Iv){this.Rv.getGeometry().setCoordinates(this.Iv)}this.Zv()},n.prototype.Xv=function(t){var n,i,r=this.kv.getGeometry(),e=this.getMap().getView().getProjection(),o=this.te;o===Og||o===jg?(this.Nv=t.slice(),(i=this.Fv).length>=this.Tv&&(this.xv?i.pop():n=!0),i.push(t.slice()),this.Qo(i,r,e)):o===Sg&&((i=this.Fv[0]).length>=this.Tv&&(this.xv?i.pop():n=!0),i.push(t.slice()),n&&(this.Nv=i[0]),this.Qo(this.Fv,r,e)),this.Wv(t.slice()),this.Zv(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.kv){var t,n=this.kv.getGeometry(),i=this.getMap().getView().getProjection(),r=this.te;if(r===Og||r===jg){if((t=this.Fv).splice(-2,1),t.length>=2){this.Nv=t[t.length-2].slice();var e=this.Nv.slice();t[t.length-1]=e,this.Wv(e)}this.Qo(t,n,i),"Polygon"===n.getType()&&this.Rv&&this.Yv(n)}else if(r===Sg){(t=this.Fv[0]).splice(-2,1);var o=this.Rv.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.Wv(e)}o.setCoordinates(t),this.Qo(this.Fv,n,i)}1===t.length&&this.abortDrawing(),this.Zv()}},n.prototype.finishDrawing=function(){var t=this.Hv();if(t){var n=this.Fv,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.te===Og?(n.pop(),this.Qo(n,i,r)):this.te===Sg&&(n[0].pop(),this.Qo(n,i,r),n=i.getCoordinates()),"MultiPoint"===this.ka?t.setGeometry(new Tw([n])):"MultiLineString"===this.ka?t.setGeometry(new Fw([n])):"MultiPolygon"===this.ka&&t.setGeometry(new Gw([n])),this.dispatchEvent(new Ag(Tg,t)),this.Ov&&this.Ov.push(t),this.cv&&this.cv.addFeature(t)}},n.prototype.Hv=function(){this.Nv=null;var t=this.kv;return this.kv=null,this.Lv=null,this.Rv=null,this.Dv.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.Hv();t&&this.dispatchEvent(new Ag(Pg,t))},n.prototype.appendCoordinates=function(t){var n,i=this.te,r=!this.kv;if(r&&this.Bv(t[0]),i===Og||i===jg)n=this.Fv;else{if(i!==Sg)return;n=this.Fv&&this.Fv.length?this.Fv[0]:[]}r&&n.shift(),n.pop();for(var e=0;e<t.length;e++)this.Xv(t[e]);var o=t[t.length-1];this.Xv(o),this.qv(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.kv=t,this.Fv=n.getCoordinates();var i=this.Fv[this.Fv.length-1];this.Nv=i.slice(),this.Fv.push(i.slice()),this.Lv=new Et(new _e(i)),this.Zv(),this.dispatchEvent(new Ag(Eg,this.kv))},n.prototype.Zv=function(){var t=[];this.kv&&t.push(this.kv),this.Rv&&t.push(this.Rv),this.Lv&&t.push(this.Lv);var n=this.Dv.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Uv=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Dv.setMap(n?t:null)},n}(bh),Ng=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kg="extentchanged",Lg=function(t){function n(n){var i=t.call(this,kg)||this;return i.extent=n,i}return Ng(n,t),n}(c);function Fg(){var t=Nc();return function(n,i){return t.Point}}function Rg(t){return function(n){return pn([t,n])}}function Ig(t,n){return t[0]==n[0]?function(i){return pn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return pn([t,[n[0],i[1]]])}:null}var Gg=function(t){function n(n){var i,r=this,e=n||{};return(r=t.call(this,e)||this).on,r.once,r.un,r.kr=e.condition?e.condition:jh,r.q=null,r.Jv=null,r.$v=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.Kv=!1,r.Qv=null,r.tl=null,n||(n={}),r.nl=new Zw({source:new Jl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Nc(),function(t,n){return i.Polygon}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.il=new Zw({source:new Jl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:Fg(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return Ng(n,t),n.prototype.rl=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);e.sort((function(t,n){return tr(i,t)-tr(i,n)}));var o=e[0],s=Wi(i,o),u=n.getPixelFromCoordinateInternal(s);if(Qi(t,u)<=this.$v){var h=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),a=Ki(u,h),c=Ki(u,f),v=Math.sqrt(Math.min(a,c));return this.Kv=v<=this.$v,this.Kv&&(s=a>c?o[1]:o[0]),s}}return null},n.prototype.Ln=function(t){var n=t.pixel,i=t.map,r=this.rl(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.el(r)},n.prototype.sl=function(t){var n=this.Qv;return n?t?n.setGeometry(We(t)):n.setGeometry(void 0):(n=new Et(t?We(t):{}),this.Qv=n,this.nl.getSource().addFeature(n)),n},n.prototype.el=function(t){var n=this.tl;n?n.getGeometry().setCoordinates(t):(n=new Et(new _e(t)),this.tl=n,this.il.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.kr(n)||(n.type!=eu.POINTERMOVE||this.handlingDownUpSequence||this.Ln(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),e=this.rl(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(e&&r){var s=e[0]==r[0]||e[0]==r[2]?e[0]:null,u=e[1]==r[1]||e[1]==r[3]?e[1]:null;null!==s&&null!==u?this.Jv=Rg(o(e)):null!==s?this.Jv=Ig(o([s,r[1]]),o([s,r[3]])):null!==u&&(this.Jv=Ig(o([r[0],u]),o([r[2],u])))}else e=i.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.Jv=Rg(e);return!0},n.prototype.handleDragEvent=function(t){if(this.Jv){var n=t.coordinate;this.setExtent(this.Jv(n)),this.el(n)}},n.prototype.handleUpEvent=function(t){this.Jv=null;var n=this.getExtentInternal();return n&&0!==In(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.nl.setMap(n),this.il.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Nr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.q},n.prototype.setExtent=function(t){this.q=t||null,this.sl(t),this.dispatchEvent(new Lg(this.q))},n}(bh),Dg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function zg(t){return parseFloat(t)}function Ug(t){return function(t){return di(t,5)}(t).toString()}function Xg(t,n){return!isNaN(t)&&t!==zg(Ug(n))}var Bg=function(t){function n(n){var i,r=t.call(this)||this,e=P({animate:!0,replace:!1,prefix:""},n||{});return i=!0===e.animate?{duration:250}:e.animate?e.animate:null,r.ul=i,r.hl=e.replace,r.fl=e.prefix,r.rn=[],r.al=!0,r.Uv=r.Uv.bind(r),r}return Dg(n,t),n.prototype.cl=function(t){return this.fl?this.fl+t:t},n.prototype.vl=function(t,n){return t.get(this.cl(n))},n.prototype.ll=function(t,n,i){t.set(this.cl(n),i)},n.prototype.dl=function(t,n){t.delete(this.cl(n))},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),n!==i&&(i&&this.pv(i),n&&(this.al=!0,this.Uv(),this.dv(n)))},n.prototype.dv=function(t){this.rn.push(H(t,lu,this.pl,this),H(t.getLayerGroup(),F,this.pl,this),H(t,"change:layergroup",this.wl,this)),this.hl||addEventListener("popstate",this.Uv)},n.prototype.pv=function(t){for(var n=0,i=this.rn.length;n<i;++n)$(this.rn[n]);this.rn.length=0,this.hl||removeEventListener("popstate",this.Uv);var r=new URL(window.location.href),e=r.searchParams;this.dl(e,"x"),this.dl(e,"y"),this.dl(e,"z"),this.dl(e,"r"),this.dl(e,"l"),window.history.replaceState(null,"",r)},n.prototype.wl=function(){var t=this.getMap();t&&(this.pv(t),this.dv(t),this.al=!0,this.pl())},n.prototype.Uv=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=new URL(window.location.href).searchParams,r=!1,e={},o=zg(this.vl(i,"z"));Xg(o,n.getZoom())&&(r=!0,e.zoom=o);var s=zg(this.vl(i,"r"));Xg(s,n.getRotation())&&(r=!0,e.rotation=s);var u,h,f=[zg(this.vl(i,"x")),zg(this.vl(i,"y"))];u=f,h=n.getCenter(),(Xg(u[0],h[0])||Xg(u[1],h[1]))&&(r=!0,e.center=f),r&&(!this.al&&this.ul?n.animate(P(e,this.ul)):(e.center&&n.setCenter(e.center),"zoom"in e&&n.setZoom(e.zoom),"rotation"in e&&n.setRotation(e.rotation)));var a=t.getAllLayers(),c=this.vl(i,"l");if(c&&c.length===a.length)for(var v=0,l=a.length;v<l;++v){var d=parseInt(c[v]);if(!isNaN(d)){var p=Boolean(d),w=a[v];w.getVisible()!==p&&w.setVisible(p)}}}}},n.prototype.pl=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=this.al;this.al=!1;for(var r=n.getCenter(),e=n.getZoom(),o=n.getRotation(),s=t.getAllLayers(),u=new Array(s.length),h=0,f=s.length;h<f;++h)u[h]=s[h].getVisible()?"1":"0";var a=new URL(window.location.href),c=a.searchParams;this.ll(c,"x",Ug(r[0])),this.ll(c,"y",Ug(r[1])),this.ll(c,"z",Ug(e)),this.ll(c,"r",Ug(o)),this.ll(c,"l",u.join("")),a.href!==window.location.href&&(i||this.hl?window.history.replaceState(null,"",a):window.history.pushState(null,"",a))}}},n}(ph),Vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qg=[0,0,0,0],Wg=[],Zg="modifystart",Yg="modifyend",Hg=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.features=i,e.mapBrowserEvent=r,e}return Vg(n,t),n}(c);function Jg(t,n){return t.index-n.index}function $g(t,n,i){var r=n.geometry;if("Circle"===r.getType()){var e=r;if(1===n.index){var o=Pr();o&&(e=e.clone().transform(o,i));var s=Ki(e.getCenter(),Cr(t,i)),u=Math.sqrt(s)-e.getRadius();return u*u}}var h=Cr(t,i);return Wg[0]=Cr(n.segment[0],i),Wg[1]=Cr(n.segment[1],i),tr(h,Wg)}function Kg(t,n,i){var r=n.geometry;if("Circle"===r.getType()&&1===n.index){var e=r,o=Pr();return o&&(e=e.clone().transform(o,i)),Ar(e.getClosestPoint(Cr(t,i)),i)}var s=Cr(t,i);return Wg[0]=Cr(n.segment[0],i),Wg[1]=Cr(n.segment[1],i),Ar(Wi(s,Wg),i)}var Qg=function(t){function n(n){var i,r,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.gl=e.xh.bind(e),e.kr=n.condition?n.condition:Lh,e.yl=function(t){return _h(t)&&Ph(t)},e.ml=n.deleteCondition?n.deleteCondition:e.yl,e.bl=n.insertVertexCondition?n.insertVertexCondition:jh,e.tl=null,e.Ml=null,e._l=[0,0],e.xl=!1,e.Ol=null,e.Sl=new _l,e.$v=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.Kv=!1,e.jl=!1,e.El=[],e.Dv=new Zw({source:new Jl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Nc(),function(t,n){return i.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.Tl={Point:e.Pl.bind(e),LineString:e.Al.bind(e),LinearRing:e.Al.bind(e),Polygon:e.Cl.bind(e),MultiPoint:e.Nl.bind(e),MultiLineString:e.kl.bind(e),MultiPolygon:e.Ll.bind(e),Circle:e.Fl.bind(e),GeometryCollection:e.Rl.bind(e)},e.cv=null,e.Il=null,n.features?r=n.features:n.source&&(e.cv=n.source,r=new at(e.cv.getFeatures()),e.cv.addEventListener(Ul,e.Gl.bind(e)),e.cv.addEventListener(Vl,e.Dl.bind(e))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.Il=n.hitDetection),e.Ov=r,e.Ov.forEach(e.zl.bind(e)),e.Ov.addEventListener(ot,e.Ul.bind(e)),e.Ov.addEventListener(st,e.Xl.bind(e)),e.Bl=null,e.Tr=[0,0],e.Vl=void 0===n.snapToPointer?!e.Il:n.snapToPointer,e}return Vg(n,t),n.prototype.zl=function(t){var n=t.getGeometry();if(n){var i=this.Tl[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.ql(this._l,r),t.addEventListener(F,this.gl)},n.prototype.Wl=function(t,n){if(!this.Ol){this.Ol=new at;for(var i=this.Ol.getArray(),r=0,e=n.length;r<e;++r)for(var o=n[r],s=0,u=o.length;s<u;++s){var h=o[s].feature;h&&-1===i.indexOf(h)&&this.Ol.push(h)}0===this.Ol.getLength()?this.Ol=null:this.dispatchEvent(new Hg(Zg,this.Ol,t))}},n.prototype.Zl=function(t){this.Yl(t),this.tl&&0===this.Ov.getLength()&&(this.Dv.getSource().removeFeature(this.tl),this.tl=null),t.removeEventListener(F,this.gl)},n.prototype.Yl=function(t){var n=this.Sl,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var e=i[r],o=this.El.length-1;o>=0;--o)this.El[o][0]===e&&this.El.splice(o,1);n.remove(e)}},n.prototype.setActive=function(n){this.tl&&!n&&(this.Dv.getSource().removeFeature(this.tl),this.tl=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Dv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Dv},n.prototype.Gl=function(t){t.feature&&this.Ov.push(t.feature)},n.prototype.Dl=function(t){t.feature&&this.Ov.remove(t.feature)},n.prototype.Ul=function(t){this.zl(t.element)},n.prototype.xh=function(t){if(!this.jl){var n=t.target;this.Zl(n),this.zl(n)}},n.prototype.Xl=function(t){var n=t.element;this.Zl(n)},n.prototype.Pl=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.Sl.insert(n.getExtent(),r)},n.prototype.Nl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){var o=i[r],s={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.Sl.insert(n.getExtent(),s)}},n.prototype.Al=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){var o=i.slice(r,r+2),s={feature:t,geometry:n,index:r,segment:o};this.Sl.insert(pn(o),s)}},n.prototype.kl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var h=o.slice(s,s+2),f={feature:t,geometry:n,depth:[r],index:s,segment:h};this.Sl.insert(pn(h),f)}},n.prototype.Cl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var h=o.slice(s,s+2),f={feature:t,geometry:n,depth:[r],index:s,segment:h};this.Sl.insert(pn(h),f)}},n.prototype.Ll=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var h=o[s],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,geometry:n,depth:[s,r],index:f,segment:c};this.Sl.insert(pn(c),v)}},n.prototype.Fl=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},e={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,e];r.featureSegments=o,e.featureSegments=o,this.Sl.insert(jn(i),r);var s=n,u=Pr();if(u&&this.getMap()){var h=this.getMap().getView().getProjection();s=Ze(s=s.clone().transform(u,h)).transform(h,u)}this.Sl.insert(s.getExtent(),e)},n.prototype.Rl=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=i[r];(0,this.Tl[e.getType()])(t,e)}},n.prototype.Hl=function(t,n,i){var r=this.tl;r?r.getGeometry().setCoordinates(t):(r=new Et(new _e(t)),this.tl=r,this.Dv.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Bl=n,n.map.getView().getInteracting()||n.type!=eu.POINTERMOVE||this.handlingDownUpSequence||this.Ln(n),this.tl&&this.ml(n)&&(i=!(n.type!=eu.SINGLECLICK||!this.xl)||this.removePoint()),n.type==eu.SINGLECLICK&&(this.xl=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.xl=!1,this.Wl(t,this.El);for(var n=[t.coordinate[0]+this.Tr[0],t.coordinate[1]+this.Tr[1]],i=[],r=[],e=0,o=this.El.length;e<o;++e){var s=this.El[e],u=s[0],h=u.feature;-1===i.indexOf(h)&&i.push(h);var f=u.geometry;-1===r.indexOf(f)&&r.push(f);for(var a=u.depth,c=void 0,v=u.segment,l=s[1];n.length<f.getStride();)n.push(v[l][n.length]);switch(f.getType()){case"Point":c=n,v[0]=n,v[1]=n;break;case"MultiPoint":(c=f.getCoordinates())[u.index]=n,v[0]=n,v[1]=n;break;case"LineString":(c=f.getCoordinates())[u.index+l]=n,v[l]=n;break;case"MultiLineString":case"Polygon":(c=f.getCoordinates())[a[0]][u.index+l]=n,v[l]=n;break;case"MultiPolygon":(c=f.getCoordinates())[a[1]][a[0]][u.index+l]=n,v[l]=n;break;case"Circle":if(v[0]=n,v[1]=n,0===u.index)this.jl=!0,f.setCenter(n),this.jl=!1;else{this.jl=!0;var d=t.map.getView().getProjection(),p=Qi(Cr(f.getCenter(),d),Cr(n,d)),w=Pr();if(w){var g=f.clone().transform(w,d);g.setRadius(p),p=g.transform(d,w).getRadius()}f.setRadius(p),this.jl=!1}}c&&this.Jl(f,c)}this.Hl(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.kr(t))return!1;var n=t.coordinate;this.ql(t.pixel,t.map,n),this.El.length=0,this.Ol=null;var i=this.tl;if(i){var r=t.map.getView().getProjection(),e=[],s=i.getGeometry().getCoordinates(),u=pn([s]),h=this.Sl.getInExtent(u),f={};h.sort(Jg);for(var a=0,c=h.length;a<c;++a){var v=h[a],l=v.segment,d=o(v.geometry),p=v.depth;if(p&&(d+="-"+p.join("-")),f[d]||(f[d]=new Array(2)),"Circle"!==v.geometry.getType()||1!==v.index)if(!Hi(l[0],s)||f[d][0])if(!Hi(l[1],s)||f[d][1])o(l)in this.Ml&&!f[d][0]&&!f[d][1]&&this.bl(t)&&e.push(v);else{if(f[d][0]&&0===f[d][0].index){var w=v.geometry.getCoordinates();switch(v.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[p[1]];case"Polygon":if(v.index!==w[p[0]].length-2)continue}}this.El.push([v,1]),f[d][1]=v}else this.El.push([v,0]),f[d][0]=v;else Hi(Kg(n,v,r),s)&&!f[d][0]&&(this.El.push([v,0]),f[d][0]=v)}e.length&&this.Wl(t,[e]);for(var g=e.length-1;g>=0;--g)this.$l(e[g],s)}return!!this.tl},n.prototype.handleUpEvent=function(t){for(var n=this.El.length-1;n>=0;--n){var i=this.El[n][0],r=i.geometry;if("Circle"===r.getType()){var e=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=e,o.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.Sl.update(jn(e),o);var u=r,h=Pr();if(h){var f=t.map.getView().getProjection();u=Ze(u=u.clone().transform(h,f)).transform(f,h)}this.Sl.update(u.getExtent(),s)}else this.Sl.update(pn(i.segment),i)}return this.Ol&&(this.dispatchEvent(new Hg(Yg,this.Ol,t)),this.Ol=null),!1},n.prototype.Ln=function(t){this._l=t.pixel,this.ql(t.pixel,t.map,t.coordinate)},n.prototype.ql=function(t,n,i){var r,e,s=this,u=i||n.getCoordinateFromPixel(t),h=n.getView().getProjection();if(this.Il){var f="object"==typeof this.Il?function(t){return t===s.Il}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if("Point"===(i=i||t.getGeometry()).getType()&&w(s.Ov.getArray(),t)){e=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var a=Nr(wn(kr(jn(u,qg),h),n.getView().getResolution()*this.$v,qg),h);r=this.Sl.getInExtent(a)}if(r&&r.length>0){var c=r.sort((function(t,n){return $g(u,t,h)-$g(u,n,h)}))[0],v=c.segment,l=Kg(u,c,h),d=n.getPixelFromCoordinate(l),p=Qi(t,d);if(e||p<=this.$v){var g={};if(g[o(v)]=!0,this.Vl||(this.Tr[0]=l[0]-u[0],this.Tr[1]=l[1]-u[1]),"Circle"===c.geometry.getType()&&1===c.index)this.Kv=!0,this.Hl(l,[c.feature],[c.geometry]);else{var y=n.getPixelFromCoordinate(v[0]),m=n.getPixelFromCoordinate(v[1]),b=Ki(d,y),M=Ki(d,m);p=Math.sqrt(Math.min(b,M)),this.Kv=p<=this.$v,this.Kv&&(l=b>M?v[1]:v[0]),this.Hl(l,[c.feature],[c.geometry]);var _={};_[o(c.geometry)]=!0;for(var x=1,O=r.length;x<O;++x){var S=r[x].segment;if(!(Hi(v[0],S[0])&&Hi(v[1],S[1])||Hi(v[0],S[1])&&Hi(v[1],S[0])))break;var j=o(r[x].geometry);j in _||(_[j]=!0,g[o(S)]=!0)}}return void(this.Ml=g)}}this.tl&&(this.Dv.getSource().removeFeature(this.tl),this.tl=null)},n.prototype.$l=function(t,n){for(var i,r=t.segment,e=t.feature,o=t.geometry,s=t.depth,u=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(i=o.getCoordinates())[s[0]].splice(u+1,0,n);break;case"MultiPolygon":(i=o.getCoordinates())[s[1]][s[0]].splice(u+1,0,n);break;case"LineString":(i=o.getCoordinates()).splice(u+1,0,n);break;default:return}this.Jl(o,i);var h=this.Sl;h.remove(t),this.Kl(o,u,s,1);var f={segment:[r[0],n],feature:e,geometry:o,depth:s,index:u};h.insert(pn(f.segment),f),this.El.push([f,1]);var a={segment:[n,r[1]],feature:e,geometry:o,depth:s,index:u+1};h.insert(pn(a.segment),a),this.El.push([a,0]),this.xl=!0},n.prototype.removePoint=function(){if(this.Bl&&this.Bl.type!=eu.POINTERDRAG){var t=this.Bl;this.Wl(t,this.El);var n=this.Ql();return this.Ol&&this.dispatchEvent(new Hg(Yg,this.Ol,t)),this.Ol=null,n}return!1},n.prototype.Ql=function(){var t,n,i,r,e,s,u,h,f,a,c,v=this.El,l={},d=!1;for(e=v.length-1;e>=0;--e)c=o((a=(i=v[e])[0]).feature),a.depth&&(c+="-"+a.depth.join("-")),c in l||(l[c]={}),0===i[1]?(l[c].right=a,l[c].index=a.index):1==i[1]&&(l[c].left=a,l[c].index=a.index+1);for(c in l){switch(f=l[c].right,u=l[c].left,(h=(s=l[c].index)-1)<0&&(h=0),t=n=(r=(a=void 0!==u?u:f).geometry).getCoordinates(),d=!1,r.getType()){case"MultiLineString":n[a.depth[0]].length>2&&(n[a.depth[0]].splice(s,1),d=!0);break;case"LineString":n.length>2&&(n.splice(s,1),d=!0);break;case"MultiPolygon":t=t[a.depth[1]];case"Polygon":(t=t[a.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),d=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(d){this.Jl(r,n);var p=[];if(void 0!==u&&(this.Sl.remove(u),p.push(u.segment[0])),void 0!==f&&(this.Sl.remove(f),p.push(f.segment[1])),void 0!==u&&void 0!==f){var w={depth:a.depth,feature:a.feature,geometry:a.geometry,index:h,segment:p};this.Sl.insert(pn(w.segment),w)}this.Kl(r,s,a.depth,-1),this.tl&&(this.Dv.getSource().removeFeature(this.tl),this.tl=null),v.length=0}}return d},n.prototype.Jl=function(t,n){this.jl=!0,t.setCoordinates(n),this.jl=!1},n.prototype.Kl=function(t,n,i,r){this.Sl.forEachInExtent(t.getExtent(),(function(e){e.geometry===t&&(void 0===i||void 0===e.depth||M(e.depth,i))&&e.index>n&&(e.index+=r)}))},n}(bh),ty=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ny="select",iy=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=e,o}return ty(n,t),n}(c),ry={};var ey=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,e,o=n||{};if(i.td=i.zl.bind(i),i.rd=i.Zl.bind(i),i.kr=o.condition?o.condition:Ph,i.ed=o.addCondition?o.addCondition:Th,i.od=o.removeCondition?o.removeCondition:Th,i.sd=o.toggleCondition?o.toggleCondition:Ch,i.ud=!!o.multi&&o.multi,i.hd=o.filter?o.filter:O,i.fd=o.hitTolerance?o.hitTolerance:0,i.L=void 0!==o.style?o.style:(m((r=Nc()).Polygon,r.LineString),m(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.Ov=o.features||new at,o.layers)if("function"==typeof o.layers)e=o.layers;else{var s=o.layers;e=function(t){return w(s,t)}}else e=O;return i.ad=e,i.vd={},i}return ty(n,t),n.prototype.ld=function(t,n){this.vd[o(t)]=n},n.prototype.getFeatures=function(){return this.Ov},n.prototype.getHitTolerance=function(){return this.fd},n.prototype.getLayer=function(t){return this.vd[o(t)]},n.prototype.setHitTolerance=function(t){this.fd=t},n.prototype.setMap=function(n){this.getMap()&&this.L&&this.Ov.forEach(this.dd.bind(this)),t.prototype.setMap.call(this,n),n?(this.Ov.addEventListener(ot,this.td),this.Ov.addEventListener(st,this.rd),this.L&&this.Ov.forEach(this.pd.bind(this))):(this.Ov.removeEventListener(ot,this.td),this.Ov.removeEventListener(st,this.rd))},n.prototype.zl=function(t){var n=t.element;if(this.L&&this.pd(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find((function(t){if(t instanceof Zw&&t.getSource()&&t.getSource().hasFeature(n))return t}));i&&this.ld(n,i)}},n.prototype.Zl=function(t){var n=t.element;this.L&&this.dd(n)},n.prototype.getStyle=function(){return this.L},n.prototype.pd=function(t){var n=o(t);n in ry||(ry[n]=t.getStyle()),t.setStyle(this.L)},n.prototype.dd=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var e=i[r];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle())}var s=o(t);t.setStyle(ry[s]),delete ry[s]},n.prototype.wd=function(t){delete this.vd[o(t)]},n.prototype.handleEvent=function(t){if(!this.kr(t))return!0;var n=this.ed(t),i=this.od(t),r=this.sd(t),e=!n&&!i&&!r,o=t.map,s=this.getFeatures(),u=[],h=[];if(e){A(this.vd),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.hd(t,n))return this.ld(t,n),h.push(t),!this.ud}.bind(this),{layerFilter:this.ad,hitTolerance:this.fd});for(var f=s.getLength()-1;f>=0;--f){var a=s.item(f),c=h.indexOf(a);c>-1?h.splice(c,1):(s.remove(a),u.push(a))}0!==h.length&&s.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.hd(t,e))return!n&&!r||w(s.getArray(),t)?(i||r)&&w(s.getArray(),t)&&(u.push(t),this.wd(t)):(this.ld(t,e),h.push(t)),!this.ud}.bind(this),{layerFilter:this.ad,hitTolerance:this.fd});for(var v=u.length-1;v>=0;--v)s.remove(u[v]);s.extend(h)}return(h.length>0||u.length>0)&&this.dispatchEvent(new iy(ny,h,u,t)),!0},n}(ph),oy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function sy(t){return t.feature?t.feature:t.element?t.element:void 0}var uy=[],hy=function(t){function n(n){var i=this,r=n||{},e=r;return e.handleDownEvent||(e.handleDownEvent=O),e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).cv=r.source?r.source:null,i.gd=void 0===r.vertex||r.vertex,i.yd=void 0===r.edge||r.edge,i.Ov=r.features?r.features:null,i.md=[],i.bd={},i.Md={},i._d={},i.$v=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.Sl=new _l,i.xd={Point:i.Od.bind(i),LineString:i.Sd.bind(i),LinearRing:i.Sd.bind(i),Polygon:i.jd.bind(i),MultiPoint:i.Ed.bind(i),MultiLineString:i.Td.bind(i),MultiPolygon:i.Pd.bind(i),GeometryCollection:i.Ad.bind(i),Circle:i.Cd.bind(i)},i}return oy(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),e=t.getGeometry();if(e){var s=this.xd[e.getType()];if(s){this.Md[r]=e.getExtent([1/0,1/0,-1/0,-1/0]);var u=[];if(s(u,e),1===u.length)this.Sl.insert(pn(u[0]),{feature:t,segment:u[0]});else if(u.length>1){var h=u.map((function(t){return pn(t)})),f=u.map((function(n){return{feature:t,segment:n}}));this.Sl.load(h,f)}}}i&&(this.bd[r]=H(t,F,this.xh,this))},n.prototype.Nd=function(t){this.addFeature(t)},n.prototype.kd=function(t){this.removeFeature(t)},n.prototype.Ld=function(){var t;return this.Ov?t=this.Ov:this.cv&&(t=this.cv.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.Ul=function(t){var n=sy(t);this.addFeature(n)},n.prototype.Xl=function(t){var n=sy(t);this.removeFeature(n)},n.prototype.xh=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this._d||(this._d[i]=n)}else this.Fd(n)},n.prototype.handleUpEvent=function(t){var n=C(this._d);return n.length&&(n.forEach(this.Fd.bind(this)),this._d={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),e=this.Md[r];if(e){var s=this.Sl,u=[];s.forEachInExtent(e,(function(n){t===n.feature&&u.push(n)}));for(var h=u.length-1;h>=0;--h)s.remove(u[h])}i&&($(this.bd[r]),delete this.bd[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.md,e=this.Ld();i&&(r.forEach($),r.length=0,e.forEach(this.kd.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Ov?r.push(H(this.Ov,ot,this.Ul,this),H(this.Ov,st,this.Xl,this)):this.cv&&r.push(H(this.cv,Ul,this.Ul,this),H(this.cv,Vl,this.Xl,this)),e.forEach(this.Nd.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=pn([i.getCoordinateFromPixel([t[0]-this.$v,t[1]+this.$v]),i.getCoordinateFromPixel([t[0]+this.$v,t[1]-this.$v])]),e=this.Sl.getInExtent(r),o=e.length;if(0===o)return null;var s,u=i.getView().getProjection(),h=Cr(n,u),f=1/0,a=this.$v*this.$v,c=function(){if(s){var n=i.getPixelFromCoordinate(s);if(Ki(t,n)<=a)return{vertex:s,vertexPixel:[Math.round(n[0]),Math.round(n[1])]}}return null};if(this.gd){for(var v=0;v<o;++v){"Circle"!==(l=e[v]).feature.getGeometry().getType()&&l.segment.forEach((function(t){var n=Cr(t,u),i=Ki(h,n);i<f&&(s=t,f=i)}))}if(M=c())return M}if(this.yd){for(v=0;v<o;++v){var l,d=null;if("Circle"===(l=e[v]).feature.getGeometry().getType()){var p=l.feature.getGeometry(),w=Pr();w&&(p=p.clone().transform(w,u)),d=Ar(qi(h,p),u)}else{var g=l.segment,y=g[0],m=g[1];m&&(uy[0]=Cr(y,u),uy[1]=Cr(m,u),d=Wi(h,uy))}if(d){var b=Ki(h,d);b<f&&(s=d,f=b)}}var M;if(M=c())return M}return null},n.prototype.Fd=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.Cd=function(t,n){var i=this.getMap().getView().getProjection(),r=n,e=Pr();e&&(r=r.clone().transform(e,i));var o=Ze(r);e&&o.transform(i,e);for(var s=o.getCoordinates()[0],u=0,h=s.length-1;u<h;++u)t.push(s.slice(u,u+2))},n.prototype.Ad=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=this.xd[i[r].getType()];e&&e(t,i[r])}},n.prototype.Sd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r)t.push(i.slice(r,r+2))},n.prototype.Td=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n.prototype.Ed=function(t,n){n.getCoordinates().forEach((function(n){t.push([n])}))},n.prototype.Pd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var h=o[s],f=0,a=h.length-1;f<a;++f)t.push(h.slice(f,f+2))},n.prototype.Od=function(t,n){t.push([n.getCoordinates()])},n.prototype.jd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n}(bh),fy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ay="translatestart",cy="translating",vy="translateend",ly=function(t){function n(n,i,r,e,o){var s=t.call(this,n)||this;return s.features=i,s.coordinate=r,s.startCoordinate=e,s.mapBrowserEvent=o,s}return fy(n,t),n}(c),dy=function(t){function n(n){var i,r=this,e=n||{};if((r=t.call(this,e)||this).on,r.once,r.un,r.Rd=null,r.Id=null,r.Ov=void 0!==e.features?e.features:null,e.layers&&!r.Ov)if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function(t){return w(o,t)}}else i=O;return r.ad=i,r.hd=e.filter&&!r.Ov?e.filter:O,r.fd=e.hitTolerance?e.hitTolerance:0,r.kr=e.condition?e.condition:jh,r.Gd=null,r.addChangeListener(ch,r.Dd),r}return fy(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.kr(t))return!1;if(this.Gd=this.zd(t.pixel,t.map),!this.Rd&&this.Gd){this.Id=t.coordinate,this.Rd=t.coordinate,this.handleMoveEvent(t);var n=this.Ov||new at([this.Gd]);return this.dispatchEvent(new ly(ay,n,t.coordinate,this.Id,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.Rd){this.Rd=null,this.handleMoveEvent(t);var n=this.Ov||new at([this.Gd]);return this.dispatchEvent(new ly(vy,n,t.coordinate,this.Id,t)),this.Id=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.Rd){var n=t.coordinate,i=n[0]-this.Rd[0],r=n[1]-this.Rd[1],e=this.Ov||new at([this.Gd]);e.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.Rd=n,this.dispatchEvent(new ly(cy,e,n,this.Id,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.zd(t.pixel,t.map)?(n.classList.remove(this.Rd?"ol-grab":"ol-grabbing"),n.classList.add(this.Rd?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.zd=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.hd(t,n)&&(!this.Ov||w(this.Ov.getArray(),t)))return t}.bind(this),{layerFilter:this.ad,hitTolerance:this.fd})},n.prototype.getHitTolerance=function(){return this.fd},n.prototype.setHitTolerance=function(t){this.fd=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Uv(i)},n.prototype.Dd=function(){this.Uv(null)},n.prototype.Uv=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(bh),py=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function wy(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var gy=function(t){function n(n){var i=t.call(this)||this;return i.Ud=n||null,i.Xd=[],i.Bd(),i}return py(n,t),n.prototype.Vd=function(){this.Xd.forEach($),this.Xd.length=0},n.prototype.Bd=function(){if(this.Ud)for(var t=0,n=this.Ud.length;t<n;++t)this.Xd.push(H(this.Ud[t],F,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.Ud),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<yn(this.getExtent(),t,n))return r;for(var e=this.Ud,o=0,s=e.length;o<s;++o)r=e[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.Ud,r=0,e=i.length;r<e;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){Sn(t);for(var n=this.Ud,i=0,r=n.length;i<r;++i)An(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return wy(this.Ud)},n.prototype.getGeometriesArray=function(){return this.Ud},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.Ud,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.Ud,e=!1,o=0,s=r.length;o<s;++o){var u=r[o],h=u.getSimplifiedGeometry(t);i.push(h),h!==u&&(e=!0)}if(e){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return"GeometryCollection"},n.prototype.intersectsExtent=function(t){for(var n=this.Ud,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.Ud.length},n.prototype.rotate=function(t,n){for(var i=this.Ud,r=0,e=i.length;r<e;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=zn(this.getExtent()));for(var e=this.Ud,o=0,s=e.length;o<s;++o)e[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(wy(t))},n.prototype.setGeometriesArray=function(t){this.Vd(),this.Ud=t,this.Bd(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.Ud,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.Ud,r=0,e=i.length;r<e;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.Vd(),t.prototype.disposeInternal.call(this)},n}(Vr);function yy(t,n,i,r,e,o){var s,u;void 0!==e?(s=e,u=void 0!==o?o:0):(s=[],u=0);for(var h=n;h<i;){var f=t[h++];s[u++]=t[h++],s[u++]=f;for(var a=2;a<r;++a)s[u++]=t[h++]}return s.length=u,s}var my=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?pr(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===Rt.TILE_PIXELS&&(r=pr(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return P({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function by(t,n,i){var r,e=i?pr(i.featureProjection):null,o=i?pr(i.dataProjection):null;if(r=e&&o&&!_r(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*s)/s;return t}))}return r}function My(t,n){var i=n?pr(n.featureProjection):null,r=n?pr(n.dataProjection):null;return i&&r&&!_r(i,r)?jr(t,r,i):t}var _y=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function xy(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var Oy=function(t){function n(){return t.call(this)||this}return _y(n,t),n.prototype.getType=function(){return"json"},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(xy(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(xy(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(xy(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(xy(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(my),Sy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jy={Point:function(t){var n;n=void 0!==t.m&&void 0!==t.z?new _e([t.x,t.y,t.z,t.m],Ct):void 0!==t.z?new _e([t.x,t.y,t.z],Pt):void 0!==t.m?new _e([t.x,t.y,t.m],At):new _e([t.x,t.y]);return n},LineString:function(t){var n=Py(t);return new kw(t.paths[0],n)},Polygon:function(t){var n=Py(t);return new Ve(t.rings,n)},MultiPoint:function(t){var n=Py(t);return new Tw(t.points,n)},MultiLineString:function(t){var n=Py(t);return new Fw(t.paths,n)},MultiPolygon:function(t){var n=Py(t);return new Gw(t.rings,n)}},Ey={Point:function(t,n){var i,r=t.getCoordinates(),e=t.getLayout();e===Pt?i={x:r[0],y:r[1],z:r[2]}:e===At?i={x:r[0],y:r[1],m:r[2]}:e===Ct?i={x:r[0],y:r[1],z:r[2],m:r[3]}:e===Tt?i={x:r[0],y:r[1]}:Ot(!1,34);return i},LineString:function(t,n){var i=Ay(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},Polygon:function(t,n){var i=Ay(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},MultiPoint:function(t,n){var i=Ay(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},MultiLineString:function(t,n){var i=Ay(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},MultiPolygon:function(t,n){for(var i=Ay(t),r=t.getCoordinates(!1),e=[],o=0;o<r.length;o++)for(var s=r[o].length-1;s>=0;s--)e.push(r[o][s]);return{hasZ:i.hasZ,hasM:i.hasM,rings:e}}};function Ty(t,n){var i,r,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e="Point";else if(t.points)e="MultiPoint";else if(t.paths){e=1===t.paths.length?"LineString":"MultiLineString"}else if(t.rings){var o=t,s=Py(o),u=function(t,n){var i,r,e=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){e.length=0,re(e,0,t[i],n.length),Re(e,0,e.length,n.length)?o.push([t[i]]):s.push(t[i])}for(;s.length;){var u=s.shift(),h=!1;for(i=o.length-1;i>=0;i--){var f=o[i][0];if(bn(new be(f).getExtent(),new be(u).getExtent())){o[i].push(u),h=!0;break}}h||o.push([u.reverse()])}return o}(o.rings,s);1===u.length?(e="Polygon",t=P({},t,((i={}).rings=u[0],i))):(e="MultiPolygon",t=P({},t,((r={}).rings=u,r)))}return by((0,jy[e])(t),!1,n)}function Py(t){var n=Tt;return!0===t.hasZ&&!0===t.hasM?n=Ct:!0===t.hasZ?n=Pt:!0===t.hasM&&(n=At),n}function Ay(t){var n=t.getLayout();return{hasZ:n===Pt||n===Ct,hasM:n===At||n===Ct}}function Cy(t,n){return(0,Ey[t.getType()])(by(t,!0,n),n)}var Ny=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).k=r.geometryName,i}return Sy(n,t),n.prototype.readFeatureFromObject=function(t,n,i){var r=t,e=Ty(r.geometry,n),o=new Et;if(this.k&&o.setGeometryName(this.k),o.setGeometry(e),r.attributes){o.setProperties(r.attributes,!0);var s=r.attributes[i];void 0!==s&&o.setId(s)}return o},n.prototype.readFeaturesFromObject=function(t,n){var i=n||{};if(t.features){for(var r=[],e=t.features,o=0,s=e.length;o<s;++o)r.push(this.readFeatureFromObject(e[o],i,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,i)]},n.prototype.readGeometryFromObject=function(t,n){return Ty(t,n)},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?pr("EPSG:"+t.spatialReference.wkid):null},n.prototype.writeGeometryObject=function(t,n){return Cy(t,this.adaptOptions(n))},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={};if(!t.hasProperties())return i.attributes={},i;var r=t.getProperties(),e=t.getGeometry();if(e){i.geometry=Cy(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(pr(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return N(r)?i.attributes={}:i.attributes=r,i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{features:i}},n}(Oy),ky=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ly=function(t){function n(){var n=t.call(this)||this;return n.qd=Qa(),n}return ky(n,t),n.prototype.getType=function(){return"xml"},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=Ra(t);return this.readFeatureFromDocument(i,n)}return La(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=Ra(t);return this.readFeaturesFromDocument(i,n)}return La(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&m(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=Ra(t);return this.readGeometryFromDocument(i,n)}return La(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=Ra(t);return this.readProjectionFromDocument(n)}return La(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.qd.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.qd.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.qd.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(my);function Fy(t){return Ry(Na(t,!1))}function Ry(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function Iy(t){var n=Na(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function Gy(t){return Dy(Na(t,!1))}function Dy(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function zy(t){return Uy(Na(t,!1))}function Uy(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function Xy(t){return Na(t,!1).trim()}function By(t,n){Yy(t,n?"1":"0")}function Vy(t,n){t.appendChild(nc().createCDATASection(n))}function qy(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Xi(i.getUTCMonth()+1,2)+"-"+Xi(i.getUTCDate(),2)+"T"+Xi(i.getUTCHours(),2)+":"+Xi(i.getUTCMinutes(),2)+":"+Xi(i.getUTCSeconds(),2)+"Z";t.appendChild(nc().createTextNode(r))}function Wy(t,n){var i=n.toPrecision();t.appendChild(nc().createTextNode(i))}function Zy(t,n){var i=n.toString();t.appendChild(nc().createTextNode(i))}function Yy(t,n){t.appendChild(nc().createTextNode(n))}var Hy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jy=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],$y={rte:Sm,trk:jm,wpt:Em},Ky=Za(Jy,{rte:Ga(Sm),trk:Ga(jm),wpt:Ga(Em)}),Qy=Za(Jy,{text:Ua(Xy,"linkText"),type:Ua(Xy,"linkType")}),tm=Za(Jy,{rte:Xa((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("LineString"==s.getType()){var u=by(s,!0,r);o.geometryLayout=u.getLayout(),e.rtept=u.getCoordinates()}var h=i[i.length-1].node,f=am[h.namespaceURI],a=Wa(e,f);$a(o,cm,qa,a,i,f)})),trk:Xa((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("MultiLineString"==s.getType()){var u=by(s,!0,r);e.trkseg=u.getLineStrings()}var h=i[i.length-1].node,f=lm[h.namespaceURI],a=Wa(e,f);$a(o,dm,qa,a,i,f)})),wpt:Xa((function(t,n,i){var r=i[0],e=i[i.length-1];e.properties=n.getProperties();var o=n.getGeometry();if("Point"==o.getType()){var s=by(o,!0,r);e.geometryLayout=s.getLayout(),Pm(t,s.getCoordinates(),i)}}))}),nm=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=pr("EPSG:4326"),i.Wd=r.readExtensions,i}return Hy(n,t),n.prototype.Zd=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.Wd){var e=r.get("extensionsNode_")||null;this.Wd(r,e)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!w(Jy,t.namespaceURI))return null;var i=$y[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.Zd([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!w(Jy,t.namespaceURI))return[];if("gpx"==t.localName){var i=Ha([],Ky,t,[this.getReadOptions(t,n)]);return i?(this.Zd(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Ca("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Aa),i.setAttributeNS(Aa,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),$a({node:i},tm,bm,t,[n]),i},n}(Ly),im=Za(Jy,{name:Ua(Xy),cmt:Ua(Xy),desc:Ua(Xy),src:Ua(Xy),link:xm,number:Ua(zy),extensions:Om,type:Ua(Xy),rtept:function(t,n){var i=Ha({},rm,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;Mm(e,o,t,i)}}}),rm=Za(Jy,{ele:Ua(Gy),time:Ua(Iy)}),em=Za(Jy,{name:Ua(Xy),cmt:Ua(Xy),desc:Ua(Xy),src:Ua(Xy),link:xm,number:Ua(zy),type:Ua(Xy),extensions:Om,trkseg:function(t,n){var i=n[n.length-1];Ya(om,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),om=Za(Jy,{trkpt:function(t,n){var i=Ha({},sm,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;Mm(e,o,t,i)}}}),sm=Za(Jy,{ele:Ua(Gy),time:Ua(Iy)}),um=Za(Jy,{ele:Ua(Gy),time:Ua(Iy),magvar:Ua(Gy),geoidheight:Ua(Gy),name:Ua(Xy),cmt:Ua(Xy),desc:Ua(Xy),src:Ua(Xy),link:xm,sym:Ua(Xy),type:Ua(Xy),fix:Ua(Xy),sat:Ua(zy),hdop:Ua(Gy),vdop:Ua(Gy),pdop:Ua(Gy),ageofdgpsdata:Ua(Gy),dgpsid:Ua(zy),extensions:Om}),hm=["text","type"],fm=Za(Jy,{text:Xa(Yy),type:Xa(Yy)}),am=Za(Jy,["name","cmt","desc","src","link","number","type","rtept"]),cm=Za(Jy,{name:Xa(Yy),cmt:Xa(Yy),desc:Xa(Yy),src:Xa(Yy),link:Xa(Tm),number:Xa(Zy),type:Xa(Yy),rtept:Ba(Xa(Pm))}),vm=Za(Jy,["ele","time"]),lm=Za(Jy,["name","cmt","desc","src","link","number","type","trkseg"]),dm=Za(Jy,{name:Xa(Yy),cmt:Xa(Yy),desc:Xa(Yy),src:Xa(Yy),link:Xa(Tm),number:Xa(Zy),type:Xa(Yy),trkseg:Ba(Xa((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},$a(r,wm,pm,n.getCoordinates(),i)})))}),pm=Va("trkpt"),wm=Za(Jy,{trkpt:Xa(Pm)}),gm=Za(Jy,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),ym=Za(Jy,{ele:Xa(Wy),time:Xa(qy),magvar:Xa(Wy),geoidheight:Xa(Wy),name:Xa(Yy),cmt:Xa(Yy),desc:Xa(Yy),src:Xa(Yy),link:Xa(Tm),sym:Xa(Yy),type:Xa(Yy),fix:Xa(Yy),sat:Xa(Zy),hdop:Xa(Wy),vdop:Xa(Wy),pdop:Xa(Wy),ageofdgpsdata:Xa(Wy),dgpsid:Xa(Zy)}),mm={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function bm(t,n,i){var r=t.getGeometry();if(r){var e=mm[r.getType()];if(e)return Ca(n[n.length-1].node.namespaceURI,e)}}function Mm(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function _m(t,n,i){var r=Tt,e=2;if(t.hasZ&&t.hasM?(r=Ct,e=4):t.hasZ?(r=Pt,e=3):t.hasM&&(r=At,e=3),4!==e){for(var o=0,s=n.length/4;o<s;o++)n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);if(n.length=n.length/4*e,i)for(o=0,s=i.length;o<s;o++)i[o]=i[o]/4*e}return r}function xm(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Ya(Qy,t,n)}function Om(t,n){n[n.length-1].Yd=t}function Sm(t,n){var i=n[0],r=Ha({flatCoordinates:[],layoutOptions:{}},im,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=_m(o,e),u=new kw(e,s);by(u,!1,i);var h=new Et(u);return h.setProperties(r,!0),h}}function jm(t,n){var i=n[0],r=Ha({flatCoordinates:[],ends:[],layoutOptions:{}},em,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var u=_m(s,e,o),h=new Fw(e,u,o);by(h,!1,i);var f=new Et(h);return f.setProperties(r,!0),f}}function Em(t,n){var i=n[0],r=Ha({},um,t,n);if(r){var e={},o=Mm([],e,t,r),s=_m(e,o),u=new _e(o,s);by(u,!1,i);var h=new Et(u);return h.setProperties(r,!0),h}}function Tm(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,e=[r.linkText,r.linkType];$a({node:t},fm,qa,e,i,hm)}function Pm(t,n,i){var r=i[i.length-1],e=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Ct:0!==n[3]&&(o.time=n[3]);case Pt:0!==n[2]&&(o.ele=n[2]);break;case At:0!==n[2]&&(o.time=n[2])}var s="rtept"==t.nodeName?vm[e]:gm[e],u=Wa(o,s);$a({node:t,properties:o},ym,qa,u,i,s)}var Am=nm,Cm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Nm(t,n){if(!t)return null;var i;switch(t.type){case"Point":i=function(t){return new _e(t.coordinates)}(t);break;case"LineString":i=function(t){return new kw(t.coordinates)}(t);break;case"Polygon":i=function(t){return new Ve(t.coordinates)}(t);break;case"MultiPoint":i=function(t){return new Tw(t.coordinates)}(t);break;case"MultiLineString":i=function(t){return new Fw(t.coordinates)}(t);break;case"MultiPolygon":i=function(t){return new Gw(t.coordinates)}(t);break;case"GeometryCollection":i=function(t,n){var i=t.geometries.map((function(t){return Nm(t,n)}));return new gy(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return by(i,!1,n)}function km(t,n){var i,r=(t=by(t,!0,n)).getType();switch(r){case"Point":i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case"MultiPoint":i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case"GeometryCollection":i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=P({},n);return delete i.featureProjection,km(t,i)}))}}(t,n);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var Lm=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=pr(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=pr(r.featureProjection)),i.k=r.geometryName,i.Hd=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return Cm(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=Nm((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Et;return this.k?e.setGeometryName(this.k):this.Hd&&"geometry_name"in i!==void 0&&e.setGeometryName(i.geometry_name),e.setGeometry(r),"id"in i&&e.setId(i.id),i.properties&&e.setProperties(i.properties,!0),e},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,e=0,o=r.length;e<o;++e)i.push(this.readFeatureFromObject(r[e],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return Nm(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=pr(i.properties.name):"EPSG"===i.type?n=pr("EPSG:"+i.properties.code):Ot(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var e=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=km(o,n),delete e[t.getGeometryName()]),N(e)||(i.properties=e),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return km(t,this.adaptOptions(n))},n}(Oy),Fm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Rm(t){return"string"==typeof t?t:""}var Im,Gm,Dm,zm,Um,Xm,Bm=function(t){function n(){return t.call(this)||this}return Fm(n,t),n.prototype.getType=function(){return"text"},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(Rm(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(Rm(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(Rm(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(Rm(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(my),Vm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qm="barometric",Wm="gps",Zm="none",Ym=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Hm=/^H.([A-Z]{3}).*?:(.*)/,Jm=/^HFDTE(\d{2})(\d{2})(\d{2})/,$m=/\r\n|\r|\n/,Km=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=pr("EPSG:4326"),i.Jd=r.altitudeMode?r.altitudeMode:Zm,i}return Vm(n,t),n.prototype.readFeatureFromText=function(t,n){var i,r,e=this.Jd,o=t.split($m),s={},u=[],h=2e3,f=0,a=1,c=-1;for(i=0,r=o.length;i<r;++i){var v=o[i],l=void 0;if("B"==v.charAt(0)){if(l=Ym.exec(v)){var d=parseInt(l[1],10),p=parseInt(l[2],10),w=parseInt(l[3],10),g=parseInt(l[4],10)+parseInt(l[5],10)/6e4;"S"==l[6]&&(g=-g);var y=parseInt(l[7],10)+parseInt(l[8],10)/6e4;if("W"==l[9]&&(y=-y),u.push(y,g),e!=Zm){var m=void 0;m=e==Wm?parseInt(l[11],10):e==qm?parseInt(l[12],10):0,u.push(m)}var b=Date.UTC(h,f,a,d,p,w);b<c&&(b=Date.UTC(h,f,a+1,d,p,w)),u.push(b/1e3),c=b}}else"H"==v.charAt(0)&&((l=Jm.exec(v))?(a=parseInt(l[1],10),f=parseInt(l[2],10)-1,h=2e3+parseInt(l[3],10)):(l=Hm.exec(v))&&(s[l[1]]=l[2].trim()))}if(0===u.length)return null;var M=new kw(u,e==Zm?At:Ct),_=new Et(by(M,!1,n));return _.setProperties(s,!0),_},n.prototype.readFeaturesFromText=function(t,n){var i=this.readFeatureFromText(t,n);return i?[i]:[]},n}(Bm),Qm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tb=["http://www.google.com/kml/ext/2.2"],nb=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ib={fraction:dc,pixels:pc,insetPixels:pc},rb=Za(nb,{ExtendedData:tM,Region:nM,MultiGeometry:Ua(qb,"geometry"),LineString:Ua(Xb,"geometry"),LinearRing:Ua(Bb,"geometry"),Point:Ua(Wb,"geometry"),Polygon:Ua(Yb,"geometry"),Style:Ua(Jb),StyleMap:function(t,n){var i=Tb.call(this,t,n);if(!i)return;var r=n[n.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Ot(!1,38)},address:Ua(Xy),description:Ua(Xy),name:Ua(Xy),open:Ua(Fy),phoneNumber:Ua(Xy),styleUrl:Ua(Sb),visibility:Ua(Fy)},Za(tb,{MultiTrack:Ua((function(t,n){var i=Ha([],Fb,t,n);if(!i)return;return new Fw(i)}),"geometry"),Track:Ua(Ib,"geometry")})),eb=Za(nb,{ExtendedData:tM,Region:nM,Link:function(t,n){Ya(ob,t,n)},address:Ua(Xy),description:Ua(Xy),name:Ua(Xy),open:Ua(Fy),phoneNumber:Ua(Xy),visibility:Ua(Fy)}),ob=Za(nb,{href:Ua(Ob)}),sb=Za(nb,{LatLonAltBox:function(t,n){var i=Ha({},eM,t,n);if(!i)return;var r=n[n.length-1],e=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=e,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,n){var i=Ha({},oM,t,n);if(!i)return;var r=n[n.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),ub=Za(nb,["Document","Placemark"]),hb=Za(nb,{Document:Xa((function(t,n,i){$a({node:t},aM,cM,n,i,void 0,this)})),Placemark:Xa(FM)}),fb=null;var ab,cb=null;var vb,lb=null;var db=null;var pb=null;var wb,gb=null;function yb(t){return 32/Math.min(t[0],t[1])}function mb(t){return t}var bb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return gb||(fb=new lc({color:Im=[255,255,255,1]}),Xm="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",cb=new jc({anchor:Gm=[20,2],anchorOrigin:wc,anchorXUnits:Dm=pc,anchorYUnits:zm=pc,crossOrigin:"anonymous",rotation:0,scale:yb(Um=[64,64]),size:Um,src:Xm}),ab="NO_IMAGE",lb=new Ec({color:Im,width:1}),vb=new Ec({color:[51,51,51,1],width:2}),db=new Ic({font:"bold 16px Helvetica",fill:fb,stroke:vb,scale:.8}),pb=new Lc({fill:fb,image:cb,text:db,stroke:lb,zIndex:0}),gb=[pb]),i.dataProjection=pr("EPSG:4326"),i.$d=r.defaultStyle?r.defaultStyle:gb,i.Kd=void 0===r.extractStyles||r.extractStyles,i.Qd=void 0===r.writeStyles||r.writeStyles,i.tp={},i.np=void 0===r.showPointNames||r.showPointNames,i.At=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i.ip=r.iconUrlFunction?r.iconUrlFunction:mb,i.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],i}return Qm(n,t),n.prototype.rp=function(t,n){var i=Ha([],Za(nb,{Document:Ia(this.rp,this),Folder:Ia(this.rp,this),Placemark:Ga(this.ep,this),Style:this.op.bind(this),StyleMap:this.sp.bind(this)}),t,n,this);return i||void 0},n.prototype.ep=function(t,n){var i=Ha({geometry:null},rb,t,n,this);if(i){var r=new Et,e=t.getAttribute("id");null!==e&&r.setId(e);var o=n[0],s=i.geometry;if(s&&by(s,!1,o),r.setGeometry(s),delete i.geometry,this.Kd){var u=function(t,n,i,r,e){return function(o,s){var u=e,h="",f=[];if(u){var a=o.getGeometry();if(a)if(a instanceof gy)u=(f=a.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n}))).length>0;else{var c=a.getType();u="Point"===c||"MultiPoint"===c}}u&&(h=o.get("name"),(u=u&&!!h)&&h.search(/&[^&]+;/)>-1&&(wb||(wb=document.createElement("textarea")),wb.innerHTML=h,h=wb.value));var v=i;if(t?v=t:n&&(v=Mb(n,i,r)),u){var l=function(t,n){var i=[0,0],r="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var s=e.getScaleArray(),u=e.getAnchor();i[0]=s[0]*(o[0]-u[0]),i[1]=s[1]*(o[1]/2-u[1]),r="left"}}var h=t.getText();h?((h=h.clone()).setFont(h.getFont()||db.getFont()),h.setScale(h.getScale()||db.getScale()),h.setFill(h.getFill()||db.getFill()),h.setStroke(h.getStroke()||vb)):h=db.clone();return h.setText(n),h.setOffsetX(i[0]),h.setOffsetY(i[1]),h.setTextAlign(r),new Lc({image:e,text:h})}(v[0],h);return f.length>0?(l.setGeometry(new gy(f)),[l,new Lc({geometry:v[0].getGeometry(),image:null,fill:v[0].getFill(),stroke:v[0].getStroke(),text:null})].concat(v.slice(1))):l}return v}}(i.Style,i.styleUrl,this.$d,this.tp,this.np);r.setStyle(u)}return delete i.Style,r.setProperties(i,!0),r}},n.prototype.op=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=Jb.call(this,t,n);if(r){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.tp[e]=r}}},n.prototype.sp=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=Tb.call(this,t,n);if(r){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.tp[e]=r}}},n.prototype.readFeatureFromNode=function(t,n){if(!w(nb,t.namespaceURI))return null;var i=this.ep(t,[this.getReadOptions(t,n)]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){if(!w(nb,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.rp(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==r){var e=this.ep(t,[this.getReadOptions(t,n)]);return e?[e]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,n);s&&m(i,s)}return i}return[]},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=Ra(t);return this.readNameFromDocument(n)}return La(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(n);if(i)return i}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling)if(w(nb,n.namespaceURI)&&"name"==n.localName)return Xy(n);for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(w(nb,n.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(n);if(r)return r}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var i=Ra(t);m(n,this.readNetworkLinksFromDocument(i))}else La(t)?m(n,this.readNetworkLinksFromDocument(t)):m(n,this.readNetworkLinksFromNode(t));return n},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&m(n,this.readNetworkLinksFromNode(i));return n},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(w(nb,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Ha({},eb,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!w(nb,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||m(n,this.readNetworkLinksFromNode(i))}return n},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var i=Ra(t);m(n,this.readRegionFromDocument(i))}else La(t)?m(n,this.readRegionFromDocument(t)):m(n,this.readRegionFromNode(t));return n},n.prototype.readRegionFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&m(n,this.readRegionFromNode(i));return n},n.prototype.readRegionFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(w(nb,i.namespaceURI)&&"Region"==i.localName){var r=Ha({},sb,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!w(nb,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||m(n,this.readRegionFromNode(i))}return n},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Ca(nb[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",tb[0]),i.setAttributeNS(r,"xmlns:xsi",Aa),i.setAttributeNS(Aa,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=ub[i.namespaceURI],u=Wa(o,s);return $a(e,hb,qa,u,[n],s,this),i},n}(Ly);function Mb(t,n,i){return Array.isArray(t)?t:"string"==typeof t?Mb(i[t],n,i):n}function _b(t){var n=Na(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function xb(t){var n=Na(t,!1),i=[];n=n.replace(/\s*,\s*/g,",");for(var r,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=e.exec(n);){var o=parseFloat(r[1]),s=parseFloat(r[2]),u=r[3]?parseFloat(r[3]):0;i.push(o,s,u),n=n.substr(r[0].length)}if(""===n)return i}function Ob(t){var n=Na(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function Sb(t){var n=Na(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function jb(t){return Gy(t)}var Eb=Za(nb,{Pair:function(t,n){var i=Ha({},iM,t,n,this);if(!i)return;var r=i.key;if(r&&"normal"==r){var e=i.styleUrl;e&&(n[n.length-1]=e);var o=i.Style;o&&(n[n.length-1]=o)}}});function Tb(t,n){return Ha(void 0,Eb,t,n,this)}var Pb=Za(nb,{Icon:Ua((function(t,n){var i=Ha({},Gb,t,n);return i||null})),color:Ua(_b),heading:Ua(Gy),hotSpot:Ua((function(t){var n,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return n="insetPixels"!==i?"insetPixels"!==r?wc:yc:"insetPixels"!==r?gc:mc,{x:parseFloat(t.getAttribute("x")),xunits:ib[i],y:parseFloat(t.getAttribute("y")),yunits:ib[r],origin:n}})),scale:Ua(jb)});var Ab=Za(nb,{color:Ua(_b),scale:Ua(jb)});var Cb=Za(nb,{color:Ua(_b),width:Ua(Gy)});var Nb=Za(nb,{color:Ua(_b),fill:Ua(Fy),outline:Ua(Fy)});var kb=Za(nb,{coordinates:Da(xb)});function Lb(t,n){return Ha(null,kb,t,n)}var Fb=Za(tb,{Track:Ga(Ib)});var Rb=Za(nb,{when:function(t,n){var i=n[n.length-1].whens,r=Na(t,!1),e=Date.parse(r);i.push(isNaN(e)?0:e)}},Za(tb,{coord:function(t,n){var i=n[n.length-1].coordinates,r=Na(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(e){var o=parseFloat(e[1]),s=parseFloat(e[2]),u=parseFloat(e[3]);i.push([o,s,u])}else i.push([])}}));function Ib(t,n){var i=Ha({coordinates:[],whens:[]},Rb,t,n);if(i){for(var r=[],e=i.coordinates,o=i.whens,s=0,u=Math.min(e.length,o.length);s<u;++s)3==e[s].length&&r.push(e[s][0],e[s][1],e[s][2],o[s]);return new kw(r,Ct)}}var Gb=Za(nb,{href:Ua(Ob)},Za(tb,{x:Ua(Gy),y:Ua(Gy),w:Ua(Gy),h:Ua(Gy)}));var Db=Za(nb,{coordinates:Da(xb)});function zb(t,n){return Ha(null,Db,t,n)}var Ub=Za(nb,{extrude:Ua(Fy),tessellate:Ua(Fy),altitudeMode:Ua(Xy)});function Xb(t,n){var i=Ha({},Ub,t,n),r=zb(t,n);if(r){var e=new kw(r,Pt);return e.setProperties(i,!0),e}}function Bb(t,n){var i=Ha({},Ub,t,n),r=zb(t,n);if(r){var e=new Ve(r,Pt,[r.length]);return e.setProperties(i,!0),e}}var Vb=Za(nb,{LineString:Ga(Xb),LinearRing:Ga(Bb),MultiGeometry:Ga(qb),Point:Ga(Wb),Polygon:Ga(Yb)});function qb(t,n){var i,r=Ha([],Vb,t,n);if(!r)return null;if(0===r.length)return new gy(r);for(var e=!0,o=r[0].getType(),s=1,u=r.length;s<u;++s)if(r[s].getType()!=o){e=!1;break}if(e){var h=void 0,f=void 0;if("Point"==o){var a=r[0];h=a.getLayout(),f=a.getFlatCoordinates();for(s=1,u=r.length;s<u;++s)m(f,r[s].getFlatCoordinates());$b(i=new Tw(f,h),r)}else"LineString"==o?$b(i=new Fw(r),r):"Polygon"==o?$b(i=new Gw(r),r):"GeometryCollection"==o?i=new gy(r):Ot(!1,37)}else i=new gy(r);return i}function Wb(t,n){var i=Ha({},Ub,t,n),r=zb(t,n);if(r){var e=new _e(r,Pt);return e.setProperties(i,!0),e}}var Zb=Za(nb,{innerBoundaryIs:function(t,n){var i=Ha([],sM,t,n);if(i.length>0){var r=n[n.length-1];r.push.apply(r,i)}},outerBoundaryIs:function(t,n){var i=Ha(void 0,uM,t,n);if(i){n[n.length-1][0]=i}}});function Yb(t,n){var i=Ha({},Ub,t,n),r=Ha([null],Zb,t,n);if(r&&r[0]){for(var e=r[0],o=[e.length],s=1,u=r.length;s<u;++s)m(e,r[s]),o.push(e.length);var h=new Ve(e,Pt,o);return h.setProperties(i,!0),h}}var Hb=Za(nb,{IconStyle:function(t,n){var i=Ha({},Pb,t,n);if(i){var r,e,o,s,u=n[n.length-1],h="Icon"in i?i.Icon:{},f=!("Icon"in i)||Object.keys(h).length>0,a=h.href;a?r=a:f&&(r=Xm);var c,v=wc,l=i.hotSpot;l?(e=[l.x,l.y],o=l.xunits,s=l.yunits,v=l.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(e=Gm,o=Dm,s=zm):/arrow-reverse/.test(r)?(e=[54,42],o=Dm,s=zm):/paddle/.test(r)&&(e=[32,1],o=Dm,s=zm));var d,p=h.x,w=h.y;void 0!==p&&void 0!==w&&(c=[p,w]);var g,y=h.w,m=h.h;void 0!==y&&void 0!==m&&(d=[y,m]);var b=i.heading;void 0!==b&&(g=ci(b));var M=i.scale,_=i.color;if(f){r==Xm&&(d=Um);var x=new jc({anchor:e,anchorOrigin:v,anchorXUnits:o,anchorYUnits:s,crossOrigin:this.At,offset:c,offsetOrigin:wc,rotation:g,scale:M,size:d,src:this.ip(r),color:_}),O=x.getScaleArray()[0],S=x.getSize();if(null===S){var j=x.getImageState();if(j===ao||j===co){var E=function(){var t=x.getImageState();if(t!==ao&&t!==co){var n=x.getSize();if(n&&2==n.length){var i=yb(n);x.setScale(O*i)}x.unlistenImageChange(E)}};x.listenImageChange(E),j===ao&&x.load()}}else if(2==S.length){var T=yb(S);x.setScale(O*T)}u.imageStyle=x}else u.imageStyle=ab}},LabelStyle:function(t,n){var i=Ha({},Ab,t,n);if(i){var r=n[n.length-1],e=new Ic({fill:new lc({color:"color"in i?i.color:Im}),scale:i.scale});r.textStyle=e}},LineStyle:function(t,n){var i=Ha({},Cb,t,n);if(i){var r=n[n.length-1],e=new Ec({color:"color"in i?i.color:Im,width:"width"in i?i.width:1});r.strokeStyle=e}},PolyStyle:function(t,n){var i=Ha({},Nb,t,n);if(i){var r=n[n.length-1],e=new lc({color:"color"in i?i.color:Im});r.fillStyle=e;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s)}}});function Jb(t,n){var i=Ha({},Hb,t,n,this);if(!i)return null;var r,e="fillStyle"in i?i.fillStyle:fb,o=i.fill;void 0===o||o||(e=null),"imageStyle"in i?i.imageStyle!=ab&&(r=i.imageStyle):r=cb;var s="textStyle"in i?i.textStyle:db,u="strokeStyle"in i?i.strokeStyle:lb,h=i.outline;return void 0===h||h?[new Lc({fill:e,image:r,stroke:u,text:s,zIndex:void 0})]:[new Lc({geometry:function(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new gy(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"!==n&&"MultiPolygon"!==n}))):"Polygon"!==i&&"MultiPolygon"!==i?n:void 0},fill:e,image:r,stroke:u,text:s,zIndex:void 0}),new Lc({geometry:function(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new gy(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n}))):"Polygon"===i||"MultiPolygon"===i?n:void 0},fill:e,stroke:null,zIndex:void 0})]}function $b(t,n){var i,r,e,o=n.length,s=new Array(n.length),u=new Array(n.length),h=new Array(n.length);i=!1,r=!1,e=!1;for(var f=0;f<o;++f){var a=n[f];s[f]=a.get("extrude"),u[f]=a.get("tessellate"),h[f]=a.get("altitudeMode"),i=i||void 0!==s[f],r=r||void 0!==u[f],e=e||h[f]}i&&t.set("extrude",s),r&&t.set("tessellate",u),e&&t.set("altitudeMode",h)}var Kb=Za(nb,{displayName:Ua(Xy),value:Ua(Xy)});var Qb=Za(nb,{Data:function(t,n){var i=t.getAttribute("name");Ya(Kb,t,n);var r=n[n.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,n){Ya(rM,t,n)}});function tM(t,n){Ya(Qb,t,n)}function nM(t,n){Ya(sb,t,n)}var iM=Za(nb,{Style:Ua(Jb),key:Ua(Xy),styleUrl:Ua(Sb)});var rM=Za(nb,{SimpleData:function(t,n){var i=t.getAttribute("name");if(null!==i){var r=Xy(t);n[n.length-1][i]=r}}});var eM=Za(nb,{altitudeMode:Ua(Xy),minAltitude:Ua(Gy),maxAltitude:Ua(Gy),north:Ua(Gy),south:Ua(Gy),east:Ua(Gy),west:Ua(Gy)});var oM=Za(nb,{minLodPixels:Ua(Gy),maxLodPixels:Ua(Gy),minFadeExtent:Ua(Gy),maxFadeExtent:Ua(Gy)});var sM=Za(nb,{LinearRing:Ga(Lb)});var uM=Za(nb,{LinearRing:Da(Lb)});function hM(t,n){for(var i=Io(n),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],e=0;e<4;++e){var o=Math.floor(r[e]).toString(16);r[e]=1==o.length?"0"+o:o}Yy(t,r.join(""))}var fM=Za(nb,{Data:Xa((function(t,n,i){t.setAttribute("name",n.name);var r={node:t},e=n.value;"object"==typeof e?(null!==e&&e.displayName&&$a(r,fM,qa,[e.displayName],i,["displayName"]),null!==e&&e.value&&$a(r,fM,qa,[e.value],i,["value"])):$a(r,fM,qa,[e],i,["value"])})),value:Xa((function(t,n){Yy(t,n)})),displayName:Xa((function(t,n){Vy(t,n)}))});var aM=Za(nb,{Placemark:Xa(FM)}),cM=function(t,n,i){return Ca(n[n.length-1].node.namespaceURI,"Placemark")};var vM=Va("Data");var lM=Za(nb,["href"],Za(tb,["x","y","w","h"])),dM=Za(nb,{href:Xa(Yy)},Za(tb,{x:Xa(Wy),y:Xa(Wy),w:Xa(Wy),h:Xa(Wy)})),pM=function(t,n,i){return Ca(tb[0],"gx:"+i)};var wM=Za(nb,["scale","heading","Icon","color","hotSpot"]),gM=Za(nb,{Icon:Xa((function(t,n,i){var r={node:t},e=i[i.length-1].node,o=lM[e.namespaceURI],s=Wa(n,o);$a(r,dM,qa,s,i,o),s=Wa(n,o=lM[tb[0]]),$a(r,dM,pM,s,i,o)})),color:Xa(hM),heading:Xa(Wy),hotSpot:Xa((function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits)})),scale:Xa(qM)});var yM=Za(nb,["color","scale"]),mM=Za(nb,{color:Xa(hM),scale:Xa(qM)});var bM=Za(nb,["color","width"]),MM=Za(nb,{color:Xa(hM),width:Xa(Wy)});var _M={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},xM=function(t,n,i){if(t)return Ca(n[n.length-1].node.namespaceURI,_M[t.getType()])},OM=Va("Point"),SM=Va("LineString"),jM=Va("LinearRing"),EM=Va("Polygon"),TM=Za(nb,{LineString:Xa(GM),Point:Xa(GM),Polygon:Xa(BM),GeometryCollection:Xa(PM)});function PM(t,n,i){var r,e={node:t},o=n.getType(),s=[];"GeometryCollection"===o?(n.getGeometriesArrayRecursive().forEach((function(t){var n=t.getType();"MultiPoint"===n?s=s.concat(t.getPoints()):"MultiLineString"===n?s=s.concat(t.getLineStrings()):"MultiPolygon"===n?s=s.concat(t.getPolygons()):"Point"===n||"LineString"===n||"Polygon"===n?s.push(t):Ot(!1,39)})),r=xM):"MultiPoint"===o?(s=n.getPoints(),r=OM):"MultiLineString"===o?(s=n.getLineStrings(),r=SM):"MultiPolygon"===o?(s=n.getPolygons(),r=EM):Ot(!1,39),$a(e,TM,r,s,i)}var AM=Za(nb,{LinearRing:Xa(GM)});function CM(t,n,i){$a({node:t},AM,jM,[n],i)}var NM=Za(nb,{ExtendedData:Xa((function(t,n,i){for(var r={node:t},e=n.names,o=n.values,s=e.length,u=0;u<s;u++)$a(r,fM,vM,[{name:e[u],value:o[u]}],i)})),MultiGeometry:Xa(PM),LineString:Xa(GM),LinearRing:Xa(GM),Point:Xa(GM),Polygon:Xa(BM),Style:Xa((function(t,n,i){var r={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var s=n.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(e.IconStyle=s)}if(n.lineStyles.length){(u=n.lineStyles[0].getStroke())&&(e.LineStyle=u)}if(n.polyStyles.length){var u;(u=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=u),e.PolyStyle=n.polyStyles[0]}var h=i[i.length-1].node,f=WM[h.namespaceURI],a=Wa(e,f);$a(r,ZM,qa,a,i,f)})),address:Xa(Yy),description:Xa(Yy),name:Xa(Yy),open:Xa(By),phoneNumber:Xa(Yy),styleUrl:Xa(Yy),visibility:Xa(By)}),kM=Za(nb,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),LM=Va("ExtendedData");function FM(t,n,i){var r={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var s=Object.keys(e||{}).sort().filter((function(t){return!o[t]})),u=n.getStyleFunction();if(u){var h=u(n,0);if(h){var f=Array.isArray(h)?h:[h],a=f;if(n.getGeometry()&&(a=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n})).length:"Point"===r||"MultiPoint"===r}}))),this.Qd){var c=f,v=f;n.getGeometry()&&(c=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"LineString"===n||"MultiLineString"===n})).length:"LineString"===r||"MultiLineString"===r}})),v=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n})).length:"Polygon"===r||"MultiPolygon"===r}}))),e.Style={pointStyles:a,lineStyles:c,polyStyles:v}}if(a.length&&void 0===e.name){var l=a[0].getText();l&&(e.name=l.getText())}}}var d=i[i.length-1].node,p=kM[d.namespaceURI],w=Wa(e,p);if($a(r,NM,qa,w,i,p),s.length>0){var g=Wa(e,s);$a(r,NM,LM,[{names:s,values:g}],i)}var y=i[0],m=n.getGeometry();m&&(m=by(m,!0,y)),$a(r,NM,xM,[m],i)}var RM=Za(nb,["extrude","tessellate","altitudeMode","coordinates"]),IM=Za(nb,{extrude:Xa(By),tessellate:Xa(By),altitudeMode:Xa(Yy),coordinates:Xa((function(t,n,i){var r,e=i[i.length-1],o=e.layout,s=e.stride;o==Tt||o==At?r=2:o==Pt||o==Ct?r=3:Ot(!1,34);var u=n.length,h="";if(u>0){h+=n[0];for(var f=1;f<r;++f)h+=","+n[f];for(var a=s;a<u;a+=s){h+=" "+n[a];for(f=1;f<r;++f)h+=","+n[a+f]}}Yy(t,h)}))});function GM(t,n,i){var r=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=r;var s=i[i.length-1].node,u=RM[s.namespaceURI],h=Wa(o,u);$a(e,IM,qa,h,i,u)}var DM=Za(nb,["color","fill","outline"]),zM=Za(nb,{outerBoundaryIs:Xa(CM),innerBoundaryIs:Xa(CM)}),UM=Va("innerBoundaryIs"),XM=Va("outerBoundaryIs");function BM(t,n,i){var r=n.getLinearRings(),e=r.shift(),o={node:t};$a(o,zM,UM,r,i),$a(o,zM,XM,[e],i)}var VM=Za(nb,{color:Xa(hM),fill:Xa(By),outline:Xa(By)});function qM(t,n){Wy(t,Math.round(1e6*n)/1e6)}var WM=Za(nb,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ZM=Za(nb,{IconStyle:Xa((function(t,n,i){var r={node:t},e={},o=n.getSrc(),s=n.getSize(),u=n.getImageSize(),h={href:o};if(s){h.w=s[0],h.h=s[1];var f=n.getAnchor(),a=n.getOrigin();if(a&&u&&0!==a[0]&&a[1]!==s[1]&&(h.x=a[0],h.y=u[1]-(a[1]+s[1])),f&&(f[0]!==s[0]/2||f[1]!==s[1]/2)){var c={x:f[0],xunits:pc,y:s[1]-f[1],yunits:pc};e.hotSpot=c}}e.Icon=h;var v=n.getScaleArray()[0],l=s;null===l&&(l=Um),2==l.length&&(v/=yb(l)),1!==v&&(e.scale=v);var d=n.getRotation();0!==d&&(e.heading=d);var p=n.getColor();p&&(e.color=p);var w=i[i.length-1].node,g=wM[w.namespaceURI],y=Wa(e,g);$a(r,gM,qa,y,i,g)})),LabelStyle:Xa((function(t,n,i){var r={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var s=n.getScale();s&&1!==s&&(e.scale=s);var u=i[i.length-1].node,h=yM[u.namespaceURI],f=Wa(e,h);$a(r,mM,qa,f,i,h)})),LineStyle:Xa((function(t,n,i){var r={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=i[i.length-1].node,s=bM[o.namespaceURI],u=Wa(e,s);$a(r,MM,qa,u,i,s)})),PolyStyle:Xa((function(t,n,i){var r={node:t},e=n.getFill(),o=n.getStroke(),s={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},u=i[i.length-1].node,h=DM[u.namespaceURI],f=Wa(s,h);$a(r,VM,qa,f,i,h)}))});var YM=bb,HM=i(98),JM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function $M(t,n,i){if(3===t){var r={keys:[],values:[],features:[]},e=i.readVarint()+i.pos;i.readFields(KM,r,e),r.length=r.features.length,r.length&&(n[r.name]=r)}}function KM(t,n,i){if(15===t)n.version=i.readVarint();else if(1===t)n.name=i.readString();else if(5===t)n.extent=i.readVarint();else if(2===t)n.features.push(i.pos);else if(3===t)n.keys.push(i.readString());else if(4===t){for(var r=null,e=i.readVarint()+i.pos;i.pos<e;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;n.values.push(r)}}function QM(t,n,i){if(1==t)n.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var e=n.layer.keys[i.readVarint()],o=n.layer.values[i.readVarint()];n.properties[e]=o}else 3==t?n.type=i.readVarint():4==t&&(n.geometry=i.pos)}function t_(t,n,i){t.pos=n.features[i];var r=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(QM,e,r),e}var n_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=new ri({code:"",units:Rt.TILE_PIXELS}),i.up=r.featureClass?r.featureClass:Xw,i.k=r.geometryName,i.hp=r.layerName?r.layerName:"layer",i.Kh=r.layers?r.layers:null,i.fp=r.idProperty,i.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],i}return JM(n,t),n.prototype.ap=function(t,n,i,r){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,s=0,u=0,h=0,f=0,a=0;t.pos<e;){if(!s){var c=t.readVarint();o=7&c,s=c>>3}s--,1===o||2===o?(u+=t.readSVarint(),h+=t.readSVarint(),1===o&&f>a&&(r.push(f),a=f),i.push(u,h),f+=2):7===o?f>a&&(i.push(i[a],i[a+1]),f+=2):Ot(!1,59)}f>a&&(r.push(f),a=f)},n.prototype.cp=function(t,n,i){var r,e=n.type;if(0===e)return null;var o,s=n.properties;this.fp?(o=s[this.fp],delete s[this.fp]):o=n.id,s[this.hp]=n.layer.name;var u=[],h=[];this.ap(t,n,u,h);var f=function(t,n){var i;1===t?i=1===n?"Point":"MultiPoint":2===t?i=1===n?"LineString":"MultiLineString":3===t&&(i="Polygon");return i}(e,h.length);if(this.up===Xw)(r=new this.up(f,u,h,s,o)).transform(i.dataProjection);else{var a=void 0;if("Polygon"==f){var c=Ue(u,h);a=c.length>1?new Gw(u,Tt,c):new Ve(u,Tt,h)}else a="Point"===f?new _e(u,Tt):"LineString"===f?new kw(u,Tt):"MultiPoint"===f?new Tw(u,Tt):"MultiLineString"===f?new Fw(u,Tt,h):null;r=new(0,this.up),this.k&&r.setGeometryName(this.k);var v=by(a,!1,i);r.setGeometry(v),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r},n.prototype.getType=function(){return"arraybuffer"},n.prototype.readFeatures=function(t,n){var i=this.Kh,r=this.adaptOptions(n),e=pr(r.dataProjection);e.setWorldExtent(r.extent),r.dataProjection=e;var o=new HM(t),s=o.readFields($M,{}),u=[];for(var h in s)if(!i||-1!=i.indexOf(h)){var f=s[h],a=f?[0,0,f.extent,f.extent]:null;e.setExtent(a);for(var c=0,v=f.length;c<v;++c){var l=t_(o,f,c),d=this.cp(o,l,r);null!==d&&u.push(d)}}return u},n.prototype.readProjection=function(t){return this.dataProjection},n.prototype.setLayers=function(t){this.Kh=t},n}(my),i_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),r_=[null],e_=Za(r_,{nd:function(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"))},tag:h_}),o_=Za(r_,{node:function(t,n){var i=n[0],r=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[e]=o;var s=Ha({tags:{}},u_,t,n);if(!N(s.tags)){var u=new _e(o);by(u,!1,i);var h=new Et(u);void 0!==e&&h.setId(e),h.setProperties(s.tags,!0),r.features.push(h)}},way:function(t,n){var i=Ha({id:t.getAttribute("id"),ndrefs:[],tags:{}},e_,t,n);n[n.length-1].ways.push(i)}}),s_=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=pr("EPSG:4326"),n}return i_(n,t),n.prototype.readFeaturesFromNode=function(t,n){var i=this.getReadOptions(t,n);if("osm"==t.localName){for(var r=Ha({nodes:{},ways:[],features:[]},o_,t,[i]),e=0;e<r.ways.length;e++){for(var o=r.ways[e],s=[],u=0,h=o.ndrefs.length;u<h;u++){m(s,r.nodes[o.ndrefs[u]])}var f=void 0;by(f=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ve(s,Tt,[s.length]):new kw(s,Tt),!1,i);var a=new Et(f);void 0!==o.id&&a.setId(o.id),a.setProperties(o.tags,!0),r.features.push(a)}if(r.features)return r.features}return[]},n}(Ly),u_=Za(r_,{tag:h_});function h_(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var f_=s_,a_=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=Ra(t);return this.readFromDocument(n)}return La(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}();function c_(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var v_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l_=[null,"http://www.opengis.net/ows/1.1"],d_=Za(l_,{ServiceIdentification:Ua((function(t,n){return Ha({},E_,t,n)})),ServiceProvider:Ua((function(t,n){return Ha({},T_,t,n)})),OperationsMetadata:Ua((function(t,n){return Ha({},x_,t,n)}))}),p_=function(t){function n(){return t.call(this)||this}return v_(n,t),n.prototype.readFromNode=function(t){var n=Ha({},d_,t,[]);return n||null},n}(a_),w_=Za(l_,{DeliveryPoint:Ua(Xy),City:Ua(Xy),AdministrativeArea:Ua(Xy),PostalCode:Ua(Xy),Country:Ua(Xy),ElectronicMailAddress:Ua(Xy)}),g_=Za(l_,{Value:za((function(t,n){return Xy(t)}))}),y_=Za(l_,{AllowedValues:Ua((function(t,n){return Ha({},g_,t,n)}))}),m_=Za(l_,{Phone:Ua((function(t,n){return Ha({},O_,t,n)})),Address:Ua((function(t,n){return Ha({},w_,t,n)}))}),b_=Za(l_,{HTTP:Ua((function(t,n){return Ha({},M_,t,n)}))}),M_=Za(l_,{Get:za((function(t,n){var i=c_(t);if(!i)return;return Ha({href:i},S_,t,n)})),Post:void 0}),__=Za(l_,{DCP:Ua((function(t,n){return Ha({},b_,t,n)}))}),x_=Za(l_,{Operation:function(t,n){var i=t.getAttribute("name"),r=Ha({},__,t,n);if(!r)return;n[n.length-1][i]=r}}),O_=Za(l_,{Voice:Ua(Xy),Facsimile:Ua(Xy)}),S_=Za(l_,{Constraint:za((function(t,n){var i=t.getAttribute("name");if(!i)return;return Ha({name:i},y_,t,n)}))}),j_=Za(l_,{IndividualName:Ua(Xy),PositionName:Ua(Xy),ContactInfo:Ua((function(t,n){return Ha({},m_,t,n)}))}),E_=Za(l_,{Abstract:Ua(Xy),AccessConstraints:Ua(Xy),Fees:Ua(Xy),Title:Ua(Xy),ServiceTypeVersion:Ua(Xy),ServiceType:Ua(Xy)}),T_=Za(l_,{ProviderName:Ua(Xy),ProviderSite:Ua(c_),ServiceContact:Ua((function(t,n){return Ha({},j_,t,n)}))});var P_=p_,A_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function C_(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=0,u=t.length;s<u;)for(r=0;r<n;++r,++s){var h=t[s],f=h-o[r];o[r]=h,t[s]=f}return k_(t,e)}function N_(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=L_(t,e),u=0,h=s.length;u<h;)for(r=0;r<n;++r,++u)o[r]+=s[u],s[u]=o[r];return s}function k_(t,n){for(var i=n||1e5,r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*i);return F_(t)}function L_(t,n){for(var i=n||1e5,r=R_(t),e=0,o=r.length;e<o;++e)r[e]/=i;return r}function F_(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return I_(t)}function R_(t){for(var n=G_(t),i=0,r=n.length;i<r;++i){var e=n[i];n[i]=1&e?~(e>>1):e>>1}return n}function I_(t){for(var n="",i=0,r=t.length;i<r;++i)n+=D_(t[i]);return n}function G_(t){for(var n=[],i=0,r=0,e=0,o=t.length;e<o;++e){var s=t.charCodeAt(e)-63;i|=(31&s)<<r,s<32?(n.push(i),i=0,r=0):r+=5}return n}function D_(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var z_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=pr("EPSG:4326"),i.vp=r.factor?r.factor:1e5,i.Av=r.geometryLayout?r.geometryLayout:Tt,i}return A_(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new Et(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Wr(this.Av),r=N_(t,i,this.vp);yy(r,0,r.length,i,r);var e=le(r,0,r.length,i);return by(new kw(e,this.Av),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(Ot(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=by(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return yy(i,0,i.length,r,i),C_(i,r,this.vp)},n}(Bm),U_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),X_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.hp=r.layerName,i.Kh=r.layers?r.layers:null,i.dataProjection=pr(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return U_(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,e=null,o=null;i.transform&&(e=(r=i.transform).scale,o=r.translate);var s=i.arcs;r&&function(t,n,i){for(var r=0,e=t.length;r<e;++r)Z_(t[r],n,i)}(s,e,o);var u=[],h=i.objects,f=this.hp,a=void 0;for(var c in h)this.Kh&&-1==this.Kh.indexOf(c)||("GeometryCollection"===h[c].type?(a=h[c],u.push.apply(u,q_(a,s,e,o,f,c,n))):(a=h[c],u.push(W_(a,s,e,o,f,c,n))));return u}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(Oy),B_={Point:function(t,n,i){var r=t.coordinates;n&&i&&Y_(r,n,i);return new _e(r)},LineString:function(t,n){var i=V_(t.arcs,n);return new kw(i)},Polygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=V_(t.arcs[r],n);return new Ve(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var e=0,o=r.length;e<o;++e)Y_(r[e],n,i);return new Tw(r)},MultiLineString:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=V_(t.arcs[r],n);return new Fw(i)},MultiPolygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){for(var o=t.arcs[r],s=[],u=0,h=o.length;u<h;++u)s[u]=V_(o[u],n);i[r]=s}return new Gw(i)}};function V_(t,n){for(var i,r=[],e=0,o=t.length;e<o;++e)if(i=t[e],e>0&&r.pop(),i>=0)for(var s=0,u=(h=n[i]).length;s<u;++s)r.push(h[s].slice(0));else{var h;for(s=(h=n[~i]).length-1;s>=0;--s)r.push(h[s].slice(0))}return r}function q_(t,n,i,r,e,o,s){for(var u=t.geometries,h=[],f=0,a=u.length;f<a;++f)h[f]=W_(u[f],n,i,r,e,o,s);return h}function W_(t,n,i,r,e,o,s){var u=null,h=t.type;if(h){var f=B_[h];u=by(u="Point"===h||"MultiPoint"===h?f(t,i,r):f(t,n),!1,s)}var a=new Et({geometry:u});void 0!==t.id&&a.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&a.setProperties(c,!0),a}function Z_(t,n,i){for(var r=0,e=0,o=0,s=t.length;o<s;++o){var u=t[o];r+=u[0],e+=u[1],u[0]=r,u[1]=e,Y_(u,n,i)}}function Y_(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var H_=X_,J_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$_="http://www.opengis.net/gml",K_=/^[\s\xa0]*$/,Q_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.featureType=r.featureType,i.featureNS=r.featureNS,i.srsName=r.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:Ga(i.readFeaturesInternal),featureMembers:Da(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i}return J_(n,t),n.prototype.readFeaturesInternal=function(t,n){var i=t.localName,r=null;if("FeatureCollection"==i)r=Ha([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var e=n[0],o=e.featureType,s=e.featureNS;if(!o&&t.childNodes){o=[],s={};for(var u=0,h=t.childNodes.length;u<h;++u){var f=t.childNodes[u];if(1===f.nodeType){var a=f.nodeName.split(":").pop();if(-1===o.indexOf(a)){var c="",v=0,l=f.namespaceURI;for(var d in s){if(s[d]===l){c=d;break}++v}c||(s[c="p"+v]=l),o.push(c+":"+a)}}}"featureMember"!=i&&(e.featureType=o,e.featureNS=s)}if("string"==typeof s){var p=s;(s={}).p0=p}var w={},g=Array.isArray(o)?o:[o];for(var y in s){var m={};for(u=0,h=g.length;u<h;++u){(-1===g[u].indexOf(":")?"p0":g[u].split(":")[0])===y&&(m[g[u].split(":").pop()]="featureMembers"==i?Ga(this.readFeatureElement,this):Da(this.readFeatureElement,this))}w[s[y]]=m}r=Ha("featureMember"==i||"member"==i?void 0:[],w,t,n)}return null===r&&(r=[]),r},n.prototype.readGeometryOrExtent=function(t,n){var i=n[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Ha(null,this.GEOMETRY_PARSERS,t,n,this)},n.prototype.readExtentElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?My(r,i):void 0},n.prototype.readGeometryElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?by(r,!1,i):void 0},n.prototype.readFeatureElementInternal=function(t,n,i){for(var r,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,u=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=Na(o,!1),K_.test(s)&&(s=void 0)):(i&&(s="boundedBy"===u?this.readExtentElement(o,n):this.readGeometryElement(o,n)),s?"boundedBy"!==u&&(r=u):s=this.readFeatureElementInternal(o,n,!1));var h=o.attributes.length;if(h>0){s={lp:s};for(var f=0;f<h;f++){s[o.attributes[f].name]=o.attributes[f].value}}e[u]?(e[u]instanceof Array||(e[u]=[e[u]]),e[u].push(s)):e[u]=s}if(i){var a=new Et(e);r&&a.setGeometryName(r);var c=t.getAttribute("fid")||Fa(t,this.namespace,"id");return c&&a.setId(c),a}return e},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0)},n.prototype.readPoint=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new _e(i,Pt)},n.prototype.readMultiPoint=function(t,n){var i=Ha([],this.MULTIPOINT_PARSERS,t,n,this);return i?new Tw(i):void 0},n.prototype.readMultiLineString=function(t,n){var i=Ha([],this.MULTILINESTRING_PARSERS,t,n,this);if(i)return new Fw(i)},n.prototype.readMultiPolygon=function(t,n){var i=Ha([],this.MULTIPOLYGON_PARSERS,t,n,this);if(i)return new Gw(i)},n.prototype.pointMemberParser=function(t,n){Ya(this.POINTMEMBER_PARSERS,t,n,this)},n.prototype.lineStringMemberParser=function(t,n){Ya(this.LINESTRINGMEMBER_PARSERS,t,n,this)},n.prototype.polygonMemberParser=function(t,n){Ya(this.POLYGONMEMBER_PARSERS,t,n,this)},n.prototype.readLineString=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);return i?new kw(i,Pt):void 0},n.prototype.readFlatLinearRing=function(t,n){var i=Ha(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return i||void 0},n.prototype.readLinearRing=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new be(i,Pt)},n.prototype.readPolygon=function(t,n){var i=Ha([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)m(e,i[s]),o.push(e.length);return new Ve(e,Pt,o)}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Ha(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.readGeometryFromNode=function(t,n){var i=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){var i={featureType:this.featureType,featureNS:this.featureNS};return n&&P(i,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[i])||[]},n.prototype.readProjectionFromNode=function(t){return pr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},n}(Ly);Q_.prototype.namespace=$_,Q_.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Q_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Q_.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Q_.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Ga(Q_.prototype.pointMemberParser),pointMembers:Ga(Q_.prototype.pointMemberParser)}},Q_.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Ga(Q_.prototype.lineStringMemberParser),lineStringMembers:Ga(Q_.prototype.lineStringMemberParser)}},Q_.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Ga(Q_.prototype.polygonMemberParser),polygonMembers:Ga(Q_.prototype.polygonMemberParser)}},Q_.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Ga(Q_.prototype.readFlatCoordinatesFromNode)}},Q_.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Ga(Q_.prototype.readLineString)}},Q_.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Ga(Q_.prototype.readPolygon)}},Q_.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Da(Q_.prototype.readFlatLinearRing)}};var tx=Q_,nx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ix={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},rx=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[$_].featureMember=Ga(i.readFeaturesInternal),i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return nx(n,t),n.prototype.readFlatCoordinates=function(t,n){var i=Na(t,!1).replace(/^\s*|\s*$/g,""),r=n[0].srsName,e="enu";if(r){var o=pr(r);o&&(e=o.getAxisOrientation())}for(var s=i.trim().split(/\s+/),u=[],h=0,f=s.length;h<f;h++){var a=s[h].split(/,+/),c=parseFloat(a[0]),v=parseFloat(a[1]),l=3===a.length?parseFloat(a[2]):0;"en"===e.substr(0,2)?u.push(c,v,l):u.push(v,c,l)}return u},n.prototype.readBox=function(t,n){var i=Ha([null],this.dp,t,n,this);return On(i[1][0],i[1][1],i[1][3],i[1][4])},n.prototype.innerBoundaryIsParser=function(t,n){var i=Ha(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.outerBoundaryIsParser=function(t,n){var i=Ha(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.pp=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===u&&(r="MultiCurve"),Ca("http://www.opengis.net/gml",r)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],h=[];if(n.hasProperties()){var f=n.getProperties();for(var a in f){var c=f[a];null!==c&&(u.push(a),h.push(c),a==s||"function"==typeof c.getSimplifiedGeometry?a in e.serializers[o]||(e.serializers[o][a]=Xa(this.writeGeometryElement,this)):a in e.serializers[o]||(e.serializers[o][a]=Xa(Yy)))}}var v=P({},e);v.node=t,$a(v,e.serializers,Va(void 0,o),h,i,u)},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.wp(t.namespaceURI);t.appendChild(e),this.gp(e,n,i)}else if("Curve"===t.nodeName){var o=Ca(t.namespaceURI,"segments");t.appendChild(o),this.yp(o,n,i)}},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.pp(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();$a({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.mp,u,i,void 0,this)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=P({},e);o.node=t,r=Array.isArray(n)?My(n,e):by(n,!0,e),$a(o,this.GEOMETRY_SERIALIZERS,this.pp,[r],i,void 0,this)},n.prototype.wp=function(t){var n=Ca(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n},n.prototype.gp=function(t,n,i){for(var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=n.getCoordinates(),u=s.length,h=new Array(u),f=0;f<u;++f){var a=s[f];h[f]=this.bp(a,o,e)}Yy(t,h.join(" "))},n.prototype.yp=function(t,n,i){var r=Ca(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();$a({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Mp,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=Ca(t.namespaceURI,"patches");t.appendChild(u),this._p(u,n,i)}},n.prototype.Mp=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Ca(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},n.prototype._p=function(t,n,i){var r=Ca(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.writeRing=function(t,n,i){var r=Ca(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.bp=function(t,n,i){var r="enu";n&&(r=pr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(e+=","+(t[2]||0));return e},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.wp(t.namespaceURI);t.appendChild(s);var u=n.getCoordinates();Yy(s,this.bp(u,o,e))},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=n.getPoints();$a({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Va("pointMember"),s,i,void 0,this)},n.prototype.writePointMember=function(t,n,i){var r=Ca(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=this.wp(t.namespaceURI);t.appendChild(e),this.gp(e,n,i)},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();$a({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.mp,u,i,void 0,this)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.pp(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];$a({node:t},this.ENVELOPE_SERIALIZERS,qa,e,i,["lowerCorner","upperCorner"],this)},n.prototype.mp=function(t,n,i){var r=n[n.length-1].node;return Ca("http://www.opengis.net/gml",ix[r.nodeName])},n}(tx);rx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Da(rx.prototype.readFlatCoordinates)}},rx.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:rx.prototype.innerBoundaryIsParser,outerBoundaryIs:rx.prototype.outerBoundaryIsParser}},rx.prototype.dp={"http://www.opengis.net/gml":{coordinates:Ga(rx.prototype.readFlatCoordinates)}},rx.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Da(tx.prototype.readPoint),MultiPoint:Da(tx.prototype.readMultiPoint),LineString:Da(tx.prototype.readLineString),MultiLineString:Da(tx.prototype.readMultiLineString),LinearRing:Da(tx.prototype.readLinearRing),Polygon:Da(tx.prototype.readPolygon),MultiPolygon:Da(tx.prototype.readMultiPolygon),Box:Da(rx.prototype.readBox)}},rx.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Xa(rx.prototype.writeCurveOrLineString),MultiCurve:Xa(rx.prototype.writeMultiCurveOrLineString),Point:Xa(rx.prototype.writePoint),MultiPoint:Xa(rx.prototype.writeMultiPoint),LineString:Xa(rx.prototype.writeCurveOrLineString),MultiLineString:Xa(rx.prototype.writeMultiCurveOrLineString),LinearRing:Xa(rx.prototype.writeLinearRing),Polygon:Xa(rx.prototype.writeSurfaceOrPolygon),MultiPolygon:Xa(rx.prototype.writeMultiSurfaceOrPolygon),Surface:Xa(rx.prototype.writeSurfaceOrPolygon),MultiSurface:Xa(rx.prototype.writeMultiSurfaceOrPolygon),Envelope:Xa(rx.prototype.writeEnvelope)}},rx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Xa(rx.prototype.writeLineStringOrCurveMember),curveMember:Xa(rx.prototype.writeLineStringOrCurveMember)}},rx.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Xa(rx.prototype.writeRing),innerBoundaryIs:Xa(rx.prototype.writeRing)}},rx.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Xa(rx.prototype.writePointMember)}},rx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Xa(rx.prototype.writeSurfaceOrPolygonMember),polygonMember:Xa(rx.prototype.writeSurfaceOrPolygonMember)}},rx.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Xa(Yy),upperCorner:Xa(Yy)}};var ex=rx,ox=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sx={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},ux=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).xp=void 0!==r.surface&&r.surface,i.Op=void 0!==r.curve&&r.curve,i.Sp=void 0===r.multiCurve||r.multiCurve,i.jp=void 0===r.multiSurface||r.multiSurface,i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==r.hasZ&&r.hasZ,i}return ox(n,t),n.prototype.readMultiCurve=function(t,n){var i=Ha([],this.MULTICURVE_PARSERS,t,n,this);return i?new Fw(i):void 0},n.prototype.readFlatCurveRing=function(t,n){for(var i=Ha([],this.MULTICURVE_PARSERS,t,n,this),r=[],e=0,o=i.length;e<o;++e)m(r,i[e].getFlatCoordinates());return r},n.prototype.readMultiSurface=function(t,n){var i=Ha([],this.MULTISURFACE_PARSERS,t,n,this);if(i)return new Gw(i)},n.prototype.curveMemberParser=function(t,n){Ya(this.CURVEMEMBER_PARSERS,t,n,this)},n.prototype.surfaceMemberParser=function(t,n){Ya(this.SURFACEMEMBER_PARSERS,t,n,this)},n.prototype.readPatch=function(t,n){return Ha([null],this.PATCHES_PARSERS,t,n,this)},n.prototype.readSegment=function(t,n){return Ha([],this.SEGMENTS_PARSERS,t,n,this)},n.prototype.readPolygonPatch=function(t,n){return Ha([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)},n.prototype.readLineStringSegment=function(t,n){return Ha([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.interiorParser=function(t,n){var i=Ha(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.exteriorParser=function(t,n){var i=Ha(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.readSurface=function(t,n){var i=Ha([null],this.SURFACE_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)m(e,i[s]),o.push(e.length);return new Ve(e,Pt,o)}},n.prototype.readCurve=function(t,n){var i=Ha([null],this.CURVE_PARSERS,t,n,this);return i?new kw(i,Pt):void 0},n.prototype.readEnvelope=function(t,n){var i=Ha([null],this.ENVELOPE_PARSERS,t,n,this);return On(i[1][0],i[1][1],i[2][0],i[2][1])},n.prototype.readFlatPos=function(t,n){for(var i,r=Na(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=e.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var s=n[0].srsName,u="enu";if(s)u=pr(s).getAxisOrientation();if("neu"===u){var h,f=void 0;for(f=0,h=o.length;f<h;f+=3){var a=o[f],c=o[f+1];o[f]=c,o[f+1]=a}}var v=o.length;if(2==v&&o.push(0),0!==v)return o}},n.prototype.readFlatPosList=function(t,n){var i=Na(t,!1).replace(/^\s*|\s*$/g,""),r=n[0],e=r.srsName,o=r.srsDimension,s="enu";e&&(s=pr(e).getAxisOrientation());var u,h,f,a=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=Uy(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=Uy(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=Uy(t.parentNode.getAttribute("srsDimension")):o&&(c=Uy(o));for(var v=[],l=0,d=a.length;l<d;l+=c)u=parseFloat(a[l]),h=parseFloat(a[l+1]),f=3===c?parseFloat(a[l+2]):0,"en"===s.substr(0,2)?v.push(u,h,f):v.push(h,u,f);return v},n.prototype.Ep=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,u="enu";s&&(u=pr(s).getAxisOrientation());var h,f=n.getCoordinates();(h="en"===u.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0],e)&&(h+=" "+(f[2]||0));Yy(t,h)},n.prototype.bp=function(t,n,i){var r="enu";n&&(r=pr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(e+=" "+(t[2]||0));return e},n.prototype.Tp=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var s,u=r.srsName,h=n.getCoordinates(),f=h.length,a=new Array(f),c=0;c<f;++c)s=h[c],a[c]=this.bp(s,u,e);Yy(t,a.join(" "))},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=Ca(t.namespaceURI,"pos");t.appendChild(e),this.Ep(e,n,i)},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];$a({node:t},this.ENVELOPE_SERIALIZERS,qa,e,i,["lowerCorner","upperCorner"],this)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=Ca(t.namespaceURI,"posList");t.appendChild(e),this.Tp(e,n,i)},n.prototype.Mp=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Ca(e.namespaceURI,void 0!==o?"interior":"exterior")},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();$a({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Mp,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=Ca(t.namespaceURI,"patches");t.appendChild(u),this._p(u,n,i)}},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=Ca(t.namespaceURI,"posList");t.appendChild(e),this.Tp(e,n,i)}else if("Curve"===t.nodeName){var o=Ca(t.namespaceURI,"segments");t.appendChild(o),this.yp(o,n,i)}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();$a({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.mp,u,i,void 0,this)},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.srsName,o=r.hasZ;e&&t.setAttribute("srsName",e);var s=n.getPoints();$a({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Va("pointMember"),s,i,void 0,this)},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();$a({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.mp,u,i,void 0,this)},n.prototype.writeRing=function(t,n,i){var r=Ca(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.pp(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writePointMember=function(t,n,i){var r=Ca(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.pp(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype._p=function(t,n,i){var r=Ca(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.yp=function(t,n,i){var r=Ca(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=P({},e);o.node=t,r=Array.isArray(n)?My(n,e):by(n,!0,e),$a(o,this.GEOMETRY_SERIALIZERS,this.pp,[r],i,void 0,this)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],h=[];if(n.hasProperties()){var f=n.getProperties();for(var a in f){var c=f[a];null!==c&&(u.push(a),h.push(c),a==s||"function"==typeof c.getSimplifiedGeometry?a in e.serializers[o]||(e.serializers[o][a]=Xa(this.writeGeometryElement,this)):a in e.serializers[o]||(e.serializers[o][a]=Xa(Yy)))}}var v=P({},e);v.node=t,$a(v,e.serializers,Va(void 0,o),h,i,u)},n.prototype.Pp=function(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s={};s[o]={},s[o][e]=Xa(this.writeFeatureElement,this);var u=P({},r);u.node=t,$a(u,s,Va(e,o),n,i)},n.prototype.mp=function(t,n,i){var r=n[n.length-1].node;return Ca(this.namespace,sx[r.nodeName])},n.prototype.pp=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.curve,h=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===u?r="Curve":"MultiLineString"===r&&!0===h&&(r="MultiCurve"),Ca(this.namespace,r)},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var i=Ca(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.Op,surface:this.xp,multiSurface:this.jp,multiCurve:this.Sp};return n&&P(r,n),this.writeGeometryElement(i,t,[r]),i},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Ca(this.namespace,"featureMembers");i.setAttributeNS(Aa,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.Op,surface:this.xp,multiSurface:this.jp,multiCurve:this.Sp,featureNS:this.featureNS,featureType:this.featureType};return n&&P(r,n),this.Pp(i,t,[r]),i},n}(tx);ux.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Da(ux.prototype.readFlatPos),posList:Da(ux.prototype.readFlatPosList),coordinates:Da(ex.prototype.readFlatCoordinates)}},ux.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:ux.prototype.interiorParser,exterior:ux.prototype.exteriorParser}},ux.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Da(tx.prototype.readPoint),MultiPoint:Da(tx.prototype.readMultiPoint),LineString:Da(tx.prototype.readLineString),MultiLineString:Da(tx.prototype.readMultiLineString),LinearRing:Da(tx.prototype.readLinearRing),Polygon:Da(tx.prototype.readPolygon),MultiPolygon:Da(tx.prototype.readMultiPolygon),Surface:Da(ux.prototype.readSurface),MultiSurface:Da(ux.prototype.readMultiSurface),Curve:Da(ux.prototype.readCurve),MultiCurve:Da(ux.prototype.readMultiCurve),Envelope:Da(ux.prototype.readEnvelope)}},ux.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Ga(ux.prototype.curveMemberParser),curveMembers:Ga(ux.prototype.curveMemberParser)}},ux.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Ga(ux.prototype.surfaceMemberParser),surfaceMembers:Ga(ux.prototype.surfaceMemberParser)}},ux.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Ga(tx.prototype.readLineString),Curve:Ga(ux.prototype.readCurve)}},ux.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Ga(tx.prototype.readPolygon),Surface:Ga(ux.prototype.readSurface)}},ux.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Da(ux.prototype.readPatch)}},ux.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Da(ux.prototype.readSegment)}},ux.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Ga(ux.prototype.readFlatPosList),upperCorner:Ga(ux.prototype.readFlatPosList)}},ux.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Da(ux.prototype.readPolygonPatch)}},ux.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Ia(ux.prototype.readLineStringSegment)}},tx.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Da(tx.prototype.readFlatLinearRing),Ring:Da(ux.prototype.readFlatCurveRing)}},ux.prototype.writeFeatures,ux.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Xa(ux.prototype.writeRing),interior:Xa(ux.prototype.writeRing)}},ux.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Xa(Yy),upperCorner:Xa(Yy)}},ux.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Xa(ux.prototype.writeSurfaceOrPolygonMember),polygonMember:Xa(ux.prototype.writeSurfaceOrPolygonMember)}},ux.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Xa(ux.prototype.writePointMember)}},ux.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Xa(ux.prototype.writeLineStringOrCurveMember),curveMember:Xa(ux.prototype.writeLineStringOrCurveMember)}},ux.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Xa(ux.prototype.writeCurveOrLineString),MultiCurve:Xa(ux.prototype.writeMultiCurveOrLineString),Point:Xa(ux.prototype.writePoint),MultiPoint:Xa(ux.prototype.writeMultiPoint),LineString:Xa(ux.prototype.writeCurveOrLineString),MultiLineString:Xa(ux.prototype.writeMultiCurveOrLineString),LinearRing:Xa(ux.prototype.writeLinearRing),Polygon:Xa(ux.prototype.writeSurfaceOrPolygon),MultiPolygon:Xa(ux.prototype.writeMultiSurfaceOrPolygon),Surface:Xa(ux.prototype.writeSurfaceOrPolygon),MultiSurface:Xa(ux.prototype.writeMultiSurfaceOrPolygon),Envelope:Xa(ux.prototype.writeEnvelope)}};var hx=ux,fx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ax=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return fx(n,t),n}(hx);ax.prototype.namespace="http://www.opengis.net/gml/3.2",ax.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Da(hx.prototype.readFlatPos),posList:Da(hx.prototype.readFlatPosList),coordinates:Da(ex.prototype.readFlatCoordinates)}},ax.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:hx.prototype.interiorParser,exterior:hx.prototype.exteriorParser}},ax.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Da(tx.prototype.readPoint),MultiPoint:Da(tx.prototype.readMultiPoint),LineString:Da(tx.prototype.readLineString),MultiLineString:Da(tx.prototype.readMultiLineString),LinearRing:Da(tx.prototype.readLinearRing),Polygon:Da(tx.prototype.readPolygon),MultiPolygon:Da(tx.prototype.readMultiPolygon),Surface:Da(ax.prototype.readSurface),MultiSurface:Da(hx.prototype.readMultiSurface),Curve:Da(ax.prototype.readCurve),MultiCurve:Da(hx.prototype.readMultiCurve),Envelope:Da(ax.prototype.readEnvelope)}},ax.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Ga(hx.prototype.curveMemberParser),curveMembers:Ga(hx.prototype.curveMemberParser)}},ax.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ga(hx.prototype.surfaceMemberParser),surfaceMembers:Ga(hx.prototype.surfaceMemberParser)}},ax.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Ga(tx.prototype.readLineString),Curve:Ga(hx.prototype.readCurve)}},ax.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Ga(tx.prototype.readPolygon),Surface:Ga(hx.prototype.readSurface)}},ax.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Da(hx.prototype.readPatch)}},ax.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Da(hx.prototype.readSegment)}},ax.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ga(hx.prototype.readFlatPosList),upperCorner:Ga(hx.prototype.readFlatPosList)}},ax.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Da(hx.prototype.readPolygonPatch)}},ax.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Ia(hx.prototype.readLineStringSegment)}},ax.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Ga(tx.prototype.pointMemberParser),pointMembers:Ga(tx.prototype.pointMemberParser)}},ax.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ga(tx.prototype.lineStringMemberParser),lineStringMembers:Ga(tx.prototype.lineStringMemberParser)}},ax.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Ga(tx.prototype.polygonMemberParser),polygonMembers:Ga(tx.prototype.polygonMemberParser)}},ax.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Ga(tx.prototype.readFlatCoordinatesFromNode)}},ax.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Ga(tx.prototype.readLineString)}},ax.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Ga(tx.prototype.readPolygon)}},ax.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Da(tx.prototype.readFlatLinearRing),Ring:Da(ax.prototype.readFlatCurveRing)}},ax.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Xa(hx.prototype.writeRing),interior:Xa(hx.prototype.writeRing)}},ax.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Xa(Yy),upperCorner:Xa(Yy)}},ax.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Xa(hx.prototype.writeSurfaceOrPolygonMember),polygonMember:Xa(hx.prototype.writeSurfaceOrPolygonMember)}},ax.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Xa(hx.prototype.writePointMember)}},ax.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Xa(hx.prototype.writeLineStringOrCurveMember),curveMember:Xa(hx.prototype.writeLineStringOrCurveMember)}},ax.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Xa(hx.prototype.writeCurveOrLineString),MultiCurve:Xa(hx.prototype.writeMultiCurveOrLineString),Point:Xa(ax.prototype.writePoint),MultiPoint:Xa(hx.prototype.writeMultiPoint),LineString:Xa(hx.prototype.writeCurveOrLineString),MultiLineString:Xa(hx.prototype.writeMultiCurveOrLineString),LinearRing:Xa(hx.prototype.writeLinearRing),Polygon:Xa(hx.prototype.writeSurfaceOrPolygon),MultiPolygon:Xa(hx.prototype.writeMultiSurfaceOrPolygon),Surface:Xa(hx.prototype.writeSurfaceOrPolygon),MultiSurface:Xa(hx.prototype.writeMultiSurfaceOrPolygon),Envelope:Xa(hx.prototype.writeEnvelope)}};var cx=ax,vx=function(){function t(t){this.Ap=t}return t.prototype.getTagName=function(){return this.Ap},t}(),lx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dx=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,Ot(r.conditions.length>=2,57),r}return lx(n,t),n}(vx),px=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wx=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return px(n,t),n}(dx),gx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yx=function(t){function n(n,i,r){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=r,e}return gx(n,t),n}(vx);var mx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bx={"http://www.opengis.net/gml":{boundedBy:Ua(tx.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Ga(tx.prototype.readFeaturesInternal)}},Mx={"http://www.opengis.net/wfs":{totalInserted:Ua(zy),totalUpdated:Ua(zy),totalDeleted:Ua(zy)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ua(zy),totalUpdated:Ua(zy),totalDeleted:Ua(zy)}},_x={"http://www.opengis.net/wfs":{TransactionSummary:Ua(Lx,"transactionSummary"),InsertResults:Ua(Gx,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ua(Lx,"transactionSummary"),InsertResults:Ua(Gx,"insertIds")}},xx={"http://www.opengis.net/wfs":{PropertyName:Xa(Yy)},"http://www.opengis.net/wfs/2.0":{PropertyName:Xa(Yy)}},Ox={"http://www.opengis.net/wfs":{Insert:Xa(Dx),Update:Xa(Bx),Delete:Xa(Xx),Property:Xa(Vx),Native:Xa(qx)},"http://www.opengis.net/wfs/2.0":{Insert:Xa(Dx),Update:Xa(Bx),Delete:Xa(Xx),Property:Xa(Vx),Native:Xa(qx)}},Sx="feature",jx="http://www.w3.org/2000/xmlns/",Ex={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},Tx={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Px={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Ax={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},Cx={"2.0.0":cx,"1.1.0":hx,"1.0.0":ex},Nx=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.gf=r.version?r.version:"1.1.0",i.Cp=r.featureType,i.Np=r.featureNS,i.kp=r.gmlFormat?r.gmlFormat:new Cx[i.gf],i.Lp=r.schemaLocation?r.schemaLocation:Ax[i.gf],i}return mx(n,t),n.prototype.getFeatureType=function(){return this.Cp},n.prototype.setFeatureType=function(t){this.Cp=t},n.prototype.readFeaturesFromNode=function(t,n){var i={node:t};P(i,{featureType:this.Cp,featureNS:this.Np}),P(i,this.getReadOptions(t,n||{}));var r=[i],e=Ha([],"2.0.0"===this.gf?bx:this.kp.FEATURE_COLLECTION_PARSERS,t,r,this.kp);return e||(e=[]),e},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=Ra(t);return this.readTransactionResponseFromDocument(n)}return La(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=Ra(t);return this.readFeatureCollectionMetadataFromDocument(n)}return La(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},i=Uy(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=i,Ha(n,bx,t,[],this.kp)},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)},n.prototype.readTransactionResponseFromNode=function(t){return Ha({},_x,t,[])},n.prototype.writeGetFeature=function(t){var n=this,i=Ca(Tx[this.gf],"GetFeature");i.setAttribute("service","WFS"),i.setAttribute("version",this.gf),t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),i.setAttributeNS(Aa,"xsi:schemaLocation",this.Lp);var r={node:i};if(P(r,{version:this.gf,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.Np,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Ot(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(Ot(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),P(r,{geometryName:t.geometryName,filter:e}),fO(i,t.featureTypes,[r])}else t.featureTypes.forEach((function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);P(r,{geometryName:e.geometryName,filter:o}),fO(i,[e.name],[r])}));return i},n.prototype.combineBboxAndFilter=function(t,n,i,r){var e=function(t,n,i){return new yx(t,n,i)}(t,n,i);return r?function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(wx,n))}(r,e):e},n.prototype.writeTransaction=function(t,n,i,r){var e,o=[],s=r.version?r.version:this.gf,u=Ca(Tx[s],"Transaction");u.setAttribute("service","WFS"),u.setAttribute("version",s),r&&(e=r.gmlOptions?r.gmlOptions:{},r.handle&&u.setAttribute("handle",r.handle)),u.setAttributeNS(Aa,"xsi:schemaLocation",Ax[s]);var h=function(t,n,i,r){var e,o=r.featurePrefix?r.featurePrefix:Sx;"1.0.0"===i?e=2:"1.1.0"===i?e=3:"2.0.0"===i&&(e=3.2);return P({node:t},{version:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:e,hasZ:r.hasZ,srsName:r.srsName},n)}(u,e,s,r);return t&&kx("Insert",t,o,h),n&&kx("Update",n,o,h),i&&kx("Delete",i,o,h),r.nativeElements&&kx("Native",r.nativeElements,o,h),u},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var i=[{}];return this.kp.readGeometryElement(n,i),pr(i.pop().srsName)}return null},n}(Ly);function kx(t,n,i,r){$a(r,Ox,Va(t),n,i)}function Lx(t,n){return Ha({},Mx,t,n)}var Fx={"http://www.opengis.net/ogc":{FeatureId:Ga((function(t,n){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:Ga((function(t,n){return t.getAttribute("fid")}))}};function Rx(t,n){Ya(Fx,t,n)}var Ix={"http://www.opengis.net/wfs":{Feature:Rx},"http://www.opengis.net/wfs/2.0":{Feature:Rx}};function Gx(t,n){return Ha([],Ix,t,n)}function Dx(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s=r.gmlVersion,u=Ca(o,e);t.appendChild(u),2===s?ex.prototype.writeFeatureElement(u,n,i):3===s?hx.prototype.writeFeatureElement(u,n,i):cx.prototype.writeFeatureElement(u,n,i)}function zx(t,n,i){var r=i[i.length-1].version,e=Ex[r],o=Ca(e,"Filter"),s=Ca(e,"FeatureId");o.appendChild(s),s.setAttribute("fid",n),t.appendChild(o)}function Ux(t,n){var i=(t=t||Sx)+":";return 0===n.indexOf(i)?n:i+n}function Xx(t,n,i){var r=i[i.length-1];Ot(void 0!==n.getId(),26);var e=r.featureType,o=r.featurePrefix,s=r.featureNS,u=Ux(o,e);t.setAttribute("typeName",u),t.setAttributeNS(jx,"xmlns:"+o,s);var h=n.getId();void 0!==h&&zx(t,h,i)}function Bx(t,n,i){var r=i[i.length-1];Ot(void 0!==n.getId(),27);var e=r.version,o=r.featureType,s=r.featurePrefix,u=r.featureNS,h=Ux(s,o),f=n.getGeometryName();t.setAttribute("typeName",h),t.setAttributeNS(jx,"xmlns:"+s,u);var a=n.getId();if(void 0!==a){for(var c=n.getKeys(),v=[],l=0,d=c.length;l<d;l++){var p=n.get(c[l]);if(void 0!==p){var w=c[l];p&&"function"==typeof p.getSimplifiedGeometry&&(w=f),v.push({name:w,value:p})}}$a({version:e,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},Ox,Va("Property"),v,i),zx(t,a,i)}}function Vx(t,n,i){var r=i[i.length-1],e=r.version,o=Tx[e],s=Ca(o,"Name"),u=r.gmlVersion;if(t.appendChild(s),Yy(s,n.name),void 0!==n.value&&null!==n.value){var h=Ca(o,"Value");t.appendChild(h),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===u?ex.prototype.writeGeometryElement(h,n.value,i):3===u?hx.prototype.writeGeometryElement(h,n.value,i):cx.prototype.writeGeometryElement(h,n.value,i):Yy(h,n.value)}}function qx(t,n,i){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&Yy(t,n.value)}var Wx={"http://www.opengis.net/wfs":{Query:Xa(Zx)},"http://www.opengis.net/wfs/2.0":{Query:Xa(Zx)},"http://www.opengis.net/ogc":{During:Xa(Kx),And:Xa(Qx),Or:Xa(Qx),Not:Xa(tO),BBOX:Xa(Hx),Contains:Xa(Jx),Intersects:Xa(Jx),Within:Xa(Jx),DWithin:Xa($x),PropertyIsEqualTo:Xa(nO),PropertyIsNotEqualTo:Xa(nO),PropertyIsLessThan:Xa(nO),PropertyIsLessThanOrEqualTo:Xa(nO),PropertyIsGreaterThan:Xa(nO),PropertyIsGreaterThanOrEqualTo:Xa(nO),PropertyIsNull:Xa(iO),PropertyIsBetween:Xa(rO),PropertyIsLike:Xa(eO)},"http://www.opengis.net/fes/2.0":{During:Xa(Kx),And:Xa(Qx),Or:Xa(Qx),Not:Xa(tO),BBOX:Xa(Hx),Contains:Xa(Jx),Disjoint:Xa(Jx),Intersects:Xa(Jx),ResourceId:Xa((function(t,n,i){t.setAttribute("rid",n.rid)})),Within:Xa(Jx),DWithin:Xa($x),PropertyIsEqualTo:Xa(nO),PropertyIsNotEqualTo:Xa(nO),PropertyIsLessThan:Xa(nO),PropertyIsLessThanOrEqualTo:Xa(nO),PropertyIsGreaterThan:Xa(nO),PropertyIsGreaterThanOrEqualTo:Xa(nO),PropertyIsNull:Xa(iO),PropertyIsBetween:Xa(rO),PropertyIsLike:Xa(eO)}};function Zx(t,n,i){var r,e,o=i[i.length-1],s=o.version,u=o.featurePrefix,h=o.featureNS,f=o.propertyNames,a=o.srsName;r=u?Ux(u,n):n,e="2.0.0"===s?"typeNames":"typeName",t.setAttribute(e,r),a&&t.setAttribute("srsName",a),h&&t.setAttributeNS(jx,"xmlns:"+u,h);var c=P({},o);c.node=t,$a(c,xx,Va("PropertyName"),f,i);var v=o.filter;if(v){var l=Ca(aO(s),"Filter");t.appendChild(l),Yx(l,v,i)}}function Yx(t,n,i){var r=i[i.length-1],e={node:t};P(e,{context:r}),$a(e,Wx,Va(n.getTagName()),[n],i)}function Hx(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=Cx[e];uO(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,i)}function Jx(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=Cx[e];uO(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,i)}function $x(t,n,i){var r=i[i.length-1].context.version;Jx(t,n,i);var e=Ca(aO(r),"Distance");Yy(e,n.distance.toString()),"2.0.0"===r?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e)}function Kx(t,n,i){var r=i[i.length-1].context.version;oO(Px[r],"ValueReference",t,n.propertyName);var e=Ca($_,"TimePeriod");t.appendChild(e);var o=Ca($_,"begin");e.appendChild(o),hO(o,n.begin);var s=Ca($_,"end");e.appendChild(s),hO(s,n.end)}function Qx(t,n,i){var r=i[i.length-1].context,e={node:t};P(e,{context:r});for(var o=n.conditions,s=0,u=o.length;s<u;++s){var h=o[s];$a(e,Wx,Va(h.getTagName()),[h],i)}}function tO(t,n,i){var r=i[i.length-1].context,e={node:t};P(e,{context:r});var o=n.condition;$a(e,Wx,Va(o.getTagName()),[o],i)}function nO(t,n,i){var r=i[i.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),uO(r,t,n.propertyName),sO(r,t,""+n.expression)}function iO(t,n,i){uO(i[i.length-1].context.version,t,n.propertyName)}function rO(t,n,i){var r=i[i.length-1].context.version,e=aO(r);uO(r,t,n.propertyName);var o=Ca(e,"LowerBoundary");t.appendChild(o),sO(r,o,""+n.lowerBoundary);var s=Ca(e,"UpperBoundary");t.appendChild(s),sO(r,s,""+n.upperBoundary)}function eO(t,n,i){var r=i[i.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),uO(r,t,n.propertyName),sO(r,t,""+n.pattern)}function oO(t,n,i,r){var e=Ca(t,n);Yy(e,r),i.appendChild(e)}function sO(t,n,i){oO(aO(t),"Literal",n,i)}function uO(t,n,i){"2.0.0"===t?oO(Px[t],"ValueReference",n,i):oO(Ex[t],"PropertyName",n,i)}function hO(t,n){var i=Ca($_,"TimeInstant");t.appendChild(i);var r=Ca($_,"timePosition");i.appendChild(r),Yy(r,n)}function fO(t,n,i){var r=i[i.length-1],e=P({},r);e.node=t,$a(e,Wx,Va("Query"),n,i)}function aO(t){return"2.0.0"===t?Px[t]:Ex[t]}var cO=Nx,vO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lO=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Np="http://mapserver.gis.umn.edu/mapserver",i.kp=new ex,i.Kh=r.layers?r.layers:null,i}return vO(n,t),n.prototype.getLayers=function(){return this.Kh},n.prototype.setLayers=function(t){this.Kh=t},n.prototype.Fp=function(t,n){t.setAttribute("namespaceURI",this.Np);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var e=0,o=t.childNodes.length;e<o;e++){var s=t.childNodes[e];if(s.nodeType===Node.ELEMENT_NODE){var u=s,h=n[0],f=u.localName.replace("_layer","");if(!this.Kh||w(this.Kh,f)){var a=f+"_feature";h.featureType=a,h.featureNS=this.Np;var c={};c[a]=Ga(this.kp.readFeatureElement,this.kp);var v=Za([h.featureNS,null],c);u.setAttribute("namespaceURI",this.Np);var l=Ha([],v,u,n,this.kp);l&&m(r,l)}}}if("FeatureCollection"==i){var d=Ha([],this.kp.FEATURE_COLLECTION_PARSERS,t,[{}],this.kp);d&&(r=d)}return r},n.prototype.readFeaturesFromNode=function(t,n){var i={};return n&&P(i,this.getReadOptions(t,n)),this.Fp(t,[i])},n}(Ly),dO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pO=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],wO="enterfullscreen",gO="leavefullscreen";function yO(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled)}function mO(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function bO(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var MO=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.vf=void 0!==r.keys&&r.keys,i.cv=r.source,i.Rp=!1,i.Ip=i.Gp.bind(i),i.Dp=void 0!==r.className?r.className:"ol-full-screen",i.zp=[],i.Up=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.Dp+"-true"],i.Xp=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.Dp+"-false"];var e=void 0!==r.label?r.label:"⤢";i.Bp="string"==typeof e?document.createTextNode(e):e;var o=void 0!==r.labelActive?r.labelActive:"×";i.Vp="string"==typeof o?document.createTextNode(o):o;var s=r.tipLabel?r.tipLabel:"Toggle full-screen";return i.qp=document.createElement("button"),i.qp.title=s,i.qp.setAttribute("type","button"),i.qp.appendChild(i.Bp),i.qp.addEventListener(G,i.pr.bind(i),!1),i.Wp(i.qp,i.Rp),i.element.className="".concat(i.Dp," ").concat(ys," ").concat(bs),i.element.appendChild(i.qp),i}return dO(n,t),n.prototype.pr=function(t){t.preventDefault(),this.Zp()},n.prototype.Zp=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(yO(n))if(mO(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(n);else{var i=void 0;i=this.cv?"string"==typeof this.cv?n.getElementById(this.cv):this.cv:t.getTargetElement(),this.vf?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():bO(t)}(i):bO(i)}}},n.prototype.Yp=function(){var t=this.getMap();if(t){var n=this.Rp;this.Rp=mO(t.getOwnerDocument()),n!==this.Rp&&(this.Wp(this.qp,this.Rp),this.Rp?(So(this.Vp,this.Bp),this.dispatchEvent(wO)):(So(this.Bp,this.Vp),this.dispatchEvent(gO)),t.updateSize())}},n.prototype.Wp=function(t,n){var i,r,e,o;n?((i=t.classList).remove.apply(i,this.Xp),(r=t.classList).add.apply(r,this.Up)):((e=t.classList).remove.apply(e,this.Up),(o=t.classList).add.apply(o,this.Xp))},n.prototype.setMap=function(n){var i=this.getMap();i&&i.removeChangeListener(yu,this.Ip),t.prototype.setMap.call(this,n),this.Gp(),n&&n.addChangeListener(yu,this.Ip)},n.prototype.Gp=function(){for(var t=this.zp,n=0,i=t.length;n<i;++n)$(t[n]);t.length=0;var r=this.getMap();if(r){var e=r.getOwnerDocument();yO(e)?this.element.classList.remove(ms):this.element.classList.add(ms);for(n=0,i=pO.length;n<i;++n)t.push(H(e,pO[n],this.Yp,this));this.Yp()}},n}(rh),_O=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xO="projection",OO="coordinateFormat",SO=function(t){function n(n){var i=this,r=n||{},e=document.createElement("div");e.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:e,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(xO,i.dt),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,s="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(s=r.undefinedHTML),o=!!s):"placeholder"in r&&(!1===r.placeholder?o=!1:s=String(r.placeholder)),i.Hp=s,i.Jp=o,i.$p=e.innerHTML,i.Kp=null,i.vt=null,i}return _O(n,t),n.prototype.dt=function(){this.vt=null},n.prototype.getCoordinateFormat=function(){return this.get(OO)},n.prototype.getProjection=function(){return this.get(xO)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Qp(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Qp(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(H(i,ou,this.handleMouseMove,this)),this.Jp&&this.listenerKeys.push(H(i,hu,this.handleMouseOut,this)),this.Qp(null)}},n.prototype.setCoordinateFormat=function(t){this.set(OO,t)},n.prototype.setProjection=function(t){this.set(xO,pr(t))},n.prototype.Qp=function(t){var n=this.Hp;if(t&&this.Kp){if(!this.vt){var i=this.getProjection();this.vt=i?xr(this.Kp,i):vr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var e=Pr();e&&(this.vt=xr(this.Kp,e)),this.vt(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.$p&&n===this.$p||(this.element.innerHTML=n,this.$p=n)},n.prototype.render=function(t){var n=t.frameState;n?this.Kp!=n.viewState.projection&&(this.Kp=n.viewState.projection,this.vt=null):this.Kp=null},n}(rh),jO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),EO=.75,TO=.1,PO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return jO(n,t),n.prototype.createRenderer=function(){return new Hs(this)},n}(nh),AO=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).tw=i.nw.bind(i),i.ur=void 0===r.collapsed||r.collapsed,i.cr=void 0===r.collapsible||r.collapsible,i.cr||(i.ur=!1),i.po=void 0!==r.rotateWithView&&r.rotateWithView,i.iw=void 0;var e=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",s=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof s?(i.vr=document.createElement("span"),i.vr.textContent=s):i.vr=s;var u=void 0!==r.label?r.label:"›";"string"==typeof u?(i.lr=document.createElement("span"),i.lr.textContent=u):i.lr=u;var h=i.cr&&!i.ur?i.vr:i.lr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(h),f.addEventListener(G,i.pr.bind(i),!1),i.rw=document.createElement("div"),i.rw.className="ol-overviewmap-map",i.ew=r.view,i.ow=new PO({view:r.view});var a=i.ow;r.layers&&r.layers.forEach((function(t){a.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.sw=new _f({position:[0,0],positioning:"center-center",element:c}),i.ow.addOverlay(i.sw);var v=e+" "+"ol-unselectable "+bs+(i.ur&&i.cr?" ol-collapsed":"")+(i.cr?"":" ol-uncollapsible"),l=i.element;l.className=v,l.appendChild(i.rw),l.appendChild(f);var d=i,p=i.sw,w=i.sw.getElement(),g=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=a.getEventCoordinateInternal(i);p.setPosition(r)},y=function(t){var n=a.getEventCoordinateInternal(t);d.getMap().getView().setCenterInternal(n),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)};return w.addEventListener("mousedown",(function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",y)})),i}return jO(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.uw(r),this.ow.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.ow.setTarget(this.rw),this.listenerKeys.push(H(n,v,this.hw,this));var e=n.getView();e&&(this.fw(e),e.isDef()&&(this.ow.updateSize(),this.aw())),this.ow.isRendered()||this.cw()}}},n.prototype.hw=function(t){if(t.key===mu){var n=t.oldValue;n&&this.uw(n);var i=this.getMap().getView();this.fw(i)}else this.ow.isRendered()||t.key!==yu&&t.key!==gu||this.ow.updateSize()},n.prototype.fw=function(t){if(!this.ew){var n=new Zu({projection:t.getProjection()});this.ow.setView(n)}t.addChangeListener(Eu.ROTATION,this.tw),this.nw()},n.prototype.uw=function(t){t.removeChangeListener(Eu.ROTATION,this.tw)},n.prototype.nw=function(){this.po&&this.ow.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.lw=function(){var t=this.getMap(),n=this.ow;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.iw||!Tn(r,this.iw)){this.iw=r;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),s=n.getPixelFromCoordinateInternal(Wn(r)),u=n.getPixelFromCoordinateInternal(Dn(r)),h=Math.abs(s[0]-u[0]),f=Math.abs(s[1]-u[1]),a=e[0],c=e[1];h<a*TO||f<c*TO||h>a*EO||f>c*EO?this.aw():bn(o,r)||this.dw()}}},n.prototype.aw=function(){var t=this.getMap(),n=this.ow,i=t.getSize(),r=t.getView().calculateExtentInternal(i),e=n.getView(),o=Math.log(7.5)/Math.LN2;Kn(r,1/(Math.pow(2,o/2)*TO)),e.fitInternal(We(r))},n.prototype.dw=function(){var t=this.getMap(),n=this.ow,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.pw=function(){var t=this.getMap(),n=this.ow;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),e=n.getView(),o=this.po?0:-r.getRotation(),s=this.sw,u=this.sw.getElement(),h=r.getCenterInternal(),f=r.getResolution(),a=e.getResolution(),c=i[0]*f/a,v=i[1]*f/a;if(s.setPosition(h),u){u.style.width=c+"px",u.style.height=v+"px";var l="rotate("+o+"rad)";u.style.transform=l}}},n.prototype.cw=function(){this.ww||(this.ww=J(this.ow,cu,(function(t){delete this.ww,this.pw()}),this))},n.prototype.pr=function(t){t.preventDefault(),this.mr()},n.prototype.mr=function(){this.element.classList.toggle(Ms),this.ur?So(this.vr,this.lr):So(this.lr,this.vr),this.ur=!this.ur;var t=this.ow;if(!this.ur){if(t.isRendered())return this.iw=void 0,void t.render();t.updateSize(),this.aw(),this.cw()}},n.prototype.getCollapsible=function(){return this.cr},n.prototype.setCollapsible=function(t){this.cr!==t&&(this.cr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.ur&&this.mr())},n.prototype.setCollapsed=function(t){this.cr&&this.ur!==t&&this.mr()},n.prototype.getCollapsed=function(){return this.ur},n.prototype.getRotateWithView=function(){return this.po},n.prototype.setRotateWithView=function(t){this.po!==t&&(this.po=t,0!==this.getMap().getView().getRotation()&&(this.po?this.nw():this.ow.getView().setRotation(0),this.iw=void 0,this.lw(),this.pw()))},n.prototype.getOverviewMap=function(){return this.ow},n.prototype.render=function(t){this.lw(),this.pw()},n}(rh),CO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),NO="units",kO="degrees",LO="imperial",FO="nautical",RO="metric",IO="us",GO=[1,2,5],DO=25.4/.28,zO=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.gw=document.createElement("div"),i.gw.className=e+"-inner",i.element.className=e+" "+ys,i.element.appendChild(i.gw),i.yw=null,i.mw=void 0!==r.minWidth?r.minWidth:64,i.bw=r.maxWidth,i.tn=!1,i.Mw=void 0,i.$p="",i.addChangeListener(NO,i._w),i.setUnits(r.units||RO),i.xw=r.bar||!1,i.Ow=r.steps||4,i.Sw=r.text||!1,i.jw=r.dpi||void 0,i}return CO(n,t),n.prototype.getUnits=function(){return this.get(NO)},n.prototype._w=function(){this.yr()},n.prototype.setUnits=function(t){this.set(NO,t)},n.prototype.setDpi=function(t){this.jw=t},n.prototype.yr=function(){var t=this.yw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),e=r==kO?Rt.DEGREES:Rt.METERS,o=wr(i,t.resolution,n,e),s=this.mw*(this.jw||DO)/DO,u=void 0!==this.bw?this.bw*(this.jw||DO)/DO:void 0,h=s*o,f="";if(r==kO){var a=Lt[Rt.DEGREES];(h*=a)<a/60?(f="″",o*=3600):h<a?(f="′",o*=60):f="°"}else r==LO?h<.9144?(f="in",o/=.0254):h<1609.344?(f="ft",o/=.3048):(f="mi",o/=1609.344):r==FO?(o/=1852,f="NM"):r==RO?h<.001?(f="μm",o*=1e6):h<1?(f="mm",o*=1e3):h<1e3?f="m":(f="km",o/=1e3):r==IO?h<.9144?(f="in",o*=39.37):h<1609.344?(f="ft",o/=.30480061):(f="mi",o/=1609.3472):Ot(!1,33);for(var c,v,l,d,p,w,g,y=3*Math.floor(Math.log(s*o)/Math.log(10));;){l=Math.floor(y/3);var m=Math.pow(10,l);if(c=GO[(y%3+3)%3]*m,v=Math.round(c/o),isNaN(v))return this.element.style.display="none",void(this.tn=!1);if(void 0!==u&&v>=u){c=d,v=p,l=w;break}if(v>=s)break;d=c,p=v,w=l,++y}g=this.xw?this.createScaleBar(v,c,f):c.toFixed(l<0?-l:0)+" "+f,this.$p!=g&&(this.gw.innerHTML=g,this.$p=g),this.Mw!=v&&(this.gw.style.width=v+"px",this.Mw=v),this.tn||(this.element.style.display="",this.tn=!0)}else this.tn&&(this.element.style.display="none",this.tn=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.Ow,s="ol-scale-singlebar-odd",u=0;u<this.Ow;u++)0===u&&e.push(this.createMarker("absolute",u)),e.push('<div><div class="ol-scale-singlebar '+s+'" style="width: '+o+'px;"></div>'+this.createMarker("relative",u)+(u%2==0||2===this.Ow?this.createStepText(u,t,!1,n,i):"")+"</div>"),u===this.Ow-1&&e.push(this.createStepText(u+1,t,!0,n,i)),s="ol-scale-singlebar-odd"===s?"ol-scale-singlebar-even":"ol-scale-singlebar-odd";return'<div style="display: flex;">'+(this.Sw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+e.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,e){var o=(0===t?0:Math.round(r/this.Ow*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.Ow*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.Ow*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=wr(this.yw.projection,this.yw.resolution,this.yw.center,Rt.METERS),n=this.jw||DO;return parseFloat(t.toString())*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.yw=n?n.viewState:null,this.yr()},n}(rh),UO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),XO=0,BO=1,VO=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).yn=[],i.Ew=void 0,i.Tw=XO,i.gn,i.Pw=0,i.Aw=0,i.Cw,i.Nw,i.kw=null,i.Lw=!1,i.Mr=void 0!==r.duration?r.duration:200;var e=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+ys;var s=i.element;return s.className=e+" "+"ol-unselectable "+bs,s.appendChild(o),s.addEventListener(su,i.Fw.bind(i),!1),s.addEventListener(ou,i.Rw.bind(i),!1),s.addEventListener(uu,i.Iw.bind(i),!1),s.addEventListener(G,i.Gw.bind(i),!1),o.addEventListener(G,a,!1),i}return UO(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.Dw=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.Lw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),s=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),u=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.kw=[s,u],n>i?(this.Tw=BO,this.Aw=n-s):(this.Tw=XO,this.Pw=i-u),this.Lw=!0},n.prototype.Gw=function(t){var n=this.getMap().getView(),i=this.zw(t.offsetX-this.kw[0]/2,t.offsetY-this.kw[1]/2),r=this.Uw(i),e=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:e,duration:this.Mr,easing:gt})},n.prototype.Fw=function(t){if(!this.gn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.Cw=t.clientX-parseFloat(n.style.left),this.Nw=t.clientY-parseFloat(n.style.top),this.gn=!0,0===this.yn.length){var i=this.Rw,r=this.Iw,e=this.getMap().getOwnerDocument();this.yn.push(H(e,ou,i,this),H(e,uu,r,this))}}},n.prototype.Rw=function(t){if(this.gn){var n=t.clientX-this.Cw,i=t.clientY-this.Nw,r=this.zw(n,i);this.Ew=this.Uw(r),this.getMap().getView().setResolution(this.Ew)}},n.prototype.Iw=function(t){this.gn&&(this.getMap().getView().endInteraction(),this.gn=!1,this.Cw=void 0,this.Nw=void 0,this.yn.forEach($),this.yn.length=0)},n.prototype.Xw=function(t){var n=this.Bw(t),i=this.element.firstElementChild;this.Tw==BO?i.style.left=this.Aw*n+"px":i.style.top=this.Pw*n+"px"},n.prototype.zw=function(t,n){return ei(this.Tw===BO?t/this.Aw:n/this.Pw,0,1)},n.prototype.Uw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.Bw=function(t){return ei(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.Lw||this.Dw())){var n=t.frameState.viewState.resolution;this.Ew=n,this.Xw(n)}},n}(rh),qO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),WO=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var e=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",s=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener(G,i.pr.bind(i),!1);var h=e+" "+"ol-unselectable "+bs,f=i.element;return f.className=h,f.appendChild(u),i}return qO(n,t),n.prototype.pr=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(We(n))},n}(rh),ZO={};ZO.AssertionError=f,ZO.Collection=at,ZO.Collection.CollectionEvent=ft,ZO.DataTile=xt,ZO.Disposable=l,ZO.Feature=Et,ZO.Feature.createStyleFunction=jt,ZO.Geolocation=uo,ZO.Image=yo,ZO.Image.listenImage=go,ZO.ImageBase=fo,ZO.ImageCanvas=bo,ZO.ImageTile=Ao,ZO.Kinetic=Co,ZO.Map=pf,ZO.MapBrowserEvent=ru,ZO.MapBrowserEventHandler=au,ZO.MapEvent=nu,ZO.Object=et,ZO.Object.ObjectEvent=rt,ZO.Observable=nt,ZO.Observable.unByKey=tt,ZO.Overlay=_f,ZO.PluggableMap=nh,ZO.Tile=Mt,ZO.TileCache=Cf,ZO.TileQueue=xu,ZO.TileQueue.getTilePriority=Ou,ZO.TileRange=Lf,ZO.TileRange.createOrUpdate=kf,ZO.VectorRenderTile=If,ZO.View=Zu,ZO.View.createCenterConstraint=Xu,ZO.View.createResolutionConstraint=Bu,ZO.View.createRotationConstraint=Vu,ZO.View.isNoopAnimation=qu,ZO.array={},ZO.array.binarySearch=d,ZO.array.equals=M,ZO.array.extend=m,ZO.array.find=b,ZO.array.findIndex=_,ZO.array.includes=w,ZO.array.isSorted=x,ZO.array.linearFindNearest=g,ZO.array.numberSafeCompareFunction=p,ZO.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},ZO.array.reverseSubArray=y,ZO.array.stableSort=function(t,n){var i,r=t.length,e=Array(t.length);for(i=0;i<r;i++)e[i]={index:i,value:t[i]};for(e.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=e[i].value},ZO.asserts={},ZO.asserts.assert=Ot,ZO.centerconstraint={},ZO.centerconstraint.createExtent=Pu,ZO.centerconstraint.none=Au,ZO.color={},ZO.color.asArray=Io,ZO.color.asString=Lo,ZO.color.fromString=Ro,ZO.color.isStringColor=zo,ZO.color.normalize=Go,ZO.color.toString=Do,ZO.colorlike={},ZO.colorlike.asColorLike=Gf,ZO.control={},ZO.control.Attribution=oh,ZO.control.Control=rh,ZO.control.FullScreen=MO,ZO.control.MousePosition=SO,ZO.control.OverviewMap=AO,ZO.control.Rotate=uh,ZO.control.ScaleLine=zO,ZO.control.Zoom=fh,ZO.control.ZoomSlider=VO,ZO.control.ZoomToExtent=WO,ZO.control.defaults=ah,ZO.coordinate={},ZO.coordinate.add=Vi,ZO.coordinate.closestOnCircle=qi,ZO.coordinate.closestOnSegment=Wi,ZO.coordinate.createStringXY=function(t){return function(n){return nr(n,t)}},ZO.coordinate.degreesToStringHDMS=Zi,ZO.coordinate.distance=Qi,ZO.coordinate.equals=Hi,ZO.coordinate.format=Yi,ZO.coordinate.getWorldsAway=rr,ZO.coordinate.rotate=Ji,ZO.coordinate.scale=$i,ZO.coordinate.squaredDistance=Ki,ZO.coordinate.squaredDistanceToSegment=tr,ZO.coordinate.toStringHDMS=function(t,n){return t?Zi("NS",t[1],n)+" "+Zi("EW",t[0],n):""},ZO.coordinate.toStringXY=nr,ZO.coordinate.wrapX=ir,ZO.css={},ZO.css.CLASS_COLLAPSED=Ms,ZO.css.CLASS_CONTROL=bs,ZO.css.CLASS_HIDDEN=ws,ZO.css.CLASS_SELECTABLE=gs,ZO.css.CLASS_UNSELECTABLE=ys,ZO.css.CLASS_UNSUPPORTED=ms,ZO.css.getFontParameters=Os,ZO.dom={},ZO.dom.createCanvasContext2D=Mo,ZO.dom.outerHeight=Oo,ZO.dom.outerWidth=xo,ZO.dom.releaseCanvas=_o,ZO.dom.removeChildren=Eo,ZO.dom.removeNode=jo,ZO.dom.replaceChildren=To,ZO.dom.replaceNode=So,ZO.easing={},ZO.easing.easeIn=wt,ZO.easing.easeOut=gt,ZO.easing.inAndOut=yt,ZO.easing.linear=mt,ZO.easing.upAndDown=function(t){return t<.5?yt(2*t):1-yt(2*(t-.5))},ZO.events={},ZO.events.Event=c,ZO.events.Event.preventDefault=function(t){t.preventDefault()},ZO.events.Event.stopPropagation=a,ZO.events.Target=L,ZO.events.condition={},ZO.events.condition.all=Mh,ZO.events.condition.altKeyOnly=_h,ZO.events.condition.altShiftKeysOnly=xh,ZO.events.condition.always=jh,ZO.events.condition.click=function(t){return t.type==eu.CLICK},ZO.events.condition.doubleClick=function(t){return t.type==eu.DBLCLICK},ZO.events.condition.focus=Oh,ZO.events.condition.focusWithTabindex=Sh,ZO.events.condition.mouseActionButton=Eh,ZO.events.condition.mouseOnly=kh,ZO.events.condition.never=Th,ZO.events.condition.noModifierKeys=Ah,ZO.events.condition.penOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"pen"===n.pointerType},ZO.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Xt?n.metaKey:n.ctrlKey)&&!n.shiftKey},ZO.events.condition.pointerMove=function(t){return"pointermove"==t.type},ZO.events.condition.primaryAction=Lh,ZO.events.condition.shiftKeyOnly=Ch,ZO.events.condition.singleClick=Ph,ZO.events.condition.targetNotEditable=Nh,ZO.events.condition.touchOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"touch"===n.pointerType},ZO.events.listen=H,ZO.events.listenOnce=J,ZO.events.unlistenByKey=$,ZO.extent={},ZO.extent.applyTransform=ti,ZO.extent.approximatelyEquals=Pn,ZO.extent.boundingExtent=pn,ZO.extent.buffer=wn,ZO.extent.clone=gn,ZO.extent.closestSquaredDistanceXY=yn,ZO.extent.containsCoordinate=mn,ZO.extent.containsExtent=bn,ZO.extent.containsXY=Mn,ZO.extent.coordinateRelationship=_n,ZO.extent.createEmpty=xn,ZO.extent.createOrUpdate=On,ZO.extent.createOrUpdateEmpty=Sn,ZO.extent.createOrUpdateFromCoordinate=jn,ZO.extent.createOrUpdateFromCoordinates=function(t,n){return Nn(Sn(n),t)},ZO.extent.createOrUpdateFromFlatCoordinates=En,ZO.extent.createOrUpdateFromRings=function(t,n){return Ln(Sn(n),t)},ZO.extent.equals=Tn,ZO.extent.extend=An,ZO.extent.extendCoordinate=Cn,ZO.extent.extendCoordinates=Nn,ZO.extent.extendFlatCoordinates=kn,ZO.extent.extendRings=Ln,ZO.extent.extendXY=Fn,ZO.extent.forEachCorner=Rn,ZO.extent.getArea=In,ZO.extent.getBottomLeft=Gn,ZO.extent.getBottomRight=Dn,ZO.extent.getCenter=zn,ZO.extent.getCorner=Un,ZO.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},ZO.extent.getForViewAndSize=Xn,ZO.extent.getHeight=Vn,ZO.extent.getIntersection=qn,ZO.extent.getIntersectionArea=function(t,n){return In(qn(t,n))},ZO.extent.getMargin=function(t){return Yn(t)+Vn(t)},ZO.extent.getRotatedViewport=Bn,ZO.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},ZO.extent.getTopLeft=Wn,ZO.extent.getTopRight=Zn,ZO.extent.getWidth=Yn,ZO.extent.intersects=Hn,ZO.extent.intersectsSegment=Qn,ZO.extent.isEmpty=Jn,ZO.extent.returnOrUpdate=$n,ZO.extent.scaleFromCenter=Kn,ZO.extent.wrapAndSliceX=ii,ZO.extent.wrapX=ni,ZO.featureloader={},ZO.featureloader.loadFeaturesXhr=zf,ZO.featureloader.setWithCredentials=function(t){Df=t},ZO.featureloader.xhr=Uf,ZO.format={},ZO.format.EsriJSON=Ny,ZO.format.Feature=my,ZO.format.Feature.transformExtentWithOptions=My,ZO.format.Feature.transformGeometryWithOptions=by,ZO.format.GPX=Am,ZO.format.GeoJSON=Lm,ZO.format.IGC=Km,ZO.format.JSONFeature=Oy,ZO.format.KML=YM,ZO.format.KML.getDefaultFillStyle=function(){return fb},ZO.format.KML.getDefaultImageStyle=function(){return cb},ZO.format.KML.getDefaultStrokeStyle=function(){return lb},ZO.format.KML.getDefaultStyle=function(){return pb},ZO.format.KML.getDefaultStyleArray=function(){return gb},ZO.format.KML.getDefaultTextStyle=function(){return db},ZO.format.KML.readFlatCoordinates=xb,ZO.format.MVT=n_,ZO.format.OSMXML=f_,ZO.format.OWS=P_,ZO.format.Polyline=z_,ZO.format.Polyline.decodeDeltas=N_,ZO.format.Polyline.decodeFloats=L_,ZO.format.Polyline.decodeSignedIntegers=R_,ZO.format.Polyline.decodeUnsignedIntegers=G_,ZO.format.Polyline.encodeDeltas=C_,ZO.format.Polyline.encodeFloats=k_,ZO.format.Polyline.encodeSignedIntegers=F_,ZO.format.Polyline.encodeUnsignedInteger=D_,ZO.format.Polyline.encodeUnsignedIntegers=I_,ZO.format.TextFeature=Bm,ZO.format.TopoJSON=H_,ZO.format.WFS=cO,ZO.format.WFS.writeFilter=function(t,n){var i=n||"1.1.0",r=Ca(aO(i),"Filter"),e={node:r};return P(e,{version:i,filter:t}),Yx(r,t,[e]),r},ZO.format.WMSGetFeatureInfo=lO,ZO.format.xlink={},ZO.format.xlink.readHref=c_,ZO.format.xsd={},ZO.format.xsd.readBoolean=Fy,ZO.format.xsd.readBooleanString=Ry,ZO.format.xsd.readDateTime=Iy,ZO.format.xsd.readDecimal=Gy,ZO.format.xsd.readDecimalString=Dy,ZO.format.xsd.readNonNegativeIntegerString=Uy,ZO.format.xsd.readPositiveInteger=zy,ZO.format.xsd.readString=Xy,ZO.format.xsd.writeBooleanTextNode=By,ZO.format.xsd.writeCDATASection=Vy,ZO.format.xsd.writeDateTimeTextNode=qy,ZO.format.xsd.writeDecimalTextNode=Wy,ZO.format.xsd.writeNonNegativeIntegerTextNode=Zy,ZO.format.xsd.writeStringTextNode=Yy,ZO.functions={},ZO.functions.FALSE=S,ZO.functions.TRUE=O,ZO.functions.VOID=j,ZO.functions.memoizeOne=E,ZO.functions.toPromise=T,ZO.geom={},ZO.geom.Circle=Mg,ZO.geom.Geometry=Vr,ZO.geom.GeometryCollection=gy,ZO.geom.LineString=kw,ZO.geom.LinearRing=be,ZO.geom.MultiLineString=Fw,ZO.geom.MultiPoint=Tw,ZO.geom.MultiPolygon=Gw,ZO.geom.Point=_e,ZO.geom.Polygon=Ve,ZO.geom.Polygon.circular=qe,ZO.geom.Polygon.fromCircle=Ze,ZO.geom.Polygon.fromExtent=We,ZO.geom.Polygon.makeRegular=Ye,ZO.geom.SimpleGeometry=Yr,ZO.geom.SimpleGeometry.getStrideForLayout=Wr,ZO.geom.SimpleGeometry.transformGeom2D=Zr,ZO.geom.flat={},ZO.geom.flat.area={},ZO.geom.flat.area.linearRing=we,ZO.geom.flat.area.linearRings=ge,ZO.geom.flat.area.linearRingss=ye,ZO.geom.flat.center={},ZO.geom.flat.center.linearRingss=Rw,ZO.geom.flat.closest={},ZO.geom.flat.closest.arrayMaxSquaredDelta=$r,ZO.geom.flat.closest.assignClosestArrayPoint=te,ZO.geom.flat.closest.assignClosestMultiArrayPoint=ne,ZO.geom.flat.closest.assignClosestPoint=Qr,ZO.geom.flat.closest.maxSquaredDelta=Jr,ZO.geom.flat.closest.multiArrayMaxSquaredDelta=Kr,ZO.geom.flat.contains={},ZO.geom.flat.contains.linearRingContainsExtent=xe,ZO.geom.flat.contains.linearRingContainsXY=Oe,ZO.geom.flat.contains.linearRingsContainsXY=Se,ZO.geom.flat.contains.linearRingssContainsXY=je,ZO.geom.flat.deflate={},ZO.geom.flat.deflate.deflateCoordinate=ie,ZO.geom.flat.deflate.deflateCoordinates=re,ZO.geom.flat.deflate.deflateCoordinatesArray=ee,ZO.geom.flat.deflate.deflateMultiCoordinatesArray=oe,ZO.geom.flat.flip={},ZO.geom.flat.flip.flipXY=yy,ZO.geom.flat.geodesic={},ZO.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,e,o){var s=pr("EPSG:4326"),u=Math.cos(ci(n)),h=Math.sin(ci(n)),f=Math.cos(ci(r)),a=Math.sin(ci(r)),c=Math.cos(ci(i-t)),v=Math.sin(ci(i-t)),l=h*a+u*f*c;return Yw((function(n){if(1<=l)return[i,r];var e=n*Math.acos(l),o=Math.cos(e),s=Math.sin(e),d=v*f,p=u*a-h*f*c,w=Math.atan2(d,p),g=Math.asin(h*o+u*s*Math.cos(w));return[ai(ci(t)+Math.atan2(Math.sin(w)*s*u,o-h*Math.sin(g))),ai(g)]}),Or(s,e),o)},ZO.geom.flat.geodesic.meridian=Hw,ZO.geom.flat.geodesic.parallel=Jw,ZO.geom.flat.inflate={},ZO.geom.flat.inflate.inflateCoordinates=le,ZO.geom.flat.inflate.inflateCoordinatesArray=de,ZO.geom.flat.inflate.inflateMultiCoordinatesArray=pe,ZO.geom.flat.interiorpoint={},ZO.geom.flat.interiorpoint.getInteriorPointOfArray=Ee,ZO.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Te,ZO.geom.flat.interpolate={},ZO.geom.flat.interpolate.interpolatePoint=Pw,ZO.geom.flat.interpolate.lineStringCoordinateAtM=Aw,ZO.geom.flat.interpolate.lineStringsCoordinateAtM=Cw,ZO.geom.flat.intersectsextent={},ZO.geom.flat.intersectsextent.intersectsLineString=Ae,ZO.geom.flat.intersectsextent.intersectsLineStringArray=Ce,ZO.geom.flat.intersectsextent.intersectsLinearRing=Ne,ZO.geom.flat.intersectsextent.intersectsLinearRingArray=ke,ZO.geom.flat.intersectsextent.intersectsLinearRingMultiArray=Le,ZO.geom.flat.length={},ZO.geom.flat.length.lineStringLength=ew,ZO.geom.flat.length.linearRingLength=function(t,n,i,r){var e=ew(t,n,i,r),o=t[i-r]-t[n],s=t[i-r+1]-t[n+1];return e+=Math.sqrt(o*o+s*s)},ZO.geom.flat.orient={},ZO.geom.flat.orient.inflateEnds=Ue,ZO.geom.flat.orient.linearRingIsClockwise=Re,ZO.geom.flat.orient.linearRingsAreOriented=Ie,ZO.geom.flat.orient.linearRingssAreOriented=Ge,ZO.geom.flat.orient.orientLinearRings=De,ZO.geom.flat.orient.orientLinearRingsArray=ze,ZO.geom.flat.reverse={},ZO.geom.flat.reverse.coordinates=Fe,ZO.geom.flat.segments={},ZO.geom.flat.segments.forEach=Pe,ZO.geom.flat.simplify={},ZO.geom.flat.simplify.douglasPeucker=se,ZO.geom.flat.simplify.douglasPeuckerArray=ue,ZO.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];s=ue(t,n,a,r,e,o,s,c),u.push(c),n=a[a.length-1]}return s},ZO.geom.flat.simplify.quantize=ae,ZO.geom.flat.simplify.quantizeArray=ce,ZO.geom.flat.simplify.quantizeMultiArray=ve,ZO.geom.flat.simplify.radialDistance=he,ZO.geom.flat.simplify.simplifyLineString=function(t,n,i,r,e,o,s){var u=void 0!==s?s:[];return o||(i=he(t,n,i,r,e,u,0),t=u,n=0,r=2),u.length=se(t,n,i,r,e,u,0),u},ZO.geom.flat.simplify.snap=fe,ZO.geom.flat.straightchunk={},ZO.geom.flat.straightchunk.matchingChunk=$p,ZO.geom.flat.textpath={},ZO.geom.flat.textpath.drawTextOnPath=rw,ZO.geom.flat.topology={},ZO.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var e=i-r;return t[n]===t[e]&&t[n+1]===t[e+1]&&(i-n)/r>3&&!!we(t,n,i,r)},ZO.geom.flat.transform={},ZO.geom.flat.transform.rotate=Dr,ZO.geom.flat.transform.scale=zr,ZO.geom.flat.transform.transform2D=Gr,ZO.geom.flat.transform.translate=Ur,ZO.has={},ZO.has.DEVICE_PIXEL_RATIO=Bt,ZO.has.FIREFOX=Gt,ZO.has.IMAGE_DECODE=qt,ZO.has.MAC=Xt,ZO.has.PASSIVE_EVENT_LISTENERS=Wt,ZO.has.SAFARI=Dt,ZO.has.SAFARI_BUG_237906=zt,ZO.has.WEBKIT=Ut,ZO.has.WORKER_OFFSCREEN_CANVAS=Vt,ZO.interaction={},ZO.interaction.DoubleClickZoom=gh,ZO.interaction.DragAndDrop=wg,ZO.interaction.DragAndDrop.DragAndDropEvent=pg,ZO.interaction.DragBox=Zh,ZO.interaction.DragBox.DragBoxEvent=Wh,ZO.interaction.DragPan=Rh,ZO.interaction.DragRotate=Gh,ZO.interaction.DragRotateAndZoom=yg,ZO.interaction.DragZoom=Hh,ZO.interaction.Draw=Cg,ZO.interaction.Draw.DrawEvent=Ag,ZO.interaction.Draw.createBox=function(){return function(t,n,i){var r=pn([t[0],t[t.length-1]].map((function(t){return Cr(t,i)}))),e=[[Gn(r),Dn(r),Zn(r),Wn(r),Gn(r)]],o=n;o?o.setCoordinates(e):o=new Ve(e);var s=Pr();return s&&o.transform(i,s),o}},ZO.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,e){var o=Cr(i[0],e),s=Cr(i[i.length-1],e),u=Math.sqrt(Ki(o,s)),h=r||Ze(new Mg(o),t),f=n;if(!n&&0!==n){var a=s[0]-o[0],c=s[1]-o[1];f=Math.atan2(c,a)}Ye(h,o,u,f);var v=Pr();return v&&h.transform(e,v),h}},ZO.interaction.Extent=Gg,ZO.interaction.Extent.ExtentEvent=Lg,ZO.interaction.Interaction=ph,ZO.interaction.Interaction.pan=lh,ZO.interaction.Interaction.zoomByDelta=dh,ZO.interaction.KeyboardPan=nf,ZO.interaction.KeyboardZoom=ef,ZO.interaction.Link=Bg,ZO.interaction.Modify=Qg,ZO.interaction.Modify.ModifyEvent=Hg,ZO.interaction.MouseWheelZoom=hf,ZO.interaction.PinchRotate=af,ZO.interaction.PinchZoom=vf,ZO.interaction.Pointer=bh,ZO.interaction.Pointer.centroid=mh,ZO.interaction.Select=ey,ZO.interaction.Select.SelectEvent=iy,ZO.interaction.Snap=hy,ZO.interaction.Translate=dy,ZO.interaction.Translate.TranslateEvent=ly,ZO.interaction.defaults=lf,ZO.layer={},ZO.layer.Base=is,ZO.layer.BaseImage=Ld,ZO.layer.BaseTile=Zd,ZO.layer.BaseVector=qw,ZO.layer.Graticule=tg,ZO.layer.Group=Qs,ZO.layer.Group.GroupEvent=$s,ZO.layer.Heatmap=ag,ZO.layer.Image=Bd,ZO.layer.Layer=as,ZO.layer.Layer.inView=fs,ZO.layer.Tile=$d,ZO.layer.Vector=Zw,ZO.layer.VectorImage=vg,ZO.loadingstrategy={},ZO.loadingstrategy.all=Xf,ZO.loadingstrategy.bbox=function(t,n){return[t]},ZO.loadingstrategy.tile=function(t){return function(n,i,r){var e=t.getZForResolution(Fr(i,r)),o=t.getTileRangeForExtentAndZ(kr(n,r),e),s=[],u=[e,0,0];for(u[1]=o.minX;u[1]<=o.maxX;++u[1])for(u[2]=o.minY;u[2]<=o.maxY;++u[2])s.push(Nr(t.getTileCoordExtent(u),r));return s}},ZO.math={},ZO.math.ceil=gi,ZO.math.clamp=ei,ZO.math.cosh=oi,ZO.math.floor=wi,ZO.math.lerp=li,ZO.math.log2=si,ZO.math.modulo=vi,ZO.math.round=pi,ZO.math.solveLinearSystem=fi,ZO.math.squaredDistance=hi,ZO.math.squaredSegmentDistance=ui,ZO.math.toDegrees=ai,ZO.math.toFixed=di,ZO.math.toRadians=ci,ZO.net={},ZO.net.ClientError=Zf,ZO.net.ResponseError=Wf,ZO.net.getJSON=Yf,ZO.net.jsonp=Vf,ZO.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(qf=XMLHttpRequest),global.XMLHttpRequest=t},ZO.net.resolveUrl=Hf,ZO.net.restoreXHR=function(){global.XMLHttpRequest=qf},ZO.obj={},ZO.obj.assign=P,ZO.obj.clear=A,ZO.obj.getValues=C,ZO.obj.isEmpty=N,ZO.proj={},ZO.proj.Projection=ri,ZO.proj.Units={},ZO.proj.Units.METERS_PER_UNIT=Lt,ZO.proj.Units.fromCode=function(t){return kt[t]},ZO.proj.addCommon=Ir,ZO.proj.addCoordinateTransforms=Mr,ZO.proj.addEquivalentProjections=gr,ZO.proj.addEquivalentTransforms=yr,ZO.proj.addProjection=lr,ZO.proj.addProjections=dr,ZO.proj.clearAllProjections=function(){Fi(),Di()},ZO.proj.clearUserProjection=function(){Er=null},ZO.proj.cloneTransform=cr,ZO.proj.createProjection=mr,ZO.proj.createSafeCoordinateTransform=Rr,ZO.proj.createTransformFromCoordinateTransform=br,ZO.proj.disableCoordinateWarning=ar,ZO.proj.epsg3857={},ZO.proj.epsg3857.EXTENT=Mi,ZO.proj.epsg3857.HALF_SIZE=bi,ZO.proj.epsg3857.MAX_SAFE_Y=xi,ZO.proj.epsg3857.PROJECTIONS=Si,ZO.proj.epsg3857.RADIUS=mi,ZO.proj.epsg3857.WORLD_EXTENT=_i,ZO.proj.epsg3857.fromEPSG4326=ji,ZO.proj.epsg3857.toEPSG4326=Ei,ZO.proj.epsg4326={},ZO.proj.epsg4326.EXTENT=Ai,ZO.proj.epsg4326.METERS_PER_UNIT=Ci,ZO.proj.epsg4326.PROJECTIONS=ki,ZO.proj.epsg4326.RADIUS=Pi,ZO.proj.equivalent=_r,ZO.proj.fromLonLat=function(t,n){return ar(),Sr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")},ZO.proj.fromUserCoordinate=Cr,ZO.proj.fromUserExtent=kr,ZO.proj.fromUserResolution=Fr,ZO.proj.get=pr,ZO.proj.getPointResolution=wr,ZO.proj.getTransform=Or,ZO.proj.getTransformFromProjections=xr,ZO.proj.getUserProjection=Pr,ZO.proj.identityTransform=vr,ZO.proj.proj4={},ZO.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),e=r.length;for(n=0;n<e;++n){var o=r[n];if(!pr(o)){var s=t.defs(o),u=s.units;u||"longlat"!==s.projName||(u=Rt.DEGREES),lr(new ri({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:u}))}}for(n=0;n<e;++n){var h=r[n],f=pr(h);for(i=0;i<e;++i){var a=r[i],c=pr(a);if(!Ui(h,a))if(t.defs[h]===t.defs[a])gr([f,c]);else{var v=t(h,a);Mr(f,c,Rr(f,c,v.forward),Rr(c,f,v.inverse))}}}},ZO.proj.projections={},ZO.proj.projections.add=Ii,ZO.proj.projections.clear=Fi,ZO.proj.projections.get=Ri,ZO.proj.setUserProjection=Tr,ZO.proj.toLonLat=function(t,n){var i=Sr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=vi(r+180,360)-180),i},ZO.proj.toUserCoordinate=Ar,ZO.proj.toUserExtent=Nr,ZO.proj.toUserResolution=Lr,ZO.proj.transform=Sr,ZO.proj.transformExtent=jr,ZO.proj.transformWithProjections=function(t,n,i){return xr(n,i)(t)},ZO.proj.transforms={},ZO.proj.transforms.add=zi,ZO.proj.transforms.clear=Di,ZO.proj.transforms.get=Ui,ZO.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),e=Gi[i][r];return delete Gi[i][r],N(Gi[i])&&delete Gi[i],e},ZO.proj.useGeographic=function(){Tr("EPSG:4326")},ZO.render={},ZO.render.Box=zh,ZO.render.Event=ps,ZO.render.Feature=Xw,ZO.render.Feature.toFeature=function(t,n){var i=t.getId(),r=Uw(t),e=t.getProperties(),o=new Et;return void 0!==n&&o.setGeometryName(n),o.setGeometry(r),void 0!==i&&o.setId(i),o.setProperties(e,!0),o},ZO.render.Feature.toGeometry=Uw,ZO.render.VectorContext=Jf,ZO.render.canvas={},ZO.render.canvas.Builder=Vp,ZO.render.canvas.BuilderGroup=iw,ZO.render.canvas.Executor=dw,ZO.render.canvas.ExecutorGroup=mw,ZO.render.canvas.ExecutorGroup.getPixelIndexArray=yw,ZO.render.canvas.ImageBuilder=Wp,ZO.render.canvas.Immediate=Kf,ZO.render.canvas.Instruction={},ZO.render.canvas.Instruction.beginPathInstruction=zp,ZO.render.canvas.Instruction.closePathInstruction=Up,ZO.render.canvas.Instruction.fillInstruction=Gp,ZO.render.canvas.Instruction.strokeInstruction=Dp,ZO.render.canvas.LineStringBuilder=Yp,ZO.render.canvas.PolygonBuilder=Jp,ZO.render.canvas.TextBuilder=tw,ZO.render.canvas.checkedFonts=Fs,ZO.render.canvas.defaultFillStyle=js,ZO.render.canvas.defaultFont=Ss,ZO.render.canvas.defaultLineCap=Es,ZO.render.canvas.defaultLineDash=Ts,ZO.render.canvas.defaultLineDashOffset=0,ZO.render.canvas.defaultLineJoin=Ps,ZO.render.canvas.defaultLineWidth=1,ZO.render.canvas.defaultMiterLimit=As,ZO.render.canvas.defaultPadding=Ls,ZO.render.canvas.defaultStrokeStyle=Cs,ZO.render.canvas.defaultTextAlign=Ns,ZO.render.canvas.defaultTextBaseline=ks,ZO.render.canvas.drawImageOrLabel=Zs,ZO.render.canvas.getTextDimensions=Ws,ZO.render.canvas.hitdetect={},ZO.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=bw,ZO.render.canvas.hitdetect.createHitDetectionImageData=Mw,ZO.render.canvas.hitdetect.hitDetect=_w,ZO.render.canvas.labelCache=Rs,ZO.render.canvas.measureAndCacheTextWidth=qs,ZO.render.canvas.measureTextHeight=Xs,ZO.render.canvas.measureTextWidth=Vs,ZO.render.canvas.registerFont=Us,ZO.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},ZO.render.canvas.textHeights=zs,ZO.render.getRenderPixel=function(t,n){return Qt(t.inversePixelTransform,n.slice(0))},ZO.render.getVectorContext=oa,ZO.render.toContext=function(t,n){var i=t.canvas,r=n||{},e=r.pixelRatio||Bt,o=r.size;o&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],u=nn([1,0,0,1,0,0],e,e);return new Kf(t,e,s,u,0)},ZO.renderer={},ZO.renderer.Composite=Hs,ZO.renderer.Layer=ev,ZO.renderer.Map=ls,ZO.renderer.canvas={},ZO.renderer.canvas.ImageLayer=Ud,ZO.renderer.canvas.Layer=Dd,ZO.renderer.canvas.Layer.canvasPool=Rd,ZO.renderer.canvas.TileLayer=Hd,ZO.renderer.canvas.VectorImageLayer=jw,ZO.renderer.canvas.VectorLayer=Ow,ZO.renderer.canvas.common={},ZO.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=ua,ZO.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=ha,ZO.renderer.vector={},ZO.renderer.vector.defaultOrder=ta,ZO.renderer.vector.getSquaredTolerance=na,ZO.renderer.vector.getTolerance=ia,ZO.renderer.vector.renderFeature=ra,ZO.reproj={},ZO.reproj.Image=id,ZO.reproj.Tile=Xc,ZO.reproj.Triangulation=zc,ZO.reproj.calculateSourceExtentResolution=la,ZO.reproj.calculateSourceResolution=va,ZO.reproj.canvasPool=fa,ZO.reproj.common={},ZO.reproj.common.ENABLE_RASTER_REPROJECTION=Dc,ZO.reproj.common.ERROR_THRESHOLD=.5,ZO.reproj.render=da,ZO.resolutionconstraint={},ZO.resolutionconstraint.createMinMaxResolution=Fu,ZO.resolutionconstraint.createSnapToPower=Lu,ZO.resolutionconstraint.createSnapToResolutions=ku,ZO.rotationconstraint={},ZO.rotationconstraint.createSnapToN=Gu,ZO.rotationconstraint.createSnapToZero=Du,ZO.rotationconstraint.disable=Ru,ZO.rotationconstraint.none=Iu,ZO.size={},ZO.size.buffer=Yu,ZO.size.hasArea=Hu,ZO.size.scale=Ju,ZO.size.toSize=$u,ZO.source={},ZO.source.BingMaps=zl,ZO.source.BingMaps.quadKey=Dl,ZO.source.Cluster=Kl,ZO.source.DataTile=td,ZO.source.Image=fd,ZO.source.Image.ImageSourceEvent=ud,ZO.source.Image.defaultImageLoadFunction=hd,ZO.source.ImageArcGISRest=cd,ZO.source.ImageCanvas=ld,ZO.source.ImageStatic=pd,ZO.source.ImageWMS=md,ZO.source.OGCMapTile=Ed,ZO.source.OSM=Nd,ZO.source.OSM.ATTRIBUTION=Cd,ZO.source.Raster=lp,ZO.source.Raster.Processor=rp,ZO.source.Raster.RasterSourceEvent=hp,ZO.source.Raster.newImageData=tp,ZO.source.Source=Tl,ZO.source.Stamen=yp,ZO.source.Tile=Nl,ZO.source.Tile.TileSourceEvent=Cl,ZO.source.TileArcGISRest=bp,ZO.source.TileDebug=_p,ZO.source.TileImage=Il,ZO.source.TileJSON=Op,ZO.source.TileWMS=jp,ZO.source.UTFGrid=Pp,ZO.source.UTFGrid.CustomTile=Tp,ZO.source.UrlTile=Ll,ZO.source.Vector=Jl,ZO.source.Vector.VectorSourceEvent=Hl,ZO.source.WMTS=Cp,ZO.source.WMTS.optionsFromCapabilities=function(t,n){var i=b(t.Contents.Layer,(function(t,i,r){return t.Identifier==n.layer}));if(null===i)return null;var r,e=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?_(i.TileMatrixSetLink,"projection"in n?function(t,i,r){var o=b(e,(function(n){return n.Identifier==t.TileMatrixSet})).SupportedCRS,s=pr(o),u=pr(n.projection);return s&&u?_r(s,u):o==n.projection}:function(t,i,r){return t.TileMatrixSet==n.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,u=i.Format[0];"format"in n&&(u=n.format),(r=_(i.Style,(function(t,i,r){return"style"in n?t.Title==n.style:t.isDefault})))<0&&(r=0);var h=i.Style[r].Identifier,f={};"Dimension"in i&&i.Dimension.forEach((function(t,n,i){var r=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),f[r]=e}));var a,c=b(t.Contents.TileMatrixSet,(function(t,n,i){return t.Identifier==o})),v=c.SupportedCRS;if(v&&(a=pr(v)),"projection"in n){var l=pr(n.projection);l&&(a&&!_r(l,a)||(a=l))}var d=!1,p="ne"==a.getAxisOrientation().substr(0,2),g=c.TileMatrix[0],y={MinTileCol:0,MinTileRow:0,MaxTileCol:g.MatrixWidth-1,MaxTileRow:g.MatrixHeight-1};if(s){y=s[s.length-1];var m=b(c.TileMatrix,(function(t){return t.Identifier===y.TileMatrix||c.Identifier+":"+t.Identifier===y.TileMatrix}));m&&(g=m)}var M=28e-5*g.ScaleDenominator/a.getMetersPerUnit(),x=p?[g.TopLeftCorner[1],g.TopLeftCorner[0]]:g.TopLeftCorner,O=g.TileWidth*M,S=g.TileHeight*M,j=c.BoundingBox;j&&p&&(j=[j[1],j[0],j[3],j[2]]);var E=[x[0]+O*y.MinTileCol,x[1]-S*(1+y.MaxTileRow),x[0]+O*(1+y.MaxTileCol),x[1]-S*y.MinTileRow];if(void 0!==j&&!bn(j,E)){var T=i.WGS84BoundingBox,P=pr("EPSG:4326").getExtent();if(E=j,T)d=T[0]===P[0]&&T[2]===P[2];else{var A=jr(j,c.SupportedCRS,"EPSG:4326");d=A[0]-1e-10<=P[0]&&A[2]+1e-10>=P[2]}}var C=uc(c,E,s),N=[],k=n.requestEncoding;if(k=void 0!==k?k:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var L=t.OperationsMetadata.GetTile.DCP.HTTP.Get,F=0,R=L.length;F<R;++F)if(L[F].Constraint){var I=b(L[F].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===k&&(k=I[0]),"KVP"!==k)break;w(I,"KVP")&&N.push(L[F].href)}else L[F].href&&(k="KVP",N.push(L[F].href));return 0===N.length&&(k="REST",i.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(u=t.format,N.push(t.template))}))),{urls:N,layer:n.layer,matrixSet:o,format:u,projection:a,requestEncoding:k,tileGrid:C,style:h,dimensions:f,wrapX:d,crossOrigin:n.crossOrigin}},ZO.source.XYZ=Pd,ZO.source.Zoomify=Rp,ZO.source.Zoomify.CustomTile=Fp,ZO.source.common={},ZO.source.common.DEFAULT_WMS_VERSION="1.3.0",ZO.source.ogcTileUtil={},ZO.source.ogcTileUtil.getMapTileUrlTemplate=_d,ZO.source.ogcTileUtil.getTileSetInfo=Sd,ZO.source.ogcTileUtil.getVectorTileUrlTemplate=xd,ZO.source.sourcesFromTileGrid=function(t,n){var i=new xf(32),r=t.getExtent();return function(e,o){i.expireCache(),r&&(e=qn(r,e));var s=t.getZForResolution(o),u=[];return t.forEachTileCoord(e,s,(function(t){var r=t.toString();if(!i.containsKey(r)){var e=n(t);i.set(r,e)}u.push(i.get(r))})),u}},ZO.source.wms={},ZO.source.wms.DEFAULT_VERSION=wd,ZO.sphere={},ZO.sphere.DEFAULT_RADIUS=er,ZO.sphere.getArea=function t(n,i){var r=i||{},e=r.radius||er,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,h,f,a,c,v,l=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(u=n.getCoordinates(),l=Math.abs(ur(u[0],e)),f=1,a=u.length;f<a;++f)l-=Math.abs(ur(u[f],e));break;case"MultiPolygon":for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)for(h=u[f],l+=Math.abs(ur(h[0],e)),c=1,v=h.length;c<v;++c)l-=Math.abs(ur(h[c],e));break;case"GeometryCollection":var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+s)}return l},ZO.sphere.getDistance=or,ZO.sphere.getLength=function t(n,i){var r=i||{},e=r.radius||er,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,h,f,a,c,v,l=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":l=sr(u=n.getCoordinates(),e);break;case"MultiLineString":case"Polygon":for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)l+=sr(u[f],e);break;case"MultiPolygon":for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)for(c=0,v=(h=u[f]).length;c<v;++c)l+=sr(h[c],e);break;case"GeometryCollection":var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+s)}return l},ZO.sphere.offset=hr,ZO.string={},ZO.string.compareVersions=Bi,ZO.string.padNumber=Xi,ZO.structs={},ZO.structs.LRUCache=xf,ZO.structs.LinkedList=bl,ZO.structs.PriorityQueue=Mu,ZO.structs.PriorityQueue.DROP=bu,ZO.structs.RBush=_l,ZO.style={},ZO.style.Circle=vc,ZO.style.Fill=lc,ZO.style.Icon=jc,ZO.style.IconImage=Oc,ZO.style.IconImage.get=xc,ZO.style.IconImageCache=Bo,ZO.style.IconImageCache.shared=Vo,ZO.style.Image=hc,ZO.style.RegularShape=ac,ZO.style.Stroke=Ec,ZO.style.Style=Lc,ZO.style.Style.createDefaultStyle=Cc,ZO.style.Style.createEditingStyle=Nc,ZO.style.Style.toFunction=Pc,ZO.style.Text=Ic,ZO.style.expressions={},ZO.style.expressions.Operators=$v,ZO.style.expressions.PALETTE_TEXTURE_ARRAY=wl,ZO.style.expressions.arrayToGlsl=nl,ZO.style.expressions.colorToGlsl=il,ZO.style.expressions.expressionToGlsl=ol,ZO.style.expressions.getStringNumberEquivalent=rl,ZO.style.expressions.getValueType=Kv,ZO.style.expressions.isTypeUnique=Qv,ZO.style.expressions.numberToGlsl=tl,ZO.style.expressions.stringToGlsl=el,ZO.style.expressions.uniformNameForVariable=pl,ZO.tilecoord={},ZO.tilecoord.createOrUpdate=Of,ZO.tilecoord.fromKey=Ef,ZO.tilecoord.getCacheKeyForTileKey=function(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Sf(n[0],n[1],n[2])},ZO.tilecoord.getKey=jf,ZO.tilecoord.getKeyZXY=Sf,ZO.tilecoord.hash=Tf,ZO.tilecoord.withinExtentAndZ=Pf,ZO.tilegrid={},ZO.tilegrid.TileGrid=wa,ZO.tilegrid.WMTS=sc,ZO.tilegrid.WMTS.createFromCapabilitiesMatrixSet=uc,ZO.tilegrid.common={},ZO.tilegrid.common.DEFAULT_MAX_ZOOM=42,ZO.tilegrid.common.DEFAULT_TILE_SIZE=Tu,ZO.tilegrid.createForExtent=ma,ZO.tilegrid.createForProjection=_a,ZO.tilegrid.createXYZ=ba,ZO.tilegrid.extentFromProjection=xa,ZO.tilegrid.getForProjection=ga,ZO.tilegrid.wrapX=ya,ZO.tileurlfunction={},ZO.tileurlfunction.createFromTemplate=Oa,ZO.tileurlfunction.createFromTemplates=Sa,ZO.tileurlfunction.createFromTileUrlFunctions=ja,ZO.tileurlfunction.expandUrl=Ta,ZO.tileurlfunction.nullTileUrlFunction=Ea,ZO.transform={},ZO.transform.apply=Qt,ZO.transform.compose=on,ZO.transform.composeCssTransform=function(t,n,i,r,e,o,s){return hn(on([1,0,0,1,0,0],t,n,i,r,e,o,s))},ZO.transform.create=Yt,ZO.transform.determinant=un,ZO.transform.invert=function(t){return sn(t,t)},ZO.transform.makeInverse=sn,ZO.transform.makeScale=rn,ZO.transform.multiply=Jt,ZO.transform.reset=Ht,ZO.transform.rotate=tn,ZO.transform.scale=nn,ZO.transform.set=$t,ZO.transform.setFromArray=Kt,ZO.transform.toString=hn,ZO.transform.translate=en,ZO.uri={},ZO.uri.appendParams=Pa,ZO.util={},ZO.util.VERSION=u,ZO.util.abstract=r,ZO.util.getUid=o,ZO.vec={},ZO.vec.mat4={},ZO.vec.mat4.create=ic,ZO.vec.mat4.fromTransform=rc,ZO.xml={},ZO.xml.OBJECT_PROPERTY_NODE_FACTORY=qa,ZO.xml.XML_SCHEMA_INSTANCE_URI=Aa,ZO.xml.createElementNS=Ca,ZO.xml.getAllTextContent=Na,ZO.xml.Vw=ka,ZO.xml.getAttributeNS=Fa,ZO.xml.getDocument=nc,ZO.xml.getXMLSerializer=Qa,ZO.xml.isDocument=La,ZO.xml.makeArrayExtender=Ia,ZO.xml.makeArrayPusher=Ga,ZO.xml.makeArraySerializer=Ba,ZO.xml.makeChildAppender=Xa,ZO.xml.makeObjectPropertyPusher=za,ZO.xml.makeObjectPropertySetter=Ua,ZO.xml.makeReplacer=Da,ZO.xml.makeSequence=Wa,ZO.xml.makeSimpleNodeFactory=Va,ZO.xml.makeStructureNS=Za,ZO.xml.parse=Ra,ZO.xml.parseNode=Ya,ZO.xml.pushParseAndPop=Ha,ZO.xml.pushSerializeAndPop=$a,ZO.xml.registerDocument=function(t){tc=t},ZO.xml.registerXMLSerializer=function(t){Ka=t},ZO.xml.serialize=Ja;var YO=ZO}},n={};function i(r){var e=n[r];if(void 0!==e)return e.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,i),o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i(760);var r=i(195);return r=r.default}()}));
//# sourceMappingURL=ol.js.map