/*! For license information please see ol.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t={226:function(t,n){n.read=function(t,n,i,r,e){var o,s,u=8*e-r-1,h=(1<<u)-1,f=h>>1,a=-7,c=i?e-1:0,v=i?-1:1,l=t[n+c];for(c+=v,o=l&(1<<-a)-1,l>>=-a,a+=u;a>0;o=256*o+t[n+c],c+=v,a-=8);for(s=o&(1<<-a)-1,o>>=-a,a+=r;a>0;s=256*s+t[n+c],c+=v,a-=8);if(0===o)o=1-f;else{if(o===h)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),o-=f}return(l?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,n,i,r,e,o){var s,u,h,f=8*o-e-1,a=(1<<f)-1,c=a>>1,v=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:o-1,d=r?1:-1,p=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,s=a):(s=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-s))<1&&(s--,h*=2),(n+=s+c>=1?v/h:v*Math.pow(2,1-c))*h>=2&&(s++,h/=2),s+c>=a?(u=0,s=a):s+c>=1?(u=(n*h-1)*Math.pow(2,e),s+=c):(u=n*Math.pow(2,c-1)*Math.pow(2,e),s=0));e>=8;t[i+l]=255&u,l+=d,u/=256,e-=8);for(s=s<<e|u,f+=e;f>0;t[i+l]=255&s,l+=d,s/=256,f-=8);t[i+l-d]|=128*p}},98:function(t,n,i){"use strict";t.exports=e;var r=i(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,s=1/o,u="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function h(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1}function f(t,n,i){return i?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0)}function a(t,n,i){var r=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(r);for(var e=i.pos-1;e>=t;e--)i.buf[e+r]=i.buf[e]}function c(t,n){for(var i=0;i<t.length;i++)n.writeVarint(t[i])}function v(t,n){for(var i=0;i<t.length;i++)n.writeSVarint(t[i])}function l(t,n){for(var i=0;i<t.length;i++)n.writeFloat(t[i])}function d(t,n){for(var i=0;i<t.length;i++)n.writeDouble(t[i])}function p(t,n){for(var i=0;i<t.length;i++)n.writeBoolean(t[i])}function w(t,n){for(var i=0;i<t.length;i++)n.writeFixed32(t[i])}function y(t,n){for(var i=0;i<t.length;i++)n.writeSFixed32(t[i])}function g(t,n){for(var i=0;i<t.length;i++)n.writeFixed64(t[i])}function m(t,n){for(var i=0;i<t.length;i++)n.writeSFixed64(t[i])}function b(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3]}function _(t,n,i){t[i]=n,t[i+1]=n>>>8,t[i+2]=n>>>16,t[i+3]=n>>>24}function M(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24)}e.prototype={destroy:function(){this.buf=null},readFields:function(t,n,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),e=r>>3,o=this.pos;this.type=7&r,t(e,n,this),this.pos===o&&this.skip(r)}return n},readMessage:function(t,n){return this.readFields(t,n,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=M(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+M(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var n,i,r=this.buf;return n=127&(i=r[this.pos++]),i<128?n:(n|=(127&(i=r[this.pos++]))<<7,i<128?n:(n|=(127&(i=r[this.pos++]))<<14,i<128?n:(n|=(127&(i=r[this.pos++]))<<21,i<128?n:function(t,n,i){var r,e,o=i.buf;if(e=o[i.pos++],r=(112&e)>>4,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<3,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<10,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<17,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<24,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(1&e)<<31,e<128)return f(t,r,n);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&u?function(t,n,i){return u.decode(t.subarray(n,i))}(this.buf,n,t):function(t,n,i){var r="",e=n;for(;e<i;){var o,s,u,h=t[e],f=null,a=h>239?4:h>223?3:h>191?2:1;if(e+a>i)break;1===a?h<128&&(f=h):2===a?128==(192&(o=t[e+1]))&&(f=(31&h)<<6|63&o)<=127&&(f=null):3===a?(o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&((f=(15&h)<<12|(63&o)<<6|63&s)<=2047||f>=55296&&f<=57343)&&(f=null)):4===a&&(o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&((f=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&u)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,a=1):f>65535&&(f-=65536,r+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),r+=String.fromCharCode(f),e+=a}return r}(this.buf,n,t)},readBytes:function(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n},readPackedVarint:function(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var i=h(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(n));return t},readPackedSVarint:function(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=h(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed64());return t},skip:function(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;);else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(t,n){this.writeVarint(t<<3|n)},realloc:function(t){for(var n=this.length||16;n<this.pos+t;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,n){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,n),function(t,n){var i=(7&t)<<4;if(n.buf[n.pos++]|=i|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t}(r,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,i){for(var r,e,o=0;o<n.length;o++){if((r=n.charCodeAt(o))>55295&&r<57344){if(!e){r>56319||o+1===n.length?(t[i++]=239,t[i++]=191,t[i++]=189):e=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,e=r;continue}r=e-55296<<10|r-56320|65536,e=null}else e&&(t[i++]=239,t[i++]=191,t[i++]=189,e=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-n;i>=128&&a(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,n){this.pos++;var i=this.pos;t(n,this);var r=this.pos-i;r>=128&&a(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,n,i){this.writeTag(t,e.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(t,n){n.length&&this.writeMessage(t,c,n)},writePackedSVarint:function(t,n){n.length&&this.writeMessage(t,v,n)},writePackedBoolean:function(t,n){n.length&&this.writeMessage(t,p,n)},writePackedFloat:function(t,n){n.length&&this.writeMessage(t,l,n)},writePackedDouble:function(t,n){n.length&&this.writeMessage(t,d,n)},writePackedFixed32:function(t,n){n.length&&this.writeMessage(t,w,n)},writePackedSFixed32:function(t,n){n.length&&this.writeMessage(t,y,n)},writePackedFixed64:function(t,n){n.length&&this.writeMessage(t,g,n)},writePackedSFixed64:function(t,n){n.length&&this.writeMessage(t,m,n)},writeBytesField:function(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n)},writeFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n)},writeVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeVarint(n)},writeSVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n)},writeStringField:function(t,n){this.writeTag(t,e.Bytes),this.writeString(n)},writeFloatField:function(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n)},writeDoubleField:function(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n)},writeBooleanField:function(t,n){this.writeVarintField(t,Boolean(n))}}},72:function(t,n,i){var r,e,o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,e,o,s){!function t(i,r,e,o,s){for(;o>e;){if(o-e>600){var u=o-e+1,h=r-e+1,f=Math.log(u),a=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*a*(u-a)/u)*(h-u/2<0?-1:1);t(i,r,Math.max(e,Math.floor(r-h*a/u+c)),Math.min(o,Math.floor(r+(u-h)*a/u+c)),s)}var v=i[r],l=e,d=o;for(n(i,e,r),s(i[o],v)>0&&n(i,e,o);l<d;){for(n(i,l,d),l++,d--;s(i[l],v)<0;)l++;for(;s(i[d],v)>0;)d--}0===s(i[e],v)?n(i,e,d):n(i,++d,o),d<=r&&(e=d+1),r<=d&&(o=d-1)}}(t,r,e||0,o||t.length-1,s||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){s(t,0,t.children.length,n,t)}function s(t,n,i,r,e){e||(e=d(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<i;o++){var s=t.children[o];u(e,t.leaf?r(s):s)}return e}function u(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function h(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function a(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function l(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(n,i,r,e,o){for(var s=[i,r];s.length;)if(!((r=s.pop())-(i=s.pop())<=e)){var u=i+Math.ceil((r-i)/e/2)*e;t(n,u,i,r,o),s.push(i,u,u,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!l(t,n))return i;for(var r=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var s=n.children[o],u=n.leaf?r(s):s;l(t,u)&&(n.leaf?i.push(s):v(t,u)?this._all(s,i):e.push(s))}n=e.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!l(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var e=n.children[r],o=n.leaf?this.toBBox(e):e;if(l(t,o)){if(n.leaf||v(t,o))return!0;i.push(e)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,s=this.data,u=this.toBBox(t),h=[],f=[];s||h.length;){if(s||(s=h.pop(),r=h[h.length-1],i=f.pop(),o=!0),s.leaf){var a=e(t,s.children,n);if(-1!==a)return s.children.splice(a,1),h.push(s),this._condense(h),this}o||s.leaf||!v(s,u)?r?(i++,s=r.children[i],o=!1):s=null:(h.push(s),f.push(i),i=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var e,s=i-n+1,u=this._maxEntries;if(s<=u)return o(e=d(t.slice(n,i+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(s)/Math.log(u)),u=Math.ceil(s/Math.pow(u,r-1))),(e=d([])).leaf=!1,e.height=r;var h=Math.ceil(s/u),f=h*Math.ceil(Math.sqrt(u));p(t,n,i,f,this.compareMinX);for(var a=n;a<=i;a+=f){var c=Math.min(a+f-1,i);p(t,a,c,h,this.compareMinY);for(var v=a;v<=c;v+=h){var l=Math.min(v+h-1,c);e.children.push(this._build(t,v,l,r-1))}}return o(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var e=1/0,o=1/0,s=void 0,u=0;u<n.children.length;u++){var h=n.children[u],f=a(h),c=(v=t,l=h,(Math.max(l.maxX,v.maxX)-Math.min(l.minX,v.minX))*(Math.max(l.maxY,v.maxY)-Math.min(l.minY,v.minY))-f);c<o?(o=c,e=f<e?f:e,s=h):c===o&&f<e&&(e=f,s=h)}n=s||n.children[0]}var v,l;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),e=[],o=this._chooseSubtree(r,this.data,n,e);for(o.children.push(t),u(o,r);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(r,e,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,r);var s=this._chooseSplitIndex(i,e,r),u=d(i.children.splice(s,i.children.length-s));u.height=i.height,u.leaf=i.leaf,o(i,this.toBBox),o(u,this.toBBox),n?t[n-1].children.push(u):this._splitRoot(i,u)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,e,o,u,h,f,c,v=1/0,l=1/0,d=n;d<=i-n;d++){var p=s(t,0,d,this.toBBox),w=s(t,d,i,this.toBBox),y=(e=p,o=w,u=Math.max(e.minX,o.minX),h=Math.max(e.minY,o.minY),f=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,f-u)*Math.max(0,c-h)),g=a(p)+a(w);y<v?(v=y,r=d,l=g<l?g:l):y===v&&g<l&&(l=g,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:h,e=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var e=this.toBBox,o=s(t,0,n,e),h=s(t,i-n,i,e),f=c(o)+c(h),a=n;a<i-n;a++){var v=t.children[a];u(o,t.leaf?e(v):v),f+=c(o)}for(var l=i-n-1;l>=n;l--){var d=t.children[l];u(h,t.leaf?e(d):d),f+=c(h)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)u(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r},"object"==s(n)?t.exports=o():void 0===(e="function"==typeof(r=o)?r.call(n,i,n,t):r)||(t.exports=e)},760:function(t,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=function(t){"use strict";var n,i=Object.prototype,e=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function f(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,i){return t[n]=i}}function a(t,n,i,r){var e=n&&n.prototype instanceof y?n:y,o=Object.create(e.prototype),s=new A(r||[]);return o._invoke=function(t,n,i){var r=v;return function(e,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===e)throw o;return P()}for(i.method=e,i.arg=o;;){var s=i.delegate;if(s){var u=j(s,i);if(u){if(u===w)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===v)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var h=c(t,n,i);if("normal"===h.type){if(r=i.done?p:l,h.arg===w)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=p,i.method="throw",i.arg=h.arg)}}}(t,i,s),o}function c(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var v="suspendedStart",l="suspendedYield",d="executing",p="completed",w={};function y(){}function g(){}function m(){}var b={};f(b,s,(function(){return this}));var _=Object.getPrototypeOf,M=_&&_(_(C([])));M&&M!==i&&e.call(M,s)&&(b=M);var x=m.prototype=y.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function S(t,n){function i(o,s,u,h){var f=c(t[o],t,s);if("throw"!==f.type){var a=f.arg,v=a.value;return v&&"object"===r(v)&&e.call(v,"__await")?n.resolve(v.__await).then((function(t){i("next",t,u,h)}),(function(t){i("throw",t,u,h)})):n.resolve(v).then((function(t){a.value=t,u(a)}),(function(t){return i("throw",t,u,h)}))}h(f.arg)}var o;this._invoke=function(t,r){function e(){return new n((function(n,e){i(t,r,n,e)}))}return o=o?o.then(e,e):e()}}function j(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,j(t,i),"throw"===i.method))return w;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var e=c(r,t.iterator,i.arg);if("throw"===e.type)return i.method="throw",i.arg=e.arg,i.delegate=null,w;var o=e.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,w):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,w)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(e.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=n,i.done=!0,i};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}return g.prototype=m,f(x,"constructor",m),f(m,"constructor",g),g.displayName=f(m,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,h,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},O(S.prototype),f(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(n,i,r,e,o){void 0===o&&(o=Promise);var s=new S(a(n,i,r,e),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(x),f(x,h,"Generator"),f(x,s,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&e.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,e){return u.type="throw",u.arg=t,i.next=r,e&&(i.method="next",i.arg=n),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var h=e.call(s,"catchLoc"),f=e.call(s,"finallyLoc");if(h&&f){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&e.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(s)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),w},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),w}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var e=r.arg;T(i)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:C(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),w}},t}("object"===r(t=i.nmd(t))?t.exports:{});try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},474:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return PS}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e))}var s,u="6.14.1",h=(s=function(t,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+u.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return h(n,t),n}(Error);function a(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),v="propertychange",l=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,e,o=i||p,s=0,u=t.length,h=!1;s<u;)(e=+o(t[r=s+(u-s>>1)],n))<0?s=r+1:(u=r,h=!e);return h?s:~s}function p(t,n){return t>n?1:t<n?-1:0}function w(t,n){return t.indexOf(n)>=0}function y(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var e=void 0;if(i>0){for(e=1;e<r;++e)if(t[e]<n)return e-1}else if(i<0){for(e=1;e<r;++e)if(t[e]<=n)return e}else for(e=1;e<r;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof i?i(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e}return r-1}function g(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function m(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,e=0;e<r;e++)t[t.length]=i[e]}function b(t,n){for(var i,r=t.length>>>0,e=0;e<r;e++)if(n(i=t[e],e,t))return i;return null}function _(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function M(t,n){var i;return!t.every((function(r,e){return i=e,!n(r,e,t)}))?i:-1}function x(t,n,i){var r=n||p;return t.every((function(n,e){if(0===e)return!0;var o=r(t[e-1],n);return!(o>0||i&&0===o)}))}function O(){return!0}function S(){return!1}function j(){}function E(t){var n,i,r,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===r&&_(o,i)||(e=!0,r=this,i=o,n=t.apply(this,arguments)),n}}function T(t){return function(){var n;try{n=t()}catch(t){return Promise.reject(t)}return n instanceof Promise?n:Promise.resolve(n)}()}var A="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,e=arguments.length;r<e;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function C(t){for(var n in t)delete t[n]}var P="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function N(t){var n;for(n in t)return!1;return!n}var k=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),F=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.i=null,i.u=null,i.v=null,i}return k(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.v||(this.v={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,i=n?t:t.type,r=this.v&&this.v[i];if(r){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,s=this.u||(this.u={}),u=this.i||(this.i={});i in s||(s[i]=0,u[i]=0),++s[i];for(var h=0,f=r.length;h<f;++h)if(!1===(o="handleEvent"in r[h]?r[h].handleEvent(e):r[h].call(this,e))||e.propagationStopped){o=!1;break}if(0==--s[i]){var a=u[i];for(delete u[i];a--;)this.removeEventListener(i,j);delete s[i]}return o}},n.prototype.disposeInternal=function(){this.v&&C(this.v)},n.prototype.getListeners=function(t){return this.v&&this.v[t]||void 0},n.prototype.hasListener=function(t){return!!this.v&&(t?t in this.v:Object.keys(this.v).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.v&&this.v[t];if(i){var r=i.indexOf(n);-1!==r&&(this.i&&t in this.i?(i[r]=j,++this.i[t]):(i.splice(r,1),0===i.length&&delete this.v[t]))}},n}(l),R="change",I="error",L="contextmenu",G="click",D="dblclick",z="dragenter",U="dragover",X="drop",B="keydown",q="keypress",V="load",W="resize",Z="touchmove",Y="wheel";function H(t,n,i,r,e){if(r&&r!==t&&(i=i.bind(r)),e){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var s={target:t,type:n,listener:i};return t.addEventListener(n,i),s}function J(t,n,i,r){return H(t,n,i,r,!0)}function $(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),C(t))}var Q=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),K=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.l=0,n}return Q(n,t),n.prototype.changed=function(){++this.l,this.dispatchEvent(R)},n.prototype.getRevision=function(){return this.l},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=H(this,t[e],n);return r}return H(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var e=0;e<r;++e)i[e]=J(this,t[e],n)}else i=J(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tt(i);else if(Array.isArray(t))for(var r=0,e=t.length;r<e;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(F);function tt(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)$(t[n]);else $(t)}K.prototype.on,K.prototype.once,K.prototype.un;var nt=K,it=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rt=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.key=i,e.oldValue=r,e}return it(n,t),n}(c),et=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.p=null,void 0!==n&&i.setProperties(n),i}return it(n,t),n.prototype.get=function(t){var n;return this.p&&this.p.hasOwnProperty(t)&&(n=this.p[t]),n},n.prototype.getKeys=function(){return this.p&&Object.keys(this.p)||[]},n.prototype.getProperties=function(){return this.p&&A({},this.p)||{}},n.prototype.hasProperties=function(){return!!this.p},n.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n)),i=v,this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},n.prototype.set=function(t,n,i){var r=this.p||(this.p={});if(i)r[t]=n;else{var e=r[t];r[t]=n,e!==n&&this.notify(t,e)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.p&&A(this.p||(this.p={}),t.p)},n.prototype.unset=function(t,n){if(this.p&&t in this.p){var i=this.p[t];delete this.p[t],N(this.p)&&(this.p=null),n||this.notify(t,i)}},n}(nt),ot="add",st="remove",ut=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ht="length",ft=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.element=i,e.index=r,e}return ut(n,t),n}(c),at=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var e=i||{};if(r.g=!!e.unique,r._=n||[],r.g)for(var o=0,s=r._.length;o<s;++o)r.M(r._[o],o);return r.O(),r}return ut(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this._},n.prototype.item=function(t){return this._[t]},n.prototype.getLength=function(){return this.get(ht)},n.prototype.insertAt=function(t,n){this.g&&this.M(n),this._.splice(t,0,n),this.O(),this.dispatchEvent(new ft(ot,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.g&&this.M(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this._[t];return this._.splice(t,1),this.O(),this.dispatchEvent(new ft(st,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.g&&this.M(n,t);var r=this._[t];this._[t]=n,this.dispatchEvent(new ft(st,r,t)),this.dispatchEvent(new ft(ot,n,t))}else{for(var e=i;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,n)}},n.prototype.O=function(){this.set(ht,this._.length)},n.prototype.M=function(t,n){for(var i=0,r=this._.length;i<r;++i)if(this._[i]===t&&i!==n)throw new f(58)},n}(et),ct=0,vt=1,lt=2,dt=3,pt=4;function wt(t){return Math.pow(t,3)}function yt(t){return 1-wt(1-t)}function gt(t){return 3*t*t-2*t*t*t}function mt(t){return t}var bt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_t=function(t){function n(n,i,r){var e=t.call(this)||this,o=r||{};return e.tileCoord=n,e.state=i,e.interimTile=null,e.key="",e.S=void 0===o.transition?250:o.transition,e.j={},e.interpolate=!!o.interpolate,e}return bt(n,t),n.prototype.changed=function(){this.dispatchEvent(R)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==lt)return this.S=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==lt){t.interimTile=null;break}t.getState()==vt?n=t:t.getState()==ct?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.S)return 1;var i=this.j[t];if(i){if(-1===i)return 1}else i=n,this.j[t]=i;var r=n-i+1e3/60;return r>=this.S?1:wt(r/this.S)},n.prototype.inTransition=function(t){return!!this.S&&-1!==this.j[t]},n.prototype.endTransition=function(t){this.S&&(this.j[t]=-1)},n}(F),Mt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xt=function(t){function n(n){var i=this,r=ct;return(i=t.call(this,n.tileCoord,r,{transition:n.transition,interpolate:n.interpolate})||this).T=n.loader,i.A=null,i.C=null,i}return Mt(n,t),n.prototype.getData=function(){return this.A},n.prototype.getError=function(){return this.C},n.prototype.load=function(){this.state=vt,this.changed();var t=this;this.T().then((function(n){t.A=n,t.state=lt,t.changed()})).catch((function(n){t.C=n,t.state=dt,t.changed()}))},n}(_t);function Ot(t,n){if(!t)throw new f(n)}var St=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function jt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(Ot("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var Et=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.P=void 0,i.N="geometry",i.k=null,i.R=void 0,i.L=null,i.addChangeListener(i.N,i.G),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var e=n;i.setProperties(e)}return i}return St(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.N)},n.prototype.getId=function(){return this.P},n.prototype.getGeometryName=function(){return this.N},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.R},n.prototype.D=function(){this.changed()},n.prototype.G=function(){this.L&&($(this.L),this.L=null);var t=this.getGeometry();t&&(this.L=H(t,R,this.D,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.N,t)},n.prototype.setStyle=function(t){this.k=t,this.R=t?jt(t):void 0,this.changed()},n.prototype.setId=function(t){this.P=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.N,this.G),this.N=t,this.addChangeListener(this.N,this.G),this.G()},n}(et),Tt="XY",At="XYZ",Ct="XYM",Pt="XYZM",Nt="Point",kt="LineString",Ft="LinearRing",Rt="Polygon",It="MultiPoint",Lt="MultiLineString",Gt="MultiPolygon",Dt="GeometryCollection",zt="Circle",Ut={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Xt={9001:Ut.METERS,9002:Ut.FEET,9003:Ut.USFEET,9101:Ut.RADIANS,9102:Ut.DEGREES};var Bt={};Bt[Ut.RADIANS]=6370997/(2*Math.PI),Bt[Ut.DEGREES]=2*Math.PI*6370997/360,Bt[Ut.FEET]=.3048,Bt[Ut.METERS]=1,Bt[Ut.USFEET]=1200/3937;var qt,Vt=Ut,Wt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Zt=-1!==Wt.indexOf("firefox"),Yt=-1!==Wt.indexOf("safari")&&-1==Wt.indexOf("chrom"),Ht=Yt&&!!(Wt.indexOf("version/15.4")>=0||Wt.match(/cpu (os|iphone os) 15_4 like mac os x/)),Jt=-1!==Wt.indexOf("webkit")&&-1==Wt.indexOf("edge"),$t=-1!==Wt.indexOf("macintosh"),Qt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Kt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,tn="undefined"!=typeof Image&&Image.prototype.decode,nn=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),rn=new Array(6);function en(){return[1,0,0,1,0,0]}function on(t){return un(t,1,0,0,1,0,0)}function sn(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=t[4],u=t[5],h=n[0],f=n[1],a=n[2],c=n[3],v=n[4],l=n[5];return t[0]=i*h+e*f,t[1]=r*h+o*f,t[2]=i*a+e*c,t[3]=r*a+o*c,t[4]=i*v+e*l+s,t[5]=r*v+o*l+u,t}function un(t,n,i,r,e,o,s){return t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t}function hn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function fn(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function an(t,n){var i=Math.cos(n),r=Math.sin(n);return sn(t,un(rn,i,r,-r,i,0,0))}function cn(t,n,i){return sn(t,un(rn,n,0,0,i,0,0))}function vn(t,n,i){return un(t,n,0,0,i,0,0)}function ln(t,n,i,r,e,o,s,u){var h=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=e*h,t[2]=-r*h,t[3]=e*f,t[4]=s*r*f-u*r*h+n,t[5]=s*e*h+u*e*f+i,t}function dn(t,n){var i=pn(n);Ot(0!==i,32);var r=n[0],e=n[1],o=n[2],s=n[3],u=n[4],h=n[5];return t[0]=s/i,t[1]=-e/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-s*u)/i,t[5]=-(r*h-e*u)/i,t}function pn(t){return t[0]*t[3]-t[1]*t[2]}function wn(t){var n="matrix("+t.join(", ")+")";if(Kt)return n;var i=qt||(qt=document.createElement("div"));return i.style.transform=n,i.style.transform}var yn="bottom-left",gn="bottom-right",mn="top-left",bn="top-right",_n=0,Mn=1,xn=2,On=4,Sn=8,jn=16;function En(t){for(var n=Rn(),i=0,r=t.length;i<r;++i)Bn(n,t[i]);return n}function Tn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function An(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function Cn(t,n,i){var r,e;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(e=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*e}function Pn(t,n){return kn(t,n[0],n[1])}function Nn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function kn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function Fn(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=n[0],u=n[1],h=_n;return s<i?h|=jn:s>e&&(h|=On),u<r?h|=Sn:u>o&&(h|=xn),h===_n&&(h=Mn),h}function Rn(){return[1/0,1/0,-1/0,-1/0]}function In(t,n,i,r,e){return e?(e[0]=t,e[1]=n,e[2]=i,e[3]=r,e):[t,n,i,r]}function Ln(t){return In(1/0,1/0,-1/0,-1/0,t)}function Gn(t,n){var i=t[0],r=t[1];return In(i,r,i,r,n)}function Dn(t,n,i,r,e){return Vn(Ln(e),t,n,i,r)}function zn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function Un(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function Xn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Bn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function qn(t,n){for(var i=0,r=n.length;i<r;++i)Bn(t,n[i]);return t}function Vn(t,n,i,r,e){for(;i<r;i+=e)Zn(t,n[i],n[i+1]);return t}function Wn(t,n){for(var i=0,r=n.length;i<r;++i)qn(t,n[i]);return t}function Zn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Yn(t,n){var i;return(i=n(Jn(t)))||(i=n($n(t)))||(i=n(ei(t)))?i:(i=n(ri(t)))||!1}function Hn(t){var n=0;return ui(t)||(n=oi(t)*ni(t)),n}function Jn(t){return[t[0],t[1]]}function $n(t){return[t[2],t[1]]}function Qn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Kn(t,n){var i;return n===yn?i=Jn(t):n===gn?i=$n(t):n===mn?i=ri(t):n===bn?i=ei(t):Ot(!1,13),i}function ti(t,n,i,r,e){var o=n*r[0]/2,s=n*r[1]/2,u=Math.cos(i),h=Math.sin(i),f=o*u,a=o*h,c=s*u,v=s*h,l=t[0],d=t[1],p=l-f+v,w=l-f-v,y=l+f-v,g=l+f+v,m=d-a-c,b=d-a+c,_=d+a+c,M=d+a-c;return In(Math.min(p,w,y,g),Math.min(m,b,_,M),Math.max(p,w,y,g),Math.max(m,b,_,M),e)}function ni(t){return t[3]-t[1]}function ii(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return si(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):Ln(r),r}function ri(t){return[t[0],t[3]]}function ei(t){return[t[2],t[3]]}function oi(t){return t[2]-t[0]}function si(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function ui(t){return t[2]<t[0]||t[3]<t[1]}function hi(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function fi(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function ai(t,n,i){var r=!1,e=Fn(t,n),o=Fn(t,i);if(e===Mn||o===Mn)r=!0;else{var s=t[0],u=t[1],h=t[2],f=t[3],a=n[0],c=n[1],v=i[0],l=i[1],d=(l-c)/(v-a),p=void 0,w=void 0;o&xn&&!(e&xn)&&(r=(p=v-(l-f)/d)>=s&&p<=h),r||!(o&On)||e&On||(r=(w=l-(v-h)*d)>=u&&w<=f),r||!(o&Sn)||e&Sn||(r=(p=v-(l-u)/d)>=s&&p<=h),r||!(o&jn)||e&jn||(r=(w=l-(v-s)*d)>=u&&w<=f)}return r}function ci(t,n,i,r){var e=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],u=0;u<r;++u)e.push(t[0]+o*u/r,t[1],t[2],t[1]+s*u/r,t[2]-o*u/r,t[3],t[0],t[3]-s*u/r);else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var h=[],f=[],a=(u=0,e.length);u<a;u+=2)h.push(e[u]),f.push(e[u+1]);return function(t,n,i){return In(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(h,f,i)}function vi(t,n){var i=n.getExtent(),r=Qn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var e=oi(i),o=Math.floor((r[0]-i[0])/e)*e;t[0]-=o,t[2]-=o}return t}var li=function(){function t(t){this.U=t.code,this.B=t.units,this.q=void 0!==t.extent?t.extent:null,this.V=void 0!==t.worldExtent?t.worldExtent:null,this.W=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.Z=void 0!==t.global&&t.global,this.H=!(!this.Z||!this.q),this.$=t.getPointResolution,this.K=null,this.tt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.H},t.prototype.getCode=function(){return this.U},t.prototype.getExtent=function(){return this.q},t.prototype.getUnits=function(){return this.B},t.prototype.getMetersPerUnit=function(){return this.tt||Bt[this.B]},t.prototype.getWorldExtent=function(){return this.V},t.prototype.getAxisOrientation=function(){return this.W},t.prototype.isGlobal=function(){return this.Z},t.prototype.setGlobal=function(t){this.Z=t,this.H=!(!t||!this.q)},t.prototype.getDefaultTileGrid=function(){return this.K},t.prototype.setDefaultTileGrid=function(t){this.K=t},t.prototype.setExtent=function(t){this.q=t,this.H=!(!this.Z||!t)},t.prototype.setWorldExtent=function(t){this.V=t},t.prototype.setGetPointResolution=function(t){this.$=t},t.prototype.getPointResolutionFunc=function(){return this.$},t}();function di(t,n,i){return Math.min(Math.max(t,n),i)}var pi="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},wi="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function yi(t,n,i,r,e,o){var s=e-i,u=o-r;if(0!==s||0!==u){var h=((t-i)*s+(n-r)*u)/(s*s+u*u);h>1?(i=e,r=o):h>0&&(i+=s*h,r+=u*h)}return gi(t,n,i,r)}function gi(t,n,i,r){var e=i-t,o=r-n;return e*e+o*o}function mi(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,e=Math.abs(t[i][i]),o=i+1;o<n;o++){var s=Math.abs(t[o][i]);s>e&&(e=s,r=o)}if(0===e)return null;var u=t[r];t[r]=t[i],t[i]=u;for(var h=i+1;h<n;h++)for(var f=-t[h][i]/t[i][i],a=i;a<n+1;a++)i==a?t[h][a]=0:t[h][a]+=f*t[i][a]}for(var c=new Array(n),v=n-1;v>=0;v--){c[v]=t[v][n]/t[v][v];for(var l=v-1;l>=0;l--)t[l][n]-=t[l][v]*c[v]}return c}function bi(t){return 180*t/Math.PI}function _i(t){return t*Math.PI/180}function Mi(t,n){var i=t%n;return i*n<0?i+n:i}function xi(t,n,i){return t+i*(n-t)}function Oi(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i}function Si(t,n){return Math.round(Oi(t,n))}function ji(t,n){return Math.floor(Oi(t,n))}function Ei(t,n){return Math.ceil(Oi(t,n))}var Ti=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ai=6378137,Ci=Math.PI*Ai,Pi=[-Ci,-Ci,Ci,Ci],Ni=[-180,-85,180,85],ki=Ai*Math.log(Math.tan(Math.PI/2)),Fi=function(t){function n(n){return t.call(this,{code:n,units:Vt.METERS,extent:Pi,global:!0,worldExtent:Ni,getPointResolution:function(t,n){return t/pi(n[1]/Ai)}})||this}return Ti(n,t),n}(li),Ri=[new Fi("EPSG:3857"),new Fi("EPSG:102100"),new Fi("EPSG:102113"),new Fi("EPSG:900913"),new Fi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Fi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ii(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e){o[s]=Ci*t[s]/180;var u=Ai*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>ki?u=ki:u<-ki&&(u=-ki),o[s+1]=u}return o}function Li(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e)o[s]=180*t[s]/Ci,o[s+1]=360*Math.atan(Math.exp(t[s+1]/Ai))/Math.PI-90;return o}var Gi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Di=6378137,zi=[-180,-90,180,90],Ui=Math.PI*Di/180,Xi=function(t){function n(n,i){return t.call(this,{code:n,units:Vt.DEGREES,extent:zi,axisOrientation:i,global:!0,metersPerUnit:Ui,worldExtent:zi})||this}return Gi(n,t),n}(li),Bi=[new Xi("CRS:84"),new Xi("EPSG:4326","neu"),new Xi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xi("urn:ogc:def:crs:OGC:2:84"),new Xi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],qi={};function Vi(){qi={}}function Wi(t){return qi[t]||qi[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Zi(t,n){qi[t]=n}var Yi={};function Hi(){Yi={}}function Ji(t,n,i){var r=t.getCode(),e=n.getCode();r in Yi||(Yi[r]={}),Yi[r][e]=i}function $i(t,n){var i;return t in Yi&&n in Yi[t]&&(i=Yi[t][n]),i}function Qi(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,e=r.indexOf(".");return(e=-1===e?r.length:e)>n?r:new Array(1+n-e).join("0")+r}function Ki(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),e=0;e<Math.max(i.length,r.length);e++){var o=parseInt(i[e]||"0",10),s=parseInt(r[e]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function tr(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function nr(t,n){var i=n.getRadius(),r=n.getCenter(),e=r[0],o=r[1],s=t[0]-e,u=t[1]-o;0===s&&0===u&&(s=1);var h=Math.sqrt(s*s+u*u);return[e+i*s/h,o+i*u/h]}function ir(t,n){var i,r,e=t[0],o=t[1],s=n[0],u=n[1],h=s[0],f=s[1],a=u[0],c=u[1],v=a-h,l=c-f,d=0===v&&0===l?0:(v*(e-h)+l*(o-f))/(v*v+l*l||0);return d<=0?(i=h,r=f):d>=1?(i=a,r=c):(i=h+d*v,r=f+d*l),[i,r]}function rr(t,n,i){var r=Mi(n+180,360)-180,e=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),u=Math.floor(e/3600),h=Math.floor((e-3600*u)/60),f=e-3600*u-60*h;return(f=Math.ceil(f*s)/s)>=60&&(f=0,h+=1),h>=60&&(h=0,u+=1),u+" "+Qi(h,2)+" "+Qi(f,2,o)+""+(0==r?"":" "+t.charAt(r<0?1:0))}function er(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function or(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function sr(t,n){var i=Math.cos(n),r=Math.sin(n),e=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=e,t[1]=o,t}function ur(t,n){return t[0]*=n,t[1]*=n,t}function hr(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function fr(t,n){return Math.sqrt(hr(t,n))}function ar(t,n){return hr(t,ir(t,n))}function cr(t,n){return er(t,"{x}, {y}",n)}function vr(t,n){if(n.canWrapX()){var i=oi(n.getExtent()),r=lr(t,n,i);r&&(t[0]-=r*i)}return t}function lr(t,n,i){var r=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||oi(r);e=Math.floor((t[0]-r[0])/o)}return e}var dr=6371008.8;function pr(t,n,i){var r=i||dr,e=_i(t[1]),o=_i(n[1]),s=(o-e)/2,u=_i(n[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(u)*Math.sin(u)*Math.cos(e)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function wr(t,n){for(var i=0,r=0,e=t.length;r<e-1;++r)i+=pr(t[r],t[r+1],n);return i}function yr(t,n){for(var i=0,r=t.length,e=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var u=t[s][0],h=t[s][1];i+=_i(u-e)*(2+Math.sin(_i(o))+Math.sin(_i(h))),e=u,o=h}return i*n*n/2}function gr(t,n,i,r){var e=r||dr,o=_i(t[1]),s=_i(t[0]),u=n/e,h=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(i));return[bi(s+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(h))),bi(h)]}var mr=!0;function br(t){mr=!(void 0===t||t)}function _r(t,n,i){var r;if(void 0!==n){for(var e=0,o=t.length;e<o;++e)n[e]=t[e];r=n}else r=t.slice();return r}function Mr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,e=t.length;r<e;++r)n[r]=t[r];t=n}return t}function xr(t){Zi(t.getCode(),t),Ji(t,t,_r)}function Or(t){t.forEach(xr)}function Sr(t){return"string"==typeof t?Wi(t):t||null}function jr(t,n,i,r){var e,o=(t=Sr(t)).getPointResolutionFunc();if(o){if(e=o(n,i),r&&r!==t.getUnits())(u=t.getMetersPerUnit())&&(e=e*u/Bt[r])}else{var s=t.getUnits();if(s==Vt.DEGREES&&!r||r==Vt.DEGREES)e=n;else{var u,h=kr(t,Sr("EPSG:4326"));if(h===Mr&&s!==Vt.DEGREES)e=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];e=(pr((f=h(f,f,2)).slice(0,2),f.slice(2,4))+pr(f.slice(4,6),f.slice(6,8)))/2}void 0!==(u=r?Bt[r]:t.getMetersPerUnit())&&(e/=u)}}return e}function Er(t){Or(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Ji(n,t,_r)}))}))}function Tr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Ji(t,n,i),Ji(n,t,r)}))}))}function Ar(t,n){return t?"string"==typeof t?Sr(t):t:Sr(n)}function Cr(t){return function(n,i,r){for(var e=n.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(e),u=0;u<e;u+=o){var h=t([n[u],n[u+1]]);s[u]=h[0],s[u+1]=h[1];for(var f=o-1;f>=2;--f)s[u+f]=n[u+f]}return s}}function Pr(t,n,i,r){var e=Sr(t),o=Sr(n);Ji(e,o,Cr(i)),Ji(o,e,Cr(r))}function Nr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||kr(t,n)===_r)&&i}function kr(t,n){var i=$i(t.getCode(),n.getCode());return i||(i=Mr),i}function Fr(t,n){return kr(Sr(t),Sr(n))}function Rr(t,n,i){return Fr(n,i)(t,void 0,t.length)}function Ir(t,n,i,r){return ci(t,Fr(n,i),void 0,r)}var Lr=null;function Gr(t){Lr=Sr(t)}function Dr(){return Lr}function zr(t,n){return Lr?Rr(t,n,Lr):t}function Ur(t,n){return Lr?Rr(t,Lr,n):(mr&&!or(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(mr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Xr(t,n){return Lr?Ir(t,n,Lr):t}function Br(t,n){return Lr?Ir(t,Lr,n):t}function qr(t,n){if(!Lr)return t;var i=Sr(n).getUnits(),r=Lr.getUnits();return i&&r?t*Bt[i]/Bt[r]:t}function Vr(t,n){if(!Lr)return t;var i=Sr(n).getUnits(),r=Lr.getUnits();return i&&r?t*Bt[r]/Bt[i]:t}function Wr(t,n,i){return function(r){var e,o,s=r[0],u=r[1];if(t.canWrapX()){var h=t.getExtent(),f=oi(h);(o=lr(r,t,f))&&(s-=o*f),s=di(s,h[0],h[2]),u=di(u,h[1],h[3]),e=i([s,u])}else e=i(r);return o&&n.canWrapX()&&(e[0]+=o*oi(n.getExtent())),e}}function Zr(){Er(Ri),Er(Bi),Tr(Bi,Ri,Ii,Li)}function Yr(t,n,i,r,e,o){for(var s=o||[],u=0,h=n;h<i;h+=r){var f=t[h],a=t[h+1];s[u++]=e[0]*f+e[2]*a+e[4],s[u++]=e[1]*f+e[3]*a+e[5]}return o&&s.length!=u&&(s.length=u),s}function Hr(t,n,i,r,e,o,s){for(var u=s||[],h=Math.cos(e),f=Math.sin(e),a=o[0],c=o[1],v=0,l=n;l<i;l+=r){var d=t[l]-a,p=t[l+1]-c;u[v++]=a+d*h-p*f,u[v++]=c+d*f+p*h;for(var w=l+2;w<l+r;++w)u[v++]=t[w]}return s&&u.length!=v&&(u.length=v),u}function Jr(t,n,i,r,e,o,s,u){for(var h=u||[],f=s[0],a=s[1],c=0,v=n;v<i;v+=r){var l=t[v]-f,d=t[v+1]-a;h[c++]=f+e*l,h[c++]=a+o*d;for(var p=v+2;p<v+r;++p)h[c++]=t[p]}return u&&h.length!=c&&(h.length=c),h}function $r(t,n,i,r,e,o,s){for(var u=s||[],h=0,f=n;f<i;f+=r){u[h++]=t[f]+e,u[h++]=t[f+1]+o;for(var a=f+2;a<f+r;++a)u[h++]=t[a]}return s&&u.length!=h&&(u.length=h),u}Zr();var Qr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kr=[1,0,0,1,0,0],te=function(t){function n(){var n=t.call(this)||this;return n.q=[1/0,1/0,-1/0,-1/0],n.nt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Qr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,e){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.nt!=this.getRevision()){var n=this.computeExtent(this.q);(isNaN(n[0])||isNaN(n[1]))&&Ln(n),this.nt=this.getRevision()}return hi(this.q,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=Sr(t),r=i.getUnits()==Vt.TILE_PIXELS?function(t,r,e){var o=i.getExtent(),s=i.getWorldExtent(),u=ni(s)/ni(o);return ln(Kr,s[0],s[3],u,-u,0,0,0),Yr(t,0,t.length,e,Kr,r),Fr(i,n)(t,r,e)}:Fr(i,n);return this.applyTransform(r),this},n}(et),ne=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ie(t){var n;return t==Tt?n=2:t==At||t==Ct?n=3:t==Pt&&(n=4),n}function re(t,n,i){var r=t.getFlatCoordinates();if(r){var e=t.getStride();return Yr(r,0,r.length,e,n,i)}return null}var ee=function(t){function n(){var n=t.call(this)||this;return n.layout=Tt,n.stride=2,n.flatCoordinates=null,n}return ne(n,t),n.prototype.computeExtent=function(t){return Dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=ie(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=ie(t);else{for(var e=0;e<i;++e){if(0===n.length)return this.layout=Tt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=Tt:3==t?n=At:4==t&&(n=Pt);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Hr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var e=i;e||(e=Qn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();Jr(o,0,o.length,s,t,r,e,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();$r(i,0,i.length,r,t,n,i),this.changed()}},n}(te);function oe(t,n,i,r,e,o,s){var u,h=t[n],f=t[n+1],a=t[i]-h,c=t[i+1]-f;if(0===a&&0===c)u=n;else{var v=((e-h)*a+(o-f)*c)/(a*a+c*c);if(v>1)u=i;else{if(v>0){for(var l=0;l<r;++l)s[l]=xi(t[n+l],t[i+l],v);return void(s.length=r)}u=n}}for(l=0;l<r;++l)s[l]=t[u+l];s.length=r}function se(t,n,i,r,e){var o=t[n],s=t[n+1];for(n+=r;n<i;n+=r){var u=t[n],h=t[n+1],f=gi(o,s,u,h);f>e&&(e=f),o=u,s=h}return e}function ue(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=se(t,n,u,r,e),n=u}return e}function he(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=ue(t,n,u,r,e),n=u[u.length-1]}return e}function fe(t,n,i,r,e,o,s,u,h,f,a){if(n==i)return f;var c,v;if(0===e){if((v=gi(s,u,t[n],t[n+1]))<f){for(c=0;c<r;++c)h[c]=t[n+c];return h.length=r,v}return f}for(var l=a||[NaN,NaN],d=n+r;d<i;)if(oe(t,d-r,d,r,s,u,l),(v=gi(s,u,l[0],l[1]))<f){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r,d+=r}else d+=r*Math.max((Math.sqrt(v)-Math.sqrt(f))/e|0,1);if(o&&(oe(t,i-r,n,r,s,u,l),(v=gi(s,u,l[0],l[1]))<f)){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r}return f}function ae(t,n,i,r,e,o,s,u,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=fe(t,n,d,r,e,o,s,u,h,f,c),n=d}return f}function ce(t,n,i,r,e,o,s,u,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=ae(t,n,d,r,e,o,s,u,h,f,c),n=d[d.length-1]}return f}function ve(t,n,i,r){for(var e=0,o=i.length;e<o;++e)t[n++]=i[e];return n}function le(t,n,i,r){for(var e=0,o=i.length;e<o;++e)for(var s=i[e],u=0;u<r;++u)t[n++]=s[u];return n}function de(t,n,i,r,e){for(var o=e||[],s=0,u=0,h=i.length;u<h;++u){var f=le(t,n,i[u],r);o[s++]=f,n=f}return o.length=s,o}function pe(t,n,i,r,e){for(var o=e||[],s=0,u=0,h=i.length;u<h;++u){var f=de(t,n,i[u],r,o[s]);o[s++]=f,n=f[f.length-1]}return o.length=s,o}function we(t,n,i,r,e,o,s){var u=(i-n)/r;if(u<3){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var h=new Array(u);h[0]=1,h[u-1]=1;for(var f=[n,i-r],a=0;f.length>0;){for(var c=f.pop(),v=f.pop(),l=0,d=t[v],p=t[v+1],w=t[c],y=t[c+1],g=v+r;g<c;g+=r){var m=yi(t[g],t[g+1],d,p,w,y);m>l&&(a=g,l=m)}l>e&&(h[(a-n)/r]=1,v+r<a&&f.push(v,a),a+r<c&&f.push(a,c))}for(g=0;g<u;++g)h[g]&&(o[s++]=t[n+g*r],o[s++]=t[n+g*r+1]);return s}function ye(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h];s=we(t,n,a,r,e,o,s),u.push(s),n=a}return s}function ge(t,n,i,r,e,o,s){if(i<=n+r){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var u=t[n],h=t[n+1];o[s++]=u,o[s++]=h;var f=u,a=h;for(n+=r;n<i;n+=r)gi(u,h,f=t[n],a=t[n+1])>e&&(o[s++]=f,o[s++]=a,u=f,h=a);return f==u&&a==h||(o[s++]=f,o[s++]=a),s}function me(t,n){return n*Math.round(t/n)}function be(t,n,i,r,e,o,s){if(n==i)return s;var u,h,f=me(t[n],e),a=me(t[n+1],e);n+=r,o[s++]=f,o[s++]=a;do{if(u=me(t[n],e),h=me(t[n+1],e),(n+=r)==i)return o[s++]=u,o[s++]=h,s}while(u==f&&h==a);for(;n<i;){var c=me(t[n],e),v=me(t[n+1],e);if(n+=r,c!=u||v!=h){var l=u-f,d=h-a,p=c-f,w=v-a;l*w==d*p&&(l<0&&p<l||l==p||l>0&&p>l)&&(d<0&&w<d||d==w||d>0&&w>d)?(u=c,h=v):(o[s++]=u,o[s++]=h,f=u,a=h,u=c,h=v)}}return o[s++]=u,o[s++]=h,s}function _e(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h];s=be(t,n,a,r,e,o,s),u.push(s),n=a}return s}function Me(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];s=_e(t,n,a,r,e,o,s,c),u.push(c),n=a[a.length-1]}return s}function xe(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=n;u<i;u+=r)o[s++]=t.slice(u,u+r);return o.length=s,o}function Oe(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,h=i.length;u<h;++u){var f=i[u];o[s++]=xe(t,n,f,r,o[s]),n=f}return o.length=s,o}function Se(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,h=i.length;u<h;++u){var f=i[u];o[s++]=Oe(t,n,f,r,o[s]),n=f[f.length-1]}return o.length=s,o}function je(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],h=t[n+1];e+=s*u-o*h,o=u,s=h}return e/2}function Ee(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=je(t,n,u,r),n=u}return e}function Te(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=Ee(t,n,u,r),n=u[u.length-1]}return e}var Ae=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ce=function(t){function n(n,i){var r=t.call(this)||this;return r.it=-1,r.rt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Ae(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<Cn(this.getExtent(),t,n)?r:(this.rt!=this.getRevision()&&(this.it=Math.sqrt(se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.rt=this.getRevision()),fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.it,!0,t,n,i,r))},n.prototype.getArea=function(){return je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,Tt)},n.prototype.getType=function(){return Ft},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=le(this.flatCoordinates,0,t,this.stride),this.changed()},n}(ee),Pe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ne=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return Pe(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=gi(t,n,e[0],e[1]);if(o<r){for(var s=this.stride,u=0;u<s;++u)i[u]=e[u];return i.length=s,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return Gn(this.flatCoordinates,t)},n.prototype.getType=function(){return Nt},n.prototype.intersectsExtent=function(t){return kn(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ve(this.flatCoordinates,0,t,this.stride),this.changed()},n}(ee);function ke(t,n,i,r,e){return!Yn(e,(function(e){return!Fe(t,n,i,r,e[0],e[1])}))}function Fe(t,n,i,r,e,o){for(var s=0,u=t[i-r],h=t[i-r+1];n<i;n+=r){var f=t[n],a=t[n+1];h<=o?a>o&&(f-u)*(o-h)-(e-u)*(a-h)>0&&s++:a<=o&&(f-u)*(o-h)-(e-u)*(a-h)<0&&s--,u=f,h=a}return 0!==s}function Re(t,n,i,r,e,o){if(0===i.length)return!1;if(!Fe(t,n,i[0],r,e,o))return!1;for(var s=1,u=i.length;s<u;++s)if(Fe(t,i[s-1],i[s],r,e,o))return!1;return!0}function Ie(t,n,i,r,e,o){if(0===i.length)return!1;for(var s=0,u=i.length;s<u;++s){var h=i[s];if(Re(t,n,h,r,e,o))return!0;n=h[h.length-1]}return!1}function Le(t,n,i,r,e,o,s){for(var u,h,f,a,c,v,l,d=e[o+1],w=[],y=0,g=i.length;y<g;++y){var m=i[y];for(a=t[m-r],v=t[m-r+1],u=n;u<m;u+=r)c=t[u],l=t[u+1],(d<=v&&l<=d||v<=d&&d<=l)&&(f=(d-v)/(l-v)*(c-a)+a,w.push(f)),a=c,v=l}var b=NaN,_=-1/0;for(w.sort(p),a=w[0],u=1,h=w.length;u<h;++u){c=w[u];var M=Math.abs(c-a);M>_&&Re(t,n,i,r,f=(a+c)/2,d)&&(b=f,_=M),a=c}return isNaN(b)&&(b=e[o]),s?(s.push(b,d,_),s):[b,d,_]}function Ge(t,n,i,r,e){for(var o=[],s=0,u=i.length;s<u;++s){var h=i[s];o=Le(t,n,h,r,e,2*s,o),n=h[h.length-1]}return o}function De(t,n,i,r,e){var o;for(n+=r;n<i;n+=r)if(o=e(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function ze(t,n,i,r,e){var o=Vn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!si(e,o)&&(!!Nn(e,o)||(o[0]>=e[0]&&o[2]<=e[2]||(o[1]>=e[1]&&o[3]<=e[3]||De(t,n,i,r,(function(t,n){return ai(e,t,n)})))))}function Ue(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){if(ze(t,n,i[o],r,e))return!0;n=i[o]}return!1}function Xe(t,n,i,r,e){return!!ze(t,n,i,r,e)||(!!Fe(t,n,i,r,e[0],e[1])||(!!Fe(t,n,i,r,e[0],e[3])||(!!Fe(t,n,i,r,e[2],e[1])||!!Fe(t,n,i,r,e[2],e[3]))))}function Be(t,n,i,r,e){if(!Xe(t,n,i[0],r,e))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(ke(t,i[o-1],i[o],r,e)&&!ze(t,i[o-1],i[o],r,e))return!1;return!0}function qe(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(Be(t,n,u,r,e))return!0;n=u[u.length-1]}return!1}function Ve(t,n,i,r){for(;n<i-r;){for(var e=0;e<r;++e){var o=t[n+e];t[n+e]=t[i-r+e],t[i-r+e]=o}n+=r,i-=r}}function We(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],h=t[n+1];e+=(u-o)*(h+s),o=u,s=h}return 0===e?void 0:e>0}function Ze(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var h=i[s],f=We(t,n,h,r);if(0===s){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=h}return!0}function Ye(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(!Ze(t,n,u,r,e))return!1;u.length&&(n=u[u.length-1])}return!0}function He(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var h=i[s],f=We(t,n,h,r);(0===s?o&&f||!o&&!f:o&&!f||!o&&f)&&Ve(t,n,h,r),n=h}return n}function Je(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o)n=He(t,n,i[o],r,e);return n}function $e(t,n){for(var i=[],r=0,e=0,o=0,s=n.length;o<s;++o){var u=n[o];if(We(t,r,u,2)){if(0===i.length)continue;i[i.length-1].push(n[e])}else i.push(n.slice(e,o+1));e=o+1,r=u}return i}var Qe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ke=function(t){function n(n,i,r){var e=t.call(this)||this;return e.et=[],e.ot=-1,e.st=null,e.it=-1,e.rt=-1,e.ut=-1,e.ht=null,void 0!==i&&r?(e.setFlatCoordinates(i,n),e.et=r):e.setCoordinates(n,i),e}return Qe(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.et.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.et.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Cn(this.getExtent(),t,n)?r:(this.rt!=this.getRevision()&&(this.it=Math.sqrt(ue(this.flatCoordinates,0,this.et,this.stride,0)),this.rt=this.getRevision()),ae(this.flatCoordinates,0,this.et,this.stride,this.it,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Re(this.getOrientedFlatCoordinates(),0,this.et,this.stride,t,n)},n.prototype.getArea=function(){return Ee(this.getOrientedFlatCoordinates(),0,this.et,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?He(n=this.getOrientedFlatCoordinates().slice(),0,this.et,this.stride,t):n=this.flatCoordinates,Oe(n,0,this.et,this.stride)},n.prototype.getEnds=function(){return this.et},n.prototype.getFlatInteriorPoint=function(){if(this.ot!=this.getRevision()){var t=Qn(this.getExtent());this.st=Le(this.getOrientedFlatCoordinates(),0,this.et,this.stride,t,0),this.ot=this.getRevision()}return this.st},n.prototype.getInteriorPoint=function(){return new Ne(this.getFlatInteriorPoint(),Ct)},n.prototype.getLinearRingCount=function(){return this.et.length},n.prototype.getLinearRing=function(t){return t<0||this.et.length<=t?null:new Ce(this.flatCoordinates.slice(0===t?0:this.et[t-1],this.et[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.et,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o],h=new Ce(n.slice(e,u),t);r.push(h),e=u}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.ut!=this.getRevision()){var t=this.flatCoordinates;Ze(t,0,this.et,this.stride)?this.ht=t:(this.ht=t.slice(),this.ht.length=He(this.ht,0,this.et,this.stride)),this.ut=this.getRevision()}return this.ht},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=_e(this.flatCoordinates,0,this.et,this.stride,Math.sqrt(t),i,0,r),new n(i,Tt,r)},n.prototype.getType=function(){return Rt},n.prototype.intersectsExtent=function(t){return Be(this.getOrientedFlatCoordinates(),0,this.et,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=de(this.flatCoordinates,0,t,this.stride,this.et);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(ee),to=Ke;function no(t,n,i,r){for(var e=i||32,o=[],s=0;s<e;++s)m(o,gr(t,n,2*Math.PI*s/e,r));return o.push(o[0],o[1]),new Ke(o,Tt,[o.length])}function io(t){var n=t[0],i=t[1],r=t[2],e=t[3],o=[n,i,n,e,r,e,r,i,n,i];return new Ke(o,Tt,[o.length])}function ro(t,n,i){for(var r=n||32,e=t.getStride(),o=t.getLayout(),s=t.getCenter(),u=e*(r+1),h=new Array(u),f=0;f<u;f+=e){h[f]=0,h[f+1]=0;for(var a=2;a<e;a++)h[f+a]=s[a]}var c=[h.length],v=new Ke(h,o,c);return eo(v,s,t.getRadius(),i),v}function eo(t,n,i,r){for(var e=t.getFlatCoordinates(),o=t.getStride(),s=e.length/o-1,u=r||0,h=0;h<=s;++h){var f=h*o,a=u+2*Mi(h,s)*Math.PI/s;e[f]=n[0]+i*Math.cos(a),e[f+1]=n[1]+i*Math.sin(a)}t.changed()}var oo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),so="accuracy",uo="accuracyGeometry",ho="altitude",fo="altitudeAccuracy",ao="heading",co="position",vo="projection",lo="speed",po="tracking",wo="trackingOptions",yo=function(t){function n(n){var i=t.call(this,I)||this;return i.code=n.code,i.message=n.message,i}return oo(n,t),n}(c),go=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ft=null,i.ct=Mr,i.vt=void 0,i.addChangeListener(vo,i.lt),i.addChangeListener(po,i.dt),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return oo(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.lt=function(){var t=this.getProjection();t&&(this.ct=kr(Sr("EPSG:4326"),t),this.ft&&this.set(co,this.ct(this.ft)))},n.prototype.dt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.vt?this.vt=navigator.geolocation.watchPosition(this.wt.bind(this),this.yt.bind(this),this.getTrackingOptions()):t||void 0===this.vt||(navigator.geolocation.clearWatch(this.vt),this.vt=void 0)}},n.prototype.wt=function(t){var n=t.coords;this.set(so,n.accuracy),this.set(ho,null===n.altitude?void 0:n.altitude),this.set(fo,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(ao,null===n.heading?void 0:_i(n.heading)),this.ft?(this.ft[0]=n.longitude,this.ft[1]=n.latitude):this.ft=[n.longitude,n.latitude];var i=this.ct(this.ft);this.set(co,i),this.set(lo,null===n.speed?void 0:n.speed);var r=no(this.ft,n.accuracy);r.applyTransform(this.ct),this.set(uo,r),this.changed()},n.prototype.yt=function(t){this.dispatchEvent(new yo(t))},n.prototype.getAccuracy=function(){return this.get(so)},n.prototype.getAccuracyGeometry=function(){return this.get(uo)||null},n.prototype.getAltitude=function(){return this.get(ho)},n.prototype.getAltitudeAccuracy=function(){return this.get(fo)},n.prototype.getHeading=function(){return this.get(ao)},n.prototype.getPosition=function(){return this.get(co)},n.prototype.getProjection=function(){return this.get(vo)},n.prototype.getSpeed=function(){return this.get(lo)},n.prototype.getTracking=function(){return this.get(po)},n.prototype.getTrackingOptions=function(){return this.get(wo)},n.prototype.setProjection=function(t){this.set(vo,Sr(t))},n.prototype.setTracking=function(t){this.set(po,t)},n.prototype.setTrackingOptions=function(t){this.set(wo,t)},n}(et),mo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bo=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.extent=n,o.gt=r,o.resolution=i,o.state=e,o}return mo(n,t),n.prototype.changed=function(){this.dispatchEvent(R)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.gt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(F),_o=0,Mo=1,xo=2,Oo=3,So=4,jo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Eo(t,n,i){var r=t,e=!0,o=!1,s=!1,u=[J(r,V,(function(){s=!0,o||n()}))];return r.src&&tn?(o=!0,r.decode().then((function(){e&&n()})).catch((function(t){e&&(s?n():i())}))):u.push(J(r,I,i)),function(){e=!1,u.forEach($)}}var To=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,r,_o)||this;return u.bt=e,u._t=new Image,null!==o&&(u._t.crossOrigin=o),u.Mt=null,u.state=_o,u.xt=s,u}return jo(n,t),n.prototype.getImage=function(){return this._t},n.prototype.Ot=function(){this.state=Oo,this.St(),this.changed()},n.prototype.jt=function(){void 0===this.resolution&&(this.resolution=ni(this.extent)/this._t.height),this.state=xo,this.St(),this.changed()},n.prototype.load=function(){this.state!=_o&&this.state!=Oo||(this.state=Mo,this.changed(),this.xt(this,this.bt),this.Mt=Eo(this._t,this.jt.bind(this),this.Ot.bind(this)))},n.prototype.setImage=function(t){this._t=t,this.resolution=ni(this.extent)/this._t.height},n.prototype.St=function(){this.Mt&&(this.Mt(),this.Mt=null)},n}(bo),Ao=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Co=function(t){function n(n,i,r,e,o){var s=this,u=void 0!==o?_o:xo;return(s=t.call(this,n,i,r,u)||this).T=void 0!==o?o:null,s.Et=e,s.C=null,s}return Ao(n,t),n.prototype.getError=function(){return this.C},n.prototype.Tt=function(t){t?(this.C=t,this.state=Oo):this.state=xo,this.changed()},n.prototype.load=function(){this.state==_o&&(this.state=Mo,this.changed(),this.T(this.Tt.bind(this)))},n.prototype.getImage=function(){return this.Et},n}(bo);function Po(t,n,i,r){var e;return e=i&&i.length?i.shift():Kt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",r)}function No(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function ko(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function Fo(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function Ro(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Io(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Lo(t,n){for(var i=t.childNodes,r=0;;++r){var e=i[r],o=n[r];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--r):t.appendChild(o))}}var Go=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Do=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.At=e,u.bt=r,u.key=r,u._t=new Image,null!==e&&(u._t.crossOrigin=e),u.Mt=null,u.Ct=o,u}return Go(n,t),n.prototype.getImage=function(){return this._t},n.prototype.setImage=function(t){this._t=t,this.state=lt,this.St(),this.changed()},n.prototype.Ot=function(){var t;this.state=dt,this.St(),this._t=((t=Po(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.jt=function(){var t=this._t;t.naturalWidth&&t.naturalHeight?this.state=lt:this.state=pt,this.St(),this.changed()},n.prototype.load=function(){this.state==dt&&(this.state=ct,this._t=new Image,null!==this.At&&(this._t.crossOrigin=this.At)),this.state==ct&&(this.state=vt,this.changed(),this.Ct(this,this.bt),this.Mt=Eo(this._t,this.jt.bind(this),this.Ot.bind(this)))},n.prototype.St=function(){this.Mt&&(this.Mt(),this.Mt=null)},n}(_t),zo=function(){function t(t,n,i){this.Pt=t,this.Nt=n,this.kt=i,this.Ft=[],this.Rt=0,this.It=0}return t.prototype.begin=function(){this.Ft.length=0,this.Rt=0,this.It=0},t.prototype.update=function(t,n){this.Ft.push(t,n,Date.now())},t.prototype.end=function(){if(this.Ft.length<6)return!1;var t=Date.now()-this.kt,n=this.Ft.length-3;if(this.Ft[n+2]<t)return!1;for(var i=n-3;i>0&&this.Ft[i+2]>t;)i-=3;var r=this.Ft[n+2]-this.Ft[i+2];if(r<1e3/60)return!1;var e=this.Ft[n]-this.Ft[i],o=this.Ft[n+1]-this.Ft[i+1];return this.Rt=Math.atan2(o,e),this.It=Math.sqrt(e*e+o*o)/r,this.It>this.Nt},t.prototype.getDistance=function(){return(this.Nt-this.It)/this.Pt},t.prototype.getAngle=function(){return this.Rt},t}(),Uo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Xo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Bo(t){return"string"==typeof t?t:Yo(t)}function qo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var Vo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var e=0;for(var o in t)0==(3&e++)&&(delete t[o],--n)}r=function(t){var n,i,r,e,o;Xo.exec(t)&&(t=qo(t));if(Uo.exec(t)){var s=t.length-1,u=void 0;u=s<=4?1:2;var h=4===s||8===s;n=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),r=parseInt(t.substr(1+2*u,u),16),e=h?parseInt(t.substr(1+3*u,u),16):255,1==u&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,h&&(e=(e<<4)+e)),o=[n,i,r,e/255]}else 0==t.indexOf("rgba(")?Zo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Zo(o)):Ot(!1,14);return o}(i),t[i]=r,++n}return r}}();function Wo(t){return Array.isArray(t)?t:Vo(t)}function Zo(t){return t[0]=di(t[0]+.5|0,0,255),t[1]=di(t[1]+.5|0,0,255),t[2]=di(t[2]+.5|0,0,255),t[3]=di(t[3],0,1),t}function Yo(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Ho(t){return Xo.test(t)&&(t=qo(t)),Uo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Jo=function(){function t(){this.Lt={},this.Gt=0,this.Dt=32}return t.prototype.clear=function(){this.Lt={},this.Gt=0},t.prototype.canExpireCache=function(){return this.Gt>this.Dt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Lt){var i=this.Lt[n];0!=(3&t++)||i.hasListener()||(delete this.Lt[n],--this.Gt)}}},t.prototype.get=function(t,n,i){var r=$o(t,n,i);return r in this.Lt?this.Lt[r]:null},t.prototype.set=function(t,n,i,r){var e=$o(t,n,i);this.Lt[e]=r,++this.Gt},t.prototype.setSize=function(t){this.Dt=t,this.expire()},t}();function $o(t,n,i){return n+":"+t+":"+(i?Bo(i):"null")}var Qo=Jo,Ko=new Jo,ts="opacity",ns="visible",is="extent",rs="zIndex",es="maxResolution",os="minResolution",ss="maxZoom",us="minZoom",hs="source",fs="map";function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var cs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vs=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.zt=n.background;var r=A({},n);return"object"===as(n.properties)&&(delete r.properties,A(r,n.properties)),r[ts]=void 0!==n.opacity?n.opacity:1,Ot("number"==typeof r[ts],64),r[ns]=void 0===n.visible||n.visible,r[rs]=n.zIndex,r[es]=void 0!==n.maxResolution?n.maxResolution:1/0,r[os]=void 0!==n.minResolution?n.minResolution:0,r[us]=void 0!==n.minZoom?n.minZoom:-1/0,r[ss]=void 0!==n.maxZoom?n.maxZoom:1/0,i.Ut=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.Xt=null,i}return cs(n,t),n.prototype.getBackground=function(){return this.zt},n.prototype.getClassName=function(){return this.Ut},n.prototype.getLayerState=function(t){var n=this.Xt||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=di(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.Xt=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(is)},n.prototype.getMaxResolution=function(){return this.get(es)},n.prototype.getMinResolution=function(){return this.get(os)},n.prototype.getMinZoom=function(){return this.get(us)},n.prototype.getMaxZoom=function(){return this.get(ss)},n.prototype.getOpacity=function(){return this.get(ts)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(ns)},n.prototype.getZIndex=function(){return this.get(rs)},n.prototype.setBackground=function(t){this.zt=t,this.changed()},n.prototype.setExtent=function(t){this.set(is,t)},n.prototype.setMaxResolution=function(t){this.set(es,t)},n.prototype.setMinResolution=function(t){this.set(os,t)},n.prototype.setMaxZoom=function(t){this.set(ss,t)},n.prototype.setMinZoom=function(t){this.set(us,t)},n.prototype.setOpacity=function(t){Ot("number"==typeof t,64),this.set(ts,t)},n.prototype.setVisible=function(t){this.set(ns,t)},n.prototype.setZIndex=function(t){this.set(rs,t)},n.prototype.disposeInternal=function(){this.Xt&&(this.Xt.layer=null,this.Xt=null),t.prototype.disposeInternal.call(this)},n}(et),ls="prerender",ds="postrender",ps="precompose",ws="postcompose",ys="rendercomplete",gs="undefined",ms="loading",bs="ready",_s="error",Ms=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function xs(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var Os=function(t){function n(n){var i=this,r=A({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.Bt=null,i.qt=null,i.Vt=null,i.Wt=null,i.rendered=!1,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(hs,i.Zt);var e=n.source?n.source:null;return i.setSource(e),i}return Ms(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(hs)||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():gs},n.prototype.Yt=function(){this.changed()},n.prototype.Zt=function(){this.Vt&&($(this.Vt),this.Vt=null);var t=this.getSource();t&&(this.Vt=H(t,R,this.Yt,this)),this.changed()},n.prototype.getFeatures=function(t){return this.Wt?this.Wt.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.getData=function(t){return this.Wt&&this.rendered?this.Wt.getData(t):null},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(fs,t)},n.prototype.getMapInternal=function(){return this.get(fs)},n.prototype.setMap=function(t){this.Bt&&($(this.Bt),this.Bt=null),t||this.changed(),this.qt&&($(this.qt),this.qt=null),t&&(this.Bt=H(t,ps,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);Ot(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.qt=H(this,R,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(hs,t)},n.prototype.getRenderer=function(){return this.Wt||(this.Wt=this.createRenderer()),this.Wt},n.prototype.hasRenderer=function(){return!!this.Wt},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.Wt&&(this.Wt.dispose(),delete this.Wt),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(vs),Ss=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function js(t,n){Ko.expire()}var Es=function(t){function n(n){var i=t.call(this)||this;return i.Ht=n,i}return Ss(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;ln(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),dn(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o,s,u){var h,f=n.viewState;function a(t,n,i,r){return e.call(o,n,t?i:null,r)}var c=f.projection,v=vr(t.slice(),c),l=[[0,0]];if(c.canWrapX()&&r){var d=oi(c.getExtent());l.push([-d,0],[d,0])}for(var p=n.layerStatesArray,w=p.length,y=[],g=[],m=0;m<l.length;m++)for(var b=w-1;b>=0;--b){var _=p[b],M=_.layer;if(M.hasRenderer()&&xs(_,f)&&s.call(u,M)){var x=M.getRenderer(),O=M.getSource();if(x&&O){var S=O.getWrapX()?v:t,j=a.bind(null,_.managed);g[0]=S[0]+l[m][0],g[1]=S[1]+l[m][1],h=x.forEachFeatureAtCoordinate(g,n,i,j,y)}if(h)return h}}if(0!==y.length){var E=1/y.length;return y.forEach((function(t,n){return t.distanceSq+=n*E})),y.sort((function(t,n){return t.distanceSq-n.distanceSq})),y.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},n.prototype.forEachLayerAtPixel=function(t,n,i,e,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,O,this,e,o)},n.prototype.getMap=function(){return this.Ht},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Ko.canExpireCache()&&t.postRenderFunctions.push(js)},n}(l),Ts=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),As=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=e,o}return Ts(n,t),n}(c),Cs="ol-hidden",Ps="ol-selectable",Ns="ol-unselectable",ks="ol-unsupported",Fs="ol-control",Rs="ol-collapsed",Is=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ls=["style","variant","weight","size","lineHeight","family"],Gs=function(t){var n=t.match(Is);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,e=Ls.length;r<e;++r){var o=n[r+1];void 0!==o&&(i[Ls[r]]=o)}return i.families=i.family.split(/,\s?/),i};function Ds(t){return 1===t?"":String(Math.round(100*t)/100)}var zs="10px sans-serif",Us="#000",Xs="round",Bs=[],qs="round",Vs=10,Ws="#000",Zs="center",Ys="middle",Hs=[0,0,0,0],Js=new et,$s=new F;$s.setSize=function(){console.warn("labelCache is deprecated.")};var Qs,Ks,tu=null,nu={},iu=function(){var t,n,i="32px ",r=["monospace","serif"],e=r.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,u){for(var h=!0,f=0;f<e;++f){var a=r[f];if(n=ou(t+" "+s+" "+i+a,o),u!=a){var c=ou(t+" "+s+" "+i+u+","+a,o);h=h&&c!=n}}return!!h}function u(){for(var n=!0,i=Js.getKeys(),r=0,e=i.length;r<e;++r){var o=i[r];Js.get(o)<100&&(s.apply(this,o.split("\n"))?(C(nu),tu=null,Qs=void 0,Js.set(o,100)):(Js.set(o,Js.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=Gs(n);if(i)for(var r=i.families,e=0,o=r.length;e<o;++e){var h=r[e],f=i.style+"\n"+i.weight+"\n"+h;void 0===Js.get(f)&&(Js.set(f,100,!0),s(i.style,i.weight,h)||(Js.set(f,0,!0),void 0===t&&(t=setInterval(u,32))))}}}(),ru=function(t){var n=nu[t];if(null==n){if(Kt){var i=Gs(t),r=eu(t,"g");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Ks||((Ks=document.createElement("div")).innerHTML="M",Ks.style.minHeight="0",Ks.style.maxHeight="none",Ks.style.height="auto",Ks.style.padding="0",Ks.style.border="none",Ks.style.position="absolute",Ks.style.display="block",Ks.style.left="-99999px"),Ks.style.font=t,document.body.appendChild(Ks),n=Ks.offsetHeight,document.body.removeChild(Ks);nu[t]=n}return n};function eu(t,n){return tu||(tu=Po(1,1)),t!=Qs&&(tu.font=t,Qs=tu.font),tu.measureText(n)}function ou(t,n){return eu(t,n).width}function su(t,n,i){if(n in i)return i[n];var r=ou(t,n);return i[n]=r,r}function uu(t,n){for(var i=[],r=[],e=[],o=0,s=0,u=0,h=0,f=0,a=n.length;f<=a;f+=2){var c=n[f];if("\n"!==c&&f!==a){var v=n[f+1]||t.font,l=ou(v,c);i.push(l),s+=l;var d=ru(v);r.push(d),h=Math.max(h,d)}else o=Math.max(o,s),e.push(s),s=0,u+=h}return{width:o,height:u,widths:i,heights:r,lineWidths:e}}function hu(t,n,i,r,e,o,s,u,h,f,a){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(h,f),t.scale(a[0],a[1]),function(t,n){for(var i=t.contextInstructions,r=0,e=i.length;r<e;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):a[0]<0||a[1]<0?(t.translate(h,f),t.scale(a[0],a[1]),t.drawImage(r,e,o,s,u,0,0,s,u)):t.drawImage(r,e,o,s,u,h,f,s*a[0],u*a[1]),t.restore()}var fu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),au=function(t){function n(n){var i=t.call(this,n)||this;i.Jt=H(Js,v,n.redrawText.bind(n)),i.$t=document.createElement("div");var r=i.$t.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.$t.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(i.$t,e.firstChild||null),i.Qt=[],i.Kt=!0,i}return fu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new As(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){$(this.Jt),this.$t.parentNode.removeChild(this.$t),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ps,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.Qt.length=0;for(var r=[],e=null,o=0,s=n.length;o<s;++o){var u=n[o];t.layerIndex=o;var h=u.layer,f=h.getSourceState();if(!xs(u,i)||f!=bs&&f!=gs)h.unrender();else{var a=h.render(t,e);a&&(a!==e&&(this.Qt.push(a),e=a),"getDeclutter"in h&&r.push(h))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);Lo(this.$t,this.Qt),this.dispatchRenderEvent(ws,t),this.Kt||(this.$t.style.display="",this.Kt=!0),this.scheduleExpireIconCache(t)}else this.Kt&&(this.$t.style.display="none",this.Kt=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,e){for(var o=n.viewState,s=n.layerStatesArray,u=s.length-1;u>=0;--u){var h=s[u],f=h.layer;if(f.hasRenderer()&&xs(h,o)&&e(f)){var a=f.getRenderer().getDataAtPixel(t,n,i);if(a){var c=r(f,a);if(c)return c}}}},n}(Es),cu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vu=function(t){function n(n,i){var r=t.call(this,n)||this;return r.layer=i,r}return cu(n,t),n}(c),lu="layers",du=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.layers;var o=r.layers;return(i=t.call(this,e)||this).on,i.once,i.un,i.tn=[],i.nn={},i.addChangeListener(lu,i.rn),o?Array.isArray(o)?o=new at(o.slice(),{unique:!0}):Ot("function"==typeof o.getArray,43):o=new at(void 0,{unique:!0}),i.setLayers(o),i}return cu(n,t),n.prototype.en=function(){this.changed()},n.prototype.rn=function(){this.tn.forEach($),this.tn.length=0;var t=this.getLayers();for(var n in this.tn.push(H(t,ot,this.sn,this),H(t,st,this.hn,this)),this.nn)this.nn[n].forEach($);C(this.nn);for(var i=t.getArray(),r=0,e=i.length;r<e;r++){var o=i[r];this.fn(o),this.dispatchEvent(new vu("addlayer",o))}this.changed()},n.prototype.fn=function(t){var i=[H(t,v,this.en,this),H(t,R,this.en,this)];t instanceof n&&i.push(H(t,"addlayer",this.an,this),H(t,"removelayer",this.cn,this)),this.nn[o(t)]=i},n.prototype.an=function(t){this.dispatchEvent(new vu("addlayer",t.layer))},n.prototype.cn=function(t){this.dispatchEvent(new vu("removelayer",t.layer))},n.prototype.sn=function(t){var n=t.element;this.fn(n),this.dispatchEvent(new vu("addlayer",n)),this.changed()},n.prototype.hn=function(t){var n=t.element,i=o(n);this.nn[i].forEach($),delete this.nn[i],this.dispatchEvent(new vu("removelayer",n)),this.changed()},n.prototype.getLayers=function(){return this.get(lu)},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),r=0,e=i.length;r<e;++r)this.dispatchEvent(new vu("removelayer",i[r]));this.set(lu,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),e=r.zIndex;t||void 0!==r.zIndex||(e=0);for(var o=i,s=n.length;o<s;o++){var u=n[o];u.opacity*=r.opacity,u.visible=u.visible&&r.visible,u.maxResolution=Math.min(u.maxResolution,r.maxResolution),u.minResolution=Math.max(u.minResolution,r.minResolution),u.minZoom=Math.max(u.minZoom,r.minZoom),u.maxZoom=Math.min(u.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==u.extent?u.extent=ii(u.extent,r.extent):u.extent=r.extent),void 0===u.zIndex&&(u.zIndex=e)}return n},n.prototype.getSourceState=function(){return bs},n}(vs),pu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wu=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.map=i,e.frameState=void 0!==r?r:null,e}return pu(n,t),n}(c),yu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gu=function(t){function n(n,i,r,e,o){var s=t.call(this,n,i,o)||this;return s.originalEvent=r,s.vn=null,s.ln=null,s.dragging=void 0!==e&&e,s}return yu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.vn||(this.vn=this.map.getEventPixel(this.originalEvent)),this.vn},set:function(t){this.vn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.ln||(this.ln=this.map.getCoordinateFromPixel(this.pixel)),this.ln},set:function(t){this.ln=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(wu),mu={SINGLECLICK:"singleclick",CLICK:G,DBLCLICK:D,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},bu="pointermove",_u="pointerdown",Mu="pointerup",xu="pointerout",Ou=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Su=function(t){function n(n,i){var r=t.call(this,n)||this;r.Ht=n,r.dn,r.pn=!1,r.wn=!1,r.yn=[],r.gn=void 0===i?1:i,r.mn=null;var e=r.Ht.getViewport();return r.bn=0,r._n={},r.$t=e,r.Mn=H(e,_u,r.xn,r),r.On,r.Sn=H(e,bu,r.jn,r),r.En=r.Tn.bind(r),r.$t.addEventListener(Z,r.En,!!nn&&{passive:!1}),r}return Ou(n,t),n.prototype.An=function(t){var n=new gu(mu.CLICK,this.Ht,t);this.dispatchEvent(n),void 0!==this.dn?(clearTimeout(this.dn),this.dn=void 0,n=new gu(mu.DBLCLICK,this.Ht,t),this.dispatchEvent(n)):this.dn=setTimeout(function(){this.dn=void 0;var n=new gu(mu.SINGLECLICK,this.Ht,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Cn=function(t){var n=t;n.type==mu.POINTERUP||n.type==mu.POINTERCANCEL?delete this._n[n.pointerId]:n.type==mu.POINTERDOWN&&(this._n[n.pointerId]=!0),this.bn=Object.keys(this._n).length},n.prototype.Pn=function(t){this.Cn(t);var n=new gu(mu.POINTERUP,this.Ht,t);this.dispatchEvent(n),this.pn&&!n.defaultPrevented&&!this.wn&&this.Nn(t)&&this.An(this.mn),0===this.bn&&(this.yn.forEach($),this.yn.length=0,this.wn=!1,this.mn=null)},n.prototype.Nn=function(t){return 0===t.button},n.prototype.xn=function(t){this.pn=0===this.bn,this.Cn(t);var n=new gu(mu.POINTERDOWN,this.Ht,t);for(var i in this.dispatchEvent(n),this.mn={},t){var r=t[i];this.mn[i]="function"==typeof r?j:r}if(0===this.yn.length){var e=this.Ht.getOwnerDocument();this.yn.push(H(e,mu.POINTERMOVE,this.kn,this),H(e,mu.POINTERUP,this.Pn,this),H(this.$t,mu.POINTERCANCEL,this.Pn,this)),this.$t.getRootNode&&this.$t.getRootNode()!==e&&this.yn.push(H(this.$t.getRootNode(),mu.POINTERUP,this.Pn,this))}},n.prototype.kn=function(t){if(this.Fn(t)){this.wn=!0;var n=new gu(mu.POINTERDRAG,this.Ht,t,this.wn);this.dispatchEvent(n)}},n.prototype.jn=function(t){this.On=t;var n=!(!this.mn||!this.Fn(t));this.dispatchEvent(new gu(t.type,this.Ht,t,n))},n.prototype.Tn=function(t){var n=this.On;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Fn=function(t){return this.wn||Math.abs(t.clientX-this.mn.clientX)>this.gn||Math.abs(t.clientY-this.mn.clientY)>this.gn},n.prototype.disposeInternal=function(){this.Sn&&($(this.Sn),this.Sn=null),this.$t.removeEventListener(Z,this.En),this.Mn&&($(this.Mn),this.Mn=null),this.yn.forEach($),this.yn.length=0,this.$t=null,t.prototype.disposeInternal.call(this)},n}(F),ju="postrender",Eu="movestart",Tu="moveend",Au="loadstart",Cu="loadend",Pu="layergroup",Nu="size",ku="target",Fu="view",Ru=1/0,Iu=function(){function t(t,n){this.Rn=t,this.In=n,this.Ln=[],this.Gn=[],this.Dn={}}return t.prototype.clear=function(){this.Ln.length=0,this.Gn.length=0,C(this.Dn)},t.prototype.dequeue=function(){var t=this.Ln,n=this.Gn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.zn(0));var r=this.In(i);return delete this.Dn[r],i},t.prototype.enqueue=function(t){Ot(!(this.In(t)in this.Dn),31);var n=this.Rn(t);return n!=Ru&&(this.Ln.push(t),this.Gn.push(n),this.Dn[this.In(t)]=!0,this.Un(0,this.Ln.length-1),!0)},t.prototype.getCount=function(){return this.Ln.length},t.prototype.Xn=function(t){return 2*t+1},t.prototype.Bn=function(t){return 2*t+2},t.prototype.qn=function(t){return t-1>>1},t.prototype.Vn=function(){var t;for(t=(this.Ln.length>>1)-1;t>=0;t--)this.zn(t)},t.prototype.isEmpty=function(){return 0===this.Ln.length},t.prototype.isKeyQueued=function(t){return t in this.Dn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.In(t))},t.prototype.zn=function(t){for(var n=this.Ln,i=this.Gn,r=n.length,e=n[t],o=i[t],s=t;t<r>>1;){var u=this.Xn(t),h=this.Bn(t),f=h<r&&i[h]<i[u]?h:u;n[t]=n[f],i[t]=i[f],t=f}n[t]=e,i[t]=o,this.Un(s,t)},t.prototype.Un=function(t,n){for(var i=this.Ln,r=this.Gn,e=i[n],o=r[n];n>t;){var s=this.qn(n);if(!(r[s]>o))break;i[n]=i[s],r[n]=r[s],n=s}i[n]=e,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Rn,e=this.Ln,o=this.Gn,s=0,u=e.length;for(n=0;n<u;++n)(i=r(t=e[n]))==Ru?delete this.Dn[this.In(t)]:(o[s]=i,e[s++]=t);e.length=s,o.length=s,this.Vn()},t}(),Lu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gu=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Wn=r.handleTileChange.bind(r),r.Zn=i,r.Yn=0,r.Hn={},r}return Lu(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(R,this.Wn);return i},n.prototype.getTilesLoading=function(){return this.Yn},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===lt||i===dt||i===pt){n.removeEventListener(R,this.Wn);var r=n.getKey();r in this.Hn&&(delete this.Hn[r],--this.Yn),this.Zn()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,e=0;this.Yn<t&&e<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ct||r in this.Hn||(this.Hn[r]=!0,++this.Yn,++e,i.load())},n}(Iu);function Du(t,n,i,r,e){if(!t||!(i in t.wantedTiles))return Ru;if(!t.wantedTiles[i][n.getKey()])return Ru;var o=t.viewState.center,s=r[0]-o[0],u=r[1]-o[1];return 65536*Math.log(e)+Math.sqrt(s*s+u*u)/e}var zu=0,Uu=1,Xu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Bu=256;function qu(t,n,i){return function(r,e,o,s,u){if(r){if(!e&&!n)return r;var h=n?0:o[0]*e,f=n?0:o[1]*e,a=u?u[0]:0,c=u?u[1]:0,v=t[0]+h/2+a,l=t[2]-h/2+a,d=t[1]+f/2+c,p=t[3]-f/2+c;v>l&&(l=v=(l+v)/2),d>p&&(p=d=(p+d)/2);var w=di(r[0],v,l),y=di(r[1],d,p);if(s&&i&&e){var g=30*e;w+=-g*Math.log(1+Math.max(0,v-r[0])/g)+g*Math.log(1+Math.max(0,r[0]-l)/g),y+=-g*Math.log(1+Math.max(0,d-r[1])/g)+g*Math.log(1+Math.max(0,r[1]-p)/g)}return[w,y]}}}function Vu(t){return t}function Wu(t,n,i,r){var e=oi(n)/i[0],o=ni(n)/i[1];return r?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o))}function Zu(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),di(r,i/2,2*n)}function Yu(t,n,i,r){return function(e,o,s,u){if(void 0!==e){var h=t[0],f=t[t.length-1],a=i?Wu(h,i,s,r):h;if(u)return void 0===n||n?Zu(e,a,f):di(e,f,a);var c=Math.min(a,e),v=Math.floor(y(t,c,o));return t[v]>a&&v<t.length-1?t[v+1]:t[v]}}}function Hu(t,n,i,r,e,o){return function(s,u,h,f){if(void 0!==s){var a=e?Wu(n,e,h,o):n,c=void 0!==i?i:0;if(f)return void 0===r||r?Zu(s,a,c):di(s,c,a);var v=Math.ceil(Math.log(n/a)/Math.log(t)-1e-9),l=-u*(.5-1e-9)+.5,d=Math.min(a,s),p=Math.floor(Math.log(n/d)/Math.log(t)+l),w=Math.max(v,p);return di(n/Math.pow(t,w),c,a)}}}function Ju(t,n,i,r,e){return function(o,s,u,h){if(void 0!==o){var f=r?Wu(t,r,u,e):t;return(void 0===i||i)&&h?Zu(o,f,n):di(o,n,f)}}}function $u(t){return void 0!==t?0:void 0}function Qu(t){return void 0!==t?t:void 0}function Ku(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function th(t){var n=t||_i(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var nh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ih(t,n){setTimeout((function(){t(n)}),0)}function rh(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return qu(t.extent,t.constrainOnlyCenter,n)}var i=Ar(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,qu(r,!1,!1)}return Vu}function eh(t){var n,i,r,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,a=Ar(t.projection,"EPSG:3857"),c=a.getExtent(),v=t.constrainOnlyCenter,l=t.extent;if(u||l||!a.isGlobal()||(v=!1,l=c),void 0!==t.resolutions){var d=t.resolutions;i=d[e],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?Yu(d,h,!v&&l,f):Ju(i,r,h,!v&&l,f)}else{var p=(c?Math.max(oi(c),ni(c)):360*Bt[Vt.DEGREES]/a.getMetersPerUnit())/Bu/Math.pow(2,0),w=p/Math.pow(2,28);void 0!==(i=t.maxResolution)?e=0:i=p/Math.pow(s,e),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):p/Math.pow(s,o):w),o=e+Math.floor(Math.log(i/r)/Math.log(s)),r=i/Math.pow(s,o-e),n=t.constrainResolution?Hu(s,i,r,h,!v&&l,f):Ju(i,r,h,!v&&l,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:e,zoomFactor:s}}function oh(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?th():!1===n?Qu:"number"==typeof n?Ku(n):Qu}return $u}function sh(t){return!(t.sourceCenter&&t.targetCenter&&!or(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function uh(t,n,i,r,e){var o=Math.cos(-e),s=Math.sin(-e),u=t[0]*o-t[1]*s,h=t[1]*o+t[0]*s;return[(u+=(n[0]/2-i[0])*r)*o-(h+=(i[1]-n[1]/2)*r)*(s=-s),h*o+u*s]}var hh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=A({},n);return i.Jn=[0,0],i.$n=[],i.Qn,i.Kn=Ar(r.projection,"EPSG:3857"),i.ti=[100,100],i.ni=null,i.ii,i.ri,i.ei=null,i.oi,i.si,i.ui=void 0,r.projection&&br(),r.center&&(r.center=Ur(r.center,i.Kn)),r.extent&&(r.extent=Br(r.extent,i.Kn)),i.hi(r),i}return nh(n,t),n.prototype.hi=function(t){var n=A({},t);for(var i in Xu)delete n[i];this.setProperties(n,!0);var r=eh(t);this.fi=r.maxResolution,this.ai=r.minResolution,this.ci=r.zoomFactor,this.vi=t.resolutions,this.li=t.padding,this.di=r.minZoom;var e=rh(t),o=r.constraint,s=oh(t);this.pi={center:e,resolution:o,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.li},set:function(t){var n=this.li;this.li=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(r[3]-n[3]+n[1]-r[1]),s=e/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-s])}},enumerable:!1,configurable:!0}),n.prototype.wi=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),A({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=A({},r)).center=Ur(r.center,this.getProjection())),r.anchor&&((r=A({},r)).anchor=Ur(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var e=arguments[r];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(r!==i){for(var o=Date.now(),s=this.ni.slice(),u=this.ii,h=this.ri,f=[];r<i;++r){var a=arguments[r],c={start:o,complete:!1,anchor:a.anchor,duration:void 0!==a.duration?a.duration:1e3,easing:a.easing||gt,callback:n};if(a.center&&(c.sourceCenter=s,c.targetCenter=a.center.slice(),s=c.targetCenter),void 0!==a.zoom?(c.sourceResolution=u,c.targetResolution=this.getResolutionForZoom(a.zoom),u=c.targetResolution):a.resolution&&(c.sourceResolution=u,c.targetResolution=a.resolution,u=c.targetResolution),void 0!==a.rotation){c.sourceRotation=h;var v=Mi(a.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+v,h=c.targetRotation}sh(c)?c.complete=!0:o+=c.duration,f.push(c)}this.$n.push(f),this.setHint(zu,1),this.yi()}else n&&ih(n,!0)},n.prototype.getAnimating=function(){return this.Jn[zu]>0},n.prototype.getInteracting=function(){return this.Jn[Uu]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(zu,-this.Jn[zu]);for(var n=0,i=this.$n.length;n<i;++n){var r=this.$n[n];if(r[0].callback&&ih(r[0].callback,!1),!t)for(var e=0,o=r.length;e<o;++e){var s=r[e];if(!s.complete){t=s.anchor;break}}}this.$n.length=0,this.ui=t,this.ei=null,this.oi=NaN,this.si=NaN},n.prototype.yi=function(){if(void 0!==this.Qn&&(cancelAnimationFrame(this.Qn),this.Qn=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.$n.length-1;i>=0;--i){for(var r=this.$n[i],e=!0,o=0,s=r.length;o<s;++o){var u=r[o];if(!u.complete){var h=t-u.start,f=u.duration>0?h/u.duration:1;f>=1?(u.complete=!0,f=1):e=!1;var a=u.easing(f);if(u.sourceCenter){var c=u.sourceCenter[0],v=u.sourceCenter[1],l=u.targetCenter[0],d=u.targetCenter[1];this.ei=u.targetCenter;var p=c+a*(l-c),w=v+a*(d-v);this.ni=[p,w]}if(u.sourceResolution&&u.targetResolution){var y=1===a?u.targetResolution:u.sourceResolution+a*(u.targetResolution-u.sourceResolution);if(u.anchor){var g=this.gi(this.getRotation()),m=this.pi.resolution(y,0,g,!0);this.ni=this.calculateCenterZoom(m,u.anchor)}this.oi=u.targetResolution,this.ii=y,this.mi(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var b=1===a?Mi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+a*(u.targetRotation-u.sourceRotation);if(u.anchor){var _=this.pi.rotation(b,!0);this.ni=this.calculateCenterRotate(_,u.anchor)}this.si=u.targetRotation,this.ri=b}if(this.mi(!0),n=!0,!u.complete)break}}if(e){this.$n[i]=null,this.setHint(zu,-1),this.ei=null,this.oi=NaN,this.si=NaN;var M=r[0].callback;M&&ih(M,!0)}}this.$n=this.$n.filter(Boolean),n&&void 0===this.Qn&&(this.Qn=requestAnimationFrame(this.yi.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(sr(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),tr(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),e=this.getResolution();void 0!==r&&void 0!==e&&(i=[n[0]-t*(n[0]-r[0])/e,n[1]-t*(n[1]-r[1])/e]);return i},n.prototype.gi=function(t){var n=this.ti;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.ti=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?zr(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(Xu.CENTER)},n.prototype.getConstraints=function(){return this.pi},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.Jn[0],t[1]=this.Jn[1],t):this.Jn.slice()},n.prototype.calculateExtent=function(t){return Xr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.bi(),i=this.getCenterInternal();Ot(i,1);var r=this.getResolution();Ot(void 0!==r,2);var e=this.getRotation();return Ot(void 0!==e,3),ti(i,r,e,n)},n.prototype.getMaxResolution=function(){return this.fi},n.prototype.getMinResolution=function(){return this.ai},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ai)},n.prototype.setMaxZoom=function(t){this.hi(this.wi({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.fi)},n.prototype.setMinZoom=function(t){this.hi(this.wi({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.hi(this.wi({constrainResolution:t}))},n.prototype.getProjection=function(){return this.Kn},n.prototype.getResolution=function(){return this.get(Xu.RESOLUTION)},n.prototype.getResolutions=function(){return this.vi},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Br(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.bi(),r=oi(t)/i[0],e=ni(t)/i[1];return Math.max(r,e)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.fi),r=this.ai,e=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*e)}},n.prototype.getRotation=function(){return this.get(Xu.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.fi),r=this.ai,e=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/e}},n.prototype.bi=function(t){var n=this.gi(t),i=this.li;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),e=this.li;if(e){var o=this.bi();r=uh(r,this.gi(),[o[0]/2+e[3],o[1]/2+e[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.ei,nextResolution:this.oi,nextRotation:this.si,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.di||0;if(this.vi){var e=y(this.vi,t,1);r=e,n=this.vi[e],i=e==this.vi.length-1?2:n/this.vi[e+1]}else n=this.fi,i=this.ci;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.vi){if(this.vi.length<=1)return 0;var n=di(Math.floor(t),0,this.vi.length-2),i=this.vi[n]/this.vi[n+1];return this.vi[n]/Math.pow(i,di(t-n,0,1))}return this.fi/Math.pow(this.ci,t-this.di)},n.prototype.fit=function(t,n){var i;if(Ot(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Ot(!ui(t),25),i=io(r=Br(t,this.getProjection()));else if(t.getType()===zt){var r;(i=io(r=Br(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Qn(r))}else{var e=Dr();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),s=1/0,u=1/0,h=-1/0,f=-1/0,a=0,c=e.length;a<c;a+=o){var v=e[a]*i-e[a+1]*r,l=e[a]*r+e[a+1]*i;s=Math.min(s,v),u=Math.min(u,l),h=Math.max(h,v),f=Math.max(f,l)}return[s,u,h,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.bi());var e,o=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;e=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var u=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(u,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);h=isNaN(h)?e:Math.max(h,e),h=this.getConstrainedResolution(h,s?0:1);var f=this.getRotation(),a=Math.sin(f),c=Math.cos(f),v=Qn(u);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var l=v[0]*c-v[1]*a,d=v[1]*c+v[0]*a,p=this.getConstrainedCenter([l,d],h),w=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:h,center:p,duration:i.duration,easing:i.easing},w):(this.ii=h,this.ni=p,this.mi(!1,!0),ih(w,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Ur(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(uh(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var e,o=this.li;if(o&&t){var s=this.bi(-i),u=uh(t,r,[s[0]/2+o[3],s[1]/2+o[0]],n,i);e=[t[0]-u[0],t[1]-u[1]]}return e},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=zr(this.ni,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.ni;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Ur(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.gi(this.getRotation()),e=this.pi.resolution(this.ii*t,0,r,i);n&&(this.ni=this.calculateCenterZoom(e,n)),this.ii*=t,this.mi()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.ci,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Ur(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.pi.rotation(this.ri+t,i);n&&(this.ni=this.calculateCenterRotate(r,n)),this.ri+=t,this.mi()},n.prototype.setCenter=function(t){this.setCenterInternal(t?Ur(t,this.getProjection()):t)},n.prototype.setCenterInternal=function(t){this.ni=t,this.mi()},n.prototype.setHint=function(t,n){return this.Jn[t]+=n,this.changed(),this.Jn[t]},n.prototype.setResolution=function(t){this.ii=t,this.mi()},n.prototype.setRotation=function(t){this.ri=t,this.mi()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.mi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.pi.rotation(this.ri,i),e=this.gi(r),o=this.pi.resolution(this.ii,0,e,i),s=this.pi.center(this.ni,o,e,i,this.calculateCenterShift(this.ni,o,r,e));this.get(Xu.ROTATION)!==r&&this.set(Xu.ROTATION,r),this.get(Xu.RESOLUTION)!==o&&(this.set(Xu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(Xu.CENTER)&&or(this.get(Xu.CENTER),s)||this.set(Xu.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.ui=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,e=n||0,o=this.pi.rotation(this.ri),s=this.gi(o),u=this.pi.resolution(this.ii,e,s),h=this.pi.center(this.ni,u,s,!1,this.calculateCenterShift(this.ni,u,o,s));if(0===r&&!this.ui)return this.ii=u,this.ri=o,this.ni=h,void this.mi();var f=i||(0===r?this.ui:void 0);this.ui=void 0,this.getResolution()===u&&this.getRotation()===o&&this.getCenterInternal()&&or(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:u,duration:r,easing:yt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Uu,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Ur(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(Uu,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.gi(this.getRotation());return this.pi.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.gi(this.getRotation());return this.pi.resolution(t,i,r)},n}(et);function fh(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i}function ah(t){return t[0]>0&&t[1]>0}function ch(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function vh(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var lh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function dh(t){t instanceof Os?t.setMapInternal(null):t instanceof du&&t.getLayers().forEach(dh)}function ph(t,n){if(t instanceof Os)t.setMapInternal(n);else if(t instanceof du)for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r)ph(i[r],n)}var wh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,e,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new du({layers:t.layers});o[Pu]=s,o[ku]=t.target,o[Fu]=t.view instanceof hh?t.view:new hh,void 0!==t.controls&&(Array.isArray(t.controls)?i=new at(t.controls.slice()):(Ot("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new at(t.interactions.slice()):(Ot("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new at(t.overlays.slice()):(Ot("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new at;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:e,values:o}}(n);i._i,i.Mi=!0,i.xi=i.handleBrowserEvent.bind(i),i.Oi=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.gt=void 0!==n.pixelRatio?n.pixelRatio:Qt,i.Si,i.ji,i.Ei=function(){this.ji=void 0,this.Ti(Date.now())}.bind(i),i.Ai=[1,0,0,1,0,0],i.Ci=[1,0,0,1,0,0],i.Pi=0,i.Ni=null,i.ki=null,i.Fi=null,i.Ri=null,i.Ii=null,i.Li=document.createElement("div"),i.Li.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Li.style.position="relative",i.Li.style.overflow="hidden",i.Li.style.width="100%",i.Li.style.height="100%",i.Gi=document.createElement("div"),i.Gi.style.position="absolute",i.Gi.style.zIndex="0",i.Gi.style.width="100%",i.Gi.style.height="100%",i.Gi.style.pointerEvents="none",i.Gi.className="ol-overlaycontainer",i.Li.appendChild(i.Gi),i.Di=document.createElement("div"),i.Di.style.position="absolute",i.Di.style.zIndex="0",i.Di.style.width="100%",i.Di.style.height="100%",i.Di.style.pointerEvents="none",i.Di.className="ol-overlaycontainer-stopevent",i.Li.appendChild(i.Di),i.zi=null,i.gn=n.moveTolerance,i.Ui=r.keyboardEventTarget,i.Xi=null,i.controls=r.controls||new at,i.interactions=r.interactions||new at,i.Bi=r.overlays,i.qi={},i.Wt=null,i.Vi=[],i.Wi=new Gu(i.getTilePriority.bind(i),i.Zi.bind(i)),i.addChangeListener(Pu,i.Yi),i.addChangeListener(Fu,i.Hi),i.addChangeListener(Nu,i.Ji),i.addChangeListener(ku,i.$i),i.setProperties(r.values);var e=i;return!n.view||n.view instanceof hh||n.view.then((function(t){e.setView(new hh(t))})),i.controls.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.Bi.addEventListener(ot,function(t){this.Qi(t.element)}.bind(i)),i.Bi.addEventListener(st,function(t){var n=t.element.getId();void 0!==n&&delete this.qi[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.Bi.forEach(i.Qi.bind(i)),i}return lh(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.Ki=function(t){ph(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.Qi=function(t){var n=t.getId();void 0!==n&&(this.qi[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Ni&&this.Wt){var r=this.getCoordinateFromPixelInternal(t),e=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:O,s=!1!==i.checkWrapped;return this.Wt.forEachFeatureAtCoordinate(r,this.Ni,e,s,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.getAllLayers=function(){var t=[];return function n(i){i.forEach((function(i){i instanceof du?n(i.getLayers()):t.push(i)}))}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Ni&&this.Wt){var r=i||{},e=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||O;return this.Wt.forEachLayerAtPixel(t,this.Ni,e,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Ni||!this.Wt)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.Wt.hasFeatureAtCoordinate(i,this.Ni,e,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Li.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(ku)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return zr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Ni;return n?fn(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.Bi},n.prototype.getOverlayById=function(t){var n=this.qi[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(Pu)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof at)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n];if(r.visible){var e=r.layer.getRenderer();if(e&&!e.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Ur(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Ni;return n?fn(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.Wt},n.prototype.getSize=function(){return this.get(Nu)},n.prototype.getView=function(){return this.get(Fu)},n.prototype.getViewport=function(){return this.Li},n.prototype.getOverlayContainer=function(){return this.Gi},n.prototype.getOverlayContainerStopEvent=function(){return this.Di},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return Du(this.Ni,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new gu(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.Ni){var n=t.originalEvent,i=n.type;if(i===_u||i===Y||i===B){var r=this.getOwnerDocument(),e=this.Li.getRootNode?this.Li.getRootNode():r,o=n.target;if(this.Di.contains(o)||!(e===r?r.documentElement:e).contains(o))return}if(t.frameState=this.Ni,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),u=s.length-1;u>=0;u--){var h=s[u];if(h.getMap()===this&&h.getActive()&&this.getTargetElement())if(!h.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.Ni,n=this.Wi;if(!n.isEmpty()){var i=this.Oi,r=i;if(t){var e=t.viewHints;if(e[zu]||e[Uu]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}t&&this.Wt&&!t.animate&&(!0===this._i?(this.hasListener(ys)&&this.Wt.dispatchRenderEvent(ys,t),!1===this.Mi&&(this.Mi=!0,this.dispatchEvent(new wu(Cu,this,t)))):!0===this.Mi&&(this.Mi=!1,this.dispatchEvent(new wu(Au,this,t))));for(var s=this.Vi,u=0,h=s.length;u<h;++u)s[u](this,t);s.length=0},n.prototype.Ji=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.$i=function(){if(this.zi){for(var t=0,n=this.Xi.length;t<n;++t)$(this.Xi[t]);this.Xi=null,this.Li.removeEventListener(L,this.xi),this.Li.removeEventListener(Y,this.xi),this.zi.dispose(),this.zi=null,Ro(this.Li)}var i=this.getTargetElement();if(i){for(var r in i.appendChild(this.Li),this.Wt||(this.Wt=this.createRenderer()),this.zi=new Su(this,this.gn),mu)this.zi.addEventListener(mu[r],this.handleMapBrowserEvent.bind(this));this.Li.addEventListener(L,this.xi,!1),this.Li.addEventListener(Y,this.xi,!!nn&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.Ui?this.Ui:i;this.Xi=[H(o,B,this.handleBrowserEvent,this),H(o,q,this.handleBrowserEvent,this),H(e,W,this.updateSize,this)]}else this.Wt&&(clearTimeout(this.Si),this.Si=void 0,this.Vi.length=0,this.Wt.dispose(),this.Wt=null),this.ji&&(cancelAnimationFrame(this.ji),this.ji=void 0);this.updateSize()},n.prototype.Zi=function(){this.render()},n.prototype.tr=function(){this.render()},n.prototype.Hi=function(){this.Fi&&($(this.Fi),this.Fi=null),this.Ri&&($(this.Ri),this.Ri=null);var t=this.getView();t&&(this.nr(),this.Fi=H(t,v,this.tr,this),this.Ri=H(t,R,this.tr,this),t.resolveConstraints(0)),this.render()},n.prototype.Yi=function(){this.Ii&&(this.Ii.forEach($),this.Ii=null);var t=this.getLayerGroup();t&&(this.Ki(new vu("addlayer",t)),this.Ii=[H(t,v,this.render,this),H(t,R,this.render,this),H(t,"addlayer",this.Ki,this),H(t,"removelayer",this.ir,this)]),this.render()},n.prototype.isRendered=function(){return!!this.Ni},n.prototype.renderSync=function(){this.ji&&cancelAnimationFrame(this.ji),this.Ei()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.Wt&&void 0===this.ji&&(this.ji=requestAnimationFrame(this.Ei))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.ir=function(t){dh(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Ti=function(t){var n=this,i=this.getSize(),r=this.getView(),e=this.Ni,s=null;if(void 0!==i&&ah(i)&&r&&r.isDef()){var u=r.getHints(this.Ni?this.Ni.viewHints:void 0),h=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.Ai,declutterTree:null,extent:ti(h.center,h.resolution,h.rotation,i),index:this.Pi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.gt,pixelToCoordinateTransform:this.Ci,postRenderFunctions:[],size:i,tileQueue:this.Wi,time:t,usedTiles:{},viewState:h,viewHints:u,wantedTiles:{},mapId:o(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var f=isNaN(h.nextRotation)?h.rotation:h.nextRotation;s.nextExtent=ti(h.nextCenter,h.nextResolution,f,i)}}if(this.Ni=s,this.Wt.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.Vi,s.postRenderFunctions),e)(!this.ki||!ui(this.ki)&&!zn(s.extent,this.ki))&&(this.dispatchEvent(new wu(Eu,this,e)),this.ki=Ln(this.ki));this.ki&&!s.viewHints[zu]&&!s.viewHints[Uu]&&!zn(s.extent,this.ki)&&(this.dispatchEvent(new wu(Tu,this,s)),An(s.extent,this.ki))}this.dispatchEvent(new wu(ju,this,s)),this._i=this.hasListener(Au)||this.hasListener(Cu)||this.hasListener(ys)?!this.Wi.getTilesLoading()&&!this.Wi.getCount()&&!this.getLoadingOrNotReady():void 0,this.Si||(this.Si=setTimeout((function(){n.Si=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.ir(new vu("removelayer",n)),this.set(Pu,t)},n.prototype.setSize=function(t){this.set(Nu,t)},n.prototype.setTarget=function(t){this.set(ku,t)},n.prototype.setView=function(t){if(!t||t instanceof hh)this.set(Fu,t);else{this.set(Fu,new hh);var n=this;t.then((function(t){n.setView(new hh(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),e=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(e)||!ah(n=[r,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.nr()},n.prototype.nr=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Li);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(et),yh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gh=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.rr=null,i.Ht=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return yh(n,t),n.prototype.disposeInternal=function(){Ro(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.Ht},n.prototype.setMap=function(t){this.Ht&&Ro(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)$(this.listenerKeys[n]);(this.listenerKeys.length=0,this.Ht=t,t)&&((this.rr?this.rr:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(H(t,ju,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.rr="string"==typeof t?document.getElementById(t):t},n}(et),mh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bh=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).er=document.createElement("ul"),i.sr=void 0===r.collapsed||r.collapsed,i.ur=i.sr,i.hr=void 0!==r.collapsible,i.ar=void 0===r.collapsible||r.collapsible,i.ar||(i.sr=!1);var e=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.expandClassName?r.expandClassName:e+"-expand",u=void 0!==r.collapseLabel?r.collapseLabel:"",h=void 0!==r.collapseClassName?r.collapseClassName:e+"-collapse";"string"==typeof u?(i.cr=document.createElement("span"),i.cr.textContent=u,i.cr.className=h):i.cr=u;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.vr=document.createElement("span"),i.vr.textContent=f,i.vr.className=s):i.vr=f;var a=i.ar&&!i.sr?i.cr:i.vr;i.lr=document.createElement("button"),i.lr.setAttribute("type","button"),i.lr.setAttribute("aria-expanded",String(!i.sr)),i.lr.title=o,i.lr.appendChild(a),i.lr.addEventListener(G,i.dr.bind(i),!1);var c=e+" "+"ol-unselectable "+Fs+(i.sr&&i.ar?" ol-collapsed":"")+(i.ar?"":" ol-uncollapsible"),v=i.element;return v.className=c,v.appendChild(i.lr),v.appendChild(i.er),i.pr=[],i.Kt=!0,i}return mh(n,t),n.prototype.wr=function(t){for(var n={},i=[],r=!0,e=t.layerStatesArray,o=0,s=e.length;o<s;++o){var u=e[o];if(xs(u,t.viewState)){var h=u.layer.getSource();if(h){var f=h.getAttributions();if(f){var a=f(t);if(a)if(r=r&&!1!==h.getAttributionsCollapsible(),Array.isArray(a))for(var c=0,v=a.length;c<v;++c)a[c]in n||(i.push(a[c]),n[a[c]]=!0);else a in n||(i.push(a),n[a]=!0)}}}}return this.hr||this.setCollapsible(r),i},n.prototype.yr=function(t){if(t){var n=this.wr(t),i=n.length>0;if(this.Kt!=i&&(this.element.style.display=i?"":"none",this.Kt=i),!_(n,this.pr)){Io(this.er);for(var r=0,e=n.length;r<e;++r){var o=document.createElement("li");o.innerHTML=n[r],this.er.appendChild(o)}this.pr=n}}else this.Kt&&(this.element.style.display="none",this.Kt=!1)},n.prototype.dr=function(t){t.preventDefault(),this.gr(),this.ur=this.sr},n.prototype.gr=function(){this.element.classList.toggle(Rs),this.sr?Fo(this.cr,this.vr):Fo(this.vr,this.cr),this.sr=!this.sr,this.lr.setAttribute("aria-expanded",String(!this.sr))},n.prototype.getCollapsible=function(){return this.ar},n.prototype.setCollapsible=function(t){this.ar!==t&&(this.ar=t,this.element.classList.toggle("ol-uncollapsible"),this.ur&&this.gr())},n.prototype.setCollapsed=function(t){this.ur=t,this.ar&&this.sr!==t&&this.gr()},n.prototype.getCollapsed=function(){return this.sr},n.prototype.render=function(t){this.yr(t.frameState)},n}(gh),_h=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mh=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var e=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"",s=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.vr=null,"string"==typeof o?(i.vr=document.createElement("span"),i.vr.className=s,i.vr.textContent=o):(i.vr=o,i.vr.classList.add(s));var u=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=e+"-reset",h.setAttribute("type","button"),h.title=u,h.appendChild(i.vr),h.addEventListener(G,i.dr.bind(i),!1);var f=e+" "+"ol-unselectable "+Fs,a=i.element;return a.className=f,a.appendChild(h),i.mr=r.resetNorth?r.resetNorth:void 0,i.br=void 0!==r.duration?r.duration:250,i._r=void 0===r.autoHide||r.autoHide,i.Mr=void 0,i._r&&i.element.classList.add(Cs),i}return _h(n,t),n.prototype.dr=function(t){t.preventDefault(),void 0!==this.mr?this.mr():this.Sr()},n.prototype.Sr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.br>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.br,easing:yt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.Mr){var r="rotate("+i+"rad)";if(this._r){var e=this.element.classList.contains(Cs);e||0!==i?e&&0!==i&&this.element.classList.remove(Cs):this.element.classList.add(Cs)}this.vr.style.transform=r}this.Mr=i}},n}(gh),xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oh=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var e=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,s=void 0!==r.zoomInClassName?r.zoomInClassName:e+"-in",u=void 0!==r.zoomOutClassName?r.zoomOutClassName:e+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"",a=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=a,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(G,i.dr.bind(i,o),!1);var l=document.createElement("button");l.className=u,l.setAttribute("type","button"),l.title=c,l.appendChild("string"==typeof f?document.createTextNode(f):f),l.addEventListener(G,i.dr.bind(i,-o),!1);var d=e+" "+"ol-unselectable "+Fs,p=i.element;return p.className=d,p.appendChild(v),p.appendChild(l),i.br=void 0!==r.duration?r.duration:250,i}return xh(n,t),n.prototype.dr=function(t,n){n.preventDefault(),this.jr(t)},n.prototype.jr=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.br>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.br,easing:yt})):n.setZoom(r)}}},n}(gh);function Sh(t){var n=t||{},i=new at;return(void 0===n.zoom||n.zoom)&&i.push(new Oh(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new Mh(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new bh(n.attributionOptions)),i}var jh="active",Eh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Th(t,n,i){var r=t.getCenterInternal();if(r){var e=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:mt,center:t.getConstrainedCenter(e)})}}function Ah(t,n,i,r){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==r?r:250,easing:yt})}}var Ch=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.Ht=null,i.setActive(!0),i}return Eh(n,t),n.prototype.getActive=function(){return this.get(jh)},n.prototype.getMap=function(){return this.Ht},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(jh,t)},n.prototype.setMap=function(t){this.Ht=t},n}(et),Ph=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Er=r.delta?r.delta:1,i.br=void 0!==r.duration?r.duration:250,i}return Ph(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==mu.DBLCLICK){var i=t.originalEvent,r=t.map,e=t.coordinate,o=i.shiftKey?-this.Er:this.Er;Ah(r.getView(),o,e,this.br),i.preventDefault(),n=!0}return!n},n}(Ch),kh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Fh(t){for(var n=t.length,i=0,r=0,e=0;e<n;e++)i+=t[e].clientX,r+=t[e].clientY;return[i/n,r/n]}var Rh=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.Tr={},i.targetPointers=[],i}return kh(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Ar(t),this.handlingDownUpSequence){if(t.type==mu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==mu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==mu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==mu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.Ar=function(t){if(function(t){var n=t.type;return n===mu.POINTERDOWN||n===mu.POINTERDRAG||n===mu.POINTERUP}(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==mu.POINTERUP?delete this.Tr[i]:(t.type==mu.POINTERDOWN||i in this.Tr)&&(this.Tr[i]=n),this.targetPointers=P(this.Tr)}},n}(Ch);function Ih(t){var n=arguments;return function(t){for(var i=!0,r=0,e=n.length;r<e&&(i=i&&n[r](t));++r);return i}}var Lh=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Gh=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Dh=function(t){var n=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return n.contains(i)},zh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Dh(t)},Uh=O,Xh=function(t){var n=t.originalEvent;return 0==n.button&&!(Jt&&$t&&n.ctrlKey)},Bh=S,qh=function(t){return t.type==mu.SINGLECLICK},Vh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Wh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Zh=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},Yh=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"mouse"==n.pointerType},Hh=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),n.isPrimary&&0===n.button},Jh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$h=function(t){function n(n){var i=t.call(this,{stopDown:S})||this,r=n||{};i.Cr=r.kinetic,i.lastCentroid=null,i.Pr,i.Nr=!1;var e=r.condition?r.condition:Ih(Vh,Hh);return i.kr=r.onFocusOnly?Ih(zh,e):e,i.Fr=!1,i}return Jh(n,t),n.prototype.handleDragEvent=function(t){this.Nr||(this.Nr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Fh(n);if(n.length==this.Pr){if(this.Cr&&this.Cr.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],e=t.map.getView();ur(r,e.getResolution()),sr(r,e.getRotation()),e.adjustCenterInternal(r)}}else this.Cr&&this.Cr.begin();this.lastCentroid=i,this.Pr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Fr&&this.Cr&&this.Cr.end()){var r=this.Cr.getDistance(),e=this.Cr.getAngle(),o=i.getCenterInternal(),s=n.getPixelFromCoordinateInternal(o),u=n.getCoordinateFromPixelInternal([s[0]-r*Math.cos(e),s[1]-r*Math.sin(e)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:yt})}return this.Nr&&(this.Nr=!1,i.endInteraction()),!1}return this.Cr&&this.Cr.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.kr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Cr&&this.Cr.begin(),this.Fr=this.targetPointers.length>1,!0}return!1},n}(Rh),Qh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kh=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:S})||this).kr=r.condition?r.condition:Gh,i.Rr=void 0,i.br=void 0!==r.duration?r.duration:250,i}return Qh(n,t),n.prototype.handleDragEvent=function(t){if(Yh(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==$u){var r=n.getSize(),e=t.pixel,o=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2);if(void 0!==this.Rr){var s=o-this.Rr;i.adjustRotationInternal(-s)}this.Rr=o}}},n.prototype.handleUpEvent=function(t){return!Yh(t)||(t.map.getView().endInteraction(this.br),!1)},n.prototype.handleDownEvent=function(t){return!!Yh(t)&&(!(!Xh(t)||!this.kr(t))&&(t.map.getView().beginInteraction(),this.Rr=void 0,!0))},n}(Rh),tf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nf=function(t){function n(n){var i=t.call(this)||this;return i.Ir=null,i.$t=document.createElement("div"),i.$t.style.position="absolute",i.$t.style.pointerEvents="auto",i.$t.className="ol-box "+n,i.Ht=null,i.Lr=null,i.Gr=null,i}return tf(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.Dr=function(){var t=this.Lr,n=this.Gr,i="px",r=this.$t.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.Ht){this.Ht.getOverlayContainer().removeChild(this.$t);var n=this.$t.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.Ht=t,this.Ht&&this.Ht.getOverlayContainer().appendChild(this.$t)},n.prototype.setPixels=function(t,n){this.Lr=t,this.Gr=n,this.createOrUpdateGeometry(),this.Dr()},n.prototype.createOrUpdateGeometry=function(){var t=this.Lr,n=this.Gr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.Ht.getCoordinateFromPixelInternal,this.Ht);i[4]=i[0].slice(),this.Ir?this.Ir.setCoordinates([i]):this.Ir=new to([i])},n.prototype.getGeometry=function(){return this.Ir},n}(l),rf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ef="boxstart",of="boxdrag",sf="boxend",uf="boxcancel",hf=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.coordinate=i,e.mapBrowserEvent=r,e}return rf(n,t),n}(c),ff=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.zr=new nf(r.className||"ol-dragbox"),i.Ur=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Lr=null,i.kr=r.condition?r.condition:Xh,i.Xr=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return rf(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],e=i[1]-n[1];return r*r+e*e>=this.Ur},n.prototype.getGeometry=function(){return this.zr.getGeometry()},n.prototype.handleDragEvent=function(t){this.zr.setPixels(this.Lr,t.pixel),this.dispatchEvent(new hf(of,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.zr.setMap(null);var n=this.Xr(t,this.Lr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new hf(n?sf:uf,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.kr(t)&&(this.Lr=t.pixel,this.zr.setMap(t.map),this.zr.setPixels(this.Lr,this.Lr),this.dispatchEvent(new hf(ef,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Rh),af=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cf=function(t){function n(n){var i=this,r=n||{},e=r.condition?r.condition:Wh;return(i=t.call(this,{condition:e,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).br=void 0!==r.duration?r.duration:200,i.Br=void 0!==r.out&&r.out,i}return af(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.Br){var r=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(r),o=n.getResolution()/e;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.br,easing:yt})},n}(ff),vf=37,lf=38,df=39,pf=40,wf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yf=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.qr=function(t){return Vh(t)&&Zh(t)},i.kr=void 0!==r.condition?r.condition:i.qr,i.br=void 0!==r.duration?r.duration:100,i.Vr=void 0!==r.pixelDelta?r.pixelDelta:128,i}return wf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B){var i=t.originalEvent,r=i.keyCode;if(this.kr(t)&&(r==pf||r==vf||r==df||r==lf)){var e=t.map.getView(),o=e.getResolution()*this.Vr,s=0,u=0;r==pf?u=-o:r==vf?s=-o:r==df?s=o:u=o;var h=[s,u];sr(h,e.getRotation()),Th(e,h,this.br),i.preventDefault(),n=!0}}return!n},n}(Ch),gf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mf=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.kr=r.condition?r.condition:Zh,i.Er=r.delta?r.delta:1,i.br=void 0!==r.duration?r.duration:100,i}return gf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B||t.type==q){var i=t.originalEvent,r=i.charCode;if(this.kr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var e=t.map,o=r=="+".charCodeAt(0)?this.Er:-this.Er;Ah(e.getView(),o,void 0,this.br),i.preventDefault(),n=!0}}return!n},n}(Ch),bf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_f="trackpad",Mf="wheel",xf=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).Wr=0,i.Zr=0,i.it=void 0!==r.maxDelta?r.maxDelta:1,i.br=void 0!==r.duration?r.duration:250,i.Yr=void 0!==r.timeout?r.timeout:80,i.Hr=void 0===r.useAnchor||r.useAnchor,i.Jr=void 0!==r.constrainResolution&&r.constrainResolution;var e=r.condition?r.condition:Uh;return i.kr=r.onFocusOnly?Ih(zh,e):e,i.$r=null,i.Qr=void 0,i.Kr,i.te=void 0,i.ne=400,i.ie,i.re=300,i}return bf(n,t),n.prototype.ee=function(){this.ie=void 0,this.getMap().getView().endInteraction(void 0,this.Zr?this.Zr>0?1:-1:0,this.$r)},n.prototype.handleEvent=function(t){if(!this.kr(t))return!0;if(t.type!==Y)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.Hr&&(this.$r=t.coordinate),t.type==Y&&(n=r.deltaY,Zt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Qt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.Zr=n;var e=Date.now();void 0===this.Qr&&(this.Qr=e),(!this.te||e-this.Qr>this.ne)&&(this.te=Math.abs(n)<4?_f:Mf);var o=i.getView();if(this.te===_f&&!o.getConstrainResolution()&&!this.Jr)return this.ie?clearTimeout(this.ie):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.ie=setTimeout(this.ee.bind(this),this.Yr),o.adjustZoom(-n/this.re,this.$r),this.Qr=e,!1;this.Wr+=n;var s=Math.max(this.Yr-(e-this.Qr),0);return clearTimeout(this.Kr),this.Kr=setTimeout(this.oe.bind(this,i),s),!1},n.prototype.oe=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-di(this.Wr,-this.it*this.re,this.it*this.re)/this.re;(n.getConstrainResolution()||this.Jr)&&(i=i?i>0?1:-1:0),Ah(n,i,this.$r,this.br),this.te=void 0,this.Wr=0,this.$r=null,this.Qr=void 0,this.Kr=void 0},n.prototype.setMouseAnchor=function(t){this.Hr=t,t||(this.$r=null)},n}(Ch),Of=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sf=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).se=null,i.Rr=void 0,i.ue=!1,i.he=0,i.fe=void 0!==r.threshold?r.threshold:.3,i.br=void 0!==r.duration?r.duration:250,i}return Of(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],e=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Rr){var o=e-this.Rr;this.he+=o,!this.ue&&Math.abs(this.he)>this.fe&&(this.ue=!0),n=o}this.Rr=e;var s=t.map,u=s.getView();if(u.getConstraints().rotation!==$u){var h=s.getViewport().getBoundingClientRect(),f=Fh(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.se=s.getCoordinateFromPixelInternal(f),this.ue&&(s.render(),u.adjustRotationInternal(n,this.se))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.br),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.se=null,this.Rr=void 0,this.ue=!1,this.he=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Rh),jf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ef=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).se=null,i.br=void 0!==r.duration?r.duration:400,i.ae=void 0,i.ce=1,i}return jf(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],e=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(e*e+o*o);void 0!==this.ae&&(n=this.ae/s),this.ae=s;var u=t.map,h=u.getView();1!=n&&(this.ce=n);var f=u.getViewport().getBoundingClientRect(),a=Fh(this.targetPointers);a[0]-=f.left,a[1]-=f.top,this.se=u.getCoordinateFromPixelInternal(a),u.render(),h.adjustResolutionInternal(n,this.se)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.ce>1?1:-1;return n.endInteraction(this.br,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.se=null,this.ae=void 0,this.ce=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Rh);function Tf(t){var n=t||{},i=new at,r=new zo(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Kh),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new Nh({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new $h({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new Sf),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Ef({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new yf),i.push(new mf({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new xf({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new cf({duration:n.zoomDuration})),i}var Af=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cf=function(t){function n(n){return(n=A({},n)).controls||(n.controls=Sh()),n.interactions||(n.interactions=Tf({onFocusOnly:!0})),t.call(this,n)||this}return Af(n,t),n.prototype.createRenderer=function(){return new au(this)},n}(wh),Pf="bottom-left",Nf="bottom-center",kf="bottom-right",Ff="center-left",Rf="center-center",If="center-right",Lf="top-left",Gf="top-center",Df="top-right";function zf(t){return(zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Uf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xf="element",Bf="map",qf="offset",Vf="position",Wf="positioning",Zf=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!==zf(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={ct:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Xf,i.handleElementChanged),i.addChangeListener(Bf,i.handleMapChanged),i.addChangeListener(qf,i.handleOffsetChanged),i.addChangeListener(Vf,i.handlePositionChanged),i.addChangeListener(Wf,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(void 0!==n.positioning?n.positioning:Lf),void 0!==n.position&&i.setPosition(n.position),i}return Uf(n,t),n.prototype.getElement=function(){return this.get(Xf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(Bf)||null},n.prototype.getOffset=function(){return this.get(qf)},n.prototype.getPosition=function(){return this.get(Vf)},n.prototype.getPositioning=function(){return this.get(Wf)},n.prototype.handleElementChanged=function(){Io(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ro(this.element),$(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=H(t,ju,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(Xf,t)},n.prototype.setMap=function(t){this.set(Bf,t)},n.prototype.setOffset=function(t){this.set(qf,t)},n.prototype.setPosition=function(t){this.set(Vf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(Vf)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),e=this.getRect(r,[No(r),ko(r)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!Nn(i,e)){var u=e[0]-i[0],h=i[2]-e[2],f=e[1]-i[1],a=i[3]-e[3],c=[0,0];if(u<0?c[0]=u-s:h<0&&(c[0]=Math.abs(h)+s),f<0?c[1]=f-s:a<0&&(c[1]=Math.abs(a)+s),0!==c[0]||0!==c[1]){var v=n.getView().getCenterInternal(),l=n.getPixelFromCoordinateInternal(v);if(!l)return;var d=[l[0]+c[0],l[1]+c[1]],p=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,e=i.top+window.pageYOffset;return[r,e,r+n[0],e+n[1]]},n.prototype.setPositioning=function(t){this.set(Wf,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",s=Math.round(t[1]+r[1])+"px",u="0%",h="0%";e==kf||e==If||e==Df?u="-100%":e!=Nf&&e!=Rf&&e!=Gf||(u="-50%"),e==Pf||e==Nf||e==kf?h="-100%":e!=Ff&&e!=Rf&&e!=If||(h="-50%");var f="translate(".concat(u,", ").concat(h,") translate(").concat(o,", ").concat(s,")");this.rendered.ct!=f&&(this.rendered.ct=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(et),Yf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.ve=0,this.le={},this.de=null,this.pe=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.ve=0,this.le={},this.de=null,this.pe=null},t.prototype.containsKey=function(t){return this.le.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.de;n;)t(n.we,n.ye,this),n=n.newer},t.prototype.get=function(t,n){var i=this.le[t];return Ot(void 0!==i,15),i===this.pe||(i===this.de?(this.de=this.de.newer,this.de.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.pe,this.pe.newer=i,this.pe=i),i.we},t.prototype.remove=function(t){var n=this.le[t];return Ot(void 0!==n,15),n===this.pe?(this.pe=n.older,this.pe&&(this.pe.newer=null)):n===this.de?(this.de=n.newer,this.de&&(this.de.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.le[t],--this.ve,n.we},t.prototype.getCount=function(){return this.ve},t.prototype.getKeys=function(){var t,n=new Array(this.ve),i=0;for(t=this.pe;t;t=t.older)n[i++]=t.ye;return n},t.prototype.getValues=function(){var t,n=new Array(this.ve),i=0;for(t=this.pe;t;t=t.older)n[i++]=t.we;return n},t.prototype.peekLast=function(){return this.de.we},t.prototype.peekLastKey=function(){return this.de.ye},t.prototype.peekFirstKey=function(){return this.pe.ye},t.prototype.pop=function(){var t=this.de;return delete this.le[t.ye],t.newer&&(t.newer.older=null),this.de=t.newer,this.de||(this.pe=null),--this.ve,t.we},t.prototype.replace=function(t,n){this.get(t),this.le[t].we=n},t.prototype.set=function(t,n){Ot(!(t in this.le),16);var i={ye:t,newer:null,older:this.pe,we:n};this.pe?this.pe.newer=i:this.de=i,this.pe=i,this.le[t]=i,++this.ve},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Hf(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function Jf(t,n,i){return t+"/"+n+"/"+i}function $f(t){return Jf(t[0],t[1],t[2])}function Qf(t){return t.split("/").map(Number)}function Kf(t){return(t[1]<<t[0])+t[2]}function ta(t,n){var i=t[0],r=t[1],e=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,e)}var na=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ia=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return na(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Qf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove($f(n.tileCoord)),n.release())}.bind(this))}},n}(Yf),ra=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ea(t,n,i,r,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=i,e.maxY=r,e):new ra(t,n,i,r)}var oa=ra,sa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ua=[],ha=function(t){function n(n,i,r,e){var o=t.call(this,n,i,{transition:0})||this;return o.ge={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.me={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=r,o}return sa(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.ge||(this.ge[n]=Po(1,1,ua)),this.ge[n]},n.prototype.hasContext=function(t){return o(t)in this.ge},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.me||(this.me[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.me[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.ge)ua.push(this.ge[n].canvas),delete this.ge[n];t.prototype.release.call(this)},n}(_t);function fa(t){return Array.isArray(t)?Yo(t):t}var aa="arraybuffer",ca="json",va="text",la="xml",da=!1;function pa(t,n,i,r,e,o,s){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(i,r,e):t,!0),n.getType()==aa&&(u.responseType="arraybuffer"),u.withCredentials=da,u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var r=n.getType(),h=void 0;r==ca||r==va?h=u.responseText:r==la?(h=u.responseXML)||(h=(new DOMParser).parseFromString(u.responseText,"application/xml")):r==aa&&(h=u.response),h?o(n.readFeatures(h,{extent:i,featureProjection:e}),n.readProjection(h)):s()}else s()},u.onerror=s,u.send()}function wa(t,n){return function(i,r,e,o,s){var u=this;pa(t,n,i,r,e,(function(t,n){u.addFeatures(t),void 0!==o&&o(t)}),s||j)}}function ya(t,n){return[[-1/0,-1/0,1/0,1/0]]}var ga=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ma(t,n,i,r){var e=document.createElement("script"),s="olc_"+o(n);function u(){delete window[s],e.parentNode.removeChild(e)}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;var h=setTimeout((function(){u(),i&&i()}),1e4);window[s]=function(t){clearTimeout(h),u(),n(t)},document.getElementsByTagName("head")[0].appendChild(e)}var ba,_a=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return ga(n,t),n}(Error),Ma=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return ga(n,t),n}(Error);function xa(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var e=void 0;try{e=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(e)}else i(new _a(r))})),r.addEventListener("error",(function(t){i(new Ma(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function Oa(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href}var Sa=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),ja=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ea=function(t){function n(n,i,r,e,o,s,u){var h=t.call(this)||this;return h.ge=n,h.gt=i,h.q=r,h.ct=e,h.be=o,h._e=s,h.Me=u,h.xe=null,h.Oe=null,h.Se=null,h.je=null,h.Ee=null,h._t=null,h.Te=0,h.Ae=0,h.Ce=0,h.Pe=0,h.Ne=0,h.ke=0,h.Fe=!1,h.Re=0,h.Ie=[0,0],h.Le=0,h.Ge="",h.De=0,h.ze=0,h.Ue=!1,h.Xe=0,h.Be=[0,0],h.qe=null,h.Ve=null,h.We=null,h.Ze=[],h.Ye=[1,0,0,1,0,0],h}return ja(n,t),n.prototype.He=function(t,n,i,r){if(this._t){var e=Yr(t,n,i,r,this.ct,this.Ze),o=this.ge,s=this.Ye,u=o.globalAlpha;1!=this.Pe&&(o.globalAlpha=u*this.Pe);var h=this.Re;this.Fe&&(h+=this.be);for(var f=0,a=e.length;f<a;f+=2){var c=e[f]-this.Te,v=e[f+1]-this.Ae;if(0!==h||1!=this.Ie[0]||1!=this.Ie[1]){var l=c+this.Te,d=v+this.Ae;ln(s,l,d,1,1,h,-l,-d),o.setTransform.apply(o,s),o.translate(l,d),o.scale(this.Ie[0],this.Ie[1]),o.drawImage(this._t,this.Ne,this.ke,this.Le,this.Ce,-this.Te,-this.Ae,this.Le,this.Ce),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this._t,this.Ne,this.ke,this.Le,this.Ce,c,v,this.Le,this.Ce)}1!=this.Pe&&(o.globalAlpha=u)}},n.prototype.Je=function(t,n,i,r){if(this.We&&""!==this.Ge){this.qe&&this.$e(this.qe),this.Ve&&this.Qe(this.Ve),this.Ke(this.We);var e=Yr(t,n,i,r,this.ct,this.Ze),o=this.ge,s=this.Xe;for(this.Ue&&(s+=this.be);n<i;n+=r){var u=e[n]+this.De,h=e[n+1]+this.ze;if(0!==s||1!=this.Be[0]||1!=this.Be[1]){var f=ln(this.Ye,u,h,1,1,s,-u,-h);o.setTransform.apply(o,f),o.translate(u,h),o.scale(this.Be[0],this.Be[1]),this.Ve&&o.strokeText(this.Ge,0,0),this.qe&&o.fillText(this.Ge,0,0),o.setTransform(1,0,0,1,0,0)}else this.Ve&&o.strokeText(this.Ge,u,h),this.qe&&o.fillText(this.Ge,u,h)}}},n.prototype.no=function(t,n,i,r,e){var o=this.ge,s=Yr(t,n,i,r,this.ct,this.Ze);o.moveTo(s[0],s[1]);var u=s.length;e&&(u-=2);for(var h=2;h<u;h+=2)o.lineTo(s[h],s[h+1]);return e&&o.closePath(),i},n.prototype.io=function(t,n,i,r){for(var e=0,o=i.length;e<o;++e)n=this.no(t,n,i[e],r,!0);return n},n.prototype.drawCircle=function(t){if(si(this.q,t.getExtent())){if(this.je||this.Ee){this.je&&this.$e(this.je),this.Ee&&this.Qe(this.Ee);var n=re(t,this.ct,this.Ze),i=n[2]-n[0],r=n[3]-n[1],e=Math.sqrt(i*i+r*r),o=this.ge;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.je&&o.fill(),this.Ee&&o.stroke()}""!==this.Ge&&this.Je(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.ct=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case Nt:this.drawPoint(t);break;case kt:this.drawLineString(t);break;case Rt:this.drawPolygon(t);break;case It:this.drawMultiPoint(t);break;case Lt:this.drawMultiLineString(t);break;case Gt:this.drawMultiPolygon(t);break;case Dt:this.drawGeometryCollection(t);break;case zt:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&si(this.q,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this._e&&(t=t.simplifyTransformed(this._e,this.Me));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.He(n,0,n.length,i),""!==this.Ge&&this.Je(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this._e&&(t=t.simplifyTransformed(this._e,this.Me));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.He(n,0,n.length,i),""!==this.Ge&&this.Je(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this._e&&(t=t.simplifyTransformed(this._e,this.Me)),si(this.q,t.getExtent())){if(this.Ee){this.Qe(this.Ee);var n=this.ge,i=t.getFlatCoordinates();n.beginPath(),this.no(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.Ge){var r=t.getFlatMidpoint();this.Je(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this._e&&(t=t.simplifyTransformed(this._e,this.Me));var n=t.getExtent();if(si(this.q,n)){if(this.Ee){this.Qe(this.Ee);var i=this.ge,r=t.getFlatCoordinates(),e=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var u=0,h=o.length;u<h;++u)e=this.no(r,e,o[u],s,!1);i.stroke()}if(""!==this.Ge){var f=t.getFlatMidpoints();this.Je(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this._e&&(t=t.simplifyTransformed(this._e,this.Me)),si(this.q,t.getExtent())){if(this.Ee||this.je){this.je&&this.$e(this.je),this.Ee&&this.Qe(this.Ee);var n=this.ge;n.beginPath(),this.io(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.je&&n.fill(),this.Ee&&n.stroke()}if(""!==this.Ge){var i=t.getFlatInteriorPoint();this.Je(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this._e&&(t=t.simplifyTransformed(this._e,this.Me)),si(this.q,t.getExtent())){if(this.Ee||this.je){this.je&&this.$e(this.je),this.Ee&&this.Qe(this.Ee);var n=this.ge,i=t.getOrientedFlatCoordinates(),r=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var s=0,u=e.length;s<u;++s){var h=e[s];r=this.io(i,r,h,o)}this.je&&n.fill(),this.Ee&&n.stroke()}if(""!==this.Ge){var f=t.getFlatInteriorPoints();this.Je(f,0,f.length,2)}}},n.prototype.$e=function(t){var n=this.ge,i=this.xe;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.xe={fillStyle:t.fillStyle})},n.prototype.Qe=function(t){var n=this.ge,i=this.Oe;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(_(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Oe={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.Ke=function(t){var n=this.ge,i=this.Se,r=t.textAlign?t.textAlign:Zs;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.Se={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.je={fillStyle:fa(r||Us)}}else this.je=null;if(n){var e=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),u=n.getLineDashOffset(),h=n.getLineJoin(),f=n.getWidth(),a=n.getMiterLimit(),c=s||Bs;this.Ee={lineCap:void 0!==o?o:Xs,lineDash:1===this.gt?c:c.map((function(t){return t*i.gt})),lineDashOffset:(u||0)*this.gt,lineJoin:void 0!==h?h:qs,lineWidth:(void 0!==f?f:1)*this.gt,miterLimit:void 0!==a?a:Vs,strokeStyle:fa(e||Ws)}}else this.Ee=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this._t=t.getImage(this.gt),this.Te=i[0]*this.gt,this.Ae=i[1]*this.gt,this.Ce=n[1]*this.gt,this.Pe=t.getOpacity(),this.Ne=r[0],this.ke=r[1],this.Fe=t.getRotateWithView(),this.Re=t.getRotation(),this.Ie=t.getScaleArray(),this.Le=n[0]*this.gt}else this._t=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.qe={fillStyle:fa(i||Us)}}else this.qe=null;var r=t.getStroke();if(r){var e=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),u=r.getLineDashOffset(),h=r.getLineJoin(),f=r.getWidth(),a=r.getMiterLimit();this.Ve={lineCap:void 0!==o?o:Xs,lineDash:s||Bs,lineDashOffset:u||0,lineJoin:void 0!==h?h:qs,lineWidth:void 0!==f?f:1,miterLimit:void 0!==a?a:Vs,strokeStyle:fa(e||Ws)}}else this.Ve=null;var c=t.getFont(),v=t.getOffsetX(),l=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation(),w=t.getScaleArray(),y=t.getText(),g=t.getTextAlign(),m=t.getTextBaseline();this.We={font:void 0!==c?c:zs,textAlign:void 0!==g?g:Zs,textBaseline:void 0!==m?m:Ys},this.Ge=void 0!==y?Array.isArray(y)?y.reduce((function(t,n,i){return t+(i%2?" ":n)}),""):y:"",this.De=void 0!==v?this.gt*v:0,this.ze=void 0!==l?this.gt*l:0,this.Ue=void 0!==d&&d,this.Xe=void 0!==p?p:0,this.Be=[this.gt*w[0],this.gt*w[1]]}else this.Ge=""},n}(Sa),Ta="Circle",Aa="Default",Ca="Image",Pa="LineString",Na="Polygon",ka="Text",Fa={Point:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();e&&(t=e,o=s&&u&&u.getText()?{}:void 0);if(s){if(s.getImageState()!=xo)return;var h=t.getBuilder(i.getZIndex(),Ca);h.setImageStyle(s,o),h.drawPoint(n,r)}if(u&&u.getText()){var f=t.getBuilder(i.getZIndex(),ka);f.setTextStyle(u,o),f.drawText(n,r)}},LineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),Pa);s.setFillStrokeStyle(null,o),s.drawLineString(n,r)}var u=i.getText();if(u&&u.getText()){var h=(e||t).getBuilder(i.getZIndex(),ka);h.setTextStyle(u),h.drawText(n,r)}},Polygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),Na);u.setFillStrokeStyle(o,s),u.drawPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),ka);f.setTextStyle(h),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();e&&(t=e,o=s&&u&&u.getText()?{}:void 0);if(s){if(s.getImageState()!=xo)return;var h=t.getBuilder(i.getZIndex(),Ca);h.setImageStyle(s,o),h.drawMultiPoint(n,r)}if(u&&u.getText()){var f=(e||t).getBuilder(i.getZIndex(),ka);f.setTextStyle(u,o),f.drawText(n,r)}},MultiLineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),Pa);s.setFillStrokeStyle(null,o),s.drawMultiLineString(n,r)}var u=i.getText();if(u&&u.getText()){var h=(e||t).getBuilder(i.getZIndex(),ka);h.setTextStyle(u),h.drawText(n,r)}},MultiPolygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(s||o){var u=t.getBuilder(i.getZIndex(),Na);u.setFillStrokeStyle(o,s),u.drawMultiPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),ka);f.setTextStyle(h),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,e){var o,s,u=n.getGeometriesArray();for(o=0,s=u.length;o<s;++o){(0,Fa[u[o].getType()])(t,u[o],i,r,e)}},Circle:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),Ta);u.setFillStrokeStyle(o,s),u.drawCircle(n,r)}var h=i.getText();if(h&&h.getText()){var f=(e||t).getBuilder(i.getZIndex(),ka);f.setTextStyle(h),f.drawText(n,r)}}};function Ra(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function Ia(t,n){var i=La(t,n);return i*i}function La(t,n){return.5*t/n}function Ga(t,n,i,r,e,o,s){var u=!1,h=i.getImage();if(h){var f=h.getImageState();f==xo||f==Oo?h.unlistenImageChange(e):(f==_o&&h.load(),f=h.getImageState(),h.listenImageChange(e),u=!0)}return function(t,n,i,r,e,o){var s=i.getGeometryFunction()(n);if(!s)return;var u=s.simplifyTransformed(r,e);if(i.getRenderer())Da(t,u,i,n);else{(0,Fa[u.getType()])(t,u,i,n,o)}}(t,n,i,r,o,s),u}function Da(t,n,i,r){if(n.getType()!=Dt)t.getBuilder(i.getZIndex(),Aa).drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,s=e.length;o<s;++o)Da(t,e[o],i,r)}function za(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,i=t.inversePixelTransform[0],r=t.frameState,e=sn(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=Ia(r.viewState.resolution,i),s=Dr();return s&&(n=kr(s,r.viewState.projection)),new Ea(t.context,i,r.extent,e,r.viewState.rotation,o,n)}var Ua,Xa={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Ba={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};function qa(t,n,i,r,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,e)),t.restore()}function Va(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function Wa(t,n,i,r){var e=Rr(i,n,t),o=jr(n,r,i),s=n.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var h=t.getExtent();if(!h||Pn(h,e)){var f=jr(t,o,e)/o;isFinite(f)&&f>0&&(o/=f)}return o}function Za(t,n,i,r){var e=Qn(i),o=Wa(t,n,e,r);return(!isFinite(o)||o<=0)&&Yn(i,(function(i){return o=Wa(t,n,i,r),isFinite(o)&&o>0})),o}function Ya(t,n,i,r,e,o,s,u,h,f,a,c){var v=Po(Math.round(i*t),Math.round(i*n));if(c||A(v,Xa),0===h.length)return v.canvas;function l(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,n,i){Xn(d,t.extent)}));var p=oi(d),w=ni(d),y=Po(Math.round(i*p/r),Math.round(i*w/r));c||A(y,Xa);var g=i/r;h.forEach((function(t,n,i){var r=t.extent[0]-d[0],e=-(t.extent[3]-d[3]),o=oi(t.extent),s=ni(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*g,e*g,o*g,s*g)}));var m=ri(s);return u.getTriangles().forEach((function(t,n,e){var s=t.source,u=t.target,h=s[0][0],f=s[0][1],a=s[1][0],p=s[1][1],w=s[2][0],g=s[2][1],b=l((u[0][0]-m[0])/o),_=l(-(u[0][1]-m[1])/o),M=l((u[1][0]-m[0])/o),x=l(-(u[1][1]-m[1])/o),O=l((u[2][0]-m[0])/o),S=l(-(u[2][1]-m[1])/o),j=h,E=f;h=0,f=0;var T=mi([[a-=j,p-=E,0,0,M-b],[w-=j,g-=E,0,0,O-b],[0,0,a,p,x-_],[0,0,w,g,S-_]]);if(T){if(v.save(),v.beginPath(),function(){if(void 0===Ua){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",qa(t,4,5,4,0),qa(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;Ua=Va(n,0)||Va(n,4)||Va(n,8)}return Ua}()||!c){v.moveTo(M,x);for(var A=b-M,C=_-x,P=0;P<4;P++)v.lineTo(M+l((P+1)*A/4),x+l(P*C/3)),3!=P&&v.lineTo(M+l((P+1)*A/4),x+l((P+1)*C/3));v.lineTo(O,S)}else v.moveTo(M,x),v.lineTo(b,_),v.lineTo(O,S);v.clip(),v.transform(T[0],T[2],T[1],T[3],b,_),v.translate(d[0]-j,d[3]-E),v.scale(r/i,-r/i),v.drawImage(y.canvas,0,0),v.restore()}})),a&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach((function(t,n,i){var r=t.target,e=(r[0][0]-m[0])/o,s=-(r[0][1]-m[1])/o,u=(r[1][0]-m[0])/o,h=-(r[1][1]-m[1])/o,f=(r[2][0]-m[0])/o,a=-(r[2][1]-m[1])/o;v.beginPath(),v.moveTo(u,h),v.lineTo(e,s),v.lineTo(f,a),v.closePath(),v.stroke()})),v.restore()),v.canvas}var Ha=[0,0,0],Ja=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.vi=t.resolutions,Ot(x(this.vi,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.vi.length-1;i<r;++i)if(n){if(this.vi[i]/this.vi[i+1]!==n){n=void 0;break}}else n=this.vi[i]/this.vi[i+1];this.ci=n,this.maxZoom=this.vi.length-1,this.ro=void 0!==t.origin?t.origin:null,this.eo=null,void 0!==t.origins&&(this.eo=t.origins,Ot(this.eo.length==this.vi.length,20));var e=t.extent;void 0===e||this.ro||this.eo||(this.ro=ri(e)),Ot(!this.ro&&this.eo||this.ro&&!this.eo,18),this.oo=null,void 0!==t.tileSizes&&(this.oo=t.tileSizes,Ot(this.oo.length==this.vi.length,19)),this.so=void 0!==t.tileSize?t.tileSize:this.oo?null:Bu,Ot(!this.so&&this.oo||this.so&&!this.oo,22),this.q=void 0!==e?e:null,this.uo=null,this.ho=[0,0],this.fo=[0,0,0,0],void 0!==t.sizes?this.uo=t.sizes.map((function(t,n){var i=new oa(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var r=this.getTileRangeForExtentAndZ(e,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):e&&this.ao(e)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),e=r.minX,o=r.maxX;e<=o;++e)for(var s=r.minY,u=r.maxY;s<=u;++s)i([n,e,s])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var e,o,s=null,u=t[0]-1;for(2===this.ci?(e=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(n(u,2===this.ci?ea(e=Math.floor(e/2),e,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,u,i)))return!0;--u}return!1},t.prototype.getExtent=function(){return this.q},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.ro?this.ro:this.eo[t]},t.prototype.getResolution=function(t){return this.vi[t]},t.prototype.getResolutions=function(){return this.vi},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.ci){var r=2*t[1],e=2*t[2];return ea(r,r+1,e,e+1,n)}var o=this.getTileCoordExtent(t,i||this.fo);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],e=t[1],o=t[2];if(n===r)return ea(e,o,e,o,i);if(this.ci){var s=Math.pow(this.ci,n-r),u=Math.floor(e*s),h=Math.floor(o*s);return n<r?ea(u,u,h,h,i):ea(u,Math.floor(s*(e+1))-1,h,Math.floor(s*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.fo);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),e=this.getResolution(t),o=vh(this.getTileSize(t),this.ho),s=r[0]+n.minX*o[0]*e,u=r[0]+(n.maxX+1)*o[0]*e;return In(s,r[1]+n.minY*o[1]*e,u,r[1]+(n.maxY+1)*o[1]*e,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=Ha;this.co(t[0],t[3],n,!1,r);var e=r[1],o=r[2];return this.co(t[2],t[1],n,!0,r),ea(e,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=vh(this.getTileSize(t[0]),this.ho);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),e=vh(this.getTileSize(t[0]),this.ho),o=i[0]+t[1]*e[0]*r,s=i[1]-(t[2]+1)*e[1]*r;return In(o,s,o+e[0]*r,s+e[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.vo(t[0],t[1],n,!1,i)},t.prototype.vo=function(t,n,i,r,e){var o=this.getZForResolution(i),s=i/this.getResolution(o),u=this.getOrigin(o),h=vh(this.getTileSize(o),this.ho),f=s*(t-u[0])/i/h[0],a=s*(u[1]-n)/i/h[1];return r?(f=Ei(f,5)-1,a=Ei(a,5)-1):(f=ji(f,5),a=ji(a,5)),Hf(o,f,a,e)},t.prototype.co=function(t,n,i,r,e){var o=this.getOrigin(i),s=this.getResolution(i),u=vh(this.getTileSize(i),this.ho),h=(t-o[0])/s/u[0],f=(o[1]-n)/s/u[1];return r?(h=Ei(h,5)-1,f=Ei(f,5)-1):(h=ji(h,5),f=ji(f,5)),Hf(i,h,f,e)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.co(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.vi[t[0]]},t.prototype.getTileSize=function(t){return this.so?this.so:this.oo[t]},t.prototype.getFullTileRange=function(t){return this.uo?this.uo[t]:this.q?this.getTileRangeForExtentAndZ(this.q,t):null},t.prototype.getZForResolution=function(t,n){return di(y(this.vi,t,n||0),this.minZoom,this.maxZoom)},t.prototype.ao=function(t){for(var n=this.vi.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.uo=i},t}();function $a(t){var n=t.getDefaultTileGrid();return n||(n=ic(t),t.setDefaultTileGrid(n)),n}function Qa(t,n,i){var r=n[0],e=t.getTileCoordCenter(n),o=rc(i);if(Pn(o,e))return n;var s=oi(o),u=Math.ceil((o[0]-e[0])/s);return e[0]+=s*u,t.getTileCoordForCoordAndZ(e,r)}function Ka(t,n,i,r){var e=void 0!==r?r:mn,o=nc(t,n,i);return new Ja({extent:t,origin:Kn(t,e),resolutions:o,tileSize:i})}function tc(t){var n=t||{},i=n.extent||Sr("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:nc(i,n.maxZoom,n.tileSize,n.maxResolution)};return new Ja(r)}function nc(t,n,i,r){for(var e=void 0!==n?n:42,o=ni(t),s=oi(t),u=vh(void 0!==i?i:Bu),h=r>0?r:Math.max(s/u[0],o/u[1]),f=e+1,a=new Array(f),c=0;c<f;++c)a[c]=h/Math.pow(2,c);return a}function ic(t,n,i,r){return Ka(rc(t),n,i,r)}function rc(t){var n=(t=Sr(t)).getExtent();if(!n){var i=180*Bt[Vt.DEGREES]/t.getMetersPerUnit();n=In(-i,-i,i,i)}return n}function ec(t,n){var i=/\{z\}/g,r=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(s,u,h){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(e,s[2].toString()).replace(o,(function(){var t=s[0],i=n.getFullTileRange(t);return Ot(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}function oc(t,n){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=ec(t[e],n);return sc(r)}function sc(t){return 1===t.length?t[0]:function(n,i,r){if(n){var e=Mi(Kf(n),t.length);return t[e](n,i,r)}}}function uc(t,n,i){}function hc(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),e=i[2].charCodeAt(0),o=void 0;for(o=r;o<=e;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),u=parseInt(i[1],10);u<=s;u++)n.push(t.replace(i[0],u.toString()));return n}return n.push(t),n}function fc(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var ac="http://www.w3.org/2001/XMLSchema-instance";function cc(t,n){return Rc().createElementNS(t,n)}function vc(t,n){return lc(t,n,[]).join("")}function lc(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)lc(r,n,i)}return i}function dc(t){return"documentElement"in t}function pc(t,n,i){return t.getAttributeNS(n,i)||""}function wc(t){return(new DOMParser).parseFromString(t,"application/xml")}function yc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&m(r[r.length-1],e)}}function gc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&r[r.length-1].push(e)}}function mc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&(r[r.length-1]=e)}}function bc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);if(void 0!==o){var s=e[e.length-1],u=void 0!==n?n:r.localName,h=void 0;u in s?h=s[u]:(h=[],s[u]=h),h.push(o)}}}function _c(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);void 0!==o&&(e[e.length-1][void 0!==n?n:r.localName]=o)}}function Mc(t,n){return function(i,r,e){t.call(void 0!==n?n:this,i,r,e),e[e.length-1].node.appendChild(i)}}function xc(t,n){var i,r;return function(n,e,o){if(void 0===i){i={};var s={};s[n.localName]=t,i[n.namespaceURI]=s,r=Oc(n.localName)}Cc(i,r,e,o)}}function Oc(t,n){var i=t;return function(t,r,e){var o=r[r.length-1].node,s=i;return void 0===s&&(s=e),cc(void 0!==n?n:o.namespaceURI,s)}}var Sc=Oc();function jc(t,n){for(var i=n.length,r=new Array(i),e=0;e<i;++e)r[e]=t[n[e]];return r}function Ec(t,n,i){var r,e,o=void 0!==i?i:{};for(r=0,e=t.length;r<e;++r)o[t[r]]=n;return o}function Tc(t,n,i,r){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var s=o[e.localName];void 0!==s&&s.call(r,e,i)}}}function Ac(t,n,i,r,e){return r.push(t),Tc(n,i,r,e),r.pop()}function Cc(t,n,i,r,e,o){for(var s,u,h=(void 0!==e?e:i).length,f=0;f<h;++f)void 0!==(s=i[f])&&void 0!==(u=n.call(void 0!==o?o:this,s,r,void 0!==e?e[f]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,s,r)}function Pc(t,n,i,r,e,o,s){return e.push(t),Cc(n,i,r,e,o,s),e.pop()}var Nc=void 0;function kc(){return void 0===Nc&&"undefined"!=typeof XMLSerializer&&(Nc=new XMLSerializer),Nc}var Fc=void 0;function Rc(){return void 0===Fc&&"undefined"!=typeof document&&(Fc=document.implementation.createDocument("","",null)),Fc}function Ic(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Lc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var Gc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dc=function(t){function n(n){var i=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return i.lo=n.matrixIds,i}return Gc(n,t),n.prototype.getMatrixId=function(t){return this.lo[t]},n.prototype.getMatrixIds=function(){return this.lo},n}(Ja),zc=Dc;function Uc(t,n,i){var r=[],e=[],o=[],s=[],u=[],h=void 0!==i?i:[],f=Sr(t.SupportedCRS),a=f.getMetersPerUnit(),c="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,n){return n.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(n){if(!(h.length>0)||b(h,(function(i){return n.Identifier==i.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===i.TileMatrix}))){e.push(n.Identifier);var i=28e-5*n.ScaleDenominator/a,f=n.TileWidth,v=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),r.push(i),s.push(f==v?f:[f,v]),u.push([n.MatrixWidth,n.MatrixHeight])}})),new Dc({extent:n,origins:o,resolutions:r,matrixIds:e,tileSizes:s,sizes:u})}var Xc=function(){function t(t){this.do=t.opacity,this.po=t.rotateWithView,this.Mr=t.rotation,this.wo=t.scale,this.yo=vh(t.scale),this.mo=t.displacement}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.do},t.prototype.getRotateWithView=function(){return this.po},t.prototype.getRotation=function(){return this.Mr},t.prototype.getScale=function(){return this.wo},t.prototype.getScaleArray=function(){return this.yo},t.prototype.getDisplacement=function(){return this.mo},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setDisplacement=function(t){this.mo=t},t.prototype.setOpacity=function(t){this.do=t},t.prototype.setRotateWithView=function(t){this.po=t},t.prototype.setRotation=function(t){this.Mr=t},t.prototype.setScale=function(t){this.wo=t,this.yo=vh(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),Bc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qc=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this).Et=void 0,i.bo=null,i._o=void 0!==n.fill?n.fill:null,i.ro=[0,0],i.Ft=n.points,i.Mo=void 0!==n.radius?n.radius:n.radius1,i.xo=n.radius2,i.Rt=void 0!==n.angle?n.angle:0,i.Oo=void 0!==n.stroke?n.stroke:null,i.So=null,i.jo=null,i.render(),i}return Bc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){var t=this.So;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},n.prototype.getAngle=function(){return this.Rt},n.prototype.getFill=function(){return this._o},n.prototype.getHitDetectionImage=function(){return this.bo||this.Eo(this.jo),this.bo},n.prototype.getImage=function(t){var n=this.Et[t];if(!n){var i=this.jo,r=Po(i.size*t,i.size*t);this.To(i,r,t),n=r.canvas,this.Et[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.So},n.prototype.getImageState=function(){return xo},n.prototype.getOrigin=function(){return this.ro},n.prototype.getPoints=function(){return this.Ft},n.prototype.getRadius=function(){return this.Mo},n.prototype.getRadius2=function(){return this.xo},n.prototype.getSize=function(){return this.So},n.prototype.getStroke=function(){return this.Oo},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.Ao=function(t,n,i){if(0===n||this.Ft===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.Mo,e=void 0===this.xo?r:this.xo;if(r<e){var o=r;r=e,e=o}var s=void 0===this.xo?this.Ft:2*this.Ft,u=2*Math.PI/s,h=e*Math.sin(u),f=r-Math.sqrt(e*e-h*h),a=Math.sqrt(h*h+f*f),c=a/h;if("miter"===t&&c<=i)return c*n;var v=n/2/c,l=n/2*(f/a),d=Math.sqrt((r+v)*(r+v)+l*l)-r;if(void 0===this.xo||"bevel"===t)return 2*d;var p=r*Math.sin(u),w=e-Math.sqrt(r*r-p*p),y=Math.sqrt(p*p+w*w)/p;if(y<=i){var g=y*n/2-e-r;return 2*Math.max(d,g)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=qs,i=0,r=null,e=0,o=0;this.Oo&&(null===(t=this.Oo.getColor())&&(t=Ws),t=fa(t),void 0===(o=this.Oo.getWidth())&&(o=1),r=this.Oo.getLineDash(),e=this.Oo.getLineDashOffset(),void 0===(n=this.Oo.getLineJoin())&&(n=qs),void 0===(i=this.Oo.getMiterLimit())&&(i=Vs));var s=this.Ao(n,o,i),u=Math.max(this.Mo,this.xo||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+s),lineDash:r,lineDashOffset:e,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.jo=this.createRenderOptions();var t=this.jo.size;this.Et={},this.So=[t,t]},n.prototype.To=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.Co(n),this._o){var r=this._o.getColor();null===r&&(r=Us),n.fillStyle=fa(r),n.fill()}this.Oo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.Eo=function(t){if(this._o){var n=this._o.getColor(),i=0;if("string"==typeof n&&(n=Wo(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=Po(t.size,t.size);this.bo=r.canvas,this.Po(t,r)}}this.bo||(this.bo=this.getImage(1))},n.prototype.Co=function(t){var n=this.Ft,i=this.Mo;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.xo?i:this.xo;void 0!==this.xo&&(n*=2);for(var e=this.Rt-Math.PI/2,o=2*Math.PI/n,s=0;s<n;s++){var u=e+s*o,h=s%2==0?i:r;t.lineTo(h*Math.cos(u),h*Math.sin(u))}t.closePath()}},n.prototype.Po=function(t,n){n.translate(t.size/2,t.size/2),this.Co(n),n.fillStyle=Us,n.fill(),this.Oo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(Xc),Vc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wc=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return Vc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.Mo=t,this.render()},n}(qc),Zc=function(){function t(t){var n=t||{};this.No=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.No},t.prototype.setColor=function(t){this.No=t},t}(),Yc="fraction",Hc="pixels",Jc="bottom-left",$c="bottom-right",Qc="top-left",Kc="top-right",tv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nv=null,iv=function(t){function n(n,i,r,e,o,s){var u=t.call(this)||this;return u.ko=null,u._t=n||new Image,null!==e&&(u._t.crossOrigin=e),u.Et={},u.No=s,u.Mt=null,u.Fo=o,u.So=r,u.bt=i,u.Ro,u}return tv(n,t),n.prototype.Io=function(){if(void 0===this.Ro&&this.Fo===xo){nv||(nv=Po(1,1)),nv.drawImage(this._t,0,0);try{nv.getImageData(0,0,1,1),this.Ro=!1}catch(t){nv=null,this.Ro=!0}}return!0===this.Ro},n.prototype.Lo=function(){this.dispatchEvent(R)},n.prototype.Ot=function(){this.Fo=Oo,this.St(),this.Lo()},n.prototype.jt=function(){this.Fo=xo,this.So?(this._t.width=this.So[0],this._t.height=this.So[1]):this.So=[this._t.width,this._t.height],this.St(),this.Lo()},n.prototype.getImage=function(t){return this.Go(t),this.Et[t]?this.Et[t]:this._t},n.prototype.getPixelRatio=function(t){return this.Go(t),this.Et[t]?t:1},n.prototype.getImageState=function(){return this.Fo},n.prototype.getHitDetectionImage=function(){if(!this.ko)if(this.Io()){var t=this.So[0],n=this.So[1],i=Po(t,n);i.fillRect(0,0,t,n),this.ko=i.canvas}else this.ko=this._t;return this.ko},n.prototype.getSize=function(){return this.So},n.prototype.getSrc=function(){return this.bt},n.prototype.load=function(){if(this.Fo==_o){this.Fo=Mo;try{this._t.src=this.bt}catch(t){this.Ot()}this.Mt=Eo(this._t,this.jt.bind(this),this.Ot.bind(this))}},n.prototype.Go=function(t){if(this.No&&!this.Et[t]&&this.Fo===xo){var n=document.createElement("canvas");this.Et[t]=n,n.width=Math.ceil(this._t.width*t),n.height=Math.ceil(this._t.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this._t,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.Io())i.fillStyle=Bo(this.No),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this._t,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),e=r.data,o=this.No[0]/255,s=this.No[1]/255,u=this.No[2]/255,h=this.No[3],f=0,a=e.length;f<a;f+=4)e[f]*=o,e[f+1]*=s,e[f+2]*=u,e[f+3]*=h;i.putImageData(r,0,0)}}},n.prototype.St=function(){this.Mt&&(this.Mt(),this.Mt=null)},n}(F);function rv(t,n,i,r,e,o){var s=Ko.get(n,r,o);return s||(s=new iv(t,n,i,r,e,o),Ko.set(n,r,o,s)),s}var ev=iv,ov=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sv=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.opacity?r.opacity:1,s=void 0!==r.rotation?r.rotation:0,u=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:e,rotation:s,scale:u,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:h})||this).se=void 0!==r.anchor?r.anchor:[.5,.5],i.Do=null,i.zo=void 0!==r.anchorOrigin?r.anchorOrigin:Qc,i.Uo=void 0!==r.anchorXUnits?r.anchorXUnits:Yc,i.Xo=void 0!==r.anchorYUnits?r.anchorYUnits:Yc,i.At=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null;i.Bo=r.imgSize;var a=r.src;Ot(!(void 0!==a&&f),4),Ot(!f||f&&i.Bo,5),void 0!==a&&0!==a.length||!f||(a=f.src||o(f)),Ot(void 0!==a&&a.length>0,6);var c=void 0!==r.src?_o:xo;return i.No=void 0!==r.color?Wo(r.color):null,i.qo=rv(f,a,void 0!==i.Bo?i.Bo:null,i.At,c,i.No),i.Vo=void 0!==r.offset?r.offset:[0,0],i.Wo=void 0!==r.offsetOrigin?r.offsetOrigin:Qc,i.ro=null,i.So=void 0!==r.size?r.size:null,i}return ov(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.se.slice(),anchorOrigin:this.zo,anchorXUnits:this.Uo,anchorYUnits:this.Xo,color:this.No&&this.No.slice?this.No.slice():this.No||void 0,crossOrigin:this.At,imgSize:this.Bo,offset:this.Vo.slice(),offsetOrigin:this.Wo,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.So?this.So.slice():void 0,src:this.getSrc()})},n.prototype.getAnchor=function(){var t=this.Do;if(!t){t=this.se;var n=this.getSize();if(this.Uo==Yc||this.Xo==Yc){if(!n)return null;t=this.se.slice(),this.Uo==Yc&&(t[0]*=n[0]),this.Xo==Yc&&(t[1]*=n[1])}if(this.zo!=Qc){if(!n)return null;t===this.se&&(t=this.se.slice()),this.zo!=Kc&&this.zo!=$c||(t[0]=-t[0]+n[0]),this.zo!=Jc&&this.zo!=$c||(t[1]=-t[1]+n[1])}this.Do=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},n.prototype.setAnchor=function(t){this.se=t,this.Do=null},n.prototype.getColor=function(){return this.No},n.prototype.getImage=function(t){return this.qo.getImage(t)},n.prototype.getPixelRatio=function(t){return this.qo.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.qo.getSize()},n.prototype.getImageState=function(){return this.qo.getImageState()},n.prototype.getHitDetectionImage=function(){return this.qo.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.ro)return this.ro;var t=this.Vo;if(this.Wo!=Qc){var n=this.getSize(),i=this.qo.getSize();if(!n||!i)return null;t=t.slice(),this.Wo!=Kc&&this.Wo!=$c||(t[0]=i[0]-n[0]-t[0]),this.Wo!=Jc&&this.Wo!=$c||(t[1]=i[1]-n[1]-t[1])}return this.ro=t,this.ro},n.prototype.getSrc=function(){return this.qo.getSrc()},n.prototype.getSize=function(){return this.So?this.So:this.qo.getSize()},n.prototype.listenImageChange=function(t){this.qo.addEventListener(R,t)},n.prototype.load=function(){this.qo.load()},n.prototype.unlistenImageChange=function(t){this.qo.removeEventListener(R,t)},n}(Xc),uv=function(){function t(t){var n=t||{};this.No=void 0!==n.color?n.color:null,this.Zo=n.lineCap,this.Yo=void 0!==n.lineDash?n.lineDash:null,this.Ho=n.lineDashOffset,this.Jo=n.lineJoin,this.$o=n.miterLimit,this.Qo=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.No},t.prototype.getLineCap=function(){return this.Zo},t.prototype.getLineDash=function(){return this.Yo},t.prototype.getLineDashOffset=function(){return this.Ho},t.prototype.getLineJoin=function(){return this.Jo},t.prototype.getMiterLimit=function(){return this.$o},t.prototype.getWidth=function(){return this.Qo},t.prototype.setColor=function(t){this.No=t},t.prototype.setLineCap=function(t){this.Zo=t},t.prototype.setLineDash=function(t){this.Yo=t},t.prototype.setLineDashOffset=function(t){this.Ho=t},t.prototype.setLineJoin=function(t){this.Jo=t},t.prototype.setMiterLimit=function(t){this.$o=t},t.prototype.setWidth=function(t){this.Qo=t},t}();function hv(t){return(hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var fv=function(){function t(t){var n=t||{};this.Ir=null,this.Ko=dv,void 0!==n.geometry&&this.setGeometry(n.geometry),this._o=void 0!==n.fill?n.fill:null,this._t=void 0!==n.image?n.image:null,this.Wt=void 0!==n.renderer?n.renderer:null,this.ts=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.Oo=void 0!==n.stroke?n.stroke:null,this.Ge=void 0!==n.text?n.text:null,this.ns=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===hv(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.Wt},t.prototype.setRenderer=function(t){this.Wt=t},t.prototype.setHitDetectionRenderer=function(t){this.ts=t},t.prototype.getHitDetectionRenderer=function(){return this.ts},t.prototype.getGeometry=function(){return this.Ir},t.prototype.getGeometryFunction=function(){return this.Ko},t.prototype.getFill=function(){return this._o},t.prototype.setFill=function(t){this._o=t},t.prototype.getImage=function(){return this._t},t.prototype.setImage=function(t){this._t=t},t.prototype.getStroke=function(){return this.Oo},t.prototype.setStroke=function(t){this.Oo=t},t.prototype.getText=function(){return this.Ge},t.prototype.setText=function(t){this.Ge=t},t.prototype.getZIndex=function(){return this.ns},t.prototype.setGeometry=function(t){"function"==typeof t?this.Ko=t:"string"==typeof t?this.Ko=function(n){return n.get(t)}:t?void 0!==t&&(this.Ko=function(){return t}):this.Ko=dv,this.Ir=t},t.prototype.setZIndex=function(t){this.ns=t},t}();function av(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else Ot("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var cv=null;function vv(t,n){if(!cv){var i=new Zc({color:"rgba(255,255,255,0.4)"}),r=new uv({color:"#3399CC",width:1.25});cv=[new fv({image:new Wc({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return cv}function lv(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t[Rt]=[new fv({fill:new Zc({color:[255,255,255,.5]})})],t[Gt]=t[Rt],t[kt]=[new fv({stroke:new uv({color:n,width:5})}),new fv({stroke:new uv({color:i,width:3})})],t[Lt]=t[kt],t[zt]=t[Rt].concat(t[kt]),t[Nt]=[new fv({image:new Wc({radius:6,fill:new Zc({color:i}),stroke:new uv({color:n,width:1.5})}),zIndex:1/0})],t[It]=t[Nt],t[Dt]=t[Rt].concat(t[kt],t[Nt]),t}function dv(t){return t.getGeometry()}var pv=fv,wv="point",yv="line",gv=function(){function t(t){var n=t||{};this.rs=n.font,this.Mr=n.rotation,this.po=n.rotateWithView,this.wo=n.scale,this.yo=vh(void 0!==n.scale?n.scale:1),this.Ge=n.text,this.es=n.textAlign,this.os=n.textBaseline,this._o=void 0!==n.fill?n.fill:new Zc({color:"#333"}),this.ss=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.us=void 0!==n.placement?n.placement:wv,this.hs=!!n.overflow,this.Oo=void 0!==n.stroke?n.stroke:null,this.fs=void 0!==n.offsetX?n.offsetX:0,this.cs=void 0!==n.offsetY?n.offsetY:0,this.vs=n.backgroundFill?n.backgroundFill:null,this.ls=n.backgroundStroke?n.backgroundStroke:null,this.li=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.hs},t.prototype.getFont=function(){return this.rs},t.prototype.getMaxAngle=function(){return this.ss},t.prototype.getPlacement=function(){return this.us},t.prototype.getOffsetX=function(){return this.fs},t.prototype.getOffsetY=function(){return this.cs},t.prototype.getFill=function(){return this._o},t.prototype.getRotateWithView=function(){return this.po},t.prototype.getRotation=function(){return this.Mr},t.prototype.getScale=function(){return this.wo},t.prototype.getScaleArray=function(){return this.yo},t.prototype.getStroke=function(){return this.Oo},t.prototype.getText=function(){return this.Ge},t.prototype.getTextAlign=function(){return this.es},t.prototype.getTextBaseline=function(){return this.os},t.prototype.getBackgroundFill=function(){return this.vs},t.prototype.getBackgroundStroke=function(){return this.ls},t.prototype.getPadding=function(){return this.li},t.prototype.setOverflow=function(t){this.hs=t},t.prototype.setFont=function(t){this.rs=t},t.prototype.setMaxAngle=function(t){this.ss=t},t.prototype.setOffsetX=function(t){this.fs=t},t.prototype.setOffsetY=function(t){this.cs=t},t.prototype.setPlacement=function(t){this.us=t},t.prototype.setRotateWithView=function(t){this.po=t},t.prototype.setFill=function(t){this._o=t},t.prototype.setRotation=function(t){this.Mr=t},t.prototype.setScale=function(t){this.wo=t,this.yo=vh(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.Oo=t},t.prototype.setText=function(t){this.Ge=t},t.prototype.setTextAlign=function(t){this.es=t},t.prototype.setTextBaseline=function(t){this.os=t},t.prototype.setBackgroundFill=function(t){this.vs=t},t.prototype.setBackgroundStroke=function(t){this.ls=t},t.prototype.setPadding=function(t){this.li=t},t}(),mv=function(){function t(t,n){this.name=t,this.data=n,this.ds=null}return t.prototype.getTexture=function(t){if(!this.ds){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.ds=n}return this.ds},t}(),bv=!0,_v=function(){function t(t,n,i,r,e,o){this.ps=t,this.ws=n;var s={},u=Fr(this.ws,this.ps);this.ys=function(t){var n=t[0]+"/"+t[1];return s[n]||(s[n]=u(t)),s[n]},this.gs=r,this.bs=e*e,this._s=[],this.Ms=!1,this.xs=this.ps.canWrapX()&&!!r&&!!this.ps.getExtent()&&oi(r)==oi(this.ps.getExtent()),this.Os=this.ps.getExtent()?oi(this.ps.getExtent()):null,this.Ss=this.ws.getExtent()?oi(this.ws.getExtent()):null;var h=ri(i),f=ei(i),a=$n(i),c=Jn(i),v=this.ys(h),l=this.ys(f),d=this.ys(a),p=this.ys(c),w=10+(o?Math.max(0,Math.ceil(wi(Hn(i)/(o*o*256*256)))):0);if(this.js(h,f,a,c,v,l,d,p,w),this.Ms){var y=1/0;this._s.forEach((function(t,n,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this._s.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.Os/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-y>this.Os/2&&(n[0][0]-=this.Os),n[1][0]-y>this.Os/2&&(n[1][0]-=this.Os),n[2][0]-y>this.Os/2&&(n[2][0]-=this.Os);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.Os/2&&(t.source=n)}}.bind(this))}s={}}return t.prototype.Es=function(t,n,i,r,e,o){this._s.push({source:[r,e,o],target:[t,n,i]})},t.prototype.js=function(t,n,i,r,e,o,s,u,h){var f=En([e,o,s,u]),a=this.Os?oi(f)/this.Os:null,c=this.Os,v=this.ps.canWrapX()&&a>.5&&a<1,l=!1;if(h>0){if(this.ws.isGlobal()&&this.Ss)l=oi(En([t,n,i,r]))/this.Ss>.25||l;!v&&this.ps.isGlobal()&&a&&(l=a>.25||l)}if(!(!l&&this.gs&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||si(f,this.gs)){var d=0;if(!(l||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])))if(h>0)l=!0;else if(1!=(d=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!l){var p=[(t[0]+i[0])/2,(t[1]+i[1])/2],w=this.ys(p),y=void 0;if(v)y=(Mi(e[0],c)+Mi(s[0],c))/2-Mi(w[0],c);else y=(e[0]+s[0])/2-w[0];var g=(e[1]+s[1])/2-w[1];l=y*y+g*g>this.bs}if(l){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var m=[(n[0]+i[0])/2,(n[1]+i[1])/2],b=this.ys(m),_=[(r[0]+t[0])/2,(r[1]+t[1])/2],M=this.ys(_);this.js(t,n,m,_,e,o,b,M,h-1),this.js(_,m,i,r,M,b,s,u,h-1)}else{var x=[(t[0]+n[0])/2,(t[1]+n[1])/2],O=this.ys(x),S=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.ys(S);this.js(t,x,S,r,e,O,j,u,h-1),this.js(x,n,i,S,O,o,s,j,h-1)}return}}if(v){if(!this.xs)return;this.Ms=!0}0==(11&d)&&this.Es(t,i,r,e,s,u),0==(14&d)&&this.Es(t,i,n,e,s,o),d&&(0==(13&d)&&this.Es(n,r,t,o,u,e),0==(7&d)&&this.Es(n,r,i,o,u,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this._s.forEach((function(n,i,r){var e=n.source;Bn(t,e[0]),Bn(t,e[1]),Bn(t,e[2])})),t},t.prototype.getTriangles=function(){return this._s},t}(),Mv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xv=function(t){function n(n,i,r,e,o,s,u,h,f,a,c,v){var l=t.call(this,o,ct,{interpolate:!!v})||this;l.Ts=void 0!==c&&c,l.gt=u,l.As=h,l.Et=null,l.Cs=i,l.Ps=e,l.Ns=s||o,l.ks=[],l.Fs=null,l.Rs=0;var d=e.getTileCoordExtent(l.Ns),p=l.Ps.getExtent(),w=l.Cs.getExtent(),y=p?ii(d,p):d;if(0===Hn(y))return l.state=pt,l;var g=n.getExtent();g&&(w=w?ii(w,g):g);var m=e.getResolution(l.Ns[0]),b=Za(n,r,y,m);if(!isFinite(b)||b<=0)return l.state=pt,l;var _=void 0!==a?a:.5;if(l.Is=new _v(n,r,y,w,b*_,m),0===l.Is.getTriangles().length)return l.state=pt,l;l.Rs=i.getZForResolution(b);var M=l.Is.calculateSourceExtent();if(w&&(n.canWrapX()?(M[1]=di(M[1],w[1],w[3]),M[3]=di(M[3],w[1],w[3])):M=ii(M,w)),Hn(M)){for(var x=i.getTileRangeForExtentAndZ(M,l.Rs),O=x.minX;O<=x.maxX;O++)for(var S=x.minY;S<=x.maxY;S++){var j=f(l.Rs,O,S,u);j&&l.ks.push(j)}0===l.ks.length&&(l.state=pt)}else l.state=pt;return l}return Mv(n,t),n.prototype.getImage=function(){return this.Et},n.prototype.Ls=function(){var t=[];if(this.ks.forEach(function(n,i,r){n&&n.getState()==lt&&t.push({extent:this.Cs.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.ks.length=0,0===t.length)this.state=dt;else{var n=this.Ns[0],i=this.Ps.getTileSize(n),r="number"==typeof i?i:i[0],e="number"==typeof i?i:i[1],o=this.Ps.getResolution(n),s=this.Cs.getResolution(this.Rs),u=this.Ps.getTileCoordExtent(this.Ns);this.Et=Ya(r,e,this.gt,s,this.Cs.getExtent(),o,u,this.Is,t,this.As,this.Ts,this.interpolate),this.state=lt}this.changed()},n.prototype.load=function(){if(this.state==ct){this.state=vt,this.changed();var t=0;this.Fs=[],this.ks.forEach(function(n,i,r){var e=n.getState();if(e==ct||e==vt){t++;var o=H(n,R,(function(i){var r=n.getState();r!=lt&&r!=dt&&r!=pt||($(o),0===--t&&(this.Gs(),this.Ls()))}),this);this.Fs.push(o)}}.bind(this)),0===t?setTimeout(this.Ls.bind(this),0):this.ks.forEach((function(t,n,i){t.getState()==ct&&t.load()}))}},n.prototype.Gs=function(){this.Fs.forEach($),this.Fs=null},n}(_t),Ov=34962,Sv=34963,jv=35044,Ev=35048,Tv=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Av(t,n){for(var i=A({preserveDrawingBuffer:!0,antialias:!Ht},n),r=Tv.length,e=0;e<r;++e)try{var o=t.getContext(Tv[e],i);if(o)return o}catch(t){}return null}var Cv=jv;function Pv(t){switch(t){case Ov:return Float32Array;case Sv:return Uint32Array;default:return Float32Array}}var Nv=function(){function t(t,n){this.array=null,this.type=t,Ot(t===Ov||t===Sv,62),this.usage=void 0!==n?n:Cv}return t.prototype.ofSize=function(t){this.array=new(Pv(this.type))(t)},t.prototype.fromArray=function(t){var n=Pv(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Pv(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),kv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Fv(t,n,i){var r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function Rv(t,n,i,r,e,o){var s,u,h=t.getGL();i instanceof Float32Array?(s=h.FLOAT,t.getExtension("OES_texture_float"),u=null!==t.getExtension("OES_texture_float_linear")):(s=h.UNSIGNED_BYTE,u=!0);Fv(h,n,o&&u);var f,a=i.byteLength/r[1],c=1;switch(a%8==0?c=8:a%4==0?c=4:a%2==0&&(c=2),e){case 1:f=h.LUMINANCE;break;case 2:f=h.LUMINANCE_ALPHA;break;case 3:f=h.RGB;break;case 4:f=h.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e))}var v=h.getParameter(h.UNPACK_ALIGNMENT);h.pixelStorei(h.UNPACK_ALIGNMENT,c),h.texImage2D(h.TEXTURE_2D,0,f,r[0],r[1],0,f,s,i),h.pixelStorei(h.UNPACK_ALIGNMENT,v)}var Iv=null;var Lv=function(t){function n(n){var i=t.call(this)||this;i.tile,i.textures=[],i.Zi=i.Zi.bind(i),i.size=vh(n.grid.getTileSize(n.tile.tileCoord[0])),i.Ds=n.tilePixelRatio||1,i.As=n.gutter||0,i.bandCount=NaN,i.zs=n.helper;var r=new Nv(Ov,jv);return r.fromArray([0,1,1,1,1,0,0,0]),i.zs.flushBufferData(r),i.coords=r,i.setTile(n.tile),i}return kv(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(R,this.Zi),this.tile=t,this.textures.length=0,this.loaded=t.getState()===lt,this.loaded)this.Us();else{if(t instanceof Do){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(R,this.Zi)}},n.prototype.Us=function(){var t=this.zs,n=t.getGL(),i=this.tile;if(i instanceof Do||i instanceof xv){var r=i.getImage();if(0!==this.As){var e=this.Ds*this.As,o=Math.round(r.width-2*e),s=Math.round(r.height-2*e),u=Po(o,s);i.interpolate||A(u,Xa),u.drawImage(r,e,e,o,s,0,0,o,s),r=u.canvas}var h=n.createTexture();return this.textures.push(h),this.bandCount=4,void function(t,n,i,r){Fv(t,n,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,h,r,i.interpolate)}var f=[this.size[0]*this.Ds,this.size[1]*this.Ds],a=i.getData(),c=a instanceof Float32Array,v=f[0]*f[1],l=c?Float32Array:Uint8Array,d=l.BYTES_PER_ELEMENT,p=a.byteLength/f[1];this.bandCount=Math.floor(p/d/f[0]);var w=Math.ceil(this.bandCount/4);if(1===w){h=n.createTexture();return this.textures.push(h),void Rv(t,h,a,f,this.bandCount,i.interpolate)}for(var y=new Array(w),g=0;g<w;++g){h=n.createTexture();this.textures.push(h);var m=g<w-1?4:this.bandCount%4;y[g]=new l(v*m)}for(var b=0,_=0,M=f[0]*this.bandCount,x=0;x<f[1];++x){for(var O=0;O<M;++O){var S=a[_+O],j=Math.floor(b/this.bandCount),E=O%this.bandCount;(T=y[g=Math.floor(E/4)])[j*(m=T.length/v)+E%4]=S,++b}_+=p/d}for(g=0;g<w;++g){var T;Rv(t,h=this.textures[g],T=y[g],f,m=T.length/v,i.interpolate)}},n.prototype.Zi=function(){this.tile.getState()===lt&&(this.loaded=!0,this.Us(),this.dispatchEvent(R))},n.prototype.disposeInternal=function(){var t=this.zs.getGL();this.zs.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(R,this.Zi)},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;if(t=Math.floor(this.Ds*t),n=Math.floor(this.Ds*n),this.tile instanceof xt){var i=this.tile.getData(),r=Math.floor(this.Ds*this.size[0]);if(i instanceof DataView){var e=i.byteLength/(this.size[0]*this.size[1]),o=n*r*e+t*e,s=i.buffer.slice(o,o+e);return new DataView(s)}var u=n*r*this.bandCount+t*this.bandCount;return i.slice(u,u+this.bandCount)}var h,f;Iv||((h=document.createElement("canvas")).width=1,h.height=1,Iv=h.getContext("2d")),Iv.clearRect(0,0,1,1);var a=this.tile.getImage();try{Iv.drawImage(a,t,n,1,1,0,0,1,1),f=Iv.getImageData(0,0,1,1).data}catch(t){return null}return f},n}(F),Gv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dv=function(t){function n(n){var i=t.call(this)||this;return i.ready=!0,i.Xs=i.Bs.bind(i),i.qs=n,i.declutterExecutorGroup=null,i}return Gv(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,e){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,e,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.qs},n.prototype.handleFontsChanged=function(){},n.prototype.Bs=function(t){t.target.getState()===xo&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=xo&&n!=Oo&&t.addEventListener(R,this.Xs),n==_o&&(t.load(),n=t.getState()),n==xo},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==bs&&t.changed()},n.prototype.disposeInternal=function(){delete this.qs,t.prototype.disposeInternal.call(this)},n}(nt),zv="webglcontextlost",Uv="webglcontextrestored",Xv=function(){function t(t){this.Vs=t.webGlContext;var n=this.Vs;this.Ws=t.scaleRatio||1,this.Zs=n.createTexture(),this.Ys=null,this.Hs=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(r),this.Js=n.createProgram(),n.attachShader(this.Js,i),n.attachShader(this.Js,r),n.linkProgram(this.Js),this.$s=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.$s),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Qs=n.getAttribLocation(this.Js,"a_position"),this.Ks=n.getUniformLocation(this.Js,"u_screenSize"),this.tu=n.getUniformLocation(this.Js,"u_opacity"),this.nu=n.getUniformLocation(this.Js,"u_image"),this.iu=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.iu.push({value:t.uniforms[i],location:n.getUniformLocation(this.Js,i)})}.bind(this))}return t.prototype.getGL=function(){return this.Vs},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.Ws,n.drawingBufferHeight*this.Ws];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.Ys||this.Ys[0]!==i[0]||this.Ys[1]!==i[1]){this.Ys=i;var r=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.Zs),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.Zs,0)}},t.prototype.apply=function(t,n,i,r){var e=this.getGL(),s=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Zs),!n){var u=o(e.canvas);if(!t.renderTargets[u]){var h=e.getContextAttributes();h&&h.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.$s),e.useProgram(this.Js),e.enableVertexAttribArray(this.Qs),e.vertexAttribPointer(this.Qs,2,e.FLOAT,!1,0,0),e.uniform2f(this.Ks,s[0],s[1]),e.uniform1i(this.nu,0);var f=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.tu,f),this.applyUniforms(t),i&&i(e,t),e.drawArrays(e.TRIANGLES,0,6),r&&r(e,t)},t.prototype.getFrameBuffer=function(){return this.Hs},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.iu.forEach((function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(e.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(e.location,n[0],n[1]);case 3:return void i.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(e.location,n)}))},t}(),Bv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qv="u_projectionMatrix",Vv="u_offsetScaleMatrix",Wv="u_offsetRotateMatrix",Zv="u_time",Yv="u_zoom",Hv="u_resolution",Jv={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},$v={};function Qv(t){return"shared/"+t}var Kv=0;function tl(t){switch(t){case Jv.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Jv.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Jv.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Jv.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var nl=function(t){function n(n){var i,r=t.call(this)||this,e=n||{};r.ru=r.handleWebGLContextLost.bind(r),r.eu=r.handleWebGLContextRestored.bind(r),r.ou=e.canvasCacheKey?Qv(e.canvasCacheKey):(i="unique/"+Kv,Kv+=1,i),r.Et=function(t){var n=$v[t];if(!n){var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",n={users:0,canvas:i},$v[t]=n}return n.users+=1,n.canvas}(r.ou),r.Vs=Av(r.Et),r.su={},r.uu={},r.hu=null,r.Et.addEventListener(zv,r.ru),r.Et.addEventListener(Uv,r.eu),r.fu=[1,0,0,1,0,0],r.au=[1,0,0,1,0,0],r.cu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.vu={},r.lu={},r.iu=[],e.uniforms&&r.setUniforms(e.uniforms);var o=r.getGL();return r.du=e.postProcesses?e.postProcesses.map((function(t){return new Xv({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Xv({webGlContext:o})],r.pu=null,r.Qr=Date.now(),r}return Bv(n,t),n.prototype.setUniforms=function(t){for(var n in this.iu=[],t)this.iu.push({name:n,value:t[n]});this.vu={}},n.prototype.canvasCacheKeyMatches=function(t){return this.ou===Qv(t)},n.prototype.getExtension=function(t){if(t in this.uu)return this.uu[t];var n=this.Vs.getExtension(t);return this.uu[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.su[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.su[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.su[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.su[i]},n.prototype.disposeInternal=function(){this.Et.removeEventListener(zv,this.ru),this.Et.removeEventListener(Uv,this.eu),function(t){var n=$v[t];if(n&&(n.users-=1,!(n.users>0))){var i=Av(n.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete $v[t]}}(this.ou),delete this.Vs,delete this.Et},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),e=t.size,o=t.pixelRatio;r.width=e[0]*o,r.height=e[1]*o,r.style.width=e[0]+"px",r.style.height=e[1]+"px",i.useProgram(this.hu);for(var s=this.du.length-1;s>=0;s--)this.du[s].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.hu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),e=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,e[0],e[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.hu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,e=n-t,o=4*t;i.drawElements(i.TRIANGLES,e,r,o)},n.prototype.finalizeDraw=function(t,n,i){for(var r=0,e=this.du.length;r<e;r++)r===e-1?this.du[r].apply(t,null,n,i):this.du[r].apply(t,this.du[r+1])},n.prototype.getCanvas=function(){return this.Et},n.prototype.getGL=function(){return this.Vs},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=on(this.au);cn(r,2/n[0],2/n[1]);var e=on(this.fu);0!==i&&an(e,-i),this.setUniformMatrixValue(Vv,Lc(this.cu,r)),this.setUniformMatrixValue(Wv,Lc(this.cu,e)),this.setUniformFloatValue(Zv,.001*(Date.now()-this.Qr)),this.setUniformFloatValue(Yv,t.viewState.zoom),this.setUniformFloatValue(Hv,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.iu.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(e.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,Lc(this.cu,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(e.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.hu&&(this.getGL().useProgram(t),this.hu=t,this.vu={},this.lu={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),e=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,e),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var s="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(r));throw new Error(s)}if(i.deleteShader(r),!i.getShaderParameter(e,i.COMPILE_STATUS)){s="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}if(i.deleteShader(e),!i.getProgramParameter(o,i.LINK_STATUS)){s="GL program linking failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.vu[t]&&(this.vu[t]=this.getGL().getUniformLocation(this.hu,t)),this.vu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.lu[t]&&(this.lu[t]=this.getGL().getAttribLocation(this.hu,t)),this.lu[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return on(n),ln(n,0,0,2/(e*i[0]),2/(e*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.wu=function(t,n,i,r,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,e))},n.prototype.enableAttributes=function(t){for(var n=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*tl(r.type)}return n}(t),i=0,r=0;r<t.length;r++){var e=t[r];this.wu(e.name,e.size,e.type||5126,n,i),i+=e.size*tl(e.type)}},n.prototype.handleWebGLContextLost=function(){C(this.su),this.hu=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),e=i||r.createTexture(),o=r.RGBA,s=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,e),n?r.texImage2D(r.TEXTURE_2D,0,o,s,u,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,s,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e},n}(l),il=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rl="GENERATE_BUFFERS",el=function(t){function n(n,i){var r=t.call(this,n)||this,e=i||{};return r.yu=[1,0,0,1,0,0],r.gu=null,r.mu=e.postProcesses,r.iu=e.uniforms,r.helper,n.addChangeListener(fs,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return il(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ps)){var r=new As(ps,void 0,n,t);i.dispatchEvent(r)}},n.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ws)){var r=new As(ws,void 0,n,t);i.dispatchEvent(r)}},n.prototype.reset=function(t){this.iu=t.uniforms,this.helper&&this.helper.setUniforms(this.iu)},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var i=!0,r=-1,e=void 0,o=0,s=t.layerStatesArray.length;o<s;o++){var u=t.layerStatesArray[o].layer,h=u.getRenderer();if(h instanceof n){var f=u.getClassName();if((i||f!==e)&&(r+=1,i=!1),e=f,h===this)break}else i=!0}var a="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(a)||(this.removeHelper(),this.helper=new nl({postProcesses:this.mu,uniforms:this.iu,canvasCacheKey:a}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},n.prototype.bu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){ln(this.yu,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var e=new As(t,this.yu,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.bu(ls,t,n)},n.prototype.postRender=function(t,n){this.bu(ds,t,n)},n.prototype.getDataAtPixel=function(t,n,i){var r=fn([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!Pn(o,fn(n.pixelToCoordinateTransform,t.slice())))return null;var s=e.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array;var u,h=Math.round(r[0]),f=Math.round(r[1]),a=this.gu;if(!a){var c=document.createElement("canvas");c.width=1,c.height=1,a=c.getContext("2d"),this.gu=a}a.clearRect(0,0,1,1);try{a.drawImage(e.canvas,h,f,1,1,0,0,1,1),u=a.getImageData(0,0,1,1).data}catch(t){return u}return 0===u[3]?null:u},n}(Dv);var ol=el,sl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ul="u_tileTextures",hl="u_tileTransform",fl="u_transitionAlpha",al="u_depth",cl="u_texturePixelWidth",vl="u_texturePixelHeight",ll="u_textureResolution",dl="u_textureOriginX",pl="u_textureOriginY",wl="u_renderExtent",yl="u_resolution",gl="u_zoom",ml=[{name:"a_textureCoord",size:2,type:Jv.FLOAT}],bl={};function _l(t){return 2*(1-1/(t+1))-1}function Ml(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function xl(t,n){var i=t.layerStatesArray[t.layerIndex];i.extent&&(n=ii(n,Br(i.extent,t.viewState.projection)));var r=i.layer.getRenderSource();if(!r.getWrapX()){var e=r.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=ii(n,e))}return n}function Ol(t,n){return"".concat(t.getKey(),",").concat($f(n))}!function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms})||this;r.renderComplete=!1,r._u=[1,0,0,1,0,0],r.Mu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.xu=new oa(0,0,0,0),r.Ou=Hf(0,0,0),r.Su=[0,0],r.ju,r.Eu=i.vertexShader,r.Tu=i.fragmentShader,r.Au=new Nv(Sv,jv),r.Au.fromArray([0,1,3,1,2,3]);var e=void 0!==i.cacheSize?i.cacheSize:512;return r.Cu=new Yf(e),r.Pu=i.paletteTextures||[],r.Ni=null,r}sl(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Eu=n.vertexShader,this.Tu=n.fragmentShader,this.Pu=n.paletteTextures||[],this.helper&&(this.ju=this.helper.getProgram(this.Tu,this.Eu))},n.prototype.afterHelperCreated=function(){this.ju=this.helper.getProgram(this.Tu,this.Eu),this.helper.flushBufferData(this.Au)},n.prototype.Nu=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==lt||i==pt||i==dt&&!r},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&(!ui(xl(t,t.extent))&&n.getState()===bs)},n.prototype.enqueueTiles=function(t,n,i,r){var e=t.viewState,s=this.getLayer(),u=s.getRenderSource(),h=u.getTileGridForProjection(e.projection),f=u.getTilePixelRatio(t.pixelRatio),a=u.getGutterForProjection(e.projection),c=o(u);c in t.wantedTiles||(t.wantedTiles[c]={});for(var v=t.wantedTiles[c],l=this.Cu,d=Math.max(i-s.getPreload(),h.getMinZoom(),s.getMinZoom()),p=i;p>=d;--p)for(var w=h.getTileRangeForExtentAndZ(n,p,this.xu),y=h.getResolution(p),g=w.minX;g<=w.maxX;++g)for(var m=w.minY;m<=w.maxY;++m){var b=Hf(p,g,m,this.Ou),_=Ol(u,b),M=void 0,x=void 0;if(l.containsKey(_)&&(x=(M=l.get(_)).tile),!M||M.tile.key!==u.getKey())if(x=u.getTile(p,g,m,t.pixelRatio,e.projection),M)if(this.Nu(x))M.setTile(x);else{var O=x.getInterimTile();M.setTile(O)}else M=new Lv({tile:x,grid:h,helper:this.helper,tilePixelRatio:f,gutter:a}),l.set(_,M);Ml(r,M,p);var S=x.getKey();v[S]=!0,x.getState()===ct&&(t.tileQueue.isKeyQueued(S)||t.tileQueue.enqueue([x,c,h.getTileCoordCenter(b),y]))}},n.prototype.renderFrame=function(t){this.Ni=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,r=this.getLayer().getRenderSource(),e=r.getTileGridForProjection(i.projection),s=xl(t,t.extent),u=e.getZForResolution(i.resolution,r.zDirection),h={};if(t.nextExtent){var f=e.getZForResolution(i.nextResolution,r.zDirection),a=xl(t,t.nextExtent);this.enqueueTiles(t,a,f,h)}this.enqueueTiles(t,s,u,h);for(var c={},v=o(this),l=t.time,d=!1,w=h[u],y=0,g=w.length;y<g;++y){var m=(I=(H=w[y]).tile).tileCoord;if(H.loaded){if(1===(L=I.getAlpha(v,l))){I.endTransition(v);continue}d=!0,c[G=$f(m)]=L}if(this.renderComplete=!1,!this.ku(e,m,u+1,h))for(var b=e.getMinZoom(),_=u-1;_>=b;--_){if(this.ku(e,m,_,h))break}}this.helper.useProgram(this.ju),this.helper.prepareDraw(t,!d);for(var M=Object.keys(h).map(Number).sort(p),x=i.center[0],O=i.center[1],S=0,j=M.length;S<j;++S){var E=M[S],T=e.getResolution(E),A=vh(e.getTileSize(E),this.Su),C=e.getOrigin(E),P=(x-C[0])/(A[0]*T),N=(C[1]-O)/(A[1]*T),k=i.resolution/T,F=_l(E),R=h[E];for(y=0,g=R.length;y<g;++y){if((H=R[y]).loaded){var I,L,G=$f(m=(I=H.tile).tileCoord),D=m[1],z=m[2];ln(this._u,0,0,2/(t.size[0]*k/A[0]),-2/(t.size[1]*k/A[1]),i.rotation,-(P-D),-(N-z)),this.helper.setUniformMatrixValue(hl,Lc(this.Mu,this._u)),this.helper.bindBuffer(H.coords),this.helper.bindBuffer(this.Au),this.helper.enableAttributes(ml);for(var U=0;U<H.textures.length;){var X="TEXTURE"+U,B="".concat(ul,"[").concat(U,"]");n.activeTexture(n[X]),n.bindTexture(n.TEXTURE_2D,H.textures[U]),n.uniform1i(this.helper.getUniformLocation(B),U),++U}for(var q=0;q<this.Pu.length;++q){var V=this.Pu[q];n.activeTexture(n["TEXTURE"+U]);var W=V.getTexture(n);n.bindTexture(n.TEXTURE_2D,W),n.uniform1i(this.helper.getUniformLocation(V.name),U),++U}(L=G in c?c[G]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(fl,L),this.helper.setUniformFloatValue(al,F),this.helper.setUniformFloatValue(cl,A[0]),this.helper.setUniformFloatValue(vl,A[1]),this.helper.setUniformFloatValue(ll,T),this.helper.setUniformFloatValue(dl,C[0]+D*A[0]*T),this.helper.setUniformFloatValue(pl,C[1]-z*A[1]*T),this.helper.setUniformFloatVec4(wl,s),this.helper.setUniformFloatValue(yl,i.resolution),this.helper.setUniformFloatValue(gl,i.zoom),this.helper.drawElements(0,this.Au.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Z=this.helper.getCanvas(),Y=this.Cu;Y.canExpireCache();){var H;(H=Y.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){r.expireCache(n.viewState.projection,bl)})),this.postRender(n,t),Z},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.Ni;if(!n)return null;var i=this.getLayer(),r=fn(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=i.getExtent();if(o&&!Pn(Br(o,e.projection),r))return null;var s=i.getRenderSource(),u=s.getTileGridForProjection(e.projection);if(!s.getWrapX()){var h=u.getExtent();if(h&&!Pn(h,r))return null}for(var f=this.Cu,a=u.getZForResolution(e.resolution);a>=u.getMinZoom();--a){var c=u.getTileCoordForCoordAndZ(r,a),v=Ol(s,c);if(f.containsKey(v)){var l=f.get(v);if(l.loaded){var d=u.getOrigin(a),p=vh(u.getTileSize(a)),w=u.getResolution(a),y=(r[0]-d[0])/w-c[1]*p[0],g=(d[1]-r[1])/w-c[2]*p[1];return l.getPixelData(y,g)}}}return null},n.prototype.ku=function(t,n,i,r){var e=t.getTileRangeForTileCoordAndZ(n,i,this.xu);if(!e)return!1;for(var o=!0,s=this.Cu,u=this.getLayer().getRenderSource(),h=e.minX;h<=e.maxX;++h)for(var f=e.minY;f<=e.maxY;++f){var a=Ol(u,[i,h,f]),c=!1;if(s.containsKey(a)){var v=s.get(a);v.loaded&&(Ml(r,v,i),c=!0)}c||(o=!1)}return o},n.prototype.removeHelper=function(){if(this.helper){var n=this.Cu;n.forEach((function(t){return t.dispose()})),n.clear()}t.prototype.removeHelper.call(this)},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.ju),delete this.ju,n.deleteBuffer(this.Au));t.prototype.disposeInternal.call(this),delete this.Au,delete this.Cu,delete this.Ni}}(ol);var Sl=1,jl=2,El=4,Tl=8,Al=16,Cl=31,Pl=0,Nl={};function kl(t){if("number"==typeof t)return Sl;if("boolean"==typeof t)return Tl;if("string"==typeof t)return Ho(t)?El|jl:jl;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?El|Al:Al;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var i=Nl[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.getReturnType(n.slice(1))}function Fl(t){return wi(t)%1==0}function Rl(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function Il(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(Rl).join(", "),")")}function Ll(t){var n=Wo(t).slice();return n.length<4&&n.push(1),Il(n.map((function(t,n){return n<3?t/255:t})))}function Gl(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function Dl(t,n){return Rl(Gl(t,n))}function zl(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Nl[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.toGlsl(t,n.slice(1),i)}var e=kl(n);if((e&Sl)>0)return Rl(n);if((e&Tl)>0)return n.toString();if((e&jl)>0&&(void 0===i||i==jl))return Dl(t,n.toString());if((e&El)>0&&(void 0===i||i==El))return Ll(n);if((e&Al)>0)return Il(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(i,")"))}function Ul(t){if(!(kl(t)&Sl))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function Xl(t){for(var n=0;n<t.length;n++)Ul(t[n])}function Bl(t){if(!(kl(t)&jl))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function ql(t){if(!(kl(t)&Tl))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function Vl(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function Wl(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function Zl(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function Yl(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function Hl(t,n){if(!Fl(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function Jl(t){return"u_var_"+t}Nl.get={getReturnType:function(t){return Cl},toGlsl:function(t,n){Vl(n,1),Bl(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Nl.var={getReturnType:function(t){return Cl},toGlsl:function(t,n){Vl(n,1),Bl(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),Jl(i)}};var $l="u_paletteTextures";Nl.palette={getReturnType:function(t){return El},toGlsl:function(t,n){Vl(n,2),Ul(n[0]);var i=zl(t,n[0]),r=n[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var e=r.length,o=new Uint8Array(4*e),s=0;s<e;s++){var u=r[s],h=void 0;if("string"==typeof u)h=Vo(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var f=u.length;if(4===f)h=u;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));h=[u[0],u[1],u[2],1]}}var a=4*s;o[a]=h[0],o[a+1]=h[1],o[a+2]=h[2],o[a+3]=255*h[3]}t.paletteTextures||(t.paletteTextures=[]);var c="".concat($l,"[").concat(t.paletteTextures.length,"]"),v=new mv(c,o);return t.paletteTextures.push(v),"texture2D(".concat(c,", vec2((").concat(i," + 0.5) / ").concat(e,".0, 0.5))")}};var Ql="getBandValue";function Kl(t){return{getReturnType:function(t){return Tl},toGlsl:function(n,i){Vl(i,2);for(var r=Cl,e=0;e<i.length;e++)r&=kl(i[e]);if(r===Pl)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(i)," instead"));return r&=~El,"(".concat(zl(n,i[0],r)," ").concat(t," ").concat(zl(n,i[1],r),")")}}}function td(t){return{getReturnType:function(t){return Tl},toGlsl:function(n,i){Wl(i,2);for(var r=0;r<i.length;r++)ql(i[r]);var e="";return e=i.map((function(t){return zl(n,t)})).join(" ".concat(t," ")),e="(".concat(e,")")}}}Nl.band={getReturnType:function(t){return Sl},toGlsl:function(t,n){Wl(n,1),Zl(n,3);var i=n[0];if(!(Ql in t.functions)){for(var r="",e=t.bandCount||1,o=0;o<e;o++){var s=Math.floor(o/4),u=o%4;u===e-1&&1===u&&(u=3);var h="".concat(ul,"[").concat(s,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(h,", v_textureCoord + vec2(dx, dy))[").concat(u,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(cl,";\n          float dy = yOffset / ").concat(vl,";\n          ").concat(r,"\n        }\n      ")}var f=zl(t,i),a=zl(t,n[1]||0),c=zl(t,n[2]||0);return"".concat(Ql,"(").concat(f,", ").concat(a,", ").concat(c,")")}},Nl.time={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,0),"u_time"}},Nl.zoom={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,0),"u_zoom"}},Nl.resolution={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,0),"u_resolution"}},Nl["*"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," * ").concat(zl(t,n[1]),")")}},Nl["/"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," / ").concat(zl(t,n[1]),")")}},Nl["+"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," + ").concat(zl(t,n[1]),")")}},Nl["-"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," - ").concat(zl(t,n[1]),")")}},Nl.clamp={getReturnType:function(t){return Sl},toGlsl:function(t,n){Vl(n,3),Xl(n);var i=zl(t,n[1]),r=zl(t,n[2]);return"clamp(".concat(zl(t,n[0]),", ").concat(i,", ").concat(r,")")}},Nl["%"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"mod(".concat(zl(t,n[0]),", ").concat(zl(t,n[1]),")")}},Nl["^"]={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"pow(".concat(zl(t,n[0]),", ").concat(zl(t,n[1]),")")}},Nl.abs={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"abs(".concat(zl(t,n[0]),")")}},Nl.floor={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"floor(".concat(zl(t,n[0]),")")}},Nl.round={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"floor(".concat(zl(t,n[0])," + 0.5)")}},Nl.ceil={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"ceil(".concat(zl(t,n[0]),")")}},Nl.sin={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"sin(".concat(zl(t,n[0]),")")}},Nl.cos={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Vl(n,1),Xl(n),"cos(".concat(zl(t,n[0]),")")}},Nl.atan={getReturnType:function(t){return Sl},toGlsl:function(t,n){return Wl(n,1),Zl(n,2),Xl(n),2===n.length?"atan(".concat(zl(t,n[0]),", ").concat(zl(t,n[1]),")"):"atan(".concat(zl(t,n[0]),")")}},Nl[">"]={getReturnType:function(t){return Tl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," > ").concat(zl(t,n[1]),")")}},Nl[">="]={getReturnType:function(t){return Tl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," >= ").concat(zl(t,n[1]),")")}},Nl["<"]={getReturnType:function(t){return Tl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," < ").concat(zl(t,n[1]),")")}},Nl["<="]={getReturnType:function(t){return Tl},toGlsl:function(t,n){return Vl(n,2),Xl(n),"(".concat(zl(t,n[0])," <= ").concat(zl(t,n[1]),")")}},Nl["=="]=Kl("=="),Nl["!="]=Kl("!="),Nl["!"]={getReturnType:function(t){return Tl},toGlsl:function(t,n){return Vl(n,1),ql(n[0]),"(!".concat(zl(t,n[0]),")")}},Nl.all=td("&&"),Nl.any=td("||"),Nl.between={getReturnType:function(t){return Tl},toGlsl:function(t,n){Vl(n,3),Xl(n);var i=zl(t,n[1]),r=zl(t,n[2]),e=zl(t,n[0]);return"(".concat(e," >= ").concat(i," && ").concat(e," <= ").concat(r,")")}},Nl.array={getReturnType:function(t){return Al},toGlsl:function(t,n){Wl(n,2),Zl(n,4),Xl(n);var i=n.map((function(n){return zl(t,n,Sl)}));return"vec".concat(n.length,"(").concat(i.join(", "),")")}},Nl.color={getReturnType:function(t){return El},toGlsl:function(t,n){Wl(n,3),Zl(n,4),Xl(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return zl(t,n,Sl)+(i<3?" / 255.0":"")}));return"vec".concat(n.length,"(").concat(r.join(", "),")")}},Nl.interpolate={getReturnType:function(t){for(var n=El|Sl,i=3;i<t.length;i+=2)n&=kl(t[i]);return n},toGlsl:function(t,n,i){Yl(n),Wl(n,6);var r,e=n[0];switch(e[0]){case"linear":r=1;break;case"exponential":r=e[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==i?i:Cl,s=Nl.interpolate.getReturnType(n)&o;Hl(n,s);for(var u=zl(t,n[1]),h=Rl(r),f="",a=2;a<n.length-2;a+=2){var c=zl(t,n[a]),v=f||zl(t,n[a+1],s),l=zl(t,n[a+2]),d=zl(t,n[a+3],s);f="mix(".concat(v,", ").concat(d,", pow(clamp((").concat(u," - ").concat(c,") / (").concat(l," - ").concat(c,"), 0.0, 1.0), ").concat(h,"))")}return f}},Nl.match={getReturnType:function(t){for(var n=Cl,i=2;i<t.length;i+=2)n&=kl(t[i]);return n&=kl(t[t.length-1])},toGlsl:function(t,n,i){Yl(n),Wl(n,4);var r=void 0!==i?i:Cl,e=Nl.match.getReturnType(n)&r;Hl(n,e);for(var o=zl(t,n[0]),s=zl(t,n[n.length-1],e),u=null,h=n.length-3;h>=1;h-=2){var f=zl(t,n[h]),a=zl(t,n[h+1],e);u="(".concat(o," == ").concat(f," ? ").concat(a," : ").concat(u||s,")")}return u}},Nl.case={getReturnType:function(t){for(var n=Cl,i=1;i<t.length;i+=2)n&=kl(t[i]);return n&=kl(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(n),Wl(n,3);var r=void 0!==i?i:Cl,e=Nl.case.getReturnType(n)&r;Hl(n,e);for(var o=0;o<n.length-1;o+=2)ql(n[o]);var s=zl(t,n[n.length-1],e),u=null;for(o=n.length-3;o>=0;o-=2){var h=zl(t,n[o]),f=zl(t,n[o+1],e);u="(".concat(h," ? ").concat(f," : ").concat(u||s,")")}return u}};var nd=function(){function t(t){this.Fu,this.Ru,this.Iu,this.Lu=void 0===t||t,this.Gu=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.Iu;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.Ru&&(this.Ru=n)}else this.Fu=n,this.Ru=n,this.Lu&&(n.next=n,n.prev=n);this.Iu=n,this.Gu++},t.prototype.removeItem=function(){var t=this.Iu;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.Iu=n||i,this.Fu===this.Ru?(this.Iu=void 0,this.Fu=void 0,this.Ru=void 0):this.Fu===t?this.Fu=this.Iu:this.Ru===t&&(this.Ru=i?this.Iu.prev:this.Iu),this.Gu--}},t.prototype.firstItem=function(){if(this.Iu=this.Fu,this.Iu)return this.Iu.data},t.prototype.lastItem=function(){if(this.Iu=this.Ru,this.Iu)return this.Iu.data},t.prototype.nextItem=function(){if(this.Iu&&this.Iu.next)return this.Iu=this.Iu.next,this.Iu.data},t.prototype.getNextItem=function(){if(this.Iu&&this.Iu.next)return this.Iu.next.data},t.prototype.prevItem=function(){if(this.Iu&&this.Iu.prev)return this.Iu=this.Iu.prev,this.Iu.data},t.prototype.getPrevItem=function(){if(this.Iu&&this.Iu.prev)return this.Iu.prev.data},t.prototype.getCurrItem=function(){if(this.Iu)return this.Iu.data},t.prototype.setFirstItem=function(){this.Lu&&this.Iu&&(this.Fu=this.Iu,this.Ru=this.Iu.prev)},t.prototype.concat=function(t){if(t.Iu){if(this.Iu){var n=this.Iu.next;this.Iu.next=t.Fu,t.Fu.prev=this.Iu,n.prev=t.Ru,t.Ru.next=n,this.Gu+=t.Gu}else this.Iu=t.Iu,this.Fu=t.Fu,this.Ru=t.Ru,this.Gu=t.Gu;t.Iu=void 0,t.Fu=void 0,t.Ru=void 0,t.Gu=0}},t.prototype.getLength=function(){return this.Gu},t}(),id=i(72),rd=function(){function t(t){this.Du=new id(t),this.zu={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.Du.insert(i),this.zu[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,e=n.length;r<e;r++){var s=t[r],u=n[r],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[r]=h,this.zu[o(u)]=h}this.Du.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.zu[n];return delete this.zu[n],null!==this.Du.remove(i)},t.prototype.update=function(t,n){var i=this.zu[o(n)];zn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.Du.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.Du.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.Uu(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.Uu(this.getInExtent(t),n)},t.prototype.Uu=function(t,n){for(var i,r=0,e=t.length;r<e;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return N(this.zu)},t.prototype.clear=function(){this.Du.clear(),this.zu={}},t.prototype.getExtent=function(t){var n=this.Du.toJSON();return In(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.Du.load(t.Du.all()),t.zu)this.zu[n]=t.zu[n]},t}(),ed="tileloadstart",od="tileloadend",sd="tileloaderror",ud=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function hd(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var fd=function(t){function n(n){var i=t.call(this)||this;i.projection=Sr(n.projection),i.Xu=hd(n.attributions),i.Bu=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.Xt=void 0!==n.state?n.state:bs,i.qu=void 0!==n.wrapX&&n.wrapX,i.Vu=!!n.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.Wu=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return ud(n,t),n.prototype.getAttributions=function(){return this.Xu},n.prototype.getAttributionsCollapsible=function(){return this.Bu},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.Wu},n.prototype.getState=function(){return this.Xt},n.prototype.getWrapX=function(){return this.qu},n.prototype.getInterpolate=function(){return this.Vu},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.Xu=hd(t),this.changed()},n.prototype.setState=function(t){this.Xt=t,this.changed()},n}(et),ad=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cd=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;i.on,i.once,i.un,i.Zu=void 0!==n.opaque&&n.opaque,i.Ds=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return i.tileGrid&&vh(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new ia(n.cacheSize||0),i.tmpSize=[0,0],i.ye=n.key||"",i.tileOptions={transition:n.transition,interpolate:n.interpolate},i.zDirection=n.zDirection?n.zDirection:0,i}return ad(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,s,u,h=!0,f=i.minX;f<=i.maxX;++f)for(var a=i.minY;a<=i.maxY;++a)s=Jf(n,f,a),u=!1,e.containsKey(s)&&(u=(o=e.get(s)).getState()===lt)&&(u=!1!==r(o)),u||(h=!1);return h},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.ye},n.prototype.setKey=function(t){this.ye!==t&&(this.ye=t,this.changed())},n.prototype.getOpaque=function(t){return this.Zu},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,n,i,e,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:$a(t)},n.prototype.getTileCacheForProjection=function(t){return Ot(Nr(this.getProjection(),t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.Ds},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),e=this.getTilePixelRatio(n),o=vh(r.getTileSize(t),this.tmpSize);return 1==e?o:ch(o,e,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Qa(r,t,i)),ta(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(fd),vd=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return ad(n,t),n}(c),ld=cd,dd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pd=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.Yu=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.Hu={},r}return dd(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.Hu[r]=!0,n=ed):r in this.Hu&&(delete this.Hu[r],n=e==dt?sd:e==lt?od:void 0),null!=n&&this.dispatchEvent(new vd(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=hc(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.Yu?this.setTileUrlFunction(oc(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Jf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(ld),wd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function yd(t,n){t.getImage().src=n}var gd=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:yd,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:r,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:Do,i.tileCacheForProjection={},i.tileGridForProjection={},i.Ju=n.reprojectionErrorThreshold,i.$u=!1,i}return wd(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[r];e.expireCache(e==i?n:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Nr(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!Nr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!Nr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=$a(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||Nr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new ia(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.Qu=function(t,n,i,r,e,o){var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),h=u?this.tileUrlFunction(u,r,e):void 0,f=new this.tileClass(s,void 0!==h?ct:pt,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(R,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,e){var o=this.getProjection();if(o&&e&&!Nr(o,e)){var s=this.getTileCacheForProjection(e),u=[t,n,i],h=void 0,f=$f(u);s.containsKey(f)&&(h=s.get(f));var a=this.getKey();if(h&&h.key==a)return h;var c=this.getTileGridForProjection(o),v=this.getTileGridForProjection(e),l=this.getTileCoordForTileUrlFunction(u,e),d=new xv(o,c,e,v,u,l,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.Ju,this.$u,this.getInterpolate());return d.key=a,h?(d.interimTile=h,d.refreshInterimChain(),s.replace(f,d)):s.set(f,d),d}return this.getTileInternal(t,n,i,r,o||e)},n.prototype.getTileInternal=function(t,n,i,r,e){var o=null,s=Jf(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=u){var h=o;o=this.Qu(t,n,i,r,e,u),h.getState()==ct?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.Qu(t,n,i,r,e,u),this.tileCache.set(s,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.$u!=t){for(var n in this.$u=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=Sr(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(pd),md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function bd(t){var n,i,r=t[0],e=new Array(r),o=1<<r-1;for(n=0;n<r;++n)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),e[n]=String.fromCharCode(i),o>>=1;return e.join("")}var _d=function(t){function n(n){var i=this,r=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(i=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:Sr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:ms,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Ku=r,i.th=void 0!==n.culture?n.culture:"en-us",i.nh=void 0!==n.maxZoom?n.maxZoom:-1,i.ih=n.key,i.rh=n.imagerySet,ma("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.rh+"?uriScheme=https&include=ImageryProviders&key="+i.ih+"&c="+i.th,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return md(n,t),n.prototype.getApiKey=function(){return this.ih},n.prototype.getImagerySet=function(){return this.rh},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],i=-1==this.nh?n.zoomMax:this.nh,r=rc(this.getProjection()),e=this.Ku?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],s=tc({extent:r,minZoom:n.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=s;var u=this.th,h=this.Ku;if(this.tileUrlFunction=sc(n.imageUrlSubdomains.map((function(t){var i=[0,0,0],r=n.imageUrl.replace("{subdomain}",t).replace("{culture}",u);return function(t,n,e){if(t){Hf(t[0],t[1],t[2],i);var o=r;return h&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",bd(i))}}}))),n.imageryProviders){var f=kr(Sr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(r.resolution,this.zDirection),s=e.getTileCoordForCoordAndZ(r.center,o)[0];return n.imageryProviders.map((function(n){for(var r=!1,e=n.coverageAreas,o=0,u=e.length;o<u;++o){var h=e[o];if(s>=h.zoomMin&&s<=h.zoomMax){var a=h.bbox;if(si(ci([a[1],a[0],a[3],a[2]],f),t.extent)){r=!0;break}}}r&&i.push(n.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}.bind(this))}this.setState(bs)}else this.setState(_s)},n}(gd),Md="addfeature",xd="changefeature",Od="clear",Sd="removefeature",jd="featuresloadstart",Ed="featuresloadend",Td="featuresloaderror",Ad=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cd=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.feature=i,e.features=r,e}return Ad(n,t),n}(c),Pd=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:bs,wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.T=j,i.eh=r.format,i.oh=void 0===r.overlaps||r.overlaps,i.sh=r.url,void 0!==r.loader?i.T=r.loader:void 0!==i.sh&&(Ot(i.eh,7),i.T=wa(i.sh,i.eh)),i.uh=void 0!==r.strategy?r.strategy:ya;var e,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.hh=s?new rd:null,i.fh=new rd,i.ah=0,i.lh={},i.dh={},i.ph={},i.wh={},i.yh=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(e=r.features).getArray()),s||void 0!==e||(e=new at(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==e&&i.gh(e),i}return Ad(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.mh(n,t)){this.bh(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.hh&&this.hh.insert(r,t)}else this.lh[n]=t;this.dispatchEvent(new Cd(Md,t))}else this.yh&&this.yh.remove(t)},n.prototype.bh=function(t,n){this.wh[t]=[H(n,R,this._h,this),H(n,v,this._h,this)]},n.prototype.mh=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.dh?i=!1:this.dh[r.toString()]=n),i&&(Ot(!(t in this.ph),30),this.ph[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],e=0,s=t.length;e<s;e++){var u=o(f=t[e]);this.mh(u,f)&&i.push(f)}e=0;for(var h=i.length;e<h;e++){var f;u=o(f=i[e]);this.bh(u,f);var a=f.getGeometry();if(a){var c=a.getExtent();n.push(c),r.push(f)}else this.lh[u]=f}if(this.hh&&this.hh.load(n,r),this.hasListener(Md)){e=0;for(var v=i.length;e<v;e++)this.dispatchEvent(new Cd(Md,i[e]))}},n.prototype.gh=function(t){var n=!1;this.addEventListener(Md,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(Sd,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(st,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.yh=t},n.prototype.clear=function(t){if(t){for(var n in this.wh){this.wh[n].forEach($)}this.yh||(this.wh={},this.dh={},this.ph={})}else if(this.hh){var i=function(t){this.removeFeatureInternal(t)}.bind(this);for(var r in this.hh.forEach(i),this.lh)this.removeFeatureInternal(this.lh[r])}this.yh&&this.yh.clear(),this.hh&&this.hh.clear(),this.lh={};var e=new Cd(Od);this.dispatchEvent(e),this.changed()},n.prototype.forEachFeature=function(t){if(this.hh)return this.hh.forEach(t);this.yh&&this.yh.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.hh)return this.hh.forEachInExtent(t,n);this.yh&&this.yh.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.yh},n.prototype.getFeatures=function(){var t;return this.yh?t=this.yh.getArray().slice(0):this.hh&&(t=this.hh.getAll(),N(this.lh)||m(t,P(this.lh))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t){return this.hh?this.hh.getInExtent(t):this.yh?this.yh.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],e=null,o=[NaN,NaN],s=1/0,u=[-1/0,-1/0,1/0,1/0],h=n||O;return this.hh.forEachInExtent(u,(function(t){if(h(t)){var n=t.getGeometry(),f=s;if((s=n.closestPointXY(i,r,o,s))<f){e=t;var a=Math.sqrt(s);u[0]=i-a,u[1]=r-a,u[2]=i+a,u[3]=r+a}}})),e},n.prototype.getExtent=function(t){return this.hh.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.dh[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.ph[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.eh},n.prototype.getOverlaps=function(){return this.oh},n.prototype.getUrl=function(){return this.sh},n.prototype._h=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var e=r.getExtent();i in this.lh?(delete this.lh[i],this.hh&&this.hh.insert(e,n)):this.hh&&this.hh.update(e,n)}else i in this.lh||(this.hh&&this.hh.remove(n),this.lh[i]=n);var s=n.getId();if(void 0!==s){var u=s.toString();this.dh[u]!==n&&(this.Mh(n),this.dh[u]=n)}else this.Mh(n),this.ph[i]=n;this.changed(),this.dispatchEvent(new Cd(xd,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.dh:o(t)in this.ph},n.prototype.isEmpty=function(){return this.hh?this.hh.isEmpty()&&N(this.lh):!this.yh||0===this.yh.getLength()},n.prototype.loadFeatures=function(t,n,i){for(var r=this.fh,e=this.uh(t,n,i),o=function(t,o){var u=e[t];r.forEachInExtent(u,(function(t){return Nn(t.extent,u)}))||(++s.ah,s.dispatchEvent(new Cd(jd)),s.T.call(s,u,n,i,function(t){--this.ah,this.dispatchEvent(new Cd(Ed,void 0,t))}.bind(s),function(){--this.ah,this.dispatchEvent(new Cd(Td))}.bind(s)),r.insert(u,{extent:u.slice()}))},s=this,u=0,h=e.length;u<h;++u)o(u);this.loading=!(this.T.length<4)&&this.ah>0},n.prototype.refresh=function(){this.clear(!0),this.fh.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.fh;i.forEachInExtent(t,(function(i){if(zn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.lh?delete this.lh[n]:this.hh&&this.hh.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var n=o(t),i=this.wh[n];if(i){i.forEach($),delete this.wh[n];var r=t.getId();return void 0!==r&&delete this.dh[r.toString()],delete this.ph[n],this.dispatchEvent(new Cd(Sd,t)),t}},n.prototype.Mh=function(t){var n=!1;for(var i in this.dh)if(this.dh[i]===t){delete this.dh[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.T=t},n.prototype.setUrl=function(t){Ot(this.eh,7),this.sh=t,this.setLoader(wa(t,this.eh))},n}(fd),Nd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kd=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return Ot(n.getType()==Nt,10),n},i.xh=n.createCluster,i.source=null,i.Oh=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return Nd(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(R,this.Oh),this.source=t,t&&t.addEventListener(R,this.Oh),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},e=0,s=i.length;e<s;e++){var u=i[e];if(!(o(u)in r)){var h=this.geometryFunction(u);if(h){Gn(h.getCoordinates(),t),Tn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var e=this.geometryFunction(t[r]);e?tr(i,e.getCoordinates()):t.splice(r,1)}ur(i,1/t.length);var o=Qn(n),s=this.interpolationRatio,u=new Ne([i[0]*(1-s)+o[0]*s,i[1]*(1-s)+o[1]*s]);return this.xh?this.xh(u,t):new Et({geometry:u,features:t})},n}(Pd),Fd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rd=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;return void 0===e&&r&&(e=tc({extent:rc(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:r,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).Hu={},i.T=n.loader,i.Zi=i.Zi.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return Fd(n,t),n.prototype.setLoader=function(t){this.T=t},n.prototype.getTile=function(t,n,i,r,e){var o=Jf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=this.T;var u=new xt(A({tileCoord:[t,n,i],loader:function(){return T((function(){return s(t,n,i)}))}},this.tileOptions));return u.key=this.getKey(),u.addEventListener(R,this.Zi),this.tileCache.set(o,u),u},n.prototype.Zi=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.Hu[r]=!0,n=ed):r in this.Hu&&(delete this.Hu[r],n=e==dt?sd:e==lt?od:void 0),n&&this.dispatchEvent(new vd(n,i))},n}(ld),Id=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ld=function(t){function n(n,i,r,e,o,s,u){var h=this,f=n.getExtent(),a=i.getExtent(),c=a?ii(r,a):r,v=Wa(n,i,Qn(c),e),l=new _v(n,i,c,f,.5*v,e),d=s(l.calculateSourceExtent(),v,o),p=d?_o:So,w=d?d.getPixelRatio():1;return(h=t.call(this,r,e,w,p)||this).ws=i,h.gs=f,h.Is=l,h.ii=e,h.Sh=r,h.jh=d,h.Eh=w,h.Vu=u,h.Et=null,h.Th=null,h}return Id(n,t),n.prototype.disposeInternal=function(){this.state==Mo&&this.Ah(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Et},n.prototype.getProjection=function(){return this.ws},n.prototype.Ls=function(){var t=this.jh.getState();if(t==xo){var n=oi(this.Sh)/this.ii,i=ni(this.Sh)/this.ii;this.Et=Ya(n,i,this.Eh,this.jh.getResolution(),this.gs,this.ii,this.Sh,this.Is,[{extent:this.jh.getExtent(),image:this.jh.getImage()}],0,void 0,this.Vu)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==_o){this.state=Mo,this.changed();var t=this.jh.getState();t==xo||t==Oo?this.Ls():(this.Th=H(this.jh,R,(function(t){var n=this.jh.getState();n!=xo&&n!=Oo||(this.Ah(),this.Ls())}),this),this.jh.load())}},n.prototype.Ah=function(){$(this.Th),this.Th=null},n}(bo),Gd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dd="imageloadstart",zd="imageloadend",Ud="imageloaderror",Xd=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Gd(n,t),n}(c);function Bd(t,n){t.getImage().src=n}var qd=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:r})||this).on,i.once,i.un,i.vi=void 0!==n.resolutions?n.resolutions:null,i.Ch=null,i.Ph=0,i}return Gd(n,t),n.prototype.getResolutions=function(){return this.vi},n.prototype.findNearestResolution=function(t){if(this.vi){var n=y(this.vi,t,0);t=this.vi[n]}return t},n.prototype.getImage=function(t,n,i,r){var e=this.getProjection();if(e&&r&&!Nr(e,r)){if(this.Ch){if(this.Ph==this.getRevision()&&Nr(this.Ch.getProjection(),r)&&this.Ch.getResolution()==n&&zn(this.Ch.getExtent(),t))return this.Ch;this.Ch.dispose(),this.Ch=null}return this.Ch=new Ld(e,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,e)}.bind(this),this.getInterpolate()),this.Ph=this.getRevision(),this.Ch}return e&&(r=e),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,e){return r()},n.prototype.handleImageChange=function(t){var n,i=t.target;switch(i.getState()){case Mo:this.loading=!0,n=Dd;break;case xo:this.loading=!1,n=zd;break;case Oo:this.loading=!1,n=Ud;break;default:return}this.hasListener(n)&&this.dispatchEvent(new Xd(n,i))},n}(fd),Vd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wd=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).At=void 0!==r.crossOrigin?r.crossOrigin:null,i.Ku=void 0===r.hidpi||r.hidpi,i.sh=r.url,i.xt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Bd,i.Nh=r.params||{},i._t=null,i.kh=[0,0],i.Fh=0,i.Rh=void 0!==r.ratio?r.ratio:1.5,i}return Vd(n,t),n.prototype.getParams=function(){return this.Nh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.sh)return null;n=this.findNearestResolution(n),i=this.Ku?i:1;var e=this._t;if(e&&this.Fh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&Nn(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};A(o,this.Nh);var s=((t=t.slice())[0]+t[2])/2,u=(t[1]+t[3])/2;if(1!=this.Rh){var h=this.Rh*oi(t)/2,f=this.Rh*ni(t)/2;t[0]=s-h,t[1]=u-f,t[2]=s+h,t[3]=u+f}var a=n/i,c=Math.ceil(oi(t)/a),v=Math.ceil(ni(t)/a);t[0]=s-a*c/2,t[2]=s+a*c/2,t[1]=u-a*v/2,t[3]=u+a*v/2,this.kh[0]=c,this.kh[1]=v;var l=this.Ih(t,this.kh,i,r,o);return this._t=new To(t,n,i,l,this.At,this.xt),this.Fh=this.getRevision(),this._t.addEventListener(R,this.handleImageChange.bind(this)),this._t},n.prototype.getImageLoadFunction=function(){return this.xt},n.prototype.Ih=function(t,n,i,r,e){var o=r.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*i);var s=this.sh,u=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==s&&Ot(!1,50),fc(u,e)},n.prototype.getUrl=function(){return this.sh},n.prototype.setImageLoadFunction=function(t){this._t=null,this.xt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.sh&&(this.sh=t,this._t=null,this.changed())},n.prototype.updateParams=function(t){A(this.Nh,t),this._t=null,this.changed()},n}(qd),Zd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yd=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).Lh=r.canvasFunction,i.Et=null,i.Fh=0,i.Rh=void 0!==r.ratio?r.ratio:1.5,i}return Zd(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var e=this.Et;if(e&&this.Fh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&Nn(e.getExtent(),t))return e;fi(t=t.slice(),this.Rh);var o=[oi(t)/n*i,ni(t)/n*i],s=this.Lh.call(this,t,n,i,o,r);return s&&(e=new Co(t,n,i,s)),this.Et=e,this.Fh=this.getRevision(),e},n}(qd),Hd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jd=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:Bd,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(i=t.call(this,{attributions:n.attributions,interpolate:o,projection:Sr(n.projection)})||this).sh=n.url,i.Gh=n.imageExtent,i._t=new To(i.Gh,void 0,1,i.sh,r,e),i.kh=n.imageSize?n.imageSize:null,i._t.addEventListener(R,i.handleImageChange.bind(i)),i}return Hd(n,t),n.prototype.getImageExtent=function(){return this.Gh},n.prototype.getImageInternal=function(t,n,i,r){return si(t,this._t.getExtent())?this._t:null},n.prototype.getUrl=function(){return this.sh},n.prototype.handleImageChange=function(n){if(this._t.getState()==xo){var i=this._t.getExtent(),r=this._t.getImage(),e=void 0,o=void 0;this.kh?(e=this.kh[0],o=this.kh[1]):(e=r.width,o=r.height);var s=oi(i),u=ni(i),h=s/e,f=u/o,a=e,c=o;if(h>f?a=Math.round(s/f):c=Math.round(u/h),a!==e||c!==o){var v=Po(a,c);this.getInterpolate()||A(v,Xa);var l=v.canvas;v.drawImage(r,0,0,e,o,0,0,l.width,l.height),this._t.setImage(l)}}t.prototype.handleImageChange.call(this,n)},n}(qd),$d="1.3.0",Qd="carmentaserver",Kd="geoserver",tp="mapserver",np="qgis",ip=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rp=[101,101],ep=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).At=void 0!==r.crossOrigin?r.crossOrigin:null,i.sh=r.url,i.xt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Bd,i.Nh=r.params||{},i.Dh=!0,i.zh(),i.Uh=r.serverType,i.Ku=void 0===r.hidpi||r.hidpi,i._t=null,i.kh=[0,0],i.Fh=0,i.Rh=void 0!==r.ratio?r.ratio:1.5,i}return ip(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){if(void 0!==this.sh){var e=Sr(i),o=this.getProjection();o&&o!==e&&(n=Wa(o,e,t,n),t=Rr(t,e,o));var s=ti(t,n,0,rp),u={SERVICE:"WMS",VERSION:$d,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Nh.LAYERS};A(u,this.Nh,r);var h=ji((t[0]-s[0])/n,4),f=ji((s[3]-t[1])/n,4);return u[this.Dh?"I":"X"]=h,u[this.Dh?"J":"Y"]=f,this.Ih(s,rp,1,o||e,u)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.sh){var i={SERVICE:"WMS",VERSION:$d,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Nh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return A(i,n),fc(this.sh,i)}},n.prototype.getParams=function(){return this.Nh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.sh)return null;n=this.findNearestResolution(n),1==i||this.Ku&&void 0!==this.Uh||(i=1);var e=n/i,o=Qn(t),s=ti(o,e,0,[Ei(oi(t)/e,4),Ei(ni(t)/e,4)]),u=ti(o,e,0,[Ei(this.Rh*oi(t)/e,4),Ei(this.Rh*ni(t)/e,4)]),h=this._t;if(h&&this.Fh==this.getRevision()&&h.getResolution()==n&&h.getPixelRatio()==i&&Nn(h.getExtent(),s))return h;var f={SERVICE:"WMS",VERSION:$d,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};A(f,this.Nh),this.kh[0]=Si(oi(u)/e,4),this.kh[1]=Si(ni(u)/e,4);var a=this.Ih(u,this.kh,i,r,f);return this._t=new To(u,n,i,a,this.At,this.xt),this.Fh=this.getRevision(),this._t.addEventListener(R,this.handleImageChange.bind(this)),this._t},n.prototype.getImageLoadFunction=function(){return this.xt},n.prototype.Ih=function(t,n,i,r,e){if(Ot(void 0!==this.sh,9),e[this.Dh?"CRS":"SRS"]=r.getCode(),"STYLES"in this.Nh||(e.STYLES=""),1!=i)switch(this.Uh){case Kd:var o=90*i+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case tp:e.MAP_RESOLUTION=90*i;break;case Qd:case np:e.DPI=90*i;break;default:Ot(!1,8)}e.WIDTH=n[0],e.HEIGHT=n[1];var s,u=r.getAxisOrientation();return s=this.Dh&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=s.join(","),fc(this.sh,e)},n.prototype.getUrl=function(){return this.sh},n.prototype.setImageLoadFunction=function(t){this._t=null,this.xt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.sh&&(this.sh=t,this._t=null,this.changed())},n.prototype.updateParams=function(t){A(this.Nh,t),this.zh(),this._t=null,this.changed()},n.prototype.zh=function(){var t=this.Nh.VERSION||$d;this.Dh=Ki(t,"1.3")>=0},n}(qd),op={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},sp={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function up(t,n){for(var i,r,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){i=o.href;break}op[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r}return i}function hp(t,n,i){for(var r,e,o={},s=0;s<t.length;++s){var u=t[s];if(o[u.type]=u.href,"item"===u.rel){if(u.type===n){r=u.href;break}sp[u.type]&&(e=u.href)}}if(!r&&i)for(s=0;s<i.length;++s){var h=i[s];if(o[h]){r=o[h];break}}if(!r){if(!e)throw new Error('Could not find "item" link');r=e}return r}function fp(t,n,i,r){var e=t.projection;if(!e&&!(e=Sr(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),s=n.tileMatrices,u={},h=0;h<s.length;++h){var f=s[h];u[f.id]=f}var a={},c=[];if(r)for(h=0;h<r.length;++h){var v=(m=r[h]).tileMatrix;c.push(v),a[v]=m}else for(h=0;h<s.length;++h){v=s[h].id;c.push(v)}var l=c.length,d=new Array(l),p=new Array(l),w=new Array(l),y=new Array(l),g=[-1/0,-1/0,1/0,1/0];for(h=0;h<l;++h){v=c[h];var m,b=(f=u[v]).pointOfOrigin;if(d[h]=o?[b[1],b[0]]:b,p[h]=f.cellSize,w[h]=[f.matrixWidth,f.matrixHeight],y[h]=[f.tileWidth,f.tileHeight],m=a[v]){var _=f.cellSize*f.tileWidth,M=d[h][0]+m.minTileCol*_,x=d[h][0]+(m.maxTileCol+1)*_,O=f.cellSize*f.tileHeight,S=void 0,j=void 0;"bottomLeft"===f.cornerOfOrigin?(S=d[h][1]+m.minTileRow*O,j=d[h][1]+(m.maxTileRow+1)*O):(S=d[h][1]-(m.maxTileRow+1)*O,j=d[h][1]-m.minTileRow*O),ii(g,[M,S,x,j],g)}}var E=new Ja({origins:d,resolutions:p,sizes:w,tileSizes:y,extent:r?g:void 0}),T=t.context,C=t.url;return{grid:E,urlTemplate:i,urlFunction:function(t,n,e){if(t){var o=c[t[0]],s=u[o],h="bottomLeft"===s.cornerOfOrigin,f={tileMatrix:o,tileCol:t[1],tileRow:h?-t[2]-1:t[2]};if(r){var v=a[s.id];if(f.tileCol<v.minTileCol||f.tileCol>v.maxTileCol||f.tileRow<v.minTileRow||f.tileRow>v.maxTileRow)return}A(f,T);var l=i.replace(/\{(\w+?)\}/g,(function(t,n){return f[n]}));return Oa(C,l)}}}}function ap(t){return xa(t.url).then((function(n){return function(t,n){var i,r=n.tileMatrixSetLimits;if("map"===n.dataType)i=up(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=hp(n.links,t.mediaType,t.supportedMediaTypes)}if(n.tileMatrixSet)return fp(t,n.tileMatrixSet,i,r);var e=n.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return xa(Oa(t.url,o)).then((function(n){return fp(t,n,i,r)}))}(t,n)}))}var cp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vp=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:ms,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,ap({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(i.Xh.bind(i)).catch(i.Bh.bind(i)),i}return cp(n,t),n.prototype.Xh=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(bs)},n.prototype.Bh=function(t){console.error(t),this.setState(_s)},n}(gd),lp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dp=function(t){function n(n){var i=n||{},r=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(r=i.interpolate);var e=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:tc({extent:rc(e),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:r,opaque:i.opaque,projection:e,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return lp(n,t),n}(gd),pp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wp='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',yp=function(t){function n(n){var i,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate),i=void 0!==r.attributions?r.attributions:[wp];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",s=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:s,wrapX:r.wrapX,zDirection:r.zDirection})||this}return pp(n,t),n}(dp),gp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mp=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return gp(n,t),n}(Os),bp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_p=null;var Mp,xp=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.gu=null,i.frameState=null,i}return bp(n,t),n.prototype.getImageData=function(t,n,i){var r,e;_p||((r=document.createElement("canvas")).width=1,r.height=1,_p=r.getContext("2d")),_p.clearRect(0,0,1,1);try{_p.drawImage(t,n,i,1,1,0,0,1,1),e=_p.getImageData(0,0,1,1).data}catch(t){return null}return e},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0},n.prototype.useContainer=function(t,n,i,r){var e,o,s=this.getLayer().getClassName();t&&t.className===s&&""===t.style.opacity&&1===i&&(!r||t.style.backgroundColor&&_(Wo(t.style.backgroundColor),Wo(r)))&&((h=t.firstElementChild)instanceof HTMLCanvasElement&&(o=h.getContext("2d")));if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(e=document.createElement("div")).className=s;var u=e.style;u.position="absolute",u.width="100%",u.height="100%",r&&(u.backgroundColor=r);var h=(o=Po()).canvas;e.appendChild(h),(u=h.style).position="absolute",u.left="0",u.transformOrigin="top left",this.container=e,this.context=o}},n.prototype.clipUnrotated=function(t,n,i){var r=ri(i),e=ei(i),o=$n(i),s=Jn(i);fn(n.coordinateToPixelTransform,r),fn(n.coordinateToPixelTransform,e),fn(n.coordinateToPixelTransform,o),fn(n.coordinateToPixelTransform,s);var u=this.inversePixelTransform;fn(u,r),fn(u,e),fn(u,o),fn(u,s),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},n.prototype.bu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var e=new As(t,this.inversePixelTransform,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.frameState=n,this.bu(ls,t,n)},n.prototype.postRender=function(t,n){this.bu(ds,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,e,o,s){var u=e/2,h=o/2,f=r/n,a=-f,c=-t[0]+s,v=-t[1];return ln(this.tempTransform,u,h,f,a,-i,c,v)},n.prototype.getDataAtPixel=function(t,n,i){var r=fn(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!Pn(o,fn(n.pixelToCoordinateTransform,t.slice())))return null;var s,u=Math.round(r[0]),h=Math.round(r[1]),f=this.gu;if(!f){var a=document.createElement("canvas");a.width=1,a.height=1,f=a.getContext("2d"),this.gu=f}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,u,h,1,1,0,0,1,1),s=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.gu=null,new Uint8Array):s}return 0===s[3]?null:s},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},n}(Dv),Op=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sp=function(t){function n(n){var i=t.call(this,n)||this;return i._t=null,i}return Op(n,t),n.prototype.getImage=function(){return this._t?this._t.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,e=r.resolution,o=this.getLayer().getSource(),s=t.viewHints,u=t.extent;if(void 0!==n.extent&&(u=ii(u,Br(n.extent,r.projection))),!s[zu]&&!s[Uu]&&!ui(u))if(o){var h=r.projection,f=o.getImage(u,e,i,h);f&&(this.loadImage(f)?this._t=f:f.getState()===So&&(this._t=null))}else this._t=null;return!!this._t},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=fn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!Pn(e,r))return null;var o=this._t.getExtent(),s=this._t.getImage(),u=oi(o),h=Math.floor(s.width*((r[0]-o[0])/u));if(h<0||h>=s.width)return null;var f=ni(o),a=Math.floor(s.height*((o[3]-r[1])/f));return a<0||a>=s.height?null:this.getImageData(s,h,a)},n.prototype.renderFrame=function(t,n){var i=this._t,r=i.getExtent(),e=i.getResolution(),o=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,h=t.viewState,f=h.center,a=h.resolution,c=t.size,v=u*e/(a*o),l=Math.round(c[0]*u),d=Math.round(c[1]*u),p=h.rotation;if(p){var w=Math.round(Math.sqrt(l*l+d*d));l=w,d=w}ln(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,p,-l/2,-d/2),dn(this.inversePixelTransform,this.pixelTransform);var y=wn(this.pixelTransform);this.useContainer(n,y,s.opacity,this.getBackground(t));var g=this.context,m=g.canvas;m.width!=l||m.height!=d?(m.width=l,m.height=d):this.containerReused||g.clearRect(0,0,l,d);var b=!1,_=!0;if(s.extent){var M=Br(s.extent,h.projection);(b=(_=si(M,t.extent))&&!Nn(M,t.extent))&&this.clipUnrotated(g,t,M)}var x=i.getImage(),O=ln(this.tempTransform,l/2,d/2,v,v,0,o*(r[0]-f[0])/e,o*(f[1]-r[3])/e);this.renderedResolution=e*u/o;var S=x.width*O[0],j=x.height*O[3];if(this.getLayer().getSource().getInterpolate()||A(g,Xa),this.preRender(g,t),_&&S>=.5&&j>=.5){var E=O[4],T=O[5],C=s.opacity,P=void 0;1!==C&&(P=g.globalAlpha,g.globalAlpha=C),g.drawImage(x,0,0,+x.width,+x.height,Math.round(E),Math.round(T),Math.round(S),Math.round(j)),1!==C&&(g.globalAlpha=P)}return this.postRender(g,t),b&&g.restore(),A(g,Ba),y!==m.style.transform&&(m.style.transform=y),this.container},n}(xp),jp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ep=function(t){function n(n){return t.call(this,n)||this}return jp(n,t),n.prototype.createRenderer=function(){return new Sp(this)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(mp),Tp="preload",Ap="useInterimTilesOnError",Cp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pp=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return Cp(n,t),n.prototype.getPreload=function(){return this.get(Tp)},n.prototype.setPreload=function(t){this.set(Tp,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(Ap)},n.prototype.setUseInterimTilesOnError=function(t){this.set(Ap,t)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(Os),Np=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kp=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.qh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.Vh=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.Wh=new oa(0,0,0,0),i}return Np(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==lt||i==pt||i==dt&&!r},n.prototype.getTile=function(t,n,i,r){var e=r.pixelRatio,o=r.viewState.projection,s=this.getLayer(),u=s.getSource().getTile(t,n,i,e,o);return u.getState()==dt&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.Vh=!0):u.setState(lt)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=fn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!Pn(e,r))return null;for(var o=n.pixelRatio,s=n.viewState.projection,u=n.viewState,h=i.getRenderSource(),f=h.getTileGridForProjection(u.projection),a=h.getTilePixelRatio(n.pixelRatio),c=f.getZForResolution(u.resolution);c>=f.getMinZoom();--c){var v=f.getTileCoordForCoordAndZ(r,c),l=h.getTile(c,v[1],v[2],o,s);if(!(l instanceof Do||l instanceof xv))return null;if(l.getState()===lt){var d=f.getOrigin(c),p=vh(f.getTileSize(c)),w=f.getResolution(c),y=Math.floor(a*((r[0]-d[0])/w-v[1]*p[0])),g=Math.floor(a*((d[1]-r[1])/w-v[2]*p[1]));return this.getImageData(l.getImage(),y,g)}}return null},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,e=r.projection,s=r.resolution,u=r.center,h=r.rotation,f=t.pixelRatio,a=this.getLayer(),c=a.getSource(),v=c.getRevision(),l=c.getTileGridForProjection(e),d=l.getZForResolution(s,c.zDirection),w=l.getResolution(d),y=t.extent,g=i.extent&&Br(i.extent,e);g&&(y=ii(y,Br(i.extent,e)));var m=c.getTilePixelRatio(f),b=Math.round(t.size[0]*m),_=Math.round(t.size[1]*m);if(h){var M=Math.round(Math.sqrt(b*b+_*_));b=M,_=M}var x=w*b/2/m,O=w*_/2/m,S=[u[0]-x,u[1]-O,u[0]+x,u[1]+O],j=l.getTileRangeForExtentAndZ(y,d),E={};E[d]={};var T=this.createLoadedTileFinder(c,e,E),C=this.tmpExtent,P=this.Wh;this.Vh=!1;for(var N=j.minX;N<=j.maxX;++N)for(var k=j.minY;k<=j.maxY;++k){var F=this.getTile(d,N,k,t);if(this.isDrawableTile(F)){var R=o(this);if(F.getState()==lt){E[d][F.tileCoord.toString()]=F;var I=F.inTransition(R);this.Vh||!I&&-1!==this.renderedTiles.indexOf(F)||(this.Vh=!0)}if(1===F.getAlpha(R,t.time))continue}var L=l.getTileCoordChildTileRange(F.tileCoord,P,C),G=!1;L&&(G=T(d+1,L)),G||l.forEachTileCoordParentTileRange(F.tileCoord,T,P,C)}var D=w/s;ln(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,h,-b/2,-_/2);var z=wn(this.pixelTransform);this.useContainer(n,z,i.opacity,this.getBackground(t));var U=this.context,X=U.canvas;dn(this.inversePixelTransform,this.pixelTransform),ln(this.tempTransform,b/2,_/2,D,D,0,-b/2,-_/2),X.width!=b||X.height!=_?(X.width=b,X.height=_):this.containerReused||U.clearRect(0,0,b,_),g&&this.clipUnrotated(U,t,g),c.getInterpolate()||A(U,Xa),this.preRender(U,t),this.renderedTiles.length=0;var B,q,V,W=Object.keys(E).map(Number);W.sort(p),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],q=[]):W=W.reverse();for(var Z=W.length-1;Z>=0;--Z){var Y=W[Z],H=c.getTilePixelSize(Y,f,e),J=l.getResolution(Y)/w,$=H[0]*J*D,Q=H[1]*J*D,K=l.getTileCoordForCoordAndZ(ri(S),Y),tt=l.getTileCoordExtent(K),nt=fn(this.tempTransform,[m*(tt[0]-S[0])/w,m*(S[3]-tt[3])/w]),it=m*c.getGutterForProjection(e),rt=E[Y];for(var et in rt){var ot=(F=rt[et]).tileCoord,st=K[1]-ot[1],ut=Math.round(nt[0]-(st-1)*$),ht=K[2]-ot[2],ft=Math.round(nt[1]-(ht-1)*Q),at=ut-(N=Math.round(nt[0]-st*$)),ct=ft-(k=Math.round(nt[1]-ht*Q)),vt=d===Y,dt=!1;if(!(I=vt&&1!==F.getAlpha(o(this),t.time)))if(B){V=[N,k,N+at,k,N+at,k+ct,N,k+ct];for(var pt=0,wt=B.length;pt<wt;++pt)if(d!==Y&&Y<q[pt]){var yt=B[pt];si([N,k,N+at,k+ct],[yt[0],yt[3],yt[4],yt[7]])&&(dt||(U.save(),dt=!0),U.beginPath(),U.moveTo(V[0],V[1]),U.lineTo(V[2],V[3]),U.lineTo(V[4],V[5]),U.lineTo(V[6],V[7]),U.moveTo(yt[6],yt[7]),U.lineTo(yt[4],yt[5]),U.lineTo(yt[2],yt[3]),U.lineTo(yt[0],yt[1]),U.clip())}B.push(V),q.push(Y)}else U.clearRect(N,k,at,ct);this.drawTileImage(F,t,N,k,at,ct,it,vt),B&&!I?(dt&&U.restore(),this.renderedTiles.unshift(F)):this.renderedTiles.push(F),this.updateUsedTiles(t.usedTiles,c,F)}}this.renderedRevision=v,this.renderedResolution=w,this.extentChanged=!this.qh||!zn(this.qh,S),this.qh=S,this.renderedPixelRatio=f,this.renderedProjection=e,this.manageTilePyramid(t,c,l,f,e,y,d,a.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),i.extent&&U.restore(),A(U,Ba),z!==X.style.transform&&(X.style.transform=z);var gt=Ds(i.opacity),mt=this.container;return gt!==mt.style.opacity&&(mt.style.opacity=gt),this.container},n.prototype.drawTileImage=function(t,n,i,r,e,s,u,h){var f=this.getTileImage(t);if(f){var a=o(this),c=h?t.getAlpha(a,n.time):1,v=c!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,u,u,f.width-2*u,f.height-2*u,i,r,e,s),v&&this.context.restore(),1!==c?n.animate=!0:h&&t.endTransition(a)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,e,s,u,h,f){var a=o(n);a in t.wantedTiles||(t.wantedTiles[a]={});var c,v,l,d,p,w,y=t.wantedTiles[a],g=t.tileQueue,m=0;for(w=i.getMinZoom();w<=u;++w)for(v=i.getTileRangeForExtentAndZ(s,w,v),l=i.getResolution(w),d=v.minX;d<=v.maxX;++d)for(p=v.minY;p<=v.maxY;++p)u-w<=h?(++m,(c=n.getTile(w,d,p,r,e)).getState()==ct&&(y[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,a,i.getTileCoordCenter(c.tileCoord),l])),void 0!==f&&f(c)):n.useTile(w,d,p,e);n.updateCacheSize(m,e)},n}(xp),Fp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rp=function(t){function n(n){return t.call(this,n)||this}return Fp(n,t),n.prototype.createRenderer=function(){return new kp(this)},n}(Pp),Ip=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lp=!0;try{new ImageData(10,10)}catch(t){Lp=!1}function Gp(t,n,i){if(Lp)return new ImageData(t,n,i);Mp||(Mp=document.createElement("canvas").getContext("2d"));var r=Mp.createImageData(n,i);return r.data.set(t),r}function Dp(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,e=n.meta,o=n.imageOps,s=n.width,u=n.height,h=r.length,f=r[0].byteLength;if(o){for(var a=new Array(h),c=0;c<h;++c)a[c]=i(new Uint8ClampedArray(r[c]),s,u);return t(a,e).data.buffer}var v=new Uint8ClampedArray(f),l=new Array(h),d=new Array(h);for(c=0;c<h;++c)l[c]=new Uint8ClampedArray(r[c]),d[c]=[0,0,0,0];for(var p=0;p<f;p+=4){for(var w=0;w<h;++w){var y=l[w];d[w][0]=y[p],d[w][1]=y[p+1],d[w][2]=y[p+2],d[w][3]=y[p+3]}var g=t(d,e);v[p]=g[0],v[p+1]=g[1],v[p+2]=g[2],v[p+3]=g[3]}return v.buffer}}function zp(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+Dp.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r}var Up=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var e=new Array(i);if(i)for(var o=0;o<i;++o)e[o]=zp(n,r._onWorkerMessage.bind(r,o));else e[0]=function(t,n){var i=Dp(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=e,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return Ip(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/e),u=0;u<e;++u){for(var h=u*s,f=[],a=0,c=r.length;a<c;++a)f.push(r[a].slice(h,h+s));this._workers[u].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:i},f)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=i.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(r);for(var o=4*Math.ceil(e/4/r),s=0;s<r;++s){var u=this._dataLookup[s].buffer,h=s*o;t.set(new Uint8ClampedArray(u),h),n[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,Gp(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(l),Xp="beforeoperations",Bp="afteroperations",qp="pixel",Vp="image",Wp=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.extent=i.extent,e.resolution=i.viewState.resolution/i.pixelRatio,e.data=r,e}return Ip(n,t),n}(c),Zp=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.Zh=null,i.Yh=void 0!==n.operationType?n.operationType:qp,i.Hh=void 0!==n.threads?n.threads:1,i.Jh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Jp(t[r]);return i}(n.sources);for(var r,e=i.changed.bind(i),s=0,u=i.Jh.length;s<u;++s)i.Jh[s].addEventListener(R,e);return i.Wi=new Gu((function(){return 1}),i.changed.bind(i)),i.$h,i.Qh=null,i.Fh,i.Ni={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.Jh,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.Wi,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(i),renderTargets:{}},i.setAttributions((function(t){for(var i=[],r=0,e=n.sources.length;r<e;++r){var o=n.sources[r],s=(o instanceof fd?o:o.getSource()).getAttributions();if("function"==typeof s){var u=s(t);i.push.apply(i,u)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return Ip(n,t),n.prototype.setOperation=function(t,n){this.Zh&&this.Zh.dispose(),this.Zh=new Up({operation:t,imageOps:this.Yh===Vp,queue:1,lib:n,threads:this.Hh}),this.changed()},n.prototype.Kh=function(t,n,i){var r=A({},this.Ni);r.viewState=A({},r.viewState);var e=Qn(t);r.extent=t.slice(),r.size[0]=Math.round(oi(t)/n),r.size[1]=Math.round(ni(t)/n),r.time=Date.now();var o=r.viewState;return o.center=e,o.projection=i,o.resolution=n,r},n.prototype.tf=function(){for(var t=!0,n=0,i=this.Jh.length;n<i;++n)if(this.Jh[n].getSource().getState()!==bs){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.tf())return null;var e=this.Kh(t,n,r);if(this.$h=e,this.Qh){var o=this.Qh.getResolution(),s=this.Qh.getExtent();n===o&&zn(t,s)||(this.Qh=null)}return this.Qh&&this.getRevision()===this.Fh||this.nf(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.Qh},n.prototype.nf=function(){for(var t=this.$h,n=this.Jh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var e=Hp(this.Jh[r],t);if(!e)return;i[r]=e}var o={};this.dispatchEvent(new Wp(Xp,t,o)),this.Zh.process(i,o,this.if.bind(this,t))},n.prototype.if=function(t,n,i,r){if(!n&&i){var e=t.extent,o=t.viewState.resolution;if(o===this.$h.viewState.resolution&&zn(e,this.$h.extent)){var s;if(this.Qh)s=this.Qh.getImage().getContext("2d");else s=Po(Math.round(oi(e)/o),Math.round(ni(e)/o)),this.Qh=new Co(e,o,1,s.canvas);s.putImageData(i,0,0),this.changed(),this.Fh=this.getRevision(),this.dispatchEvent(new Wp(Bp,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.Zh&&this.Zh.dispose(),t.prototype.disposeInternal.call(this)},n}(qd);Zp.prototype.dispose;var Yp=null;function Hp(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],e=n.size[1];if(0===r||0===e)return null;var o,s=i.renderFrame(n,null);if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===e)return o.getContext("2d").getImageData(0,0,r,e)}if(Yp){var u=Yp.canvas;u.width!==r||u.height!==e?Yp=Po(r,e):Yp.clearRect(0,0,r,e)}else Yp=Po(r,e);return Yp.drawImage(o,0,0,r,e),Yp.getImageData(0,0,r,e)}function Jp(t){var n;return t instanceof fd?t instanceof ld?n=new Rp({source:t}):t instanceof qd&&(n=new Ep({source:t})):n=t,n}var $p=Zp,Qp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kp=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',wp],tw={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},nw={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},iw=function(t){function n(n){var i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=n.layer.indexOf("-"),e=-1==r?n.layer:n.layer.slice(0,r),o=nw[e],s=tw[n.layer],u=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+s.extension;return t.call(this,{attributions:Kp,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:i,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:s.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:u,wrapX:n.wrapX,zDirection:n.zDirection})||this}return Qp(n,t),n}(dp),rw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ew=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).Nh=r.params||{},i.Ku=void 0===r.hidpi||r.hidpi,i.fo=[1/0,1/0,-1/0,-1/0],i.setKey(i.rf()),i}return rw(n,t),n.prototype.rf=function(){var t=0,n=[];for(var i in this.Nh)n[t++]=i+"-"+this.Nh[i];return n.join("/")},n.prototype.getParams=function(){return this.Nh},n.prototype.Ih=function(t,n,i,r,e,o){var s=this.urls;if(s){var u,h=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=i.join(","),o.BBOXSR=h,o.IMAGESR=h,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)u=s[0];else u=s[Mi(Kf(t),s.length)];return fc(u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},n.prototype.getTilePixelRatio=function(t){return this.Ku?t:1},n.prototype.updateParams=function(t){A(this.Nh,t),this.setKey(this.rf())},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Ku||(n=1);var e=r.getTileCoordExtent(t,this.fo),o=vh(r.getTileSize(t[0]),this.tmpSize);1!=n&&(o=ch(o,n,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return A(s,this.Nh),this.Ih(t,o,e,n,i,s)}},n}(gd),ow=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sw=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],e=vh(i.tileGrid.getTileSize(r)),o=Po(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas)}})||this}return ow(n,t),n}(dp),uw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:Sr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:ms,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).ef=null,i.so=n.tileSize,n.url)if(n.jsonp)ma(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var e=new XMLHttpRequest;e.addEventListener("load",i.sf.bind(i)),e.addEventListener("error",i.uf.bind(i)),e.open("GET",n.url),e.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return i}return uw(n,t),n.prototype.sf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.uf=function(t){this.handleTileJSONError()},n.prototype.getTileJSON=function(){return this.ef},n.prototype.handleTileJSONResponse=function(t){var n,i=Sr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=kr(i,r);n=ci(t.bounds,e)}var o=rc(r),s=t.minzoom||0,u=tc({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.so});if(this.tileGrid=u,this.tileUrlFunction=oc(t.tiles,u),void 0!==t.attribution&&!this.getAttributions()){var h=void 0!==n?n:o;this.setAttributions((function(n){return si(h,n.extent)?[t.attribution]:null}))}this.ef=t,this.setState(bs)},n.prototype.handleTileJSONError=function(){this.setState(_s)},n}(gd),fw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),aw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.params||{},s=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).As=void 0!==r.gutter?r.gutter:0,i.Nh=o,i.Dh=!0,i.Uh=r.serverType,i.Ku=void 0===r.hidpi||r.hidpi,i.fo=[1/0,1/0,-1/0,-1/0],i.zh(),i.setKey(i.rf()),i}return fw(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var e=Sr(i),o=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(e));var u=s.getZForResolution(n,this.zDirection),h=s.getTileCoordForCoordAndZ(t,u);if(!(s.getResolutions().length<=h[0])){var f=s.getResolution(h[0]),a=s.getTileCoordExtent(h,this.fo),c=vh(s.getTileSize(h[0]),this.tmpSize),v=this.As;0!==v&&(c=fh(c,v,this.tmpSize),a=Tn(a,f*v,a)),o&&o!==e&&(f=Wa(o,e,t,f),a=Ir(a,e,o),t=Rr(t,e,o));var l={SERVICE:"WMS",VERSION:$d,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Nh.LAYERS};A(l,this.Nh,r);var d=Math.floor((t[0]-a[0])/f),p=Math.floor((a[3]-t[1])/f);return l[this.Dh?"I":"X"]=d,l[this.Dh?"J":"Y"]=p,this.Ih(h,c,a,1,o||e,l)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:$d,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Nh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return A(i,n),fc(this.urls[0],i)}},n.prototype.getGutter=function(){return this.As},n.prototype.getParams=function(){return this.Nh},n.prototype.Ih=function(t,n,i,r,e,o){var s=this.urls;if(s){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Dh?"CRS":"SRS"]=e.getCode(),"STYLES"in this.Nh||(o.STYLES=""),1!=r)switch(this.Uh){case Kd:var u=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case tp:o.MAP_RESOLUTION=90*r;break;case Qd:case np:o.DPI=90*r;break;default:Ot(!1,52)}var h,f=e.getAxisOrientation(),a=i;if(this.Dh&&"ne"==f.substr(0,2)){var c=void 0;c=i[0],a[0]=i[1],a[1]=c,c=i[2],a[2]=i[3],a[3]=c}if(o.BBOX=a.join(","),1==s.length)h=s[0];else h=s[Mi(Kf(t),s.length)];return fc(h,o)}},n.prototype.getTilePixelRatio=function(t){return this.Ku&&void 0!==this.Uh?t:1},n.prototype.rf=function(){var t=0,n=[];for(var i in this.Nh)n[t++]=i+"-"+this.Nh[i];return n.join("/")},n.prototype.updateParams=function(t){A(this.Nh,t),this.zh(),this.setKey(this.rf())},n.prototype.zh=function(){var t=this.Nh.VERSION||$d;this.Dh=Ki(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Ku&&void 0!==this.Uh||(n=1);var e=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.fo),s=vh(r.getTileSize(t[0]),this.tmpSize),u=this.As;0!==u&&(s=fh(s,u,this.tmpSize),o=Tn(o,e*u,o)),1!=n&&(s=ch(s,n,this.tmpSize));var h={SERVICE:"WMS",VERSION:$d,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return A(h,this.Nh),this.Ih(t,s,o,n,i,h)}},n}(gd),cw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vw=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i)||this;return u.bt=r,u.q=e,u.hf=o,u.ff=null,u.af=null,u.A=null,u.cf=s,u}return cw(n,t),n.prototype.getImage=function(){return null},n.prototype.getData=function(t){if(!this.ff||!this.af)return null;var n=(t[0]-this.q[0])/(this.q[2]-this.q[0]),i=(t[1]-this.q[1])/(this.q[3]-this.q[1]),r=this.ff[Math.floor((1-i)*this.ff.length)];if("string"!=typeof r)return null;var e=r.charCodeAt(Math.floor(n*r.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.af){var s=this.af[e];o=this.A&&s in this.A?this.A[s]:s}return o},n.prototype.forDataAtCoordinate=function(t,n,i){this.state==pt&&!0===i?(this.state=ct,J(this,R,(function(i){n(this.getData(t))}),this),this.vf()):!0===i?setTimeout(function(){n(this.getData(t))}.bind(this),0):n(this.getData(t))},n.prototype.getKey=function(){return this.bt},n.prototype.Bh=function(){this.state=dt,this.changed()},n.prototype.Tt=function(t){this.ff=t.grid,this.af=t.keys,this.A=t.data,this.state=lt,this.changed()},n.prototype.vf=function(){if(this.state==ct)if(this.state=vt,this.cf)ma(this.bt,this.Tt.bind(this),this.Bh.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.sf.bind(this)),t.addEventListener("error",this.uf.bind(this)),t.open("GET",this.bt),t.send()}},n.prototype.sf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.Bh()}this.Tt(i)}else this.Bh()},n.prototype.uf=function(t){this.Bh()},n.prototype.load=function(){this.hf?this.vf():this.setState(pt)},n}(_t),lw=function(t){function n(n){var i=t.call(this,{projection:Sr("EPSG:3857"),state:ms,zDirection:n.zDirection})||this;if(i.hf=void 0===n.preemptive||n.preemptive,i.lf=uc,i.df=void 0,i.cf=n.jsonp||!1,n.url)if(i.cf)ma(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var r=new XMLHttpRequest;r.addEventListener("load",i.sf.bind(i)),r.addEventListener("error",i.uf.bind(i)),r.open("GET",n.url),r.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return i}return cw(n,t),n.prototype.sf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.uf=function(t){this.handleTileJSONError()},n.prototype.getTemplate=function(){return this.df},n.prototype.forDataAtCoordinateAndResolution=function(t,n,i,r){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r)}else!0===r?setTimeout((function(){i(null)}),0):i(null)},n.prototype.handleTileJSONError=function(){this.setState(_s)},n.prototype.handleTileJSONResponse=function(t){var n,i=Sr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=kr(i,r);n=ci(t.bounds,e)}var o=rc(r),s=t.minzoom||0,u=tc({extent:o,maxZoom:t.maxzoom||22,minZoom:s});this.tileGrid=u,this.df=t.template;var h=t.grids;if(h){if(this.lf=oc(h,u),void 0!==t.attribution){var f=void 0!==n?n:o;this.setAttributions((function(n){return si(f,n.extent)?[t.attribution]:null}))}this.setState(bs)}else this.setState(_s)},n.prototype.getTile=function(t,n,i,r,e){var o=Jf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),h=this.lf(u,r,e),f=new vw(s,void 0!==h?ct:pt,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.hf,this.cf);return this.tileCache.set(o,f),f},n.prototype.useTile=function(t,n,i){var r=Jf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(ld),dw="KVP",pw="REST",ww=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:dw,o=n.tileGrid,s=n.urls;return void 0===s&&void 0!==n.url&&(s=hc(n.url)),(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:s,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).pf=void 0!==n.version?n.version:"1.0.0",i.eh=void 0!==n.format?n.format:"image/jpeg",i.wf=void 0!==n.dimensions?n.dimensions:{},i.qs=n.layer,i.yf=n.matrixSet,i.k=n.style,i.gf=e,i.setKey(i.mf()),s&&s.length>0&&(i.tileUrlFunction=sc(s.map(i.createFromWMTSTemplate.bind(i)))),i}return ww(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(sc(t.map(this.createFromWMTSTemplate.bind(this))),n)},n.prototype.getDimensions=function(){return this.wf},n.prototype.getFormat=function(){return this.eh},n.prototype.getLayer=function(){return this.qs},n.prototype.getMatrixSet=function(){return this.yf},n.prototype.getRequestEncoding=function(){return this.gf},n.prototype.getStyle=function(){return this.k},n.prototype.getVersion=function(){return this.pf},n.prototype.mf=function(){var t=0,n=[];for(var i in this.wf)n[t++]=i+"-"+this.wf[i];return n.join("/")},n.prototype.updateDimensions=function(t){A(this.wf,t),this.setKey(this.mf())},n.prototype.createFromWMTSTemplate=function(t){var n=this.gf,i={layer:this.qs,style:this.k,tilematrixset:this.yf};n==dw&&A(i,{Service:"WMTS",Request:"GetTile",Version:this.pf,Format:this.eh}),t=n==dw?fc(t,i):t.replace(/\{(\w+?)\}/g,(function(t,n){return n.toLowerCase()in i?i[n.toLowerCase()]:t}));var r=this.tileGrid,e=this.wf;return function(i,o,s){if(i){var u={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};A(u,e);var h=t;return h=n==dw?fc(h,u):h.replace(/\{(\w+?)\}/g,(function(t,n){return u[n]}))}}},n}(gd);var gw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mw="default",bw="truncated",_w=function(t){function n(n,i,r,e,o,s,u){var h=t.call(this,i,r,e,o,s,u)||this;return h.bf=null,h.so=n,h}return gw(n,t),n.prototype.getImage=function(){if(this.bf)return this.bf;var n=t.prototype.getImage.call(this);if(this.state==lt){var i=this.so;if(n.width==i[0]&&n.height==i[1])return this.bf=n,n;var r=Po(i[0],i[1]);return r.drawImage(n,0,0),this.bf=r.canvas,r.canvas}return n},n}(Do),Mw=function(t){function n(n){var i=this,r=n,e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.size,s=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:mw,u=r.tilePixelRatio||1,h=o[0],f=o[1],a=[],c=r.tileSize||Bu,v=c*u;switch(s){case mw:for(;h>v||f>v;)a.push([Math.ceil(h/v),Math.ceil(f/v)]),v+=v;break;case bw:for(var l=h,d=f;l>v||d>v;)a.push([Math.ceil(l/v),Math.ceil(d/v)]),l>>=1,d>>=1;break;default:Ot(!1,53)}a.push([1,1]),a.reverse();for(var p=[u],w=[0],y=1,g=a.length;y<g;y++)p.push(u<<y),w.push(a[y-1][0]*a[y-1][1]+w[y-1]);p.reverse();var m=new Ja({tileSize:c,extent:r.extent||[0,-f,h,0],resolutions:p}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var _=hc(b),M=c*u;var x=sc(_.map((function(t){return function(n,i,r){if(n){var e=n[0],o=n[1],s=n[2],u=o+s*a[e][0],h={z:e,x:o,y:s,tileIndex:u,TileGroup:"TileGroup"+((u+w[e])/M|0)};return t.replace(/\{(\w+?)\}/g,(function(t,n){return h[n]}))}}}))),O=_w.bind(null,vh(c*u));(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,tilePixelRatio:u,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:O,tileGrid:m,tileUrlFunction:x,transition:r.transition})||this).zDirection=r.zDirection;var S=x(m.getTileCoordForCoordAndResolution(Qn(m.getExtent()),p[p.length-1]),1,null),j=new Image;return j.addEventListener("error",function(){M=c,this.changed()}.bind(i)),j.src=S,i}return gw(n,t),n}(gd),xw={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ow=[xw.FILL],Sw=[xw.STROKE],jw=[xw.BEGIN_PATH],Ew=[xw.CLOSE_PATH],Tw=xw,Aw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cw=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=r,o._f=null,o.Mf=null,o.xf=null,o.instructions=[],o.coordinates=[],o.Of=[],o.hitDetectionInstructions=[],o.state={},o}return Aw(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.Of,e=this.coordinates,o=e.length,s=0,u=t.length;s<u;s+=n)r[0]=t[s],r[1]=t[s+1],Pn(i,r)&&(e[o++]=r[0],e[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,e,o){var s=this.coordinates,u=s.length,h=this.getBufferedMaxExtent();o&&(n+=r);var f,a,c,v=t[n],l=t[n+1],d=this.Of,p=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(c=Fn(h,d))!==a?(p&&(s[u++]=v,s[u++]=l,p=!1),s[u++]=d[0],s[u++]=d[1]):c===Mn?(s[u++]=d[0],s[u++]=d[1],p=!1):p=!0,v=d[0],l=d[1],a=c;return(e&&p||f===n+r)&&(s[u++]=v,s[u++]=l),u},n.prototype.Sf=function(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o],h=this.appendFlatLineCoordinates(t,n,u,r,!1,!1);e.push(h),n=u}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var e,o,s,u,h,f=t.getType(),a=t.getStride(),c=this.coordinates.length;switch(f){case Gt:e=t.getOrientedFlatCoordinates(),u=[];var v=t.getEndss();h=0;for(var l=0,d=v.length;l<d;++l){var p=[];h=this.Sf(e,h,v[l],a,p),u.push(p)}this.instructions.push([Tw.CUSTOM,c,u,t,i,Se]),this.hitDetectionInstructions.push([Tw.CUSTOM,c,u,t,r||i,Se]);break;case Rt:case Lt:s=[],e=f==Rt?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.Sf(e,0,t.getEnds(),a,s),this.instructions.push([Tw.CUSTOM,c,s,t,i,Oe]),this.hitDetectionInstructions.push([Tw.CUSTOM,c,s,t,r||i,Oe]);break;case kt:case zt:e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,a,!1,!1),this.instructions.push([Tw.CUSTOM,c,o,t,i,xe]),this.hitDetectionInstructions.push([Tw.CUSTOM,c,o,t,r||i,xe]);break;case It:e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,a))>c&&(this.instructions.push([Tw.CUSTOM,c,o,t,i,xe]),this.hitDetectionInstructions.push([Tw.CUSTOM,c,o,t,r||i,xe]));break;case Nt:e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([Tw.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([Tw.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this._f=[Tw.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this._f),this.Mf=[Tw.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Mf)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,e=n.length,o=-1;for(t=0;t<e;++t)(r=(i=n[t])[0])==Tw.END_GEOMETRY?o=t:r==Tw.BEGIN_GEOMETRY&&(i[2]=t,g(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=fa(r||Us)}else i.fillStyle=void 0;if(n){var e=n.getColor();i.strokeStyle=fa(e||Ws);var o=n.getLineCap();i.lineCap=void 0!==o?o:Xs;var s=n.getLineDash();i.lineDash=s?s.slice():Bs;var u=n.getLineDashOffset();i.lineDashOffset=u||0;var h=n.getLineJoin();i.lineJoin=void 0!==h?h:qs;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var a=n.getMiterLimit();i.miterLimit=void 0!==a?a:Vs,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.xf=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[Tw.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[Tw.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,e=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||e!=t.currentLineDash&&!_(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=h)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this._f[2]=this.instructions.length,this._f=null,this.Mf[2]=this.hitDetectionInstructions.length,this.Mf=null;var n=[Tw.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.xf&&(this.xf=An(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Tn(this.xf,t,this.xf)}return this.xf},n}(Sa),Pw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nw=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.ko=null,o._t=null,o.jf=void 0,o.Ef=void 0,o.Tf=void 0,o.Af=void 0,o.do=void 0,o.Cf=void 0,o.Pf=void 0,o.po=void 0,o.Mr=void 0,o.wo=void 0,o.Qo=void 0,o.Nf=void 0,o}return Pw(n,t),n.prototype.drawPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Tw.DRAW_IMAGE,e,o,this._t,this.Ef*this.jf,this.Tf*this.jf,Math.ceil(this.Af*this.jf),this.do,this.Cf,this.Pf,this.po,this.Mr,[this.wo[0]*this.pixelRatio/this.jf,this.wo[1]*this.pixelRatio/this.jf],Math.ceil(this.Qo*this.jf),this.Nf]),this.hitDetectionInstructions.push([Tw.DRAW_IMAGE,e,o,this.ko,this.Ef,this.Tf,this.Af,this.do,this.Cf,this.Pf,this.po,this.Mr,this.wo,this.Qo,this.Nf]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Tw.DRAW_IMAGE,e,o,this._t,this.Ef*this.jf,this.Tf*this.jf,Math.ceil(this.Af*this.jf),this.do,this.Cf,this.Pf,this.po,this.Mr,[this.wo[0]*this.pixelRatio/this.jf,this.wo[1]*this.pixelRatio/this.jf],Math.ceil(this.Qo*this.jf),this.Nf]),this.hitDetectionInstructions.push([Tw.DRAW_IMAGE,e,o,this.ko,this.Ef,this.Tf,this.Af,this.do,this.Cf,this.Pf,this.po,this.Mr,this.wo,this.Qo,this.Nf]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Ef=void 0,this.Tf=void 0,this.ko=null,this._t=null,this.jf=void 0,this.Af=void 0,this.wo=void 0,this.do=void 0,this.Cf=void 0,this.Pf=void 0,this.po=void 0,this.Mr=void 0,this.Qo=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),e=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.jf=t.getPixelRatio(this.pixelRatio),this.Ef=i[0],this.Tf=i[1],this.ko=e,this._t=o,this.Af=r[1],this.do=t.getOpacity(),this.Cf=s[0]*this.jf,this.Pf=s[1]*this.jf,this.po=t.getRotateWithView(),this.Mr=t.getRotation(),this.wo=t.getScaleArray(),this.Qo=r[0],this.Nf=n},n}(Cw),kw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fw=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return kw(n,t),n.prototype.kf=function(t,n,i,r){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),s=[Tw.MOVE_TO_LINE_TO,e,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Tw.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bs,0],jw);var o=t.getFlatCoordinates(),s=t.getStride();this.kf(o,0,o.length,s),this.hitDetectionInstructions.push(Sw),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Tw.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],jw);for(var o=t.getEnds(),s=t.getFlatCoordinates(),u=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.kf(s,h,o[f],u);this.hitDetectionInstructions.push(Sw),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(Sw),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(Sw),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(jw)},n}(Cw),Rw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Iw=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Rw(n,t),n.prototype.Ff=function(t,n,i,r){var e=this.state,o=void 0!==e.fillStyle,s=void 0!==e.strokeStyle,u=i.length;this.instructions.push(jw),this.hitDetectionInstructions.push(jw);for(var h=0;h<u;++h){var f=i[h],a=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,r,!0,!s),v=[Tw.MOVE_TO_LINE_TO,a,c];this.instructions.push(v),this.hitDetectionInstructions.push(v),s&&(this.instructions.push(Ew),this.hitDetectionInstructions.push(Ew)),n=f}return o&&(this.instructions.push(Ow),this.hitDetectionInstructions.push(Ow)),s&&(this.instructions.push(Sw),this.hitDetectionInstructions.push(Sw)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Rf(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Tw.SET_FILL_STYLE,Us]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Tw.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var h=[Tw.CIRCLE,u];this.instructions.push(jw,h),this.hitDetectionInstructions.push(jw,h),void 0!==i.fillStyle&&(this.instructions.push(Ow),this.hitDetectionInstructions.push(Ow)),void 0!==i.strokeStyle&&(this.instructions.push(Sw),this.hitDetectionInstructions.push(Sw)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Rf(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Tw.SET_FILL_STYLE,Us]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Tw.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),u=t.getStride();this.Ff(s,0,o,u),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Rf(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Tw.SET_FILL_STYLE,Us]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Tw.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),u=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Ff(s,h,o[f],u);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,e=i.length;r<e;++r)i[r]=me(i[r],n);return t.prototype.finish.call(this)},n.prototype.Rf=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Cw);function Lw(t,n,i,r,e){var o,s,u,h,f,a,c,v,l,d=i,p=i,w=0,y=0,g=i;for(o=i;o<r;o+=e){var m=n[o],b=n[o+1];void 0!==h&&(v=m-h,l=b-f,u=Math.sqrt(v*v+l*l),void 0!==a&&(y+=s,Math.acos((a*v+c*l)/(s*u))>t&&(y>w&&(w=y,d=g,p=o),y=0,g=o-e)),s=u,a=v,c=l),h=m,f=b}return(y+=u)>w?[g,o]:[d,p]}var Gw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dw={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},zw=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.If=null,o.Ge="",o.De=0,o.ze=0,o.Ue=void 0,o.Xe=0,o.qe=null,o.fillStates={},o.Ve=null,o.strokeStates={},o.We={},o.textStates={},o.Lf="",o.Gf="",o.Df="",o.Nf=void 0,o}return Gw(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.qe,r=this.Ve,e=this.We;if(""!==this.Ge&&e&&(i||r)){var o=this.coordinates,s=o.length,u=t.getType(),h=null,f=t.getStride();if(e.placement!==yv||u!=kt&&u!=Lt&&u!=Rt&&u!=Gt){var a=e.overflow?null:[];switch(u){case Nt:case It:h=t.getFlatCoordinates();break;case kt:h=t.getFlatMidpoint();break;case zt:h=t.getCenter();break;case Lt:h=t.getFlatMidpoints(),f=2;break;case Rt:h=t.getFlatInteriorPoint(),e.overflow||a.push(h[2]/this.resolution),f=3;break;case Gt:var c=t.getFlatInteriorPoints();h=[];for(M=0,x=c.length;M<x;M+=3)e.overflow||a.push(c[M+2]/this.resolution),h.push(c[M],c[M+1]);if(0===h.length)return;f=2}if((C=this.appendFlatPointCoordinates(h,f))===s)return;if(a&&(C-s)/2!=h.length/f){var v=s/2;a=a.filter((function(t,n){var i=o[2*(v+n)]===h[n*f]&&o[2*(v+n)+1]===h[n*f+1];return i||--v,i}))}this.zf(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var l=e.padding;if(l!=Hs&&(e.scale[0]<0||e.scale[1]<0)){var d=e.padding[0],p=e.padding[1],w=e.padding[2],y=e.padding[3];e.scale[0]<0&&(p=-p,y=-y),e.scale[1]<0&&(d=-d,w=-w),l=[d,p,w,y]}var g=this.pixelRatio;this.instructions.push([Tw.DRAW_IMAGE,s,C,null,NaN,NaN,NaN,1,0,0,this.Ue,this.Xe,[1,1],NaN,this.Nf,l==Hs?Hs:l.map((function(t){return t*g})),!!e.backgroundFill,!!e.backgroundStroke,this.Ge,this.Lf,this.Df,this.Gf,this.De,this.ze,a]);var m=1/g;this.hitDetectionInstructions.push([Tw.DRAW_IMAGE,s,C,null,NaN,NaN,NaN,1,0,0,this.Ue,this.Xe,[m,m],NaN,this.Nf,l,!!e.backgroundFill,!!e.backgroundStroke,this.Ge,this.Lf,this.Df,this.Gf,this.De,this.ze,a]),this.endGeometry(n)}else{if(!si(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(h=t.getFlatCoordinates(),u==kt)b=[h.length];else if(u==Lt)b=t.getEnds();else if(u==Rt)b=t.getEnds().slice(0,1);else if(u==Gt){var _=t.getEndss();b=[];for(var M=0,x=_.length;M<x;++M)b.push(_[M][0])}this.beginGeometry(t,n);for(var O=e.textAlign,S=0,j=void 0,E=0,T=b.length;E<T;++E){if(null==O){var A=Lw(e.maxAngle,h,S,b[E],f);S=A[0],j=A[1]}else j=b[E];for(var M=S;M<j;M+=f)o.push(h[M],h[M+1]);var C=o.length;S=b[E],this.Uf(s,C),s=C}this.endGeometry(n)}}},n.prototype.zf=function(){var t=this.Ve,n=this.We,i=this.qe,r=this.Df;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.Lf;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Zs,textBaseline:n.textBaseline||Ys,scale:n.scale});var o=this.Gf;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.Uf=function(t,n){var i=this.Ve,r=this.We,e=this.Df,o=this.Lf,s=this.Gf;this.zf();var u=this.pixelRatio,h=Dw[r.textBaseline],f=this.ze*u,a=this.Ge,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Tw.DRAW_CHARS,t,n,h,r.overflow,s,r.maxAngle,u,f,e,c*u,a,o,1]),this.hitDetectionInstructions.push([Tw.DRAW_CHARS,t,n,h,r.overflow,s,r.maxAngle,1,f,e,c,a,o,1/u])},n.prototype.setTextStyle=function(t,n){var i,r,e;if(t){var s=t.getFill();s?((r=this.qe)||(r={},this.qe=r),r.fillStyle=fa(s.getColor()||Us)):(r=null,this.qe=r);var u=t.getStroke();if(u){(e=this.Ve)||(e={},this.Ve=e);var h=u.getLineDash(),f=u.getLineDashOffset(),a=u.getWidth(),c=u.getMiterLimit();e.lineCap=u.getLineCap()||Xs,e.lineDash=h?h.slice():Bs,e.lineDashOffset=void 0===f?0:f,e.lineJoin=u.getLineJoin()||qs,e.lineWidth=void 0===a?1:a,e.miterLimit=void 0===c?Vs:c,e.strokeStyle=fa(u.getColor()||Ws)}else e=null,this.Ve=e;i=this.We;var v=t.getFont()||zs;iu(v);var l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=v,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||Ys,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Hs,i.scale=void 0===l?[1,1]:l;var d=t.getOffsetX(),p=t.getOffsetY(),w=t.getRotateWithView(),y=t.getRotation();this.Ge=t.getText()||"",this.De=void 0===d?0:d,this.ze=void 0===p?0:p,this.Ue=void 0!==w&&w,this.Xe=void 0===y?0:y,this.Df=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.Lf=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.Gf=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.Ge="";this.Nf=n},n}(Cw),Uw={Circle:Iw,Default:Cw,Image:Nw,LineString:Fw,Polygon:Iw,Text:zw},Xw=function(){function t(t,n,i,r){this.Xf=t,this.Bf=n,this.gt=r,this.qf=i,this.Vf={}}return t.prototype.finish=function(){var t={};for(var n in this.Vf){t[n]=t[n]||{};var i=this.Vf[n];for(var r in i){var e=i[r].finish();t[n][r]=e}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.Vf[i];void 0===r&&(r={},this.Vf[i]=r);var e=r[n];void 0===e&&(e=new(0,Uw[n])(this.Xf,this.Bf,this.qf,this.gt),r[n]=e);return e},t}();function Bw(t,n,i,r,e,o,s,u,h,f,a,c){var v=t[n],l=t[n+1],d=0,p=0,w=0,y=0;function g(){d=v,p=l,v=t[n+=r],l=t[n+1],y+=w,w=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p))}do{g()}while(n<i-r&&y+w<o);for(var m=0===w?0:(o-y)/w,b=xi(d,v,m),_=xi(p,l,m),M=n-r,x=y,O=o+u*h(f,e,a);n<i-r&&y+w<O;)g();var S,j=xi(d,v,m=0===w?0:(O-y)/w),E=xi(p,l,m);if(c){var T=[b,_,j,E];Hr(T,0,4,2,c,T,T),S=T[0]>T[2]}else S=b>j;var A,C=Math.PI,P=[],N=M+r===n;if(w=0,y=x,v=t[n=M],l=t[n+1],N){g(),A=Math.atan2(l-p,v-d),S&&(A+=A>0?-C:C);var k=(j+b)/2,F=(E+_)/2;return P[0]=[k,F,(O-o)/2,A,e],P}for(var R=0,I=e.length;R<I;){g();var L=Math.atan2(l-p,v-d);if(S&&(L+=L>0?-C:C),void 0!==A){var G=L-A;if(G+=G>C?-2*C:G<-C?2*C:0,Math.abs(G)>s)return null}A=L;for(var D=R,z=0;R<I;++R){var U=u*h(f,e[S?I-R-1:R],a);if(n+r<i&&y+w<o+z+U/2)break;z+=U}if(R!==D){var X=S?e.substring(I-D,I-R):e.substring(D,R);k=xi(d,v,m=0===w?0:(o+z/2-y)/w),F=xi(p,l,m);P.push([k,F,z/2,L,X]),o+=z}}return P}function qw(t,n,i,r){for(var e=t[n],o=t[n+1],s=0,u=n+r;u<i;u+=r){var h=t[u],f=t[u+1];s+=Math.sqrt((h-e)*(h-e)+(f-o)*(f-o)),e=h,o=f}return s}var Vw=[1/0,1/0,-1/0,-1/0],Ww=[],Zw=[],Yw=[],Hw=[];function Jw(t){return t[3].declutterBox}var $w=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Qw(t,n){return"start"!==n&&"end"!==n||$w.test(t)||(n="start"===n?"left":"right"),Dw[n]}function Kw(t,n,i){return i>0&&t.push("\n",""),t.push(n,""),t}var ty=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.Wf,this.instructions=r.instructions,this.coordinates=r.coordinates,this.Zf={},this.Yf=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.Ze=null,this.be=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.Hf={},this.If={}}return t.prototype.createLabel=function(t,n,i,r){var e=t+n+i+r;if(this.If[e])return this.If[e];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,u=this.textStates[n],h=this.pixelRatio,f=[u.scale[0]*h,u.scale[1]*h],a=Array.isArray(t),c=Qw(a?t[0]:t,u.textAlign||Zs),v=r&&o.lineWidth?o.lineWidth:0,l=a?t:t.split("\n").reduce(Kw,[]),d=uu(u,l),p=d.width,w=d.height,y=d.widths,g=d.heights,m=d.lineWidths,b=p+v,_=[],M=(b+2)*f[0],x=(w+v)*f[1],O={width:M<0?Math.floor(M):Math.ceil(M),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:_};(1==f[0]&&1==f[1]||_.push("scale",f),r)&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",v),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),(Kt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)));i&&_.push("fillStyle",s.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");for(var S,j=.5-c,E=c*b+j*v,T=[],A=[],C=0,P=0,N=0,k=0,F=0,R=l.length;F<R;F+=2){var I=l[F];if("\n"!==I){var L=l[F+1]||u.font;L!==S&&(r&&T.push("font",L),i&&A.push("font",L),S=L),C=Math.max(C,g[N]);var G=[I,E+j*y[N]+c*(y[N]-m[k]),.5*(v+C)+P];E+=y[N],r&&T.push("strokeText",G),i&&A.push("fillText",G),++N}else P+=C,C=0,E=c*b+j*v,++k}return Array.prototype.push.apply(_,T),Array.prototype.push.apply(_,A),this.If[e]=O,O},t.prototype.Jf=function(t,n,i,r,e,o,s){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.Wf=o[2],this._o(t)),s&&(this.$f(t,s),t.stroke())},t.prototype.Qf=function(t,n,i,r,e,o,s,u,h,f,a,c,v,l,d,p){var w,y=i-(s*=c[0]),g=r-(u*=c[1]),m=e+h>t?t-h:e,b=o+f>n?n-f:o,_=l[3]+m*c[0]+l[1],M=l[0]+b*c[1]+l[2],x=y-l[3],O=g-l[0];return(d||0!==a)&&(Ww[0]=x,Hw[0]=x,Ww[1]=O,Zw[1]=O,Zw[0]=x+_,Yw[0]=Zw[0],Yw[1]=O+M,Hw[1]=Yw[1]),0!==a?(fn(w=ln([1,0,0,1,0,0],i,r,1,1,a,-i,-r),Ww),fn(w,Zw),fn(w,Yw),fn(w,Hw),In(Math.min(Ww[0],Zw[0],Yw[0],Hw[0]),Math.min(Ww[1],Zw[1],Yw[1],Hw[1]),Math.max(Ww[0],Zw[0],Yw[0],Hw[0]),Math.max(Ww[1],Zw[1],Yw[1],Hw[1]),Vw)):In(Math.min(x,x+_),Math.min(O,O+M),Math.max(x,x+_),Math.max(O,O+M),Vw),v&&(y=Math.round(y),g=Math.round(g)),{drawImageX:y,drawImageY:g,drawImageW:m,drawImageH:b,originX:h,originY:f,declutterBox:{minX:Vw[0],minY:Vw[1],maxX:Vw[2],maxY:Vw[3],value:p},canvasTransform:w,scale:c}},t.prototype.Kf=function(t,n,i,r,e,o,s){var u=!(!o&&!s),h=r.declutterBox,f=t.canvas,a=s?s[2]*r.scale[0]/2:0;return h.minX-a<=f.width/n&&h.maxX+a>=0&&h.minY-a<=f.height/n&&h.maxY+a>=0&&(u&&this.Jf(t,Ww,Zw,Yw,Hw,o,s),hu(t,r.canvasTransform,e,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype._o=function(t){if(this.Wf){var n=fn(this.Yf,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.be)}t.fill(),this.Wf&&t.restore()},t.prototype.$f=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.ta=function(t,n,i,r){var e=this.textStates[n],o=this.createLabel(t,n,r,i),s=this.strokeStates[i],u=this.pixelRatio,h=Qw(Array.isArray(t)?t[0]:t,e.textAlign||Zs),f=Dw[e.textBaseline||Ys],a=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:h*(o.width/u-2*e.scale[0])+2*(.5-h)*a,anchorY:f*o.height/u+2*(.5-f)*a}},t.prototype.na=function(t,n,i,r,e,o,s,u){var h;this.Ze&&_(i,this.Yf)?h=this.Ze:(this.Ze||(this.Ze=[]),h=Yr(this.coordinates,0,this.coordinates.length,2,i,this.Ze),hn(this.Yf,i));for(var f,a,c,v,l,d,p,w,y,g,m,b,M,x,O,S,j=0,E=r.length,T=0,A=0,C=0,P=null,N=null,k=this.Zf,F=this.be,R=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,I={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},L=this.instructions!=r||this.overlaps?0:200;j<E;){var G=r[j];switch(G[0]){case Tw.BEGIN_GEOMETRY:M=G[1],S=G[3],M.getGeometry()?void 0===s||si(s,S.getExtent())?++j:j=G[2]+1:j=G[2];break;case Tw.BEGIN_PATH:A>L&&(this._o(t),A=0),C>L&&(t.stroke(),C=0),A||C||(t.beginPath(),v=NaN,l=NaN),++j;break;case Tw.CIRCLE:var D=h[T=G[1]],z=h[T+1],U=h[T+2]-D,X=h[T+3]-z,B=Math.sqrt(U*U+X*X);t.moveTo(D+B,z),t.arc(D,z,B,0,2*Math.PI,!0),++j;break;case Tw.CLOSE_PATH:t.closePath(),++j;break;case Tw.CUSTOM:T=G[1],f=G[2];var q=G[3],V=G[4],W=6==G.length?G[5]:void 0;I.geometry=q,I.feature=M,j in k||(k[j]=[]);var Z=k[j];W?W(h,T,f,2,Z):(Z[0]=h[T],Z[1]=h[T+1],Z.length=2),V(Z,I),++j;break;case Tw.DRAW_IMAGE:T=G[1],f=G[2],w=G[3],a=G[4],c=G[5];var Y=G[6],H=G[7],J=G[8],$=G[9],Q=G[10],K=G[11],tt=G[12],nt=G[13],it=G[14];if(!w&&G.length>=19){y=G[18],g=G[19],m=G[20],b=G[21];var rt=this.ta(y,g,m,b);w=rt.label,G[3]=w;var et=G[22];a=(rt.anchorX-et)*this.pixelRatio,G[4]=a;var ot=G[23];c=(rt.anchorY-ot)*this.pixelRatio,G[5]=c,Y=w.height,G[6]=Y,nt=w.width,G[13]=nt}var st=void 0;G.length>24&&(st=G[24]);var ut=void 0,ht=void 0,ft=void 0;G.length>16?(ut=G[15],ht=G[16],ft=G[17]):(ut=Hs,ht=!1,ft=!1),Q&&R?K+=F:Q||R||(K-=F);for(var at=0;T<f;T+=2)if(!(st&&st[at++]<nt/this.pixelRatio)){var ct=[t,n,w,Gt=this.Qf(w.width,w.height,h[T],h[T+1],nt,Y,a,c,J,$,K,tt,e,ut,ht||ft,M),H,ht?P:null,ft?N:null],vt=void 0,lt=void 0;if(u&&it){var dt=f-T;if(!it[dt]){it[dt]=ct;continue}if(vt=it[dt],delete it[dt],lt=Jw(vt),u.collides(lt))continue}u&&u.collides(Gt.declutterBox)||(vt&&(u&&u.insert(lt),this.Kf.apply(this,vt)),u&&u.insert(Gt.declutterBox),this.Kf.apply(this,ct))}++j;break;case Tw.DRAW_CHARS:var pt=G[1],wt=G[2],yt=G[3],gt=G[4];b=G[5];var mt=G[6],bt=G[7],_t=G[8];m=G[9];var Mt=G[10];y=G[11],g=G[12];var xt=[G[13],G[13]],Ot=this.textStates[g],St=Ot.font,jt=[Ot.scale[0]*bt,Ot.scale[1]*bt],Et=void 0;St in this.Hf?Et=this.Hf[St]:(Et={},this.Hf[St]=Et);var Tt=qw(h,pt,wt,2),At=Math.abs(jt[0])*su(St,y,Et);if(gt||At<=Tt){var Ct=this.textStates[g].textAlign,Pt=Bw(h,pt,wt,2,y,(Tt-At)*Dw[Ct],mt,Math.abs(jt[0]),su,St,Et,R?0:this.be);t:if(Pt){var Nt=[],kt=void 0,Ft=void 0,Rt=void 0,It=void 0,Lt=void 0;if(m)for(kt=0,Ft=Pt.length;kt<Ft;++kt){Rt=(Lt=Pt[kt])[4],It=this.createLabel(Rt,g,"",m),a=Lt[2]+(jt[0]<0?-Mt:Mt),c=yt*It.height+2*(.5-yt)*Mt*jt[1]/jt[0]-_t;var Gt=this.Qf(It.width,It.height,Lt[0],Lt[1],It.width,It.height,a,c,0,0,Lt[3],xt,!1,Hs,!1,M);if(u&&u.collides(Gt.declutterBox))break t;Nt.push([t,n,It,Gt,1,null,null])}if(b)for(kt=0,Ft=Pt.length;kt<Ft;++kt){Rt=(Lt=Pt[kt])[4],It=this.createLabel(Rt,g,b,""),a=Lt[2],c=yt*It.height-_t;Gt=this.Qf(It.width,It.height,Lt[0],Lt[1],It.width,It.height,a,c,0,0,Lt[3],xt,!1,Hs,!1,M);if(u&&u.collides(Gt.declutterBox))break t;Nt.push([t,n,It,Gt,1,null,null])}u&&u.load(Nt.map(Jw));for(var Dt=0,zt=Nt.length;Dt<zt;++Dt)this.Kf.apply(this,Nt[Dt])}}++j;break;case Tw.END_GEOMETRY:if(void 0!==o){var Ut=o(M=G[1],S);if(Ut)return Ut}++j;break;case Tw.FILL:L?A++:this._o(t),++j;break;case Tw.MOVE_TO_LINE_TO:for(T=G[1],f=G[2],x=h[T],p=(O=h[T+1])+.5|0,(d=x+.5|0)===v&&p===l||(t.moveTo(x,O),v=d,l=p),T+=2;T<f;T+=2)d=(x=h[T])+.5|0,p=(O=h[T+1])+.5|0,T!=f-2&&d===v&&p===l||(t.lineTo(x,O),v=d,l=p);++j;break;case Tw.SET_FILL_STYLE:P=G,this.Wf=G[2],A&&(this._o(t),A=0,C&&(t.stroke(),C=0)),t.fillStyle=G[1],++j;break;case Tw.SET_STROKE_STYLE:N=G,C&&(t.stroke(),C=0),this.$f(t,G),++j;break;case Tw.STROKE:L?C++:t.stroke(),++j;break;default:++j}}A&&this._o(t),C&&t.stroke()},t.prototype.execute=function(t,n,i,r,e,o){this.be=r,this.na(t,n,i,this.instructions,e,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,e){return this.be=i,this.na(t,1,n,this.hitDetectionInstructions,!0,r,e)},t}(),ny=[Na,Ta,Pa,Ca,ka,Aa],iy=function(){function t(t,n,i,r,e,o){this.Bf=t,this.oh=r,this.gt=i,this.qf=n,this.ia=o,this.ra={},this.ea=null,this.oa=[1,0,0,1,0,0],this.sa(e)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.sa=function(t){for(var n in t){var i=this.ra[n];void 0===i&&(i={},this.ra[n]=i);var r=t[n];for(var e in r){var o=r[e];i[e]=new ty(this.qf,this.gt,this.oh,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.ra)for(var i=this.ra[n],r=0,e=t.length;r<e;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o){var s=2*(r=Math.round(r))+1,u=ln(this.oa,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.ea;h&&(this.ea=Po(s,s));var f,a=this.ea;a.canvas.width!==s||a.canvas.height!==s?(a.canvas.width=s,a.canvas.height=s):h||a.clearRect(0,0,s,s),void 0!==this.ia&&(Bn(f=[1/0,1/0,-1/0,-1/0],t),Tn(f,n*(this.ia+r),f));var c,v=ey(r);function l(t,n){for(var i=a.getImageData(0,0,s,s).data,u=0,h=v.length;u<h;u++)if(i[v[u]]>0){if(!o||c!==Ca&&c!==ka||-1!==o.indexOf(t)){var f=(v[u]-3)/4,l=r-f%s,d=r-(f/s|0),p=e(t,n,l*l+d*d);if(p)return p}a.clearRect(0,0,s,s);break}}var d,w,y,g,m,b=Object.keys(this.ra).map(Number);for(b.sort(p),d=b.length-1;d>=0;--d){var _=b[d].toString();for(y=this.ra[_],w=ny.length-1;w>=0;--w)if(void 0!==(g=y[c=ny[w]])&&(m=g.executeHitDetection(a,u,i,l,f)))return m}},t.prototype.getClipCoords=function(t){var n=this.Bf;if(!n)return null;var i=n[0],r=n[1],e=n[2],o=n[3],s=[i,r,i,o,e,o,e,r];return Yr(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return N(this.ra)},t.prototype.execute=function(t,n,i,r,e,o,s){var u=Object.keys(this.ra).map(Number);u.sort(p),this.Bf&&(t.save(),this.clip(t,i));var h,f,a,c,v,l,d=o||ny;for(s&&u.reverse(),h=0,f=u.length;h<f;++h){var w=u[h].toString();for(v=this.ra[w],a=0,c=d.length;a<c;++a){void 0!==(l=v[d[a]])&&l.execute(t,n,i,r,e,s)}}this.Bf&&t.restore()},t}(),ry={};function ey(t){if(void 0!==ry[t])return ry[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),e=0;e<=t;++e)for(var o=0;o<=t;++o){var s=e*e+o*o;if(s>i)break;var u=r[s];u||(u=[],r[s]=u),u.push(4*((t+e)*n+(t+o))+3),e>0&&u.push(4*((t-e)*n+(t+o))+3),o>0&&(u.push(4*((t+e)*n+(t-o))+3),e>0&&u.push(4*((t-e)*n+(t-o))+3))}for(var h=[],f=(e=0,r.length);e<f;++e)r[e]&&h.push.apply(h,r[e]);return ry[t]=h,h}var oy=iy,sy=.5;function uy(t,n,i,r,e,o,s){var u=Po(t[0]*sy,t[1]*sy);u.imageSmoothingEnabled=!1;for(var h=u.canvas,f=new Ea(u,sy,e,null,s),a=i.length,c=Math.floor(16777215/a),v={},l=1;l<=a;++l){var d=i[l-1],w=d.getStyleFunction()||r;if(r){var y=w(d,o);if(y){Array.isArray(y)||(y=[y]);for(var g="#"+("000000"+(l*c).toString(16)).slice(-6),m=0,b=y.length;m<b;++m){var _=y[m],M=_.getGeometryFunction()(d);if(M&&si(e,M.getExtent())){var x=_.clone(),O=x.getFill();O&&O.setColor(g);var S=x.getStroke();S&&(S.setColor(g),S.setLineDash(null)),x.setText(void 0);var j=_.getImage();if(j&&0!==j.getOpacity()){var E=j.getImageSize();if(!E)continue;var T=Po(E[0],E[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=g,T.fillRect(0,0,A.width,A.height),x.setImage(new sv({img:A,imgSize:E,anchor:j.getAnchor(),anchorXUnits:Hc,anchorYUnits:Hc,offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}var C=x.getZIndex()||0;(k=v[C])||(k={},v[C]=k,k[Rt]=[],k[zt]=[],k[kt]=[],k[Nt]=[]),k[M.getType().replace("Multi","")].push(M,x)}}}}}for(var P=Object.keys(v).map(Number).sort(p),N=(l=0,P.length);l<N;++l){var k=v[P[l]];for(var F in k){var R=k[F];for(m=0,b=R.length;m<b;m+=2){f.setStyle(R[m+1]);for(var I=0,L=n.length;I<L;++I)f.setTransform(n[I]),f.drawGeometry(R[m])}}}return u.getImageData(0,0,h.width,h.height)}function hy(t,n,i){var r=[];if(i){var e=Math.floor(Math.round(t[0])*sy),o=Math.floor(Math.round(t[1])*sy),s=4*(di(e,0,i.width-1)+di(o,0,i.height-1)*i.width),u=i.data[s],h=i.data[s+1],f=i.data[s+2]+256*(h+256*u),a=Math.floor(16777215/n.length);f&&f%a==0&&r.push(n[f/a-1])}return r}var fy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ay=function(t){function n(n){var i=t.call(this,n)||this;return i.ua=i.ha.bind(i),i.fa,i.aa=!1,i.ca=null,i.va=null,i.Fh=-1,i.la=NaN,i.qh=[1/0,1/0,-1/0,-1/0],i.da=[1/0,1/0,-1/0,-1/0],i.pa,i.wa=null,i.ya=null,i.ga=null,i.ma=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return fy(n,t),n.prototype.renderWorlds=function(t,n,i){var r=n.extent,e=n.viewState,o=e.center,s=e.resolution,u=e.projection,h=e.rotation,f=u.getExtent(),a=this.getLayer().getSource(),c=n.pixelRatio,v=n.viewHints,l=!(v[zu]||v[Uu]),d=this.context,p=Math.round(n.size[0]*c),w=Math.round(n.size[1]*c),y=a.getWrapX()&&u.canWrapX(),g=y?oi(f):null,m=y?Math.ceil((r[2]-f[2])/g)+1:1,b=y?Math.floor((r[0]-f[0])/g):0;do{var _=this.getRenderTransform(o,s,h,c,p,w,b*g);t.execute(d,1,_,h,l,void 0,i)}while(++b<m)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];vn(this.pixelTransform,1/i,1/i),dn(this.inversePixelTransform,this.pixelTransform);var e=wn(this.pixelTransform);this.useContainer(n,e,r.opacity,this.getBackground(t));var o=this.context,s=o.canvas,u=this.ma,h=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*i),a=Math.round(t.size[1]*i);s.width!=f||s.height!=a?(s.width=f,s.height=a,s.style.transform!==e&&(s.style.transform=e)):this.containerReused||o.clearRect(0,0,f,a),this.preRender(o,t);var c=t.viewState,v=c.projection,l=!1,d=!0;if(r.extent&&this.clipping){var p=Br(r.extent,v);(l=(d=si(p,t.extent))&&!Nn(p,t.extent))&&this.clipUnrotated(o,t,p)}d&&this.renderWorlds(u,t),l&&o.restore(),this.postRender(o,t);var w=Ds(r.opacity),y=this.container;return w!==y.style.opacity&&(y.style.opacity=w),this.pa!==c.rotation&&(this.pa=c.rotation,this.ca=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.ca&&!this.fa){var i=[this.context.canvas.width,this.context.canvas.height];fn(this.pixelTransform,i);var r=this.wa,e=this.la,o=this.pa,s=this.ya,u=this.da,h=this.getLayer(),f=[],a=i[0]*sy,c=i[1]*sy;f.push(this.getRenderTransform(r,e,o,sy,a,c,0).slice());var v=h.getSource(),l=s.getExtent();if(v.getWrapX()&&s.canWrapX()&&!Nn(l,u)){for(var d=u[0],p=oi(l),w=0,y=void 0;d<l[0];)y=p*--w,f.push(this.getRenderTransform(r,e,o,sy,a,c,y).slice()),d+=p;for(w=0,d=u[2];d>l[2];)y=p*++w,f.push(this.getRenderTransform(r,e,o,sy,a,c,y).slice()),d-=p}this.ca=uy(i,f,this.va,h.getStyleFunction(),u,e,o)}n(hy(t,this.va,this.ca))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=this;if(this.ma){var u,h=n.viewState.resolution,f=n.viewState.rotation,a=this.getLayer(),c={},v=function(t,n,i){var s=o(t),u=c[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return c[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,a,n);u.geometry=n,u.distanceSq=i}}else{if(0===i)return c[s]=!0,r(t,a,n);e.push(c[s]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},l=[this.ma];return this.declutterExecutorGroup&&l.push(this.declutterExecutorGroup),l.some((function(r){return u=r.forEachFeatureAtCoordinate(t,h,f,i,v,r===s.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map((function(t){return t.value})):null)})),u}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.ma&&t.changed()},n.prototype.ha=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[zu],e=t.viewHints[Uu],o=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(!this.aa&&!o&&r||!s&&e)return this.fa=!0,!0;this.fa=!1;var u=t.extent,h=t.viewState,f=h.projection,a=h.resolution,c=t.pixelRatio,v=n.getRevision(),l=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=Ra);var p=h.center.slice(),w=Tn(u,l*a),y=w.slice(),g=[w.slice()],m=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!Nn(m,t.extent)){var b=oi(m),M=Math.max(oi(w)/2,b);w[0]=m[0]-M,w[2]=m[2]+M,vr(p,f);var x=vi(g[0],f);x[0]<m[0]&&x[2]<m[2]?g.push([x[0]+b,x[1],x[2]+b,x[3]]):x[0]>m[0]&&x[2]>m[2]&&g.push([x[0]-b,x[1],x[2]-b,x[3]])}if(!this.aa&&this.la==a&&this.Fh==v&&this.ga==d&&Nn(this.da,w))return _(this.qh,y)||(this.ca=null,this.qh=y),this.wa=p,this.replayGroupChanged=!1,!0;this.ma=null,this.aa=!1;var O,S=new Xw(La(a,c),w,a,c);this.getLayer().getDeclutter()&&(O=new Xw(La(a,c),w,a,c));var j,E=Dr();if(E){for(var T=0,A=g.length;T<A;++T){var C=Xr(g[T],f);i.loadFeatures(C,qr(a,f),E)}j=kr(E,f)}else for(T=0,A=g.length;T<A;++T)i.loadFeatures(g[T],a,f);var P=Ia(a,c),N=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,a)),i){var e=this.renderFeature(t,P,i,S,j,O);this.aa=this.aa||e}}.bind(this),k=Xr(w,f),F=i.getFeaturesInExtent(k);d&&F.sort(d);for(T=0,A=F.length;T<A;++T)N(F[T]);this.va=F;var R=S.finish(),I=new oy(w,a,c,i.getOverlaps(),R,n.getRenderBuffer());return O&&(this.declutterExecutorGroup=new oy(w,a,c,i.getOverlaps(),O.finish(),n.getRenderBuffer())),this.la=a,this.Fh=v,this.ga=d,this.qh=y,this.da=w,this.wa=p,this.ya=f,this.ma=I,this.ca=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,e,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var u=0,h=i.length;u<h;++u)s=Ga(r,t,i[u],n,this.ua,e,o)||s;else s=Ga(r,t,i,n,this.ua,e,o);return s},n}(xp),cy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vy=function(t){function n(n){var i=t.call(this,n)||this;return i.ba=new ay(n),i._a=n.getImageRatio(),i.Ma=[1,0,0,1,0,0],i.xa=null,i}return cy(n,t),n.prototype.disposeInternal=function(){this.ba.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.ba)return new Promise((function(t){return t([])}));var n=fn(this.Ma,fn(this.xa,t.slice()));return this.ba.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.ba.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,e=t.viewHints,o=this.ba,s=t.extent;1!==this._a&&fi(s=s.slice(0),this._a);var u=oi(s)/r,h=ni(s)/r;if(!e[zu]&&!e[Uu]&&!ui(s)){o.useContainer(null,null,1);var f=o.context,a=A({},t,{declutterTree:new id(9),extent:s,size:[u,h],viewState:A({},t.viewState,{rotation:0})}),c=!0,v=new Co(s,r,n,f.canvas,(function(t){o.prepareFrame(a)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(a,null)&&(o.renderDeclutter(a),c=!1),t())}));v.addEventListener(R,function(){if(v.getState()===xo){this._t=c?null:v;var t=v.getResolution(),r=v.getPixelRatio(),e=t*n/r;this.renderedResolution=e,this.Ma=ln(this.Ma,u/2,h/2,1/e,-1/e,0,-i.center[0],-i.center[1])}}.bind(this)),v.load()}return this._t&&(this.xa=t.pixelToCoordinateTransform.slice()),!!this._t},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,e,o){return this.ba?this.ba.forEachFeatureAtCoordinate(n,i,r,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,e,o)},n}(Sp),ly=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dy=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return ly(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<Cn(this.getExtent(),t,n))return r;for(var e=this.flatCoordinates,o=this.stride,s=0,u=e.length;s<u;s+=o){var h=gi(t,n,e[s],e[s+1]);if(h<r){r=h;for(var f=0;f<o;++f)i[f]=e[s+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Ne(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],e=0,o=t.length;e<o;e+=i){var s=new Ne(t.slice(e,e+i),n);r.push(s)}return r},n.prototype.getType=function(){return It},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,e=n.length;r<e;r+=i){if(kn(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=le(this.flatCoordinates,0,t,this.stride),this.changed()},n}(ee);function py(t,n,i,r,e,o,s){var u,h,f=(i-n)/r;if(1===f)u=n;else if(2===f)u=n,h=e;else if(0!==f){for(var a=t[n],c=t[n+1],v=0,l=[0],p=n+r;p<i;p+=r){var w=t[p],y=t[p+1];v+=Math.sqrt((w-a)*(w-a)+(y-c)*(y-c)),l.push(v),a=w,c=y}var g=e*v,m=d(l,g);m<0?(h=(g-l[-m-2])/(l[-m-1]-l[-m-2]),u=n+(-m-2)*r):u=n+m*r}var b=s>1?s:2,_=o||new Array(b);for(p=0;p<b;++p)_[p]=void 0===u?NaN:void 0===h?t[u+p]:xi(t[u+p],t[u+r+p],h);return _}function wy(t,n,i,r,e,o){if(i==n)return null;var s;if(e<t[n+r-1])return o?((s=t.slice(n,n+r))[r-1]=e,s):null;if(t[i-1]<e)return o?((s=t.slice(i-r,i))[r-1]=e,s):null;if(e==t[n+r-1])return t.slice(n,n+r);for(var u=n/r,h=i/r;u<h;){var f=u+h>>1;e<t[(f+1)*r-1]?h=f:u=f+1}var a=t[u*r-1];if(e==a)return t.slice((u-1)*r,(u-1)*r+r);var c=(e-a)/(t[(u+1)*r-1]-a);s=[];for(var v=0;v<r-1;++v)s.push(xi(t[(u-1)*r+v],t[u*r+v],c));return s.push(e),s}function yy(t,n,i,r,e,o,s){if(s)return wy(t,n,i[i.length-1],r,e,o);var u;if(e<t[r-1])return o?((u=t.slice(0,r))[r-1]=e,u):null;if(t[t.length-1]<e)return o?((u=t.slice(t.length-r))[r-1]=e,u):null;for(var h=0,f=i.length;h<f;++h){var a=i[h];if(n!=a){if(e<t[n+r-1])return null;if(e<=t[a-1])return wy(t,n,a,r,e,!1);n=a}}return null}var gy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),my=function(t){function n(n,i){var r=t.call(this)||this;return r.Oa=null,r.Sa=-1,r.it=-1,r.rt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return gy(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?m(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Cn(this.getExtent(),t,n)?r:(this.rt!=this.getRevision()&&(this.it=Math.sqrt(se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.rt=this.getRevision()),fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.it,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return De(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=Ct&&this.layout!=Pt)return null;var i=void 0!==n&&n;return wy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return py(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return qw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.Sa!=this.getRevision()&&(this.Oa=this.getCoordinateAt(.5,this.Oa),this.Sa=this.getRevision()),this.Oa},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,Tt)},n.prototype.getType=function(){return kt},n.prototype.intersectsExtent=function(t){return ze(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=le(this.flatCoordinates,0,t,this.stride),this.changed()},n}(ee),by=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_y=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.et=[],e.it=-1,e.rt=-1,Array.isArray(n[0]))e.setCoordinates(n,i);else if(void 0!==i&&r)e.setFlatCoordinates(i,n),e.et=r;else{for(var o=e.getLayout(),s=n,u=[],h=[],f=0,a=s.length;f<a;++f){var c=s[f];0===f&&(o=c.getLayout()),m(u,c.getFlatCoordinates()),h.push(u.length)}e.setFlatCoordinates(o,u),e.et=h}return e}return by(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?m(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.et.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.et.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Cn(this.getExtent(),t,n)?r:(this.rt!=this.getRevision()&&(this.it=Math.sqrt(ue(this.flatCoordinates,0,this.et,this.stride,0)),this.rt=this.getRevision()),ae(this.flatCoordinates,0,this.et,this.stride,this.it,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=Ct&&this.layout!=Pt||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,e=void 0!==i&&i;return yy(this.flatCoordinates,0,this.et,this.stride,t,r,e)},n.prototype.getCoordinates=function(){return Oe(this.flatCoordinates,0,this.et,this.stride)},n.prototype.getEnds=function(){return this.et},n.prototype.getLineString=function(t){return t<0||this.et.length<=t?null:new my(this.flatCoordinates.slice(0===t?0:this.et[t-1],this.et[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.et,i=this.layout,r=[],e=0,o=0,s=n.length;o<s;++o){var u=n[o],h=new my(t.slice(e,u),i);r.push(h),e=u}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.et,e=this.stride,o=0,s=r.length;o<s;++o){var u=r[o];m(t,py(n,i,u,e,.5)),i=u}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ye(this.flatCoordinates,0,this.et,this.stride,t,i,0,r),new n(i,Tt,r)},n.prototype.getType=function(){return Lt},n.prototype.intersectsExtent=function(t){return Ue(this.flatCoordinates,0,this.et,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=de(this.flatCoordinates,0,t,this.stride,this.et);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(ee);function My(t,n,i,r){for(var e=[],o=[1/0,1/0,-1/0,-1/0],s=0,u=i.length;s<u;++s){var h=i[s];o=Dn(t,n,h[0],r),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=h[h.length-1]}return e}var xy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oy=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.ja=[],e.Ea=-1,e.Ta=null,e.it=-1,e.rt=-1,e.ut=-1,e.ht=null,!r&&!Array.isArray(n[0])){for(var o=e.getLayout(),s=n,u=[],h=[],f=0,a=s.length;f<a;++f){var c=s[f];0===f&&(o=c.getLayout());for(var v=u.length,l=c.getEnds(),d=0,p=l.length;d<p;++d)l[d]+=v;m(u,c.getFlatCoordinates()),h.push(l)}i=o,n=u,r=h}return void 0!==i&&r?(e.setFlatCoordinates(i,n),e.ja=r):e.setCoordinates(n,i),e}return xy(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;m(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,e=(n=t.getEnds().slice()).length;r<e;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.ja.push();this.ja.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.ja.length,i=new Array(t),r=0;r<t;++r)i[r]=this.ja[r].slice();var e=new n(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e},n.prototype.closestPointXY=function(t,n,i,r){return r<Cn(this.getExtent(),t,n)?r:(this.rt!=this.getRevision()&&(this.it=Math.sqrt(he(this.flatCoordinates,0,this.ja,this.stride,0)),this.rt=this.getRevision()),ce(this.getOrientedFlatCoordinates(),0,this.ja,this.stride,this.it,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Ie(this.getOrientedFlatCoordinates(),0,this.ja,this.stride,t,n)},n.prototype.getArea=function(){return Te(this.getOrientedFlatCoordinates(),0,this.ja,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Je(n=this.getOrientedFlatCoordinates().slice(),0,this.ja,this.stride,t):n=this.flatCoordinates,Se(n,0,this.ja,this.stride)},n.prototype.getEndss=function(){return this.ja},n.prototype.getFlatInteriorPoints=function(){if(this.Ea!=this.getRevision()){var t=My(this.flatCoordinates,0,this.ja,this.stride);this.Ta=Ge(this.getOrientedFlatCoordinates(),0,this.ja,this.stride,t),this.Ea=this.getRevision()}return this.Ta},n.prototype.getInteriorPoints=function(){return new dy(this.getFlatInteriorPoints().slice(),Ct)},n.prototype.getOrientedFlatCoordinates=function(){if(this.ut!=this.getRevision()){var t=this.flatCoordinates;Ye(t,0,this.ja,this.stride)?this.ht=t:(this.ht=t.slice(),this.ht.length=Je(this.ht,0,this.ja,this.stride)),this.ut=this.getRevision()}return this.ht},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Me(this.flatCoordinates,0,this.ja,this.stride,Math.sqrt(t),i,0,r),new n(i,Tt,r)},n.prototype.getPolygon=function(t){if(t<0||this.ja.length<=t)return null;var n;if(0===t)n=0;else{var i=this.ja[t-1];n=i[i.length-1]}var r=this.ja[t].slice(),e=r[r.length-1];if(0!==n)for(var o=0,s=r.length;o<s;++o)r[o]-=n;return new to(this.flatCoordinates.slice(n,e),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ja,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o].slice(),h=u[u.length-1];if(0!==e)for(var f=0,a=u.length;f<a;++f)u[f]-=e;var c=new to(n.slice(e,h),t,u);r.push(c),e=h}return r},n.prototype.getType=function(){return Gt},n.prototype.intersectsExtent=function(t){return qe(this.getOrientedFlatCoordinates(),0,this.ja,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=pe(this.flatCoordinates,0,t,this.stride,this.ja);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(ee),Sy=[1,0,0,1,0,0],jy=function(){function t(t,n,i,r,e){this.styleFunction,this.q,this.P=e,this.Aa=t,this.Ca=n,this.Ta=null,this.Pa=null,this.et=i,this.Na=r}return t.prototype.get=function(t){return this.Na[t]},t.prototype.getExtent=function(){return this.q||(this.q=this.Aa===Nt?Gn(this.Ca):Dn(this.Ca,0,this.Ca.length,2)),this.q},t.prototype.getFlatInteriorPoint=function(){if(!this.Ta){var t=Qn(this.getExtent());this.Ta=Le(this.Ca,0,this.et,2,t,0)}return this.Ta},t.prototype.getFlatInteriorPoints=function(){if(!this.Ta){var t=My(this.Ca,0,this.et,2);this.Ta=Ge(this.Ca,0,this.et,2,t)}return this.Ta},t.prototype.getFlatMidpoint=function(){return this.Pa||(this.Pa=py(this.Ca,0,this.Ca.length,2,.5)),this.Pa},t.prototype.getFlatMidpoints=function(){if(!this.Pa){this.Pa=[];for(var t=this.Ca,n=0,i=this.et,r=0,e=i.length;r<e;++r){var o=i[r],s=py(t,n,o,2,.5);m(this.Pa,s),n=o}}return this.Pa},t.prototype.getId=function(){return this.P},t.prototype.getOrientedFlatCoordinates=function(){return this.Ca},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Na},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.Aa},t.prototype.transform=function(t){var n=(t=Sr(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=ni(i)/ni(n);ln(Sy,i[0],i[3],r,-r,0,0,0),Yr(this.Ca,0,this.Ca.length,2,Sy,this.Ca)}},t.prototype.getEnds=function(){return this.et},t}();function Ey(t){var n=t.getType();switch(n){case Nt:return new Ne(t.getFlatCoordinates());case It:return new dy(t.getFlatCoordinates(),Tt);case kt:return new my(t.getFlatCoordinates(),Tt);case Lt:return new _y(t.getFlatCoordinates(),Tt,t.getEnds());case Rt:var i=t.getFlatCoordinates(),r=t.getEnds(),e=$e(i,r);return e.length>1?new Oy(i,Tt,e):new to(i,Tt,r);default:throw new Error("Invalid geometry type:"+n)}}jy.prototype.getEndss=jy.prototype.getEnds,jy.prototype.getFlatCoordinates=jy.prototype.getOrientedFlatCoordinates;var Ty=jy;var Ay=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cy="renderOrder",Py=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(i=t.call(this,e)||this).ka=void 0!==r.declutter&&r.declutter,i.ia=void 0!==r.renderBuffer?r.renderBuffer:100,i.k=null,i.R=void 0,i.setStyle(r.style),i.Fa=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.Ra=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return Ay(n,t),n.prototype.getDeclutter=function(){return this.ka},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.ia},n.prototype.getRenderOrder=function(){return this.get(Cy)},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.R},n.prototype.getUpdateWhileAnimating=function(){return this.Fa},n.prototype.getUpdateWhileInteracting=function(){return this.Ra},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new id(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Cy,t)},n.prototype.setStyle=function(t){this.k=void 0!==t?t:vv,this.R=null===t?void 0:av(this.k),this.changed()},n}(Os),Ny=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ky=function(t){function n(n){return t.call(this,n)||this}return Ny(n,t),n.prototype.createRenderer=function(){return new ay(this)},n}(Py);function Fy(t,n,i){for(var r,e,o,s,u,h,f=[],a=t(0),c=t(1),v=n(a),l=n(c),d=[c,a],p=[l,v],w=[1,0],y={},g=1e5;--g>0&&w.length>0;)o=w.pop(),a=d.pop(),v=p.pop(),(h=o.toString())in y||(f.push(v[0],v[1]),y[h]=!0),s=w.pop(),c=d.pop(),l=p.pop(),yi((e=n(r=t(u=(o+s)/2)))[0],e[1],v[0],v[1],l[0],l[1])<i?(f.push(l[0],l[1]),y[h=s.toString()]=!0):(w.push(s,u,u,o),p.push(l,e,e,v),d.push(c,r,r,a));return f}function Ry(t,n,i,r,e){return Fy((function(r){return[t,n+(i-n)*r]}),Fr(Sr("EPSG:4326"),r),e)}function Iy(t,n,i,r,e){return Fy((function(r){return[n+(i-n)*r,t]}),Fr(Sr("EPSG:4326"),r),e)}var Ly=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gy=new uv({color:"rgba(0,0,0,0.2)"}),Dy=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],zy=function(t){function n(n){var i=this,r=n||{},e=A({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(i=t.call(this,e)||this).Kn=null,i.Ia=1/0,i.La=1/0,i.Ga=-1/0,i.Da=-1/0,i.za=1/0,i.Ua=1/0,i.Xa=-1/0,i.Ba=-1/0,i.qa=void 0!==r.targetSize?r.targetSize:100,i.Va=void 0!==r.maxLines?r.maxLines:100,i.Wa=[],i.Za=[],i.Ya=void 0!==r.strokeStyle?r.strokeStyle:Gy,i.Ha=void 0,i.Ja=void 0,i.$a=null,i.Qa=null,i.Ka=null,i.tc=null,i.nc=null,i.ic=null,i.rc=null,r.showLabels&&(i.ec=null==r.lonLabelFormatter?rr.bind(i,"EW"):r.lonLabelFormatter,i.oc=null==r.latLabelFormatter?rr.bind(i,"NS"):r.latLabelFormatter,i.sc=null==r.lonLabelPosition?0:r.lonLabelPosition,i.uc=null==r.latLabelPosition?1:r.latLabelPosition,i.hc=new pv({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new gv({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Zc({color:"rgba(0,0,0,1)"}),stroke:new uv({color:"rgba(255,255,255,1)",width:3})})}),i.fc=function(t){var n=t.get("graticule_label");return this.hc.getText().setText(n),this.hc}.bind(i),i.ac=new pv({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new gv({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Zc({color:"rgba(0,0,0,1)"}),stroke:new uv({color:"rgba(255,255,255,1)",width:3})})}),i.cc=function(t){var n=t.get("graticule_label");return this.ac.getText().setText(n),this.ac}.bind(i),i.ic=[],i.rc=[],i.addEventListener(ds,i.vc.bind(i))),i.lc=void 0!==r.intervals?r.intervals:Dy,i.setSource(new Pd({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new at,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.dc=[],i.wc=new pv({stroke:i.Ya}),i.yc=null,i.qh=null,i.la=null,i.setRenderOrder(null),i}return Ly(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.Kn&&this.getSource().getWrapX()&&vi(i,this.Kn),this.yc&&(Un(this.yc,i,n)?i=this.yc.slice():this.getSource().removeLoadedExtent(this.yc)),[i]},n.prototype.loaderFunction=function(t,n,i){this.yc=t;var r=this.getSource(),e=ii(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.qh&&zn(this.qh,e)&&this.la===n||(this.qh=e,this.la=n,ui(e)))){var o=Qn(e),s=n*n/4;(!this.Kn||!Nr(this.Kn,i))&&this.gc(i),this.mc(e,o,n,s);var u,h=this.Wa.length+this.Za.length;for(this.ic&&(h+=this.Wa.length),this.rc&&(h+=this.Za.length);h>this.dc.length;)u=new Et,this.dc.push(u);var f=r.getFeaturesCollection();f.clear();var a,c,v=0;for(a=0,c=this.Wa.length;a<c;++a)(u=this.dc[v++]).setGeometry(this.Wa[a]),u.setStyle(this.wc),f.push(u);for(a=0,c=this.Za.length;a<c;++a)(u=this.dc[v++]).setGeometry(this.Za[a]),u.setStyle(this.wc),f.push(u)}},n.prototype.bc=function(t,n,i,r,e,o){var s=this._c(t,n,i,r,o);if(si(s.getExtent(),e)){if(this.ic){var u=this.ec(t);o in this.ic?this.ic[o].text=u:this.ic[o]={geom:new Ne([]),text:u}}this.Wa[o++]=s}return o},n.prototype.Mc=function(t,n,i,r,e,o){var s=this.xc(t,n,i,r,o);if(si(s.getExtent(),e)){if(this.rc){var u=this.oc(t);o in this.rc?this.rc[o].text=u:this.rc[o]={geom:new Ne([]),text:u}}this.Za[o++]=s}return o},n.prototype.vc=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,e=t.frameState.extent,o=Qn(e),s=e;if(n){var u=r[0]*i,h=r[1]*i;s=[o[0]-u/2,o[1]-h/2,o[0]+u/2,o[1]+h/2]}var f=0,a=0,c=this.uc<.5,v=this.Kn.getExtent(),l=oi(v);this.getSource().getWrapX()&&this.Kn.canWrapX()&&!Nn(v,e)&&(f=Math.floor((e[0]-v[0])/l),a=Math.ceil((e[2]-v[2])/l),c=c!==Math.abs(n)>Math.PI/2);for(var d=za(t),p=f;p<=a;++p){var w=this.Wa.length+this.Za.length,y=void 0,g=void 0,m=void 0,b=void 0;if(this.ic)for(g=0,m=this.ic.length;g<m;++g){var _=this.Wa[g];if(n||0!==p)(M=_.clone()).translate(p*l,0),M.rotate(-n,o),(b=this.Oc(M,s,g)).rotate(n,o);else b=this.Oc(_,e,g);(y=this.dc[w++]).setGeometry(b),y.set("graticule_label",this.ic[g].text),d.drawFeature(y,this.fc(y))}if(this.rc&&(p===f&&c||p===a&&!c))for(g=0,m=this.Za.length;g<m;++g){var M;_=this.Za[g];if(n||0!==p)(M=_.clone()).translate(p*l,0),M.rotate(-n,o),(b=this.Sc(M,s,g)).rotate(n,o);else b=this.Sc(_,e,g);(y=this.dc[w++]).setGeometry(b),y.set("graticule_label",this.rc[g].text),d.drawFeature(y,this.cc(y))}}},n.prototype.mc=function(t,n,i,r){var e=this.jc(i);if(-1==e)return this.Wa.length=0,this.Za.length=0,this.ic&&(this.ic.length=0),void(this.rc&&(this.rc.length=0));var o=!1,s=this.Kn.getExtent(),u=oi(s);this.getSource().getWrapX()&&this.Kn.canWrapX()&&!Nn(s,t)&&(oi(t)>=u?(t[0]=s[0],t[2]=s[2]):o=!0);var h=[di(n[0],this.Xa,this.za),di(n[1],this.Ba,this.Ua)],f=this.Ja(h);isNaN(f[1])&&(f[1]=Math.abs(this.Ia)>=Math.abs(this.Ga)?this.Ia:this.Ga);var a,c,v,l,d=di(f[0],this.Da,this.La),p=di(f[1],this.Ga,this.Ia),w=this.Va,y=t;o||(y=[di(t[0],this.Xa,this.za),di(t[1],this.Ba,this.Ua),di(t[2],this.Xa,this.za),di(t[3],this.Ba,this.Ua)]);var g=ci(y,this.Ja,void 0,8),m=g[3],b=g[2],_=g[1],M=g[0];if(o||(Pn(y,this.Qa)&&(M=this.Da,_=this.Ga),Pn(y,this.Ka)&&(b=this.La,_=this.Ga),Pn(y,this.tc)&&(M=this.Da,m=this.Ia),Pn(y,this.nc)&&(b=this.La,m=this.Ia),m=di(m,p,this.Ia),b=di(b,d,this.La),_=di(_,this.Ga,p),M=di(M,this.Da,d)),l=di(d=Math.floor(d/e)*e,this.Da,this.La),c=this.bc(l,_,m,r,t,0),a=0,o)for(;(l-=e)>=M&&a++<w;)c=this.bc(l,_,m,r,t,c);else for(;l!=this.Da&&a++<w;)l=Math.max(l-e,this.Da),c=this.bc(l,_,m,r,t,c);if(l=di(d,this.Da,this.La),a=0,o)for(;(l+=e)<=b&&a++<w;)c=this.bc(l,_,m,r,t,c);else for(;l!=this.La&&a++<w;)l=Math.min(l+e,this.La),c=this.bc(l,_,m,r,t,c);for(this.Wa.length=c,this.ic&&(this.ic.length=c),v=di(p=Math.floor(p/e)*e,this.Ga,this.Ia),c=this.Mc(v,M,b,r,t,0),a=0;v!=this.Ga&&a++<w;)v=Math.max(v-e,this.Ga),c=this.Mc(v,M,b,r,t,c);for(v=di(p,this.Ga,this.Ia),a=0;v!=this.Ia&&a++<w;)v=Math.min(v+e,this.Ia),c=this.Mc(v,M,b,r,t,c);this.Za.length=c,this.rc&&(this.rc.length=c)},n.prototype.jc=function(t){for(var n=this.$a[0],i=this.$a[1],r=-1,e=Math.pow(this.qa*t,2),o=[],s=[],u=0,h=this.lc.length;u<h;++u){var f=di(this.lc[u]/2,0,90),a=di(i,-90+f,90-f);if(o[0]=n-f,o[1]=a-f,s[0]=n+f,s[1]=a+f,this.Ha(o,o),this.Ha(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=e)break;r=this.lc[u]}return r},n.prototype._c=function(t,n,i,r,e){var o=Ry(t,n,i,this.Kn,r),s=this.Wa[e];return s?(s.setFlatCoordinates(Tt,o),s.changed()):(s=new my(o,Tt),this.Wa[e]=s),s},n.prototype.Oc=function(t,n,i){var r=t.getFlatCoordinates(),e=1,o=r.length-1;r[e]>r[o]&&(e=o,o=1);var s=Math.max(n[1],r[e]),u=Math.min(n[3],r[o]),h=di(n[1]+Math.abs(n[1]-n[3])*this.sc,s,u),f=[r[e-1]+(r[o-1]-r[e-1])*(h-r[e])/(r[o]-r[e]),h],a=this.ic[i].geom;return a.setCoordinates(f),a},n.prototype.getMeridians=function(){return this.Wa},n.prototype.xc=function(t,n,i,r,e){var o=Iy(t,n,i,this.Kn,r),s=this.Za[e];return s?(s.setFlatCoordinates(Tt,o),s.changed()):s=new my(o,Tt),s},n.prototype.Sc=function(t,n,i){var r=t.getFlatCoordinates(),e=0,o=r.length-2;r[e]>r[o]&&(e=o,o=0);var s=Math.max(n[0],r[e]),u=Math.min(n[2],r[o]),h=di(n[0]+Math.abs(n[0]-n[2])*this.uc,s,u),f=[h,r[e+1]+(r[o+1]-r[e+1])*(h-r[e])/(r[o]-r[e])],a=this.rc[i].geom;return a.setCoordinates(f),a},n.prototype.getParallels=function(){return this.Za},n.prototype.gc=function(t){var n=Sr("EPSG:4326"),i=t.getWorldExtent();this.Ia=i[3],this.La=i[2],this.Ga=i[1],this.Da=i[0];var r=Fr(t,n);if(this.Da<this.La)this.Ja=r;else{var e=this.Da+this.La/2;this.La+=360,this.Ja=function(t,n,i){for(var o=i||2,s=r(t,n,o),u=0,h=s.length;u<h;u+=o)s[u]<e&&(s[u]+=360);return s}}this.Ha=Fr(n,t);var o=ci([this.Da,this.Ga,this.La,this.Ia],this.Ha,void 0,8);this.Xa=o[0],this.za=o[2],this.Ba=o[1],this.Ua=o[3],this.Qa=this.Ha([this.Da,this.Ga]),this.Ka=this.Ha([this.La,this.Ga]),this.tc=this.Ha([this.Da,this.Ia]),this.nc=this.Ha([this.La,this.Ia]),this.$a=this.Ja(Qn(t.getExtent())),isNaN(this.$a[1])&&(this.$a[1]=Math.abs(this.Ia)>=Math.abs(this.Ga)?this.Ia:this.Ga),this.Kn=t},n}(ky),Uy=new Uint8Array(4),Xy=function(){function t(t,n){this.zs=t;var i=t.getGL();this.ds=i.createTexture(),this.Ec=i.createFramebuffer(),this.So=n||[1,1],this.A=new Uint8Array(0),this.Tc=!0,this.Ac()}return t.prototype.setSize=function(t){_(t,this.So)||(this.So[0]=t[0],this.So[1]=t[1],this.Ac())},t.prototype.getSize=function(){return this.So},t.prototype.clearCachedData=function(){this.Tc=!0},t.prototype.readAll=function(){if(this.Tc){var t=this.So,n=this.zs.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.Ec),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.A),this.Tc=!1}return this.A},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.So[0]||n>=this.So[1])return Uy[0]=0,Uy[1]=0,Uy[2]=0,Uy[3]=0,Uy;this.readAll();var i=Math.floor(t)+(this.So[1]-Math.floor(n)-1)*this.So[0];return Uy[0]=this.A[4*i],Uy[1]=this.A[4*i+1],Uy[2]=this.A[4*i+2],Uy[3]=this.A[4*i+3],Uy},t.prototype.getTexture=function(){return this.ds},t.prototype.getFramebuffer=function(){return this.Ec},t.prototype.Ac=function(){var t=this.So,n=this.zs.getGL();this.ds=this.zs.createTexture(t,null,this.ds),n.bindFramebuffer(n.FRAMEBUFFER,this.Ec),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.ds,0),this.A=new Uint8Array(t[0]*t[1]*4)},t}();var By=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qy=function(t){function n(n,i){var r=this,e=i.uniforms||{},s=[1,0,0,1,0,0];e[qv]=s,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).ready=!1,r.Cc=-1,r.Pc=new Nv(Ov,Ev),r.Nc=new Nv(Ov,Ev),r.kc=new Nv(Sv,Ev),r.Eu=i.vertexShader,r.Tu=i.fragmentShader,r.ju,r.Fc=!(!i.hitFragmentShader||!i.hitVertexShader),r.Rc=i.hitVertexShader,r.Ic=i.hitFragmentShader,r.Lc;var u=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:Jv.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:Jv.FLOAT},{name:"a_index",size:1,type:Jv.FLOAT}].concat(u),r.hitDetectionAttributes=[{name:"a_position",size:2,type:Jv.FLOAT},{name:"a_index",size:1,type:Jv.FLOAT},{name:"a_hitColor",size:4,type:Jv.FLOAT},{name:"a_featureUid",size:1,type:Jv.FLOAT}].concat(u),r.customAttributes=i.attributes?i.attributes:[],r.ki=[1/0,1/0,-1/0,-1/0],r.Gc=s,r.Dc=[1,0,0,1,0,0],r.zc=[1,0,0,1,0,0],r.Uc=new Float32Array(0),r.Xc=new Float32Array(0),r.Bc,r.qc=0,r.Vc=function(){var t='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),r.Vc.addEventListener("message",function(t){var n=t.data;if(n.type===rl){var i=n.projectionTransform;n.hitDetection?(this.Nc.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Nc)):(this.Pc.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Pc)),this.kc.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.kc),this.Dc=i,dn(this.zc,this.Dc),n.hitDetection?this.Xc=new Float32Array(t.data.renderInstructions):(this.Uc=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.qc&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.Wc={},r.Zc=0;var h=r.getLayer().getSource();return r.Yc=[H(h,Md,r.Hc,r),H(h,xd,r.Jc,r),H(h,Sd,r.$c,r),H(h,Od,r.Qc,r)],h.forEachFeature(function(t){this.Wc[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Zc++}.bind(r)),r}return By(n,t),n.prototype.afterHelperCreated=function(){this.ju=this.helper.getProgram(this.Tu,this.Eu),this.Fc&&(this.Lc=this.helper.getProgram(this.Ic,this.Rc),this.Bc=new Xy(this.helper))},n.prototype.Hc=function(t){var n=t.feature;this.Wc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.Zc++},n.prototype.Jc=function(t){var n=t.feature;this.Wc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.$c=function(t){var n=t.feature;delete this.Wc[o(n)],this.Zc--},n.prototype.Qc=function(){this.Wc={},this.Zc=0},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=this.kc.getSize();this.helper.drawElements(0,i),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var r=this.helper.getCanvas();return this.Fc&&(this.renderHitDetection(t),this.Bc.clearCachedData()),this.postRender(n,t),r},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,e=!t.viewHints[zu]&&!t.viewHints[Uu],o=!zn(this.ki,t.extent),s=this.Cc<i.getRevision();if(s&&(this.Cc=i.getRevision()),e&&(o||s)){var u=r.projection,h=r.resolution,f=n instanceof Py?n.getRenderBuffer():0,a=Tn(t.extent,f*h);i.loadFeatures(a,h,u),this.Kc(t),this.ki=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Gc),sn(this.Gc,this.zc),this.helper.useProgram(this.ju),this.helper.prepareDraw(t),this.helper.bindBuffer(this.Pc),this.helper.bindBuffer(this.kc),this.helper.enableAttributes(this.attributes),!0},n.prototype.Kc=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,e=(2+this.customAttributes.length)*this.Zc;if(this.Uc&&this.Uc.length===e||(this.Uc=new Float32Array(e)),this.Fc){var o=(7+this.customAttributes.length)*this.Zc;this.Xc&&this.Xc.length===o||(this.Xc=new Float32Array(o))}var s,u,h,f,a,c=[],v=[],l=0,d=0;for(var p in this.Wc)if((r=(i=this.Wc[p]).geometry)&&r.getType()===Nt){c[0]=r.getFlatCoordinates()[0],c[1]=r.getFlatCoordinates()[1],fn(n,c),u=d+6,h=void 0,f=void 0,a=void 0,f=256,a=255,(h=v||[])[0]=Math.floor(u/f/f/f)/a,h[1]=Math.floor(u/f/f)%f/a,h[2]=Math.floor(u/f)%f/a,h[3]=u%f/a,s=h,this.Uc[l++]=c[0],this.Uc[l++]=c[1],this.Fc&&(this.Xc[d++]=c[0],this.Xc[d++]=c[1],this.Xc[d++]=s[0],this.Xc[d++]=s[1],this.Xc[d++]=s[2],this.Xc[d++]=s[3],this.Xc[d++]=Number(p));for(var w=void 0,y=0;y<this.customAttributes.length;y++)w=this.customAttributes[y].callback(i.feature,i.properties),this.Uc[l++]=w,this.Fc&&(this.Xc[d++]=w)}var g={type:rl,renderInstructions:this.Uc.buffer,customAttributesCount:this.customAttributes.length};if(g.projectionTransform=n,g.generateBuffersRun=++this.qc,this.ready=!1,this.Vc.postMessage(g,[this.Uc.buffer]),this.Uc=null,this.Fc){var m={type:rl,renderInstructions:this.Xc.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=n,m.hitDetection=!0,this.Vc.postMessage(m,[this.Xc.buffer]),this.Xc=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){if(Ot(this.Fc,66),this.Xc){var o=fn(n.coordinateToPixelTransform,t.slice()),s=this.Bc.readPixel(o[0]/2,o[1]/2),u=function(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+Math.round(t[3]*r)}([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),h=this.Xc[u],f=Math.floor(h).toString(),a=this.getLayer().getSource().getFeatureByUid(f);return a?r(a,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t){if(this.Nc.getSize()){this.Bc.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Lc),this.helper.prepareDrawToRenderTarget(t,this.Bc,!0),this.helper.bindBuffer(this.Nc),this.helper.bindBuffer(this.kc),this.helper.enableAttributes(this.hitDetectionAttributes);var n=this.kc.getSize();this.helper.drawElements(0,n)}},n.prototype.disposeInternal=function(){this.Vc.terminate(),this.qs=null,this.Yc.forEach((function(t){$(t)})),this.Yc=null,t.prototype.disposeInternal.call(this)},n}(ol),Vy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wy="blur",Zy="gradient",Yy="radius",Hy=["#00f","#0ff","#0f0","#ff0","#f00"];var Jy=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(i=t.call(this,e)||this).tv=null,i.addChangeListener(Zy,i.nv),i.setGradient(r.gradient?r.gradient:Hy),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.iv="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return Vy(n,t),n.prototype.getBlur=function(){return this.get(Wy)},n.prototype.getGradient=function(){return this.get(Zy)},n.prototype.getRadius=function(){return this.get(Yy)},n.prototype.nv=function(){this.tv=function(t){for(var n=1,i=256,r=Po(n,i),e=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),s=0,u=t.length;s<u;++s)e.addColorStop(s*o,t[s]);return r.fillStyle=e,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(Wy,t)},n.prototype.setGradient=function(t){this.set(Zy,t)},n.prototype.setRadius=function(t){this.set(Yy,t)},n.prototype.createRenderer=function(){return new qy(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.iv(t);return void 0!==n?di(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(Yy)+this.get(Wy))}.bind(this),u_blurSlope:function(){return this.get(Yy)/Math.max(1,this.get(Wy))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.tv}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(Py),$y=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qy=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.imageRatio,(i=t.call(this,e)||this).rv=void 0!==r.imageRatio?r.imageRatio:1,i}return $y(n,t),n.prototype.getImageRatio=function(){return this.rv},n.prototype.createRenderer=function(){return new vy(this)},n}(Py),Ky=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tg="addfeatures",ng=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=e,o}return Ky(n,t),n}(c),ig=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:O})||this).on,i.once,i.un,i.ev=!1,i.ov=[];for(var e=r.formatConstructors?r.formatConstructors:[],o=0,s=e.length;o<s;++o){var u=e[o];"function"==typeof u&&(u=new u),i.ov.push(u),i.ev=i.ev||u.getType()===aa}return i.Kn=r.projection?Sr(r.projection):null,i.sv=null,i.uv=r.source||null,i.target=r.target?r.target:null,i}return Ky(n,t),n.prototype.hv=function(t,n){var i,r=n.target.result,e=this.getMap(),o=this.Kn;o||(o=e.getView().getProjection());for(var s=this.ov,u=0,h=s.length;u<h;++u){var f=s[u],a=r;this.ev&&f.getType()!==aa&&(void 0===i&&(i=(new TextDecoder).decode(r)),a=i);var c=this.fv(f,a,{featureProjection:o});if(c&&c.length>0){this.uv&&(this.uv.clear(),this.uv.addFeatures(c)),this.dispatchEvent(new ng(tg,t,c,o));break}}},n.prototype.av=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.sv=[H(n,X,this.handleDrop,this),H(n,z,this.handleStop,this),H(n,U,this.handleStop,this),H(n,X,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.av(),this.getActive()&&!n&&this.cv(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.cv(),t.prototype.setMap.call(this,n),this.getActive()&&this.av()},n.prototype.fv=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.cv=function(){this.sv&&(this.sv.forEach($),this.sv=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var e=n.item(i),o=new FileReader;o.addEventListener(V,this.hv.bind(this,e)),this.ev?o.readAsArrayBuffer(e):o.readAsText(e)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(Ch),rg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eg=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).kr=r.condition?r.condition:Wh,i.Rr=void 0,i.vv=void 0,i.ce=0,i.br=void 0!==r.duration?r.duration:400,i}return rg(n,t),n.prototype.handleDragEvent=function(t){if(Yh(t)){var n=t.map,i=n.getSize(),r=t.pixel,e=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,e),u=Math.sqrt(e*e+o*o),h=n.getView();if(void 0!==this.Rr){var f=this.Rr-s;h.adjustRotationInternal(f)}this.Rr=s,void 0!==this.vv&&h.adjustResolutionInternal(this.vv/u),void 0!==this.vv&&(this.ce=this.vv/u),this.vv=u}},n.prototype.handleUpEvent=function(t){if(!Yh(t))return!0;var n=t.map.getView(),i=this.ce>1?1:-1;return n.endInteraction(this.br,i),this.ce=0,!1},n.prototype.handleDownEvent=function(t){return!!Yh(t)&&(!!this.kr(t)&&(t.map.getView().beginInteraction(),this.Rr=void 0,this.vv=void 0,!0))},n}(Rh),og=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sg=function(t){function n(n,i,r){var e=t.call(this)||this;if(void 0!==r&&void 0===i)e.setFlatCoordinates(r,n);else{var o=i||0;e.setCenterAndRadius(n,o,r)}return e}return og(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=t-e[0],s=n-e[1],u=o*o+s*s;if(u<r){if(0===u)for(var h=0;h<this.stride;++h)i[h]=e[h];else{var f=this.getRadius()/Math.sqrt(u);i[0]=e[0]+f*o,i[1]=e[1]+f*s;for(h=2;h<this.stride;++h)i[h]=e[h]}return i.length=this.stride,u}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],e=n-i[1];return r*r+e*e<=this.lv()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return In(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.lv())},n.prototype.lv=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return zt},n.prototype.intersectsExtent=function(t){if(si(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Yn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var e=1;e<n;++e)r[n+e]=t[e];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,e=ve(r,0,t,this.stride);r[e++]=r[0]+n;for(var o=1,s=this.stride;o<s;++o)r[e++]=r[o];r.length=e,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Hr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter($r(i,0,i.length,r,t,n,i)),this.changed()},n}(ee);sg.prototype.transform;var ug=sg,hg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fg="Point",ag="LineString",cg="Polygon",vg="Circle",lg="drawstart",dg="drawend",pg="drawabort",wg=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return hg(n,t),n}(c);var yg=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=S),(i=t.call(this,r)||this).on,i.once,i.un,i.dv=!1,i.pv=null,i.wv,i.yv,i.gv,i.mv=!1,i.uv=n.source?n.source:null,i.bv=n.features?n.features:null,i._v=n.snapTolerance?n.snapTolerance:12,i.Aa=n.type,i.te=function(t){switch(t){case Nt:case It:return fg;case kt:case Lt:return ag;case Rt:case Gt:return cg;case zt:return vg;default:throw new Error("Invalid type: "+t)}}(i.Aa),i.Mv=!!n.stopClick,i.xv=n.minPoints?n.minPoints:i.te===cg?3:2,i.Ov=i.te===vg?2:n.maxPoints?n.maxPoints:1/0,i.Sv=n.finishCondition?n.finishCondition:O;var e,o=n.geometryFunction;if(!o){var s,u=i.te;if(u===vg)o=function(t,n,i){var r=n||new ug([NaN,NaN]),e=Ur(t[0],i),o=hr(e,Ur(t[t.length-1],i));r.setCenterAndRadius(e,Math.sqrt(o));var s=Dr();return s&&r.transform(i,s),r};else u===fg?s=Ne:u===ag?s=my:u===cg&&(s=to),o=function(t,n,i){return n?u===cg?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new s(t),n}}return i.Ko=o,i.jv=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Ev=null,i.Tv=null,i.Av=null,i.Cv=null,i.Pv=null,i.Nv=null,i.kv=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Fv=new ky({source:new Pd({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=lv(),function(t,n){return e[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.N=n.geometryName,i.kr=n.condition?n.condition:Vh,i.Rv,n.freehand?i.Rv=Uh:i.Rv=n.freehandCondition?n.freehandCondition:Wh,i.addChangeListener(jh,i.Iv),i}return hg(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Iv()},n.prototype.getOverlay=function(){return this.Fv},n.prototype.handleEvent=function(n){n.originalEvent.type===L&&n.originalEvent.preventDefault(),this.mv=this.te!==fg&&this.Rv(n);var i=n.type===mu.POINTERMOVE,r=!0;!this.mv&&this.yv&&n.type===mu.POINTERDRAG&&(Date.now()-this.yv>=this.jv?(this.pv=n.pixel,this.dv=!this.mv,i=!0):this.yv=void 0,this.dv&&void 0!==this.wv&&(clearTimeout(this.wv),this.wv=void 0));return this.mv&&n.type===mu.POINTERDRAG&&null!==this.Tv?(this.Lv(n.coordinate),r=!1):this.mv&&n.type===mu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===mu.POINTERMOVE)&&this.mv?(this.kn(n),this.dv&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===mu.POINTERDRAG&&void 0===this.wv)&&this.kn(n):n.type===mu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.dv=!this.mv,this.mv?(this.pv=t.pixel,this.Ev||this.Gv(t.coordinate),!0):this.kr(t)?(this.yv=Date.now(),this.wv=setTimeout(function(){this.kn(new gu(mu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.jv),this.pv=t.pixel,!0):(this.yv=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.wv&&(clearTimeout(this.wv),this.wv=void 0),this.kn(t),this.dv){var i=!this.Ev;i&&this.Gv(t.coordinate),!i&&this.mv?this.finishDrawing():this.mv||i&&this.te!==fg||(this.Dv(t.pixel)?this.Sv(t)&&this.finishDrawing():this.Lv(t.coordinate)),n=!1}else this.mv&&this.abortDrawing();return!n&&this.Mv&&t.preventDefault(),n},n.prototype.kn=function(t){if(this.gv=t.originalEvent.pointerType,this.pv&&(!this.mv&&this.dv||this.mv&&!this.dv)){var n=this.pv,i=t.pixel,r=n[0]-i[0],e=n[1]-i[1],o=r*r+e*e;if(this.dv=this.mv?o>this.kv:o<=this.kv,!this.dv)return}this.Ev?this.zv(t.coordinate):this.Uv(t.coordinate.slice())},n.prototype.Dv=function(t){var n=!1;if(this.Tv){var i=!1,r=[this.Ev],e=this.te;if(e===fg)n=!0;else if(e===vg)n=2===this.Cv.length;else if(e===ag)i=this.Cv.length>this.xv;else if(e===cg){var o=this.Cv;i=o[0].length>this.xv,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=this.getMap(),u=0,h=r.length;u<h;u++){var f=r[u],a=s.getPixelFromCoordinate(f),c=t[0]-a[0],v=t[1]-a[1],l=this.mv?1:this._v;if(n=Math.sqrt(c*c+v*v)<=l){this.Ev=f;break}}}return n},n.prototype.Uv=function(t){this.Av?this.Av.getGeometry().setCoordinates(t):(this.Av=new Et(new Ne(t)),this.Xv())},n.prototype.Bv=function(t){this.Pv||(this.Pv=new Et);var n=t.getLinearRing(0),i=this.Pv.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new my(n.getFlatCoordinates(),n.getLayout()),this.Pv.setGeometry(i))},n.prototype.Gv=function(t){var n=this.getMap().getView().getProjection();this.Ev=t,this.te===fg?this.Cv=t.slice():this.te===cg?(this.Cv=[[t.slice(),t.slice()]],this.Nv=this.Cv[0]):this.Cv=[t.slice(),t.slice()],this.Nv&&(this.Pv=new Et(new my(this.Nv)));var i=this.Ko(this.Cv,void 0,n);this.Tv=new Et,this.N&&this.Tv.setGeometryName(this.N),this.Tv.setGeometry(i),this.Xv(),this.dispatchEvent(new wg(lg,this.Tv))},n.prototype.zv=function(t){var n,i,r=this.getMap(),e=this.Tv.getGeometry(),o=r.getView().getProjection();(this.te===fg?i=this.Cv:this.te===cg?(i=(n=this.Cv[0])[n.length-1],this.Dv(r.getPixelFromCoordinate(t))&&(t=this.Ev.slice())):i=(n=this.Cv)[n.length-1],i[0]=t[0],i[1]=t[1],this.Ko(this.Cv,e,o),this.Av)&&this.Av.getGeometry().setCoordinates(t);if(e.getType()===Rt&&this.te!==cg)this.Bv(e);else if(this.Nv){this.Pv.getGeometry().setCoordinates(this.Nv)}this.Xv()},n.prototype.Lv=function(t){var n,i,r=this.Tv.getGeometry(),e=this.getMap().getView().getProjection(),o=this.te;o===ag||o===vg?(this.Ev=t.slice(),(i=this.Cv).length>=this.Ov&&(this.mv?i.pop():n=!0),i.push(t.slice()),this.Ko(i,r,e)):o===cg&&((i=this.Cv[0]).length>=this.Ov&&(this.mv?i.pop():n=!0),i.push(t.slice()),n&&(this.Ev=i[0]),this.Ko(this.Cv,r,e)),this.Uv(t.slice()),this.Xv(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.Tv){var t,n=this.Tv.getGeometry(),i=this.getMap().getView().getProjection(),r=this.te;if(r===ag||r===vg){if((t=this.Cv).splice(-2,1),t.length>=2){this.Ev=t[t.length-2].slice();var e=this.Ev.slice();t[t.length-1]=e,this.Uv(e)}this.Ko(t,n,i),n.getType()===Rt&&this.Pv&&this.Bv(n)}else if(r===cg){(t=this.Cv[0]).splice(-2,1);var o=this.Pv.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.Uv(e)}o.setCoordinates(t),this.Ko(this.Cv,n,i)}1===t.length&&this.abortDrawing(),this.Xv()}},n.prototype.finishDrawing=function(){var t=this.qv();if(t){var n=this.Cv,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.te===ag?(n.pop(),this.Ko(n,i,r)):this.te===cg&&(n[0].pop(),this.Ko(n,i,r),n=i.getCoordinates()),this.Aa===It?t.setGeometry(new dy([n])):this.Aa===Lt?t.setGeometry(new _y([n])):this.Aa===Gt&&t.setGeometry(new Oy([n])),this.dispatchEvent(new wg(dg,t)),this.bv&&this.bv.push(t),this.uv&&this.uv.addFeature(t)}},n.prototype.qv=function(){this.Ev=null;var t=this.Tv;return this.Tv=null,this.Av=null,this.Pv=null,this.Fv.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.qv();t&&this.dispatchEvent(new wg(pg,t))},n.prototype.appendCoordinates=function(t){var n,i=this.te,r=!this.Tv;if(r&&this.Gv(t[0]),i===ag||i===vg)n=this.Cv;else{if(i!==cg)return;n=this.Cv&&this.Cv.length?this.Cv[0]:[]}r&&n.shift(),n.pop();for(var e=0;e<t.length;e++)this.Lv(t[e]);var o=t[t.length-1];this.Lv(o),this.zv(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.Tv=t,this.Cv=n.getCoordinates();var i=this.Cv[this.Cv.length-1];this.Ev=i.slice(),this.Cv.push(i.slice()),this.Av=new Et(new Ne(i)),this.Xv(),this.dispatchEvent(new wg(lg,this.Tv))},n.prototype.Xv=function(){var t=[];this.Tv&&t.push(this.Tv),this.Pv&&t.push(this.Pv),this.Av&&t.push(this.Av);var n=this.Fv.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Iv=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Fv.setMap(n?t:null)},n}(Rh),gg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mg="extentchanged",bg=function(t){function n(n){var i=t.call(this,mg)||this;return i.extent=n,i}return gg(n,t),n}(c);function _g(){var t=lv();return function(n,i){return t[Nt]}}function Mg(t){return function(n){return En([t,n])}}function xg(t,n){return t[0]==n[0]?function(i){return En([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return En([t,[n[0],i[1]]])}:null}var Og=function(t){function n(n){var i,r=this,e=n||{};return(r=t.call(this,e)||this).on,r.once,r.un,r.kr=e.condition?e.condition:Uh,r.q=null,r.Vv=null,r.Wv=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.Zv=!1,r.Yv=null,r.Hv=null,n||(n={}),r.Jv=new ky({source:new Pd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=lv(),function(t,n){return i[Rt]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.$v=new ky({source:new Pd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:_g(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return gg(n,t),n.prototype.Qv=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);e.sort((function(t,n){return ar(i,t)-ar(i,n)}));var o=e[0],s=ir(i,o),u=n.getPixelFromCoordinateInternal(s);if(fr(t,u)<=this.Wv){var h=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),a=hr(u,h),c=hr(u,f),v=Math.sqrt(Math.min(a,c));return this.Zv=v<=this.Wv,this.Zv&&(s=a>c?o[1]:o[0]),s}}return null},n.prototype.kn=function(t){var n=t.pixel,i=t.map,r=this.Qv(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.Kv(r)},n.prototype.tl=function(t){var n=this.Yv;return n?t?n.setGeometry(io(t)):n.setGeometry(void 0):(n=new Et(t?io(t):{}),this.Yv=n,this.Jv.getSource().addFeature(n)),n},n.prototype.Kv=function(t){var n=this.Hv;n?n.getGeometry().setCoordinates(t):(n=new Et(new Ne(t)),this.Hv=n,this.$v.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.kr(n)||(n.type!=mu.POINTERMOVE||this.handlingDownUpSequence||this.kn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),e=this.Qv(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(e&&r){var s=e[0]==r[0]||e[0]==r[2]?e[0]:null,u=e[1]==r[1]||e[1]==r[3]?e[1]:null;null!==s&&null!==u?this.Vv=Mg(o(e)):null!==s?this.Vv=xg(o([s,r[1]]),o([s,r[3]])):null!==u&&(this.Vv=xg(o([r[0],u]),o([r[2],u])))}else e=i.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.Vv=Mg(e);return!0},n.prototype.handleDragEvent=function(t){if(this.Vv){var n=t.coordinate;this.setExtent(this.Vv(n)),this.Kv(n)}},n.prototype.handleUpEvent=function(t){this.Vv=null;var n=this.getExtentInternal();return n&&0!==Hn(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.Jv.setMap(n),this.$v.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Xr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.q},n.prototype.setExtent=function(t){this.q=t||null,this.tl(t),this.dispatchEvent(new bg(this.q))},n}(Rh);function Sg(t){return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eg=[0,0,0,0],Tg=[],Ag="modifystart",Cg="modifyend",Pg=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.features=i,e.mapBrowserEvent=r,e}return jg(n,t),n}(c);function Ng(t,n){return t.index-n.index}function kg(t,n,i){var r=n.geometry;if(r.getType()===zt){var e=r;if(1===n.index){var o=Dr();o&&(e=e.clone().transform(o,i));var s=hr(e.getCenter(),Ur(t,i)),u=Math.sqrt(s)-e.getRadius();return u*u}}var h=Ur(t,i);return Tg[0]=Ur(n.segment[0],i),Tg[1]=Ur(n.segment[1],i),ar(h,Tg)}function Fg(t,n,i){var r=n.geometry;if(r.getType()===zt&&1===n.index){var e=r,o=Dr();return o&&(e=e.clone().transform(o,i)),zr(e.getClosestPoint(Ur(t,i)),i)}var s=Ur(t,i);return Tg[0]=Ur(n.segment[0],i),Tg[1]=Ur(n.segment[1],i),zr(ir(s,Tg),i)}var Rg=function(t){function n(n){var i,r,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.nl=e._h.bind(e),e.kr=n.condition?n.condition:Hh,e.il=function(t){return Lh(t)&&qh(t)},e.rl=n.deleteCondition?n.deleteCondition:e.il,e.el=n.insertVertexCondition?n.insertVertexCondition:Uh,e.Hv=null,e.sl=null,e.ul=[0,0],e.hl=!1,e.fl=null,e.al=new rd,e.Wv=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.Zv=!1,e.cl=!1,e.vl=[],e.Fv=new ky({source:new Pd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=lv(),function(t,n){return i[Nt]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.ll={Point:e.dl.bind(e),LineString:e.pl.bind(e),LinearRing:e.pl.bind(e),Polygon:e.wl.bind(e),MultiPoint:e.yl.bind(e),MultiLineString:e.gl.bind(e),MultiPolygon:e.ml.bind(e),Circle:e.bl.bind(e),GeometryCollection:e._l.bind(e)},e.uv=null,e.Ml=null,n.features?r=n.features:n.source&&(e.uv=n.source,r=new at(e.uv.getFeatures()),e.uv.addEventListener(Md,e.xl.bind(e)),e.uv.addEventListener(Sd,e.Ol.bind(e))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.Ml=n.hitDetection),e.bv=r,e.bv.forEach(e.Sl.bind(e)),e.bv.addEventListener(ot,e.jl.bind(e)),e.bv.addEventListener(st,e.El.bind(e)),e.Tl=null,e.Er=[0,0],e.Al=void 0===n.snapToPointer?!e.Ml:n.snapToPointer,e}return jg(n,t),n.prototype.Sl=function(t){var n=t.getGeometry();if(n){var i=this.ll[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.Cl(this.ul,r),t.addEventListener(R,this.nl)},n.prototype.Pl=function(t,n){if(!this.fl){this.fl=new at;for(var i=this.fl.getArray(),r=0,e=n.length;r<e;++r)for(var o=n[r],s=0,u=o.length;s<u;++s){var h=o[s].feature;h&&-1===i.indexOf(h)&&this.fl.push(h)}0===this.fl.getLength()?this.fl=null:this.dispatchEvent(new Pg(Ag,this.fl,t))}},n.prototype.Nl=function(t){this.kl(t),this.Hv&&0===this.bv.getLength()&&(this.Fv.getSource().removeFeature(this.Hv),this.Hv=null),t.removeEventListener(R,this.nl)},n.prototype.kl=function(t){var n=this.al,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var e=i[r],o=this.vl.length-1;o>=0;--o)this.vl[o][0]===e&&this.vl.splice(o,1);n.remove(e)}},n.prototype.setActive=function(n){this.Hv&&!n&&(this.Fv.getSource().removeFeature(this.Hv),this.Hv=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Fv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Fv},n.prototype.xl=function(t){t.feature&&this.bv.push(t.feature)},n.prototype.Ol=function(t){t.feature&&this.bv.remove(t.feature)},n.prototype.jl=function(t){this.Sl(t.element)},n.prototype._h=function(t){if(!this.cl){var n=t.target;this.Nl(n),this.Sl(n)}},n.prototype.El=function(t){var n=t.element;this.Nl(n)},n.prototype.dl=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.al.insert(n.getExtent(),r)},n.prototype.yl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){var o=i[r],s={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.al.insert(n.getExtent(),s)}},n.prototype.pl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){var o=i.slice(r,r+2),s={feature:t,geometry:n,index:r,segment:o};this.al.insert(En(o),s)}},n.prototype.gl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var h=o.slice(s,s+2),f={feature:t,geometry:n,depth:[r],index:s,segment:h};this.al.insert(En(h),f)}},n.prototype.wl=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var h=o.slice(s,s+2),f={feature:t,geometry:n,depth:[r],index:s,segment:h};this.al.insert(En(h),f)}},n.prototype.ml=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var h=o[s],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,geometry:n,depth:[s,r],index:f,segment:c};this.al.insert(En(c),v)}},n.prototype.bl=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},e={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,e];r.featureSegments=o,e.featureSegments=o,this.al.insert(Gn(i),r);var s=n,u=Dr();if(u&&this.getMap()){var h=this.getMap().getView().getProjection();s=ro(s=s.clone().transform(u,h)).transform(h,u)}this.al.insert(s.getExtent(),e)},n.prototype._l=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=i[r];(0,this.ll[e.getType()])(t,e)}},n.prototype.Fl=function(t,n,i){var r=this.Hv;r?r.getGeometry().setCoordinates(t):(r=new Et(new Ne(t)),this.Hv=r,this.Fv.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Tl=n,n.map.getView().getInteracting()||n.type!=mu.POINTERMOVE||this.handlingDownUpSequence||this.kn(n),this.Hv&&this.rl(n)&&(i=!(n.type!=mu.SINGLECLICK||!this.hl)||this.removePoint()),n.type==mu.SINGLECLICK&&(this.hl=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.hl=!1,this.Pl(t,this.vl);for(var n=[t.coordinate[0]+this.Er[0],t.coordinate[1]+this.Er[1]],i=[],r=[],e=0,o=this.vl.length;e<o;++e){var s=this.vl[e],u=s[0],h=u.feature;-1===i.indexOf(h)&&i.push(h);var f=u.geometry;-1===r.indexOf(f)&&r.push(f);for(var a=u.depth,c=void 0,v=u.segment,l=s[1];n.length<f.getStride();)n.push(v[l][n.length]);switch(f.getType()){case Nt:c=n,v[0]=n,v[1]=n;break;case It:(c=f.getCoordinates())[u.index]=n,v[0]=n,v[1]=n;break;case kt:(c=f.getCoordinates())[u.index+l]=n,v[l]=n;break;case Lt:case Rt:(c=f.getCoordinates())[a[0]][u.index+l]=n,v[l]=n;break;case Gt:(c=f.getCoordinates())[a[1]][a[0]][u.index+l]=n,v[l]=n;break;case zt:if(v[0]=n,v[1]=n,0===u.index)this.cl=!0,f.setCenter(n),this.cl=!1;else{this.cl=!0;var d=t.map.getView().getProjection(),p=fr(Ur(f.getCenter(),d),Ur(n,d)),w=Dr();if(w){var y=f.clone().transform(w,d);y.setRadius(p),p=y.transform(d,w).getRadius()}f.setRadius(p),this.cl=!1}}c&&this.Rl(f,c)}this.Fl(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.kr(t))return!1;var n=t.coordinate;this.Cl(t.pixel,t.map,n),this.vl.length=0,this.fl=null;var i=this.Hv;if(i){var r=t.map.getView().getProjection(),e=[],s=i.getGeometry().getCoordinates(),u=En([s]),h=this.al.getInExtent(u),f={};h.sort(Ng);for(var a=0,c=h.length;a<c;++a){var v=h[a],l=v.segment,d=o(v.geometry),p=v.depth;if(p&&(d+="-"+p.join("-")),f[d]||(f[d]=new Array(2)),v.geometry.getType()!==zt||1!==v.index)if(!or(l[0],s)||f[d][0])if(!or(l[1],s)||f[d][1])o(l)in this.sl&&!f[d][0]&&!f[d][1]&&this.el(t)&&e.push(v);else{if((v.geometry.getType()===kt||v.geometry.getType()===Lt)&&f[d][0]&&0===f[d][0].index)continue;this.vl.push([v,1]),f[d][1]=v}else this.vl.push([v,0]),f[d][0]=v;else or(Fg(n,v,r),s)&&!f[d][0]&&(this.vl.push([v,0]),f[d][0]=v)}e.length&&this.Pl(t,[e]);for(var w=e.length-1;w>=0;--w)this.Il(e[w],s)}return!!this.Hv},n.prototype.handleUpEvent=function(t){for(var n=this.vl.length-1;n>=0;--n){var i=this.vl[n][0],r=i.geometry;if(r.getType()===zt){var e=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=e,o.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.al.update(Gn(e),o);var u=r,h=Dr();if(h){var f=t.map.getView().getProjection();u=ro(u=u.clone().transform(h,f)).transform(f,h)}this.al.update(u.getExtent(),s)}else this.al.update(En(i.segment),i)}return this.fl&&(this.dispatchEvent(new Pg(Cg,this.fl,t)),this.fl=null),!1},n.prototype.kn=function(t){this.ul=t.pixel,this.Cl(t.pixel,t.map,t.coordinate)},n.prototype.Cl=function(t,n,i){var r,e,s=this,u=i||n.getCoordinateFromPixel(t),h=n.getView().getProjection();if(this.Ml){var f="object"===Sg(this.Ml)?function(t){return t===s.Ml}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if((i=i||t.getGeometry()).getType()===Nt&&w(s.bv.getArray(),t)){e=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var a=Xr(Tn(Br(Gn(u,Eg),h),n.getView().getResolution()*this.Wv,Eg),h);r=this.al.getInExtent(a)}if(r&&r.length>0){var c=r.sort((function(t,n){return kg(u,t,h)-kg(u,n,h)}))[0],v=c.segment,l=Fg(u,c,h),d=n.getPixelFromCoordinate(l),p=fr(t,d);if(e||p<=this.Wv){var y={};if(y[o(v)]=!0,this.Al||(this.Er[0]=l[0]-u[0],this.Er[1]=l[1]-u[1]),c.geometry.getType()===zt&&1===c.index)this.Zv=!0,this.Fl(l,[c.feature],[c.geometry]);else{var g=n.getPixelFromCoordinate(v[0]),m=n.getPixelFromCoordinate(v[1]),b=hr(d,g),_=hr(d,m);p=Math.sqrt(Math.min(b,_)),this.Zv=p<=this.Wv,this.Zv&&(l=b>_?v[1]:v[0]),this.Fl(l,[c.feature],[c.geometry]);var M={};M[o(c.geometry)]=!0;for(var x=1,O=r.length;x<O;++x){var S=r[x].segment;if(!(or(v[0],S[0])&&or(v[1],S[1])||or(v[0],S[1])&&or(v[1],S[0])))break;var j=o(r[x].geometry);j in M||(M[j]=!0,y[o(S)]=!0)}}return void(this.sl=y)}}this.Hv&&(this.Fv.getSource().removeFeature(this.Hv),this.Hv=null)},n.prototype.Il=function(t,n){for(var i,r=t.segment,e=t.feature,o=t.geometry,s=t.depth,u=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case Lt:case Rt:(i=o.getCoordinates())[s[0]].splice(u+1,0,n);break;case Gt:(i=o.getCoordinates())[s[1]][s[0]].splice(u+1,0,n);break;case kt:(i=o.getCoordinates()).splice(u+1,0,n);break;default:return}this.Rl(o,i);var h=this.al;h.remove(t),this.Ll(o,u,s,1);var f={segment:[r[0],n],feature:e,geometry:o,depth:s,index:u};h.insert(En(f.segment),f),this.vl.push([f,1]);var a={segment:[n,r[1]],feature:e,geometry:o,depth:s,index:u+1};h.insert(En(a.segment),a),this.vl.push([a,0]),this.hl=!0},n.prototype.removePoint=function(){if(this.Tl&&this.Tl.type!=mu.POINTERDRAG){var t=this.Tl;this.Pl(t,this.vl);var n=this.Gl();return this.fl&&this.dispatchEvent(new Pg(Cg,this.fl,t)),this.fl=null,n}return!1},n.prototype.Gl=function(){var t,n,i,r,e,s,u,h,f,a,c,v=this.vl,l={},d=!1;for(e=v.length-1;e>=0;--e)c=o((a=(i=v[e])[0]).feature),a.depth&&(c+="-"+a.depth.join("-")),c in l||(l[c]={}),0===i[1]?(l[c].right=a,l[c].index=a.index):1==i[1]&&(l[c].left=a,l[c].index=a.index+1);for(c in l){switch(f=l[c].right,u=l[c].left,(h=(s=l[c].index)-1)<0&&(h=0),t=n=(r=(a=void 0!==u?u:f).geometry).getCoordinates(),d=!1,r.getType()){case Lt:n[a.depth[0]].length>2&&(n[a.depth[0]].splice(s,1),d=!0);break;case kt:n.length>2&&(n.splice(s,1),d=!0);break;case Gt:t=t[a.depth[1]];case Rt:(t=t[a.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),d=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(d){this.Rl(r,n);var p=[];if(void 0!==u&&(this.al.remove(u),p.push(u.segment[0])),void 0!==f&&(this.al.remove(f),p.push(f.segment[1])),void 0!==u&&void 0!==f){var w={depth:a.depth,feature:a.feature,geometry:a.geometry,index:h,segment:p};this.al.insert(En(w.segment),w)}this.Ll(r,s,a.depth,-1),this.Hv&&(this.Fv.getSource().removeFeature(this.Hv),this.Hv=null),v.length=0}}return d},n.prototype.Rl=function(t,n){this.cl=!0,t.setCoordinates(n),this.cl=!1},n.prototype.Ll=function(t,n,i,r){this.al.forEachInExtent(t.getExtent(),(function(e){e.geometry===t&&(void 0===i||void 0===e.depth||_(e.depth,i))&&e.index>n&&(e.index+=r)}))},n}(Rh),Ig=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lg="select",Gg=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=e,o}return Ig(n,t),n}(c),Dg={};var zg=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,e,o=n||{};if(i.Dl=i.Sl.bind(i),i.zl=i.Nl.bind(i),i.kr=o.condition?o.condition:qh,i.Ul=o.addCondition?o.addCondition:Bh,i.Xl=o.removeCondition?o.removeCondition:Bh,i.Bl=o.toggleCondition?o.toggleCondition:Wh,i.ql=!!o.multi&&o.multi,i.Vl=o.filter?o.filter:O,i.Wl=o.hitTolerance?o.hitTolerance:0,i.k=void 0!==o.style?o.style:(m((r=lv())[Rt],r[kt]),m(r[Dt],r[kt]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.bv=o.features||new at,o.layers)if("function"==typeof o.layers)e=o.layers;else{var s=o.layers;e=function(t){return w(s,t)}}else e=O;return i.Zl=e,i.Yl={},i}return Ig(n,t),n.prototype.Hl=function(t,n){this.Yl[o(t)]=n},n.prototype.getFeatures=function(){return this.bv},n.prototype.getHitTolerance=function(){return this.Wl},n.prototype.getLayer=function(t){return this.Yl[o(t)]},n.prototype.setHitTolerance=function(t){this.Wl=t},n.prototype.setMap=function(n){this.getMap()&&this.k&&this.bv.forEach(this.Jl.bind(this)),t.prototype.setMap.call(this,n),n?(this.bv.addEventListener(ot,this.Dl),this.bv.addEventListener(st,this.zl),this.k&&this.bv.forEach(this.$l.bind(this))):(this.bv.removeEventListener(ot,this.Dl),this.bv.removeEventListener(st,this.zl))},n.prototype.Sl=function(t){var n=t.element;if(this.k&&this.$l(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find((function(t){if(t instanceof ky&&t.getSource()&&t.getSource().hasFeature(n))return t}));i&&this.Hl(n,i)}},n.prototype.Nl=function(t){var n=t.element;this.k&&this.Jl(n)},n.prototype.getStyle=function(){return this.k},n.prototype.$l=function(t){var n=o(t);n in Dg||(Dg[n]=t.getStyle()),t.setStyle(this.k)},n.prototype.Jl=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var e=i[r];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle())}var s=o(t);t.setStyle(Dg[s]),delete Dg[s]},n.prototype.Ql=function(t){delete this.Yl[o(t)]},n.prototype.handleEvent=function(t){if(!this.kr(t))return!0;var n=this.Ul(t),i=this.Xl(t),r=this.Bl(t),e=!n&&!i&&!r,o=t.map,s=this.getFeatures(),u=[],h=[];if(e){C(this.Yl),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.Vl(t,n))return this.Hl(t,n),h.push(t),!this.ql}.bind(this),{layerFilter:this.Zl,hitTolerance:this.Wl});for(var f=s.getLength()-1;f>=0;--f){var a=s.item(f),c=h.indexOf(a);c>-1?h.splice(c,1):(s.remove(a),u.push(a))}0!==h.length&&s.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.Vl(t,e))return!n&&!r||w(s.getArray(),t)?(i||r)&&w(s.getArray(),t)&&(u.push(t),this.Ql(t)):(this.Hl(t,e),h.push(t)),!this.ql}.bind(this),{layerFilter:this.Zl,hitTolerance:this.Wl});for(var v=u.length-1;v>=0;--v)s.remove(u[v]);s.extend(h)}return(h.length>0||u.length>0)&&this.dispatchEvent(new Gg(Lg,h,u,t)),!0},n}(Ch),Ug=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Xg(t){return t.feature?t.feature:t.element?t.element:void 0}var Bg=[],qg=function(t){function n(n){var i=this,r=n||{},e=r;return e.handleDownEvent||(e.handleDownEvent=O),e.stopDown||(e.stopDown=S),(i=t.call(this,e)||this).uv=r.source?r.source:null,i.Kl=void 0===r.vertex||r.vertex,i.td=void 0===r.edge||r.edge,i.bv=r.features?r.features:null,i.rd=[],i.ed={},i.od={},i.sd={},i.Wv=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.al=new rd,i.ud={Point:i.hd.bind(i),LineString:i.fd.bind(i),LinearRing:i.fd.bind(i),Polygon:i.ad.bind(i),MultiPoint:i.vd.bind(i),MultiLineString:i.ld.bind(i),MultiPolygon:i.dd.bind(i),GeometryCollection:i.pd.bind(i),Circle:i.wd.bind(i)},i}return Ug(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),e=t.getGeometry();if(e){var s=this.ud[e.getType()];if(s){this.od[r]=e.getExtent([1/0,1/0,-1/0,-1/0]);var u=[];if(s(u,e),1===u.length)this.al.insert(En(u[0]),{feature:t,segment:u[0]});else if(u.length>1){var h=u.map((function(t){return En(t)})),f=u.map((function(n){return{feature:t,segment:n}}));this.al.load(h,f)}}}i&&(this.ed[r]=H(t,R,this._h,this))},n.prototype.yd=function(t){this.addFeature(t)},n.prototype.gd=function(t){this.removeFeature(t)},n.prototype.md=function(){var t;return this.bv?t=this.bv:this.uv&&(t=this.uv.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.jl=function(t){var n=Xg(t);this.addFeature(n)},n.prototype.El=function(t){var n=Xg(t);this.removeFeature(n)},n.prototype._h=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.sd||(this.sd[i]=n)}else this.bd(n)},n.prototype.handleUpEvent=function(t){var n=P(this.sd);return n.length&&(n.forEach(this.bd.bind(this)),this.sd={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),e=this.od[r];if(e){var s=this.al,u=[];s.forEachInExtent(e,(function(n){t===n.feature&&u.push(n)}));for(var h=u.length-1;h>=0;--h)s.remove(u[h])}i&&($(this.ed[r]),delete this.ed[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.rd,e=this.md();i&&(r.forEach($),r.length=0,e.forEach(this.gd.bind(this))),t.prototype.setMap.call(this,n),n&&(this.bv?r.push(H(this.bv,ot,this.jl,this),H(this.bv,st,this.El,this)):this.uv&&r.push(H(this.uv,Md,this.jl,this),H(this.uv,Sd,this.El,this)),e.forEach(this.yd.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=En([i.getCoordinateFromPixel([t[0]-this.Wv,t[1]+this.Wv]),i.getCoordinateFromPixel([t[0]+this.Wv,t[1]-this.Wv])]),e=this.al.getInExtent(r),o=e.length;if(0===o)return null;var s,u=i.getView().getProjection(),h=Ur(n,u),f=1/0,a=this.Wv*this.Wv,c=function(){if(s){var n=i.getPixelFromCoordinate(s);if(hr(t,n)<=a)return{vertex:s,vertexPixel:[Math.round(n[0]),Math.round(n[1])]}}return null};if(this.Kl){for(var v=0;v<o;++v){(l=e[v]).feature.getGeometry().getType()!==zt&&l.segment.forEach((function(t){var n=Ur(t,u),i=hr(h,n);i<f&&(s=t,f=i)}))}if(_=c())return _}if(this.td){for(v=0;v<o;++v){var l,d=null;if((l=e[v]).feature.getGeometry().getType()===zt){var p=l.feature.getGeometry(),w=Dr();w&&(p=p.clone().transform(w,u)),d=zr(nr(h,p),u)}else{var y=l.segment,g=y[0],m=y[1];m&&(Bg[0]=Ur(g,u),Bg[1]=Ur(m,u),d=ir(h,Bg))}if(d){var b=hr(h,d);b<f&&(s=d,f=b)}}var _;if(_=c())return _}return null},n.prototype.bd=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.wd=function(t,n){var i=this.getMap().getView().getProjection(),r=n,e=Dr();e&&(r=r.clone().transform(e,i));var o=ro(r);e&&o.transform(i,e);for(var s=o.getCoordinates()[0],u=0,h=s.length-1;u<h;++u)t.push(s.slice(u,u+2))},n.prototype.pd=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=this.ud[i[r].getType()];e&&e(t,i[r])}},n.prototype.fd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r)t.push(i.slice(r,r+2))},n.prototype.ld=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n.prototype.vd=function(t,n){n.getCoordinates().forEach((function(n){t.push([n])}))},n.prototype.dd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var h=o[s],f=0,a=h.length-1;f<a;++f)t.push(h.slice(f,f+2))},n.prototype.hd=function(t,n){t.push([n.getCoordinates()])},n.prototype.ad=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n}(Rh),Vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wg="translatestart",Zg="translating",Yg="translateend",Hg=function(t){function n(n,i,r,e,o){var s=t.call(this,n)||this;return s.features=i,s.coordinate=r,s.startCoordinate=e,s.mapBrowserEvent=o,s}return Vg(n,t),n}(c),Jg=function(t){function n(n){var i,r=this,e=n||{};if((r=t.call(this,e)||this).on,r.once,r.un,r._d=null,r.Md=null,r.bv=void 0!==e.features?e.features:null,e.layers&&!r.bv)if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function(t){return w(o,t)}}else i=O;return r.Zl=i,r.Vl=e.filter&&!r.bv?e.filter:O,r.Wl=e.hitTolerance?e.hitTolerance:0,r.kr=e.condition?e.condition:Uh,r.xd=null,r.addChangeListener(jh,r.Od),r}return Vg(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.kr(t))return!1;if(this.xd=this.Sd(t.pixel,t.map),!this._d&&this.xd){this.Md=t.coordinate,this._d=t.coordinate,this.handleMoveEvent(t);var n=this.bv||new at([this.xd]);return this.dispatchEvent(new Hg(Wg,n,t.coordinate,this.Md,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this._d){this._d=null,this.handleMoveEvent(t);var n=this.bv||new at([this.xd]);return this.dispatchEvent(new Hg(Yg,n,t.coordinate,this.Md,t)),this.Md=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this._d){var n=t.coordinate,i=n[0]-this._d[0],r=n[1]-this._d[1],e=this.bv||new at([this.xd]);e.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this._d=n,this.dispatchEvent(new Hg(Zg,e,n,this.Md,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Sd(t.pixel,t.map)?(n.classList.remove(this._d?"ol-grab":"ol-grabbing"),n.classList.add(this._d?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.Sd=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.Vl(t,n)&&(!this.bv||w(this.bv.getArray(),t)))return t}.bind(this),{layerFilter:this.Zl,hitTolerance:this.Wl})},n.prototype.getHitTolerance=function(){return this.Wl},n.prototype.setHitTolerance=function(t){this.Wl=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Iv(i)},n.prototype.Od=function(){this.Iv(null)},n.prototype.Iv=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(Rh),$g=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Qg(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var Kg=function(t){function n(n){var i=t.call(this)||this;return i.jd=n||null,i.Ed=[],i.Td(),i}return $g(n,t),n.prototype.Ad=function(){this.Ed.forEach($),this.Ed.length=0},n.prototype.Td=function(){if(this.jd)for(var t=0,n=this.jd.length;t<n;++t)this.Ed.push(H(this.jd[t],R,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.jd),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<Cn(this.getExtent(),t,n))return r;for(var e=this.jd,o=0,s=e.length;o<s;++o)r=e[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.jd,r=0,e=i.length;r<e;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){Ln(t);for(var n=this.jd,i=0,r=n.length;i<r;++i)Xn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return Qg(this.jd)},n.prototype.getGeometriesArray=function(){return this.jd},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.jd,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.jd,e=!1,o=0,s=r.length;o<s;++o){var u=r[o],h=u.getSimplifiedGeometry(t);i.push(h),h!==u&&(e=!0)}if(e){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return Dt},n.prototype.intersectsExtent=function(t){for(var n=this.jd,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.jd.length},n.prototype.rotate=function(t,n){for(var i=this.jd,r=0,e=i.length;r<e;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=Qn(this.getExtent()));for(var e=this.jd,o=0,s=e.length;o<s;++o)e[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(Qg(t))},n.prototype.setGeometriesArray=function(t){this.Ad(),this.jd=t,this.Td(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.jd,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.jd,r=0,e=i.length;r<e;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.Ad(),t.prototype.disposeInternal.call(this)},n}(te);function tm(t,n,i,r,e,o){var s,u;void 0!==e?(s=e,u=void 0!==o?o:0):(s=[],u=0);for(var h=n;h<i;){var f=t[h++];s[u++]=t[h++],s[u++]=f;for(var a=2;a<r;++a)s[u++]=t[h++]}return s.length=u,s}var nm=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?Sr(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===Vt.TILE_PIXELS&&(r=Sr(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return A({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function im(t,n,i){var r,e=i?Sr(i.featureProjection):null,o=i?Sr(i.dataProjection):null;if(r=e&&o&&!Nr(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*s)/s;return t}))}return r}function rm(t,n){var i=n?Sr(n.featureProjection):null,r=n?Sr(n.dataProjection):null;return i&&r&&!Nr(i,r)?Ir(t,r,i):t}var em=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function om(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var sm=function(t){function n(){return t.call(this)||this}return em(n,t),n.prototype.getType=function(){return ca},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(om(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(om(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(om(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(om(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(nm),um=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hm={};hm[Nt]=function(t){var n;n=void 0!==t.m&&void 0!==t.z?new Ne([t.x,t.y,t.z,t.m],Pt):void 0!==t.z?new Ne([t.x,t.y,t.z],At):void 0!==t.m?new Ne([t.x,t.y,t.m],Ct):new Ne([t.x,t.y]);return n},hm[kt]=function(t){var n=cm(t);return new my(t.paths[0],n)},hm[Rt]=function(t){var n=cm(t);return new to(t.rings,n)},hm[It]=function(t){var n=cm(t);return new dy(t.points,n)},hm[Lt]=function(t){var n=cm(t);return new _y(t.paths,n)},hm[Gt]=function(t){var n=cm(t);return new Oy(t.rings,n)};var fm={};function am(t,n){var i,r,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e=Nt;else if(t.points)e=It;else if(t.paths){e=1===t.paths.length?kt:Lt}else if(t.rings){var o=t,s=cm(o),u=function(t,n){var i,r,e=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){e.length=0,le(e,0,t[i],n.length),We(e,0,e.length,n.length)?o.push([t[i]]):s.push(t[i])}for(;s.length;){var u=s.shift(),h=!1;for(i=o.length-1;i>=0;i--){var f=o[i][0];if(Nn(new Ce(f).getExtent(),new Ce(u).getExtent())){o[i].push(u),h=!0;break}}h||o.push([u.reverse()])}return o}(o.rings,s);1===u.length?(e=Rt,t=A({},t,((i={}).rings=u[0],i))):(e=Gt,t=A({},t,((r={}).rings=u,r)))}return im((0,hm[e])(t),!1,n)}function cm(t){var n=Tt;return!0===t.hasZ&&!0===t.hasM?n=Pt:!0===t.hasZ?n=At:!0===t.hasM&&(n=Ct),n}function vm(t){var n=t.getLayout();return{hasZ:n===At||n===Pt,hasM:n===Ct||n===Pt}}function lm(t,n){return(0,fm[t.getType()])(im(t,!0,n),n)}fm[Nt]=function(t,n){var i,r=t.getCoordinates(),e=t.getLayout();e===At?i={x:r[0],y:r[1],z:r[2]}:e===Ct?i={x:r[0],y:r[1],m:r[2]}:e===Pt?i={x:r[0],y:r[1],z:r[2],m:r[3]}:e===Tt?i={x:r[0],y:r[1]}:Ot(!1,34);return i},fm[kt]=function(t,n){var i=vm(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},fm[Rt]=function(t,n){var i=vm(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},fm[It]=function(t,n){var i=vm(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},fm[Lt]=function(t,n){var i=vm(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},fm[Gt]=function(t,n){for(var i=vm(t),r=t.getCoordinates(!1),e=[],o=0;o<r.length;o++)for(var s=r[o].length-1;s>=0;s--)e.push(r[o][s]);return{hasZ:i.hasZ,hasM:i.hasM,rings:e}};var dm=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).N=r.geometryName,i}return um(n,t),n.prototype.readFeatureFromObject=function(t,n,i){var r=t,e=am(r.geometry,n),o=new Et;if(this.N&&o.setGeometryName(this.N),o.setGeometry(e),r.attributes){o.setProperties(r.attributes,!0);var s=r.attributes[i];void 0!==s&&o.setId(s)}return o},n.prototype.readFeaturesFromObject=function(t,n){var i=n||{};if(t.features){for(var r=[],e=t.features,o=0,s=e.length;o<s;++o)r.push(this.readFeatureFromObject(e[o],i,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,i)]},n.prototype.readGeometryFromObject=function(t,n){return am(t,n)},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?Sr("EPSG:"+t.spatialReference.wkid):null},n.prototype.writeGeometryObject=function(t,n){return lm(t,this.adaptOptions(n))},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={};if(!t.hasProperties())return i.attributes={},i;var r=t.getProperties(),e=t.getGeometry();if(e){i.geometry=lm(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(Sr(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return N(r)?i.attributes={}:i.attributes=r,i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{features:i}},n}(sm),pm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wm=function(t){function n(){var n=t.call(this)||this;return n.Cd=kc(),n}return pm(n,t),n.prototype.getType=function(){return la},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=wc(t);return this.readFeatureFromDocument(i,n)}return dc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=wc(t);return this.readFeaturesFromDocument(i,n)}return dc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&m(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=wc(t);return this.readGeometryFromDocument(i,n)}return dc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=wc(t);return this.readProjectionFromDocument(n)}return dc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.Cd.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.Cd.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.Cd.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(nm);function ym(t){return gm(vc(t,!1))}function gm(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function mm(t){var n=vc(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function bm(t){return _m(vc(t,!1))}function _m(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function Mm(t){return xm(vc(t,!1))}function xm(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function Om(t){return vc(t,!1).trim()}function Sm(t,n){Cm(t,n?"1":"0")}function jm(t,n){t.appendChild(Rc().createCDATASection(n))}function Em(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Qi(i.getUTCMonth()+1,2)+"-"+Qi(i.getUTCDate(),2)+"T"+Qi(i.getUTCHours(),2)+":"+Qi(i.getUTCMinutes(),2)+":"+Qi(i.getUTCSeconds(),2)+"Z";t.appendChild(Rc().createTextNode(r))}function Tm(t,n){var i=n.toPrecision();t.appendChild(Rc().createTextNode(i))}function Am(t,n){var i=n.toString();t.appendChild(Rc().createTextNode(i))}function Cm(t,n){t.appendChild(Rc().createTextNode(n))}var Pm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nm=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],km={rte:ub,trk:hb,wpt:fb},Fm=Ec(Nm,{rte:gc(ub),trk:gc(hb),wpt:gc(fb)}),Rm=Ec(Nm,{text:_c(Om,"linkText"),type:_c(Om,"linkType")}),Im=Ec(Nm,{rte:Mc((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if(s.getType()==kt){var u=im(s,!0,r);o.geometryLayout=u.getLayout(),e.rtept=u.getCoordinates()}var h=i[i.length-1].node,f=Wm[h.namespaceURI],a=jc(e,f);Pc(o,Zm,Sc,a,i,f)})),trk:Mc((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if(s.getType()==Lt){var u=im(s,!0,r);e.trkseg=u.getLineStrings()}var h=i[i.length-1].node,f=Hm[h.namespaceURI],a=jc(e,f);Pc(o,Jm,Sc,a,i,f)})),wpt:Mc((function(t,n,i){var r=i[0],e=i[i.length-1];e.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==Nt){var s=im(o,!0,r);e.geometryLayout=s.getLayout(),cb(t,s.getCoordinates(),i)}}))}),Lm=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=Sr("EPSG:4326"),i.Pd=r.readExtensions,i}return Pm(n,t),n.prototype.Nd=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.Pd){var e=r.get("extensionsNode_")||null;this.Pd(r,e)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!w(Nm,t.namespaceURI))return null;var i=km[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.Nd([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!w(Nm,t.namespaceURI))return[];if("gpx"==t.localName){var i=Ac([],Fm,t,[this.getReadOptions(t,n)]);return i?(this.Nd(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ac),i.setAttributeNS(ac,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Pc({node:i},Im,ib,t,[n]),i},n}(wm),Gm=Ec(Nm,{name:_c(Om),cmt:_c(Om),desc:_c(Om),src:_c(Om),link:ob,number:_c(Mm),extensions:sb,type:_c(Om),rtept:function(t,n){var i=Ac({},Dm,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;rb(e,o,t,i)}}}),Dm=Ec(Nm,{ele:_c(bm),time:_c(mm)}),zm=Ec(Nm,{name:_c(Om),cmt:_c(Om),desc:_c(Om),src:_c(Om),link:ob,number:_c(Mm),type:_c(Om),extensions:sb,trkseg:function(t,n){var i=n[n.length-1];Tc(Um,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),Um=Ec(Nm,{trkpt:function(t,n){var i=Ac({},Xm,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;rb(e,o,t,i)}}}),Xm=Ec(Nm,{ele:_c(bm),time:_c(mm)}),Bm=Ec(Nm,{ele:_c(bm),time:_c(mm),magvar:_c(bm),geoidheight:_c(bm),name:_c(Om),cmt:_c(Om),desc:_c(Om),src:_c(Om),link:ob,sym:_c(Om),type:_c(Om),fix:_c(Om),sat:_c(Mm),hdop:_c(bm),vdop:_c(bm),pdop:_c(bm),ageofdgpsdata:_c(bm),dgpsid:_c(Mm),extensions:sb}),qm=["text","type"],Vm=Ec(Nm,{text:Mc(Cm),type:Mc(Cm)}),Wm=Ec(Nm,["name","cmt","desc","src","link","number","type","rtept"]),Zm=Ec(Nm,{name:Mc(Cm),cmt:Mc(Cm),desc:Mc(Cm),src:Mc(Cm),link:Mc(ab),number:Mc(Am),type:Mc(Cm),rtept:xc(Mc(cb))}),Ym=Ec(Nm,["ele","time"]),Hm=Ec(Nm,["name","cmt","desc","src","link","number","type","trkseg"]),Jm=Ec(Nm,{name:Mc(Cm),cmt:Mc(Cm),desc:Mc(Cm),src:Mc(Cm),link:Mc(ab),number:Mc(Am),type:Mc(Cm),trkseg:xc(Mc((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Pc(r,Qm,$m,n.getCoordinates(),i)})))}),$m=Oc("trkpt"),Qm=Ec(Nm,{trkpt:Mc(cb)}),Km=Ec(Nm,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),tb=Ec(Nm,{ele:Mc(Tm),time:Mc(Em),magvar:Mc(Tm),geoidheight:Mc(Tm),name:Mc(Cm),cmt:Mc(Cm),desc:Mc(Cm),src:Mc(Cm),link:Mc(ab),sym:Mc(Cm),type:Mc(Cm),fix:Mc(Cm),sat:Mc(Am),hdop:Mc(Tm),vdop:Mc(Tm),pdop:Mc(Tm),ageofdgpsdata:Mc(Tm),dgpsid:Mc(Am)}),nb={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function ib(t,n,i){var r=t.getGeometry();if(r){var e=nb[r.getType()];if(e)return cc(n[n.length-1].node.namespaceURI,e)}}function rb(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function eb(t,n,i){var r=Tt,e=2;if(t.hasZ&&t.hasM?(r=Pt,e=4):t.hasZ?(r=At,e=3):t.hasM&&(r=Ct,e=3),4!==e){for(var o=0,s=n.length/4;o<s;o++)n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);if(n.length=n.length/4*e,i)for(o=0,s=i.length;o<s;o++)i[o]=i[o]/4*e}return r}function ob(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Tc(Rm,t,n)}function sb(t,n){n[n.length-1].kd=t}function ub(t,n){var i=n[0],r=Ac({flatCoordinates:[],layoutOptions:{}},Gm,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=eb(o,e),u=new my(e,s);im(u,!1,i);var h=new Et(u);return h.setProperties(r,!0),h}}function hb(t,n){var i=n[0],r=Ac({flatCoordinates:[],ends:[],layoutOptions:{}},zm,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var u=eb(s,e,o),h=new _y(e,u,o);im(h,!1,i);var f=new Et(h);return f.setProperties(r,!0),f}}function fb(t,n){var i=n[0],r=Ac({},Bm,t,n);if(r){var e={},o=rb([],e,t,r),s=eb(e,o),u=new Ne(o,s);im(u,!1,i);var h=new Et(u);return h.setProperties(r,!0),h}}function ab(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,e=[r.linkText,r.linkType];Pc({node:t},Vm,Sc,e,i,qm)}function cb(t,n,i){var r=i[i.length-1],e=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Pt:0!==n[3]&&(o.time=n[3]);case At:0!==n[2]&&(o.ele=n[2]);break;case Ct:0!==n[2]&&(o.time=n[2])}var s="rtept"==t.nodeName?Ym[e]:Km[e],u=jc(o,s);Pc({node:t,properties:o},tb,Sc,u,i,s)}var vb=Lm,lb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function db(t,n){if(!t)return null;var i;switch(t.type){case Nt:i=function(t){return new Ne(t.coordinates)}(t);break;case kt:i=function(t){return new my(t.coordinates)}(t);break;case Rt:i=function(t){return new to(t.coordinates)}(t);break;case It:i=function(t){return new dy(t.coordinates)}(t);break;case Lt:i=function(t){return new _y(t.coordinates)}(t);break;case Gt:i=function(t){return new Oy(t.coordinates)}(t);break;case Dt:i=function(t,n){var i=t.geometries.map((function(t){return db(t,n)}));return new Kg(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return im(i,!1,n)}function pb(t,n){var i,r=(t=im(t,!0,n)).getType();switch(r){case Nt:i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case kt:i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Rt:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case It:i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Lt:i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Gt:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case Dt:i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=A({},n);return delete i.featureProjection,pb(t,i)}))}}(t,n);break;case zt:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var wb=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=Sr(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=Sr(r.featureProjection)),i.N=r.geometryName,i.Fd=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return lb(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=db((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Et;return this.N?e.setGeometryName(this.N):this.Fd&&"geometry_name"in i!==void 0&&e.setGeometryName(i.geometry_name),e.setGeometry(r),"id"in i&&e.setId(i.id),i.properties&&e.setProperties(i.properties,!0),e},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,e=0,o=r.length;e<o;++e)i.push(this.readFeatureFromObject(r[e],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return db(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=Sr(i.properties.name):"EPSG"===i.type?n=Sr("EPSG:"+i.properties.code):Ot(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var e=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=pb(o,n),delete e[t.getGeometryName()]),N(e)||(i.properties=e),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return pb(t,this.adaptOptions(n))},n}(sm),yb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function gb(t){return"string"==typeof t?t:""}var mb=function(t){function n(){return t.call(this)||this}return yb(n,t),n.prototype.getType=function(){return va},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(gb(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(gb(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(gb(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(gb(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(nm),bb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_b="barometric",Mb="gps",xb="none",Ob=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Sb=/^H.([A-Z]{3}).*?:(.*)/,jb=/^HFDTE(\d{2})(\d{2})(\d{2})/,Eb=/\r\n|\r|\n/,Tb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=Sr("EPSG:4326"),i.Rd=r.altitudeMode?r.altitudeMode:xb,i}return bb(n,t),n.prototype.readFeatureFromText=function(t,n){var i,r,e=this.Rd,o=t.split(Eb),s={},u=[],h=2e3,f=0,a=1,c=-1;for(i=0,r=o.length;i<r;++i){var v=o[i],l=void 0;if("B"==v.charAt(0)){if(l=Ob.exec(v)){var d=parseInt(l[1],10),p=parseInt(l[2],10),w=parseInt(l[3],10),y=parseInt(l[4],10)+parseInt(l[5],10)/6e4;"S"==l[6]&&(y=-y);var g=parseInt(l[7],10)+parseInt(l[8],10)/6e4;if("W"==l[9]&&(g=-g),u.push(g,y),e!=xb){var m=void 0;m=e==Mb?parseInt(l[11],10):e==_b?parseInt(l[12],10):0,u.push(m)}var b=Date.UTC(h,f,a,d,p,w);b<c&&(b=Date.UTC(h,f,a+1,d,p,w)),u.push(b/1e3),c=b}}else"H"==v.charAt(0)&&((l=jb.exec(v))?(a=parseInt(l[1],10),f=parseInt(l[2],10)-1,h=2e3+parseInt(l[3],10)):(l=Sb.exec(v))&&(s[l[1]]=l[2].trim()))}if(0===u.length)return null;var _=new my(u,e==xb?Ct:Pt),M=new Et(im(_,!1,n));return M.setProperties(s,!0),M},n.prototype.readFeaturesFromText=function(t,n){var i=this.readFeatureFromText(t,n);return i?[i]:[]},n}(mb);function Ab(t){return(Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Cb,Pb,Nb,kb,Fb,Rb,Ib=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lb=["http://www.google.com/kml/ext/2.2"],Gb=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Db={fraction:Yc,pixels:Hc,insetPixels:Hc},zb=Ec(Gb,{ExtendedData:L_,Region:G_,MultiGeometry:_c(T_,"geometry"),LineString:_c(S_,"geometry"),LinearRing:_c(j_,"geometry"),Point:_c(A_,"geometry"),Polygon:_c(P_,"geometry"),Style:_c(k_),StyleMap:function(t,n){var i=c_.call(this,t,n);if(!i)return;var r=n[n.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Ot(!1,38)},address:_c(Om),description:_c(Om),name:_c(Om),open:_c(ym),phoneNumber:_c(Om),styleUrl:_c(h_),visibility:_c(ym)},Ec(Lb,{MultiTrack:_c((function(t,n){var i=Ac([],g_,t,n);if(!i)return;return new _y(i)}),"geometry"),Track:_c(b_,"geometry")})),Ub=Ec(Gb,{ExtendedData:L_,Region:G_,Link:function(t,n){Tc(Xb,t,n)},address:_c(Om),description:_c(Om),name:_c(Om),open:_c(ym),phoneNumber:_c(Om),visibility:_c(ym)}),Xb=Ec(Gb,{href:_c(u_)}),Bb=Ec(Gb,{LatLonAltBox:function(t,n){var i=Ac({},U_,t,n);if(!i)return;var r=n[n.length-1],e=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=e,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,n){var i=Ac({},X_,t,n);if(!i)return;var r=n[n.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),qb=Ec(Gb,["Document","Placemark"]),Vb=Ec(Gb,{Document:Mc((function(t,n,i){Pc({node:t},Z_,Y_,n,i,void 0,this)})),Placemark:Mc(gM)}),Wb=null;var Zb,Yb=null;var Hb,Jb=null;var $b=null;var Qb=null;var Kb,t_=null;function n_(t){return 32/Math.min(t[0],t[1])}function i_(t){return t}var r_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return t_||(Wb=new Zc({color:Cb=[255,255,255,1]}),Rb="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Yb=new sv({anchor:Pb=[20,2],anchorOrigin:Jc,anchorXUnits:Nb=Hc,anchorYUnits:kb=Hc,crossOrigin:"anonymous",rotation:0,scale:n_(Fb=[64,64]),size:Fb,src:Rb}),Zb="NO_IMAGE",Jb=new uv({color:Cb,width:1}),Hb=new uv({color:[51,51,51,1],width:2}),$b=new gv({font:"bold 16px Helvetica",fill:Wb,stroke:Hb,scale:.8}),Qb=new pv({fill:Wb,image:Yb,text:$b,stroke:Jb,zIndex:0}),t_=[Qb]),i.dataProjection=Sr("EPSG:4326"),i.Id=r.defaultStyle?r.defaultStyle:t_,i.Ld=void 0===r.extractStyles||r.extractStyles,i.Gd=void 0===r.writeStyles||r.writeStyles,i.Dd={},i.zd=void 0===r.showPointNames||r.showPointNames,i.At=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i.Ud=r.iconUrlFunction?r.iconUrlFunction:i_,i.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],i}return Ib(n,t),n.prototype.Xd=function(t,n){var i=Ac([],Ec(Gb,{Document:yc(this.Xd,this),Folder:yc(this.Xd,this),Placemark:gc(this.Bd,this),Style:this.qd.bind(this),StyleMap:this.Vd.bind(this)}),t,n,this);return i||void 0},n.prototype.Bd=function(t,n){var i=Ac({geometry:null},zb,t,n,this);if(i){var r=new Et,e=t.getAttribute("id");null!==e&&r.setId(e);var o=n[0],s=i.geometry;if(s&&im(s,!1,o),r.setGeometry(s),delete i.geometry,this.Ld){var u=function(t,n,i,r,e){return function(o,s){var u=e,h="",f=[];if(u){var a=o.getGeometry();if(a)if(a instanceof Kg)u=(f=a.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Nt||n===It}))).length>0;else{var c=a.getType();u=c===Nt||c===It}}u&&(h=o.get("name"),(u=u&&!!h)&&h.search(/&[^&]+;/)>-1&&(Kb||(Kb=document.createElement("textarea")),Kb.innerHTML=h,h=Kb.value));var v=i;if(t?v=t:n&&(v=e_(n,i,r)),u){var l=function(t,n){var i=[0,0],r="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var s=e.getScaleArray(),u=e.getAnchor();i[0]=s[0]*(o[0]-u[0]),i[1]=s[1]*(o[1]/2-u[1]),r="left"}}var h=t.getText();h?((h=h.clone()).setFont(h.getFont()||$b.getFont()),h.setScale(h.getScale()||$b.getScale()),h.setFill(h.getFill()||$b.getFill()),h.setStroke(h.getStroke()||Hb)):h=$b.clone();return h.setText(n),h.setOffsetX(i[0]),h.setOffsetY(i[1]),h.setTextAlign(r),new pv({image:e,text:h})}(v[0],h);return f.length>0?(l.setGeometry(new Kg(f)),[l,new pv({geometry:v[0].getGeometry(),image:null,fill:v[0].getFill(),stroke:v[0].getStroke(),text:null})].concat(v.slice(1))):l}return v}}(i.Style,i.styleUrl,this.Id,this.Dd,this.zd);r.setStyle(u)}return delete i.Style,r.setProperties(i,!0),r}},n.prototype.qd=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=k_.call(this,t,n);if(r){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Dd[e]=r}}},n.prototype.Vd=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=c_.call(this,t,n);if(r){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Dd[e]=r}}},n.prototype.readFeatureFromNode=function(t,n){if(!w(Gb,t.namespaceURI))return null;var i=this.Bd(t,[this.getReadOptions(t,n)]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){if(!w(Gb,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.Xd(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==r){var e=this.Bd(t,[this.getReadOptions(t,n)]);return e?[e]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,n);s&&m(i,s)}return i}return[]},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=wc(t);return this.readNameFromDocument(n)}return dc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(n);if(i)return i}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling)if(w(Gb,n.namespaceURI)&&"name"==n.localName)return Om(n);for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(w(Gb,n.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(n);if(r)return r}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var i=wc(t);m(n,this.readNetworkLinksFromDocument(i))}else dc(t)?m(n,this.readNetworkLinksFromDocument(t)):m(n,this.readNetworkLinksFromNode(t));return n},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&m(n,this.readNetworkLinksFromNode(i));return n},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(w(Gb,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Ac({},Ub,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!w(Gb,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||m(n,this.readNetworkLinksFromNode(i))}return n},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var i=wc(t);m(n,this.readRegionFromDocument(i))}else dc(t)?m(n,this.readRegionFromDocument(t)):m(n,this.readRegionFromNode(t));return n},n.prototype.readRegionFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&m(n,this.readRegionFromNode(i));return n},n.prototype.readRegionFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(w(Gb,i.namespaceURI)&&"Region"==i.localName){var r=Ac({},Bb,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!w(Gb,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||m(n,this.readRegionFromNode(i))}return n},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc(Gb[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",Lb[0]),i.setAttributeNS(r,"xmlns:xsi",ac),i.setAttributeNS(ac,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=qb[i.namespaceURI],u=jc(o,s);return Pc(e,Vb,Sc,u,[n],s,this),i},n}(wm);function e_(t,n,i){return Array.isArray(t)?t:"string"==typeof t?e_(i[t],n,i):n}function o_(t){var n=vc(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function s_(t){var n=vc(t,!1),i=[];n=n.replace(/\s*,\s*/g,",");for(var r,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=e.exec(n);){var o=parseFloat(r[1]),s=parseFloat(r[2]),u=r[3]?parseFloat(r[3]):0;i.push(o,s,u),n=n.substr(r[0].length)}if(""===n)return i}function u_(t){var n=vc(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function h_(t){var n=vc(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function f_(t){return bm(t)}var a_=Ec(Gb,{Pair:function(t,n){var i=Ac({},D_,t,n,this);if(!i)return;var r=i.key;if(r&&"normal"==r){var e=i.styleUrl;e&&(n[n.length-1]=e);var o=i.Style;o&&(n[n.length-1]=o)}}});function c_(t,n){return Ac(void 0,a_,t,n,this)}var v_=Ec(Gb,{Icon:_c((function(t,n){var i=Ac({},__,t,n);return i||null})),color:_c(o_),heading:_c(bm),hotSpot:_c((function(t){var n,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return n="insetPixels"!==i?"insetPixels"!==r?Jc:Qc:"insetPixels"!==r?$c:Kc,{x:parseFloat(t.getAttribute("x")),xunits:Db[i],y:parseFloat(t.getAttribute("y")),yunits:Db[r],origin:n}})),scale:_c(f_)});var l_=Ec(Gb,{color:_c(o_),scale:_c(f_)});var d_=Ec(Gb,{color:_c(o_),width:_c(bm)});var p_=Ec(Gb,{color:_c(o_),fill:_c(ym),outline:_c(ym)});var w_=Ec(Gb,{coordinates:mc(s_)});function y_(t,n){return Ac(null,w_,t,n)}var g_=Ec(Lb,{Track:gc(b_)});var m_=Ec(Gb,{when:function(t,n){var i=n[n.length-1].whens,r=vc(t,!1),e=Date.parse(r);i.push(isNaN(e)?0:e)}},Ec(Lb,{coord:function(t,n){var i=n[n.length-1].coordinates,r=vc(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(e){var o=parseFloat(e[1]),s=parseFloat(e[2]),u=parseFloat(e[3]);i.push([o,s,u])}else i.push([])}}));function b_(t,n){var i=Ac({coordinates:[],whens:[]},m_,t,n);if(i){for(var r=[],e=i.coordinates,o=i.whens,s=0,u=Math.min(e.length,o.length);s<u;++s)3==e[s].length&&r.push(e[s][0],e[s][1],e[s][2],o[s]);return new my(r,Pt)}}var __=Ec(Gb,{href:_c(u_)},Ec(Lb,{x:_c(bm),y:_c(bm),w:_c(bm),h:_c(bm)}));var M_=Ec(Gb,{coordinates:mc(s_)});function x_(t,n){return Ac(null,M_,t,n)}var O_=Ec(Gb,{extrude:_c(ym),tessellate:_c(ym),altitudeMode:_c(Om)});function S_(t,n){var i=Ac({},O_,t,n),r=x_(t,n);if(r){var e=new my(r,At);return e.setProperties(i,!0),e}}function j_(t,n){var i=Ac({},O_,t,n),r=x_(t,n);if(r){var e=new to(r,At,[r.length]);return e.setProperties(i,!0),e}}var E_=Ec(Gb,{LineString:gc(S_),LinearRing:gc(j_),MultiGeometry:gc(T_),Point:gc(A_),Polygon:gc(P_)});function T_(t,n){var i,r=Ac([],E_,t,n);if(!r)return null;if(0===r.length)return new Kg(r);for(var e=!0,o=r[0].getType(),s=1,u=r.length;s<u;++s)if(r[s].getType()!=o){e=!1;break}if(e){var h=void 0,f=void 0;if(o==Nt){var a=r[0];h=a.getLayout(),f=a.getFlatCoordinates();for(s=1,u=r.length;s<u;++s)m(f,r[s].getFlatCoordinates());F_(i=new dy(f,h),r)}else o==kt?F_(i=new _y(r),r):o==Rt?F_(i=new Oy(r),r):o==Dt?i=new Kg(r):Ot(!1,37)}else i=new Kg(r);return i}function A_(t,n){var i=Ac({},O_,t,n),r=x_(t,n);if(r){var e=new Ne(r,At);return e.setProperties(i,!0),e}}var C_=Ec(Gb,{innerBoundaryIs:function(t,n){var i=Ac([],B_,t,n);if(i.length>0){var r=n[n.length-1];r.push.apply(r,i)}},outerBoundaryIs:function(t,n){var i=Ac(void 0,q_,t,n);if(i){n[n.length-1][0]=i}}});function P_(t,n){var i=Ac({},O_,t,n),r=Ac([null],C_,t,n);if(r&&r[0]){for(var e=r[0],o=[e.length],s=1,u=r.length;s<u;++s)m(e,r[s]),o.push(e.length);var h=new to(e,At,o);return h.setProperties(i,!0),h}}var N_=Ec(Gb,{IconStyle:function(t,n){var i=Ac({},v_,t,n);if(i){var r,e,o,s,u=n[n.length-1],h="Icon"in i?i.Icon:{},f=!("Icon"in i)||Object.keys(h).length>0,a=h.href;a?r=a:f&&(r=Rb);var c,v=Jc,l=i.hotSpot;l?(e=[l.x,l.y],o=l.xunits,s=l.yunits,v=l.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(e=Pb,o=Nb,s=kb):/arrow-reverse/.test(r)?(e=[54,42],o=Nb,s=kb):/paddle/.test(r)&&(e=[32,1],o=Nb,s=kb));var d,p=h.x,w=h.y;void 0!==p&&void 0!==w&&(c=[p,w]);var y,g=h.w,m=h.h;void 0!==g&&void 0!==m&&(d=[g,m]);var b=i.heading;void 0!==b&&(y=_i(b));var _=i.scale,M=i.color;if(f){r==Rb&&(d=Fb);var x=new sv({anchor:e,anchorOrigin:v,anchorXUnits:o,anchorYUnits:s,crossOrigin:this.At,offset:c,offsetOrigin:Jc,rotation:y,scale:_,size:d,src:this.Ud(r),color:M}),O=x.getScaleArray()[0],S=x.getSize();if(null===S){var j=x.getImageState();if(j===_o||j===Mo){x.listenImageChange((function t(){var n=x.getImageState();if(n!==_o&&n!==Mo){var i=x.getSize();if(i&&2==i.length){var r=n_(i);x.setScale(O*r)}x.unlistenImageChange(t)}})),j===_o&&x.load()}}else if(2==S.length){var E=n_(S);x.setScale(O*E)}u.imageStyle=x}else u.imageStyle=Zb}},LabelStyle:function(t,n){var i=Ac({},l_,t,n);if(i){var r=n[n.length-1],e=new gv({fill:new Zc({color:"color"in i?i.color:Cb}),scale:i.scale});r.textStyle=e}},LineStyle:function(t,n){var i=Ac({},d_,t,n);if(i){var r=n[n.length-1],e=new uv({color:"color"in i?i.color:Cb,width:"width"in i?i.width:1});r.strokeStyle=e}},PolyStyle:function(t,n){var i=Ac({},p_,t,n);if(i){var r=n[n.length-1],e=new Zc({color:"color"in i?i.color:Cb});r.fillStyle=e;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s)}}});function k_(t,n){var i=Ac({},N_,t,n,this);if(!i)return null;var r,e="fillStyle"in i?i.fillStyle:Wb,o=i.fill;void 0===o||o||(e=null),"imageStyle"in i?i.imageStyle!=Zb&&(r=i.imageStyle):r=Yb;var s="textStyle"in i?i.textStyle:$b,u="strokeStyle"in i?i.strokeStyle:Jb,h=i.outline;return void 0===h||h?[new pv({fill:e,image:r,stroke:u,text:s,zIndex:void 0})]:[new pv({geometry:function(t){var n=t.getGeometry(),i=n.getType();return i===Dt?new Kg(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n!==Rt&&n!==Gt}))):i!==Rt&&i!==Gt?n:void 0},fill:e,image:r,stroke:u,text:s,zIndex:void 0}),new pv({geometry:function(t){var n=t.getGeometry(),i=n.getType();return i===Dt?new Kg(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Rt||n===Gt}))):i===Rt||i===Gt?n:void 0},fill:e,stroke:null,zIndex:void 0})]}function F_(t,n){var i,r,e,o=n.length,s=new Array(n.length),u=new Array(n.length),h=new Array(n.length);i=!1,r=!1,e=!1;for(var f=0;f<o;++f){var a=n[f];s[f]=a.get("extrude"),u[f]=a.get("tessellate"),h[f]=a.get("altitudeMode"),i=i||void 0!==s[f],r=r||void 0!==u[f],e=e||h[f]}i&&t.set("extrude",s),r&&t.set("tessellate",u),e&&t.set("altitudeMode",h)}var R_=Ec(Gb,{displayName:_c(Om),value:_c(Om)});var I_=Ec(Gb,{Data:function(t,n){var i=t.getAttribute("name");Tc(R_,t,n);var r=n[n.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,n){Tc(z_,t,n)}});function L_(t,n){Tc(I_,t,n)}function G_(t,n){Tc(Bb,t,n)}var D_=Ec(Gb,{Style:_c(k_),key:_c(Om),styleUrl:_c(h_)});var z_=Ec(Gb,{SimpleData:function(t,n){var i=t.getAttribute("name");if(null!==i){var r=Om(t);n[n.length-1][i]=r}}});var U_=Ec(Gb,{altitudeMode:_c(Om),minAltitude:_c(bm),maxAltitude:_c(bm),north:_c(bm),south:_c(bm),east:_c(bm),west:_c(bm)});var X_=Ec(Gb,{minLodPixels:_c(bm),maxLodPixels:_c(bm),minFadeExtent:_c(bm),maxFadeExtent:_c(bm)});var B_=Ec(Gb,{LinearRing:gc(y_)});var q_=Ec(Gb,{LinearRing:mc(y_)});function V_(t,n){for(var i=Wo(n),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],e=0;e<4;++e){var o=Math.floor(r[e]).toString(16);r[e]=1==o.length?"0"+o:o}Cm(t,r.join(""))}var W_=Ec(Gb,{Data:Mc((function(t,n,i){t.setAttribute("name",n.name);var r={node:t},e=n.value;"object"==Ab(e)?(null!==e&&e.displayName&&Pc(r,W_,Sc,[e.displayName],i,["displayName"]),null!==e&&e.value&&Pc(r,W_,Sc,[e.value],i,["value"])):Pc(r,W_,Sc,[e],i,["value"])})),value:Mc((function(t,n){Cm(t,n)})),displayName:Mc((function(t,n){jm(t,n)}))});var Z_=Ec(Gb,{Placemark:Mc(gM)}),Y_=function(t,n,i){return cc(n[n.length-1].node.namespaceURI,"Placemark")};var H_=Oc("Data");var J_=Ec(Gb,["href"],Ec(Lb,["x","y","w","h"])),$_=Ec(Gb,{href:Mc(Cm)},Ec(Lb,{x:Mc(Tm),y:Mc(Tm),w:Mc(Tm),h:Mc(Tm)})),Q_=function(t,n,i){return cc(Lb[0],"gx:"+i)};var K_=Ec(Gb,["scale","heading","Icon","color","hotSpot"]),tM=Ec(Gb,{Icon:Mc((function(t,n,i){var r={node:t},e=i[i.length-1].node,o=J_[e.namespaceURI],s=jc(n,o);Pc(r,$_,Sc,s,i,o),s=jc(n,o=J_[Lb[0]]),Pc(r,$_,Q_,s,i,o)})),color:Mc(V_),heading:Mc(Tm),hotSpot:Mc((function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits)})),scale:Mc(TM)});var nM=Ec(Gb,["color","scale"]),iM=Ec(Gb,{color:Mc(V_),scale:Mc(TM)});var rM=Ec(Gb,["color","width"]),eM=Ec(Gb,{color:Mc(V_),width:Mc(Tm)});var oM={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},sM=function(t,n,i){if(t)return cc(n[n.length-1].node.namespaceURI,oM[t.getType()])},uM=Oc("Point"),hM=Oc("LineString"),fM=Oc("LinearRing"),aM=Oc("Polygon"),cM=Ec(Gb,{LineString:Mc(_M),Point:Mc(_M),Polygon:Mc(jM),GeometryCollection:Mc(vM)});function vM(t,n,i){var r,e={node:t},o=n.getType(),s=[];o===Dt?(n.getGeometriesArrayRecursive().forEach((function(t){var n=t.getType();n===It?s=s.concat(t.getPoints()):n===Lt?s=s.concat(t.getLineStrings()):n===Gt?s=s.concat(t.getPolygons()):n===Nt||n===kt||n===Rt?s.push(t):Ot(!1,39)})),r=sM):o===It?(s=n.getPoints(),r=uM):o===Lt?(s=n.getLineStrings(),r=hM):o===Gt?(s=n.getPolygons(),r=aM):Ot(!1,39),Pc(e,cM,r,s,i)}var lM=Ec(Gb,{LinearRing:Mc(_M)});function dM(t,n,i){Pc({node:t},lM,fM,[n],i)}var pM=Ec(Gb,{ExtendedData:Mc((function(t,n,i){for(var r={node:t},e=n.names,o=n.values,s=e.length,u=0;u<s;u++)Pc(r,W_,H_,[{name:e[u],value:o[u]}],i)})),MultiGeometry:Mc(vM),LineString:Mc(_M),LinearRing:Mc(_M),Point:Mc(_M),Polygon:Mc(jM),Style:Mc((function(t,n,i){var r={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var s=n.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(e.IconStyle=s)}if(n.lineStyles.length){(u=n.lineStyles[0].getStroke())&&(e.LineStyle=u)}if(n.polyStyles.length){var u;(u=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=u),e.PolyStyle=n.polyStyles[0]}var h=i[i.length-1].node,f=AM[h.namespaceURI],a=jc(e,f);Pc(r,CM,Sc,a,i,f)})),address:Mc(Cm),description:Mc(Cm),name:Mc(Cm),open:Mc(Sm),phoneNumber:Mc(Cm),styleUrl:Mc(Cm),visibility:Mc(Sm)}),wM=Ec(Gb,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),yM=Oc("ExtendedData");function gM(t,n,i){var r={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var s=Object.keys(e||{}).sort().filter((function(t){return!o[t]})),u=n.getStyleFunction();if(u){var h=u(n,0);if(h){var f=Array.isArray(h)?h:[h],a=f;if(n.getGeometry()&&(a=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Dt?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Nt||n===It})).length:r===Nt||r===It}}))),this.Gd){var c=f,v=f;n.getGeometry()&&(c=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Dt?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===kt||n===Lt})).length:r===kt||r===Lt}})),v=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Dt?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Rt||n===Gt})).length:r===Rt||r===Gt}}))),e.Style={pointStyles:a,lineStyles:c,polyStyles:v}}if(a.length&&void 0===e.name){var l=a[0].getText();l&&(e.name=l.getText())}}}var d=i[i.length-1].node,p=wM[d.namespaceURI],w=jc(e,p);if(Pc(r,pM,Sc,w,i,p),s.length>0){var y=jc(e,s);Pc(r,pM,yM,[{names:s,values:y}],i)}var g=i[0],m=n.getGeometry();m&&(m=im(m,!0,g)),Pc(r,pM,sM,[m],i)}var mM=Ec(Gb,["extrude","tessellate","altitudeMode","coordinates"]),bM=Ec(Gb,{extrude:Mc(Sm),tessellate:Mc(Sm),altitudeMode:Mc(Cm),coordinates:Mc((function(t,n,i){var r,e=i[i.length-1],o=e.layout,s=e.stride;o==Tt||o==Ct?r=2:o==At||o==Pt?r=3:Ot(!1,34);var u=n.length,h="";if(u>0){h+=n[0];for(var f=1;f<r;++f)h+=","+n[f];for(var a=s;a<u;a+=s){h+=" "+n[a];for(f=1;f<r;++f)h+=","+n[a+f]}}Cm(t,h)}))});function _M(t,n,i){var r=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=r;var s=i[i.length-1].node,u=mM[s.namespaceURI],h=jc(o,u);Pc(e,bM,Sc,h,i,u)}var MM=Ec(Gb,["color","fill","outline"]),xM=Ec(Gb,{outerBoundaryIs:Mc(dM),innerBoundaryIs:Mc(dM)}),OM=Oc("innerBoundaryIs"),SM=Oc("outerBoundaryIs");function jM(t,n,i){var r=n.getLinearRings(),e=r.shift(),o={node:t};Pc(o,xM,OM,r,i),Pc(o,xM,SM,[e],i)}var EM=Ec(Gb,{color:Mc(V_),fill:Mc(Sm),outline:Mc(Sm)});function TM(t,n){Tm(t,Math.round(1e6*n)/1e6)}var AM=Ec(Gb,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),CM=Ec(Gb,{IconStyle:Mc((function(t,n,i){var r={node:t},e={},o=n.getSrc(),s=n.getSize(),u=n.getImageSize(),h={href:o};if(s){h.w=s[0],h.h=s[1];var f=n.getAnchor(),a=n.getOrigin();if(a&&u&&0!==a[0]&&a[1]!==s[1]&&(h.x=a[0],h.y=u[1]-(a[1]+s[1])),f&&(f[0]!==s[0]/2||f[1]!==s[1]/2)){var c={x:f[0],xunits:Hc,y:s[1]-f[1],yunits:Hc};e.hotSpot=c}}e.Icon=h;var v=n.getScaleArray()[0],l=s;null===l&&(l=Fb),2==l.length&&(v/=n_(l)),1!==v&&(e.scale=v);var d=n.getRotation();0!==d&&(e.heading=d);var p=n.getColor();p&&(e.color=p);var w=i[i.length-1].node,y=K_[w.namespaceURI],g=jc(e,y);Pc(r,tM,Sc,g,i,y)})),LabelStyle:Mc((function(t,n,i){var r={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var s=n.getScale();s&&1!==s&&(e.scale=s);var u=i[i.length-1].node,h=nM[u.namespaceURI],f=jc(e,h);Pc(r,iM,Sc,f,i,h)})),LineStyle:Mc((function(t,n,i){var r={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=i[i.length-1].node,s=rM[o.namespaceURI],u=jc(e,s);Pc(r,eM,Sc,u,i,s)})),PolyStyle:Mc((function(t,n,i){var r={node:t},e=n.getFill(),o=n.getStroke(),s={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},u=i[i.length-1].node,h=MM[u.namespaceURI],f=jc(s,h);Pc(r,EM,Sc,f,i,h)}))});var PM=r_,NM=i(98),kM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function FM(t,n,i){if(3===t){var r={keys:[],values:[],features:[]},e=i.readVarint()+i.pos;i.readFields(RM,r,e),r.length=r.features.length,r.length&&(n[r.name]=r)}}function RM(t,n,i){if(15===t)n.version=i.readVarint();else if(1===t)n.name=i.readString();else if(5===t)n.extent=i.readVarint();else if(2===t)n.features.push(i.pos);else if(3===t)n.keys.push(i.readString());else if(4===t){for(var r=null,e=i.readVarint()+i.pos;i.pos<e;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;n.values.push(r)}}function IM(t,n,i){if(1==t)n.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var e=n.layer.keys[i.readVarint()],o=n.layer.values[i.readVarint()];n.properties[e]=o}else 3==t?n.type=i.readVarint():4==t&&(n.geometry=i.pos)}function LM(t,n,i){t.pos=n.features[i];var r=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(IM,e,r),e}var GM=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=new li({code:"",units:Vt.TILE_PIXELS}),i.Wd=r.featureClass?r.featureClass:Ty,i.N=r.geometryName,i.Zd=r.layerName?r.layerName:"layer",i.Jh=r.layers?r.layers:null,i.Yd=r.idProperty,i.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],i}return kM(n,t),n.prototype.Hd=function(t,n,i,r){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,s=0,u=0,h=0,f=0,a=0;t.pos<e;){if(!s){var c=t.readVarint();o=7&c,s=c>>3}s--,1===o||2===o?(u+=t.readSVarint(),h+=t.readSVarint(),1===o&&f>a&&(r.push(f),a=f),i.push(u,h),f+=2):7===o?f>a&&(i.push(i[a],i[a+1]),f+=2):Ot(!1,59)}f>a&&(r.push(f),a=f)},n.prototype.Jd=function(t,n,i){var r,e=n.type;if(0===e)return null;var o,s=n.properties;this.Yd?(o=s[this.Yd],delete s[this.Yd]):o=n.id,s[this.Zd]=n.layer.name;var u=[],h=[];this.Hd(t,n,u,h);var f=function(t,n){var i;1===t?i=1===n?Nt:It:2===t?i=1===n?kt:Lt:3===t&&(i=Rt);return i}(e,h.length);if(this.Wd===Ty)(r=new this.Wd(f,u,h,s,o)).transform(i.dataProjection);else{var a=void 0;if(f==Rt){var c=$e(u,h);a=c.length>1?new Oy(u,Tt,c):new to(u,Tt,h)}else a=f===Nt?new Ne(u,Tt):f===kt?new my(u,Tt):f===Rt?new to(u,Tt,h):f===It?new dy(u,Tt):f===Lt?new _y(u,Tt,h):null;r=new(0,this.Wd),this.N&&r.setGeometryName(this.N);var v=im(a,!1,i);r.setGeometry(v),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r},n.prototype.getType=function(){return aa},n.prototype.readFeatures=function(t,n){var i=this.Jh,r=this.adaptOptions(n),e=Sr(r.dataProjection);e.setWorldExtent(r.extent),r.dataProjection=e;var o=new NM(t),s=o.readFields(FM,{}),u=[];for(var h in s)if(!i||-1!=i.indexOf(h)){var f=s[h],a=f?[0,0,f.extent,f.extent]:null;e.setExtent(a);for(var c=0,v=f.length;c<v;++c){var l=LM(o,f,c),d=this.Jd(o,l,r);null!==d&&u.push(d)}}return u},n.prototype.readProjection=function(t){return this.dataProjection},n.prototype.setLayers=function(t){this.Jh=t},n}(nm),DM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zM=[null],UM=Ec(zM,{nd:function(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"))},tag:VM}),XM=Ec(zM,{node:function(t,n){var i=n[0],r=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[e]=o;var s=Ac({tags:{}},qM,t,n);if(!N(s.tags)){var u=new Ne(o);im(u,!1,i);var h=new Et(u);void 0!==e&&h.setId(e),h.setProperties(s.tags,!0),r.features.push(h)}},way:function(t,n){var i=Ac({id:t.getAttribute("id"),ndrefs:[],tags:{}},UM,t,n);n[n.length-1].ways.push(i)}}),BM=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=Sr("EPSG:4326"),n}return DM(n,t),n.prototype.readFeaturesFromNode=function(t,n){var i=this.getReadOptions(t,n);if("osm"==t.localName){for(var r=Ac({nodes:{},ways:[],features:[]},XM,t,[i]),e=0;e<r.ways.length;e++){for(var o=r.ways[e],s=[],u=0,h=o.ndrefs.length;u<h;u++){m(s,r.nodes[o.ndrefs[u]])}var f=void 0;im(f=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new to(s,Tt,[s.length]):new my(s,Tt),!1,i);var a=new Et(f);void 0!==o.id&&a.setId(o.id),a.setProperties(o.tags,!0),r.features.push(a)}if(r.features)return r.features}return[]},n}(wm),qM=Ec(zM,{tag:VM});function VM(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var WM=BM,ZM=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=wc(t);return this.readFromDocument(n)}return dc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}();function YM(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var HM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),JM=[null,"http://www.opengis.net/ows/1.1"],$M=Ec(JM,{ServiceIdentification:_c((function(t,n){return Ac({},ax,t,n)})),ServiceProvider:_c((function(t,n){return Ac({},cx,t,n)})),OperationsMetadata:_c((function(t,n){return Ac({},sx,t,n)}))}),QM=function(t){function n(){return t.call(this)||this}return HM(n,t),n.prototype.readFromNode=function(t){var n=Ac({},$M,t,[]);return n||null},n}(ZM),KM=Ec(JM,{DeliveryPoint:_c(Om),City:_c(Om),AdministrativeArea:_c(Om),PostalCode:_c(Om),Country:_c(Om),ElectronicMailAddress:_c(Om)}),tx=Ec(JM,{Value:bc((function(t,n){return Om(t)}))}),nx=Ec(JM,{AllowedValues:_c((function(t,n){return Ac({},tx,t,n)}))}),ix=Ec(JM,{Phone:_c((function(t,n){return Ac({},ux,t,n)})),Address:_c((function(t,n){return Ac({},KM,t,n)}))}),rx=Ec(JM,{HTTP:_c((function(t,n){return Ac({},ex,t,n)}))}),ex=Ec(JM,{Get:bc((function(t,n){var i=YM(t);if(!i)return;return Ac({href:i},hx,t,n)})),Post:void 0}),ox=Ec(JM,{DCP:_c((function(t,n){return Ac({},rx,t,n)}))}),sx=Ec(JM,{Operation:function(t,n){var i=t.getAttribute("name"),r=Ac({},ox,t,n);if(!r)return;n[n.length-1][i]=r}}),ux=Ec(JM,{Voice:_c(Om),Facsimile:_c(Om)}),hx=Ec(JM,{Constraint:bc((function(t,n){var i=t.getAttribute("name");if(!i)return;return Ac({name:i},nx,t,n)}))}),fx=Ec(JM,{IndividualName:_c(Om),PositionName:_c(Om),ContactInfo:_c((function(t,n){return Ac({},ix,t,n)}))}),ax=Ec(JM,{Abstract:_c(Om),AccessConstraints:_c(Om),Fees:_c(Om),Title:_c(Om),ServiceTypeVersion:_c(Om),ServiceType:_c(Om)}),cx=Ec(JM,{ProviderName:_c(Om),ProviderSite:_c(YM),ServiceContact:_c((function(t,n){return Ac({},fx,t,n)}))});var vx=QM,lx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function dx(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=0,u=t.length;s<u;)for(r=0;r<n;++r,++s){var h=t[s],f=h-o[r];o[r]=h,t[s]=f}return wx(t,e)}function px(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=yx(t,e),u=0,h=s.length;u<h;)for(r=0;r<n;++r,++u)o[r]+=s[u],s[u]=o[r];return s}function wx(t,n){for(var i=n||1e5,r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*i);return gx(t)}function yx(t,n){for(var i=n||1e5,r=mx(t),e=0,o=r.length;e<o;++e)r[e]/=i;return r}function gx(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return bx(t)}function mx(t){for(var n=_x(t),i=0,r=n.length;i<r;++i){var e=n[i];n[i]=1&e?~(e>>1):e>>1}return n}function bx(t){for(var n="",i=0,r=t.length;i<r;++i)n+=Mx(t[i]);return n}function _x(t){for(var n=[],i=0,r=0,e=0,o=t.length;e<o;++e){var s=t.charCodeAt(e)-63;i|=(31&s)<<r,s<32?(n.push(i),i=0,r=0):r+=5}return n}function Mx(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var xx=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=Sr("EPSG:4326"),i.$d=r.factor?r.factor:1e5,i.Qd=r.geometryLayout?r.geometryLayout:Tt,i}return lx(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new Et(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=ie(this.Qd),r=px(t,i,this.$d);tm(r,0,r.length,i,r);var e=xe(r,0,r.length,i);return im(new my(e,this.Qd),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(Ot(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=im(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return tm(i,0,i.length,r,i),dx(i,r,this.$d)},n}(mb),Ox=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sx=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Zd=r.layerName,i.Jh=r.layers?r.layers:null,i.dataProjection=Sr(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return Ox(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,e=null,o=null;i.transform&&(e=(r=i.transform).scale,o=r.translate);var s=i.arcs;r&&function(t,n,i){for(var r=0,e=t.length;r<e;++r)Cx(t[r],n,i)}(s,e,o);var u=[],h=i.objects,f=this.Zd,a=void 0;for(var c in h)this.Jh&&-1==this.Jh.indexOf(c)||("GeometryCollection"===h[c].type?(a=h[c],u.push.apply(u,Tx(a,s,e,o,f,c,n))):(a=h[c],u.push(Ax(a,s,e,o,f,c,n))));return u}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(sm),jx={Point:function(t,n,i){var r=t.coordinates;n&&i&&Px(r,n,i);return new Ne(r)},LineString:function(t,n){var i=Ex(t.arcs,n);return new my(i)},Polygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=Ex(t.arcs[r],n);return new to(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var e=0,o=r.length;e<o;++e)Px(r[e],n,i);return new dy(r)},MultiLineString:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=Ex(t.arcs[r],n);return new _y(i)},MultiPolygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){for(var o=t.arcs[r],s=[],u=0,h=o.length;u<h;++u)s[u]=Ex(o[u],n);i[r]=s}return new Oy(i)}};function Ex(t,n){for(var i,r=[],e=0,o=t.length;e<o;++e)if(i=t[e],e>0&&r.pop(),i>=0)for(var s=0,u=(h=n[i]).length;s<u;++s)r.push(h[s].slice(0));else{var h;for(s=(h=n[~i]).length-1;s>=0;--s)r.push(h[s].slice(0))}return r}function Tx(t,n,i,r,e,o,s){for(var u=t.geometries,h=[],f=0,a=u.length;f<a;++f)h[f]=Ax(u[f],n,i,r,e,o,s);return h}function Ax(t,n,i,r,e,o,s){var u=null,h=t.type;if(h){var f=jx[h];u=im(u="Point"===h||"MultiPoint"===h?f(t,i,r):f(t,n),!1,s)}var a=new Et({geometry:u});void 0!==t.id&&a.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&a.setProperties(c,!0),a}function Cx(t,n,i){for(var r=0,e=0,o=0,s=t.length;o<s;++o){var u=t[o];r+=u[0],e+=u[1],u[0]=r,u[1]=e,Px(u,n,i)}}function Px(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var Nx=Sx,kx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fx="http://www.opengis.net/gml",Rx=/^[\s\xa0]*$/,Ix=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.featureType=r.featureType,i.featureNS=r.featureNS,i.srsName=r.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:gc(i.readFeaturesInternal),featureMembers:mc(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i}return kx(n,t),n.prototype.readFeaturesInternal=function(t,n){var i=t.localName,r=null;if("FeatureCollection"==i)r=Ac([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var e=n[0],o=e.featureType,s=e.featureNS;if(!o&&t.childNodes){o=[],s={};for(var u=0,h=t.childNodes.length;u<h;++u){var f=t.childNodes[u];if(1===f.nodeType){var a=f.nodeName.split(":").pop();if(-1===o.indexOf(a)){var c="",v=0,l=f.namespaceURI;for(var d in s){if(s[d]===l){c=d;break}++v}c||(s[c="p"+v]=l),o.push(c+":"+a)}}}"featureMember"!=i&&(e.featureType=o,e.featureNS=s)}if("string"==typeof s){var p=s;(s={}).p0=p}var w={},y=Array.isArray(o)?o:[o];for(var g in s){var m={};for(u=0,h=y.length;u<h;++u){(-1===y[u].indexOf(":")?"p0":y[u].split(":")[0])===g&&(m[y[u].split(":").pop()]="featureMembers"==i?gc(this.readFeatureElement,this):mc(this.readFeatureElement,this))}w[s[g]]=m}r=Ac("featureMember"==i||"member"==i?void 0:[],w,t,n)}return null===r&&(r=[]),r},n.prototype.readGeometryOrExtent=function(t,n){var i=n[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Ac(null,this.GEOMETRY_PARSERS,t,n,this)},n.prototype.readExtentElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?rm(r,i):void 0},n.prototype.readGeometryElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?im(r,!1,i):void 0},n.prototype.readFeatureElementInternal=function(t,n,i){for(var r,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,u=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=vc(o,!1),Rx.test(s)&&(s=void 0)):(i&&(s="boundedBy"===u?this.readExtentElement(o,n):this.readGeometryElement(o,n)),s?"boundedBy"!==u&&(r=u):s=this.readFeatureElementInternal(o,n,!1)),e[u]?(e[u]instanceof Array||(e[u]=[e[u]]),e[u].push(s)):e[u]=s;var h=o.attributes.length;if(h>0){e[u]={Kd:e[u]};for(var f=0;f<h;f++){var a=o.attributes[f].name;e[u][a]=o.attributes[f].value}}}if(i){var c=new Et(e);r&&c.setGeometryName(r);var v=t.getAttribute("fid")||pc(t,this.namespace,"id");return v&&c.setId(v),c}return e},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0)},n.prototype.readPoint=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Ne(i,At)},n.prototype.readMultiPoint=function(t,n){var i=Ac([],this.MULTIPOINT_PARSERS,t,n,this);return i?new dy(i):void 0},n.prototype.readMultiLineString=function(t,n){var i=Ac([],this.MULTILINESTRING_PARSERS,t,n,this);if(i)return new _y(i)},n.prototype.readMultiPolygon=function(t,n){var i=Ac([],this.MULTIPOLYGON_PARSERS,t,n,this);if(i)return new Oy(i)},n.prototype.pointMemberParser=function(t,n){Tc(this.POINTMEMBER_PARSERS,t,n,this)},n.prototype.lineStringMemberParser=function(t,n){Tc(this.LINESTRINGMEMBER_PARSERS,t,n,this)},n.prototype.polygonMemberParser=function(t,n){Tc(this.POLYGONMEMBER_PARSERS,t,n,this)},n.prototype.readLineString=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);return i?new my(i,At):void 0},n.prototype.readFlatLinearRing=function(t,n){var i=Ac(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return i||void 0},n.prototype.readLinearRing=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Ce(i,At)},n.prototype.readPolygon=function(t,n){var i=Ac([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)m(e,i[s]),o.push(e.length);return new to(e,At,o)}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Ac(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.readGeometryFromNode=function(t,n){var i=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){var i={featureType:this.featureType,featureNS:this.featureNS};return n&&A(i,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[i])||[]},n.prototype.readProjectionFromNode=function(t){return Sr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},n}(wm);Ix.prototype.namespace=Fx,Ix.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Ix.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Ix.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Ix.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:gc(Ix.prototype.pointMemberParser),pointMembers:gc(Ix.prototype.pointMemberParser)}},Ix.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:gc(Ix.prototype.lineStringMemberParser),lineStringMembers:gc(Ix.prototype.lineStringMemberParser)}},Ix.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:gc(Ix.prototype.polygonMemberParser),polygonMembers:gc(Ix.prototype.polygonMemberParser)}},Ix.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:gc(Ix.prototype.readFlatCoordinatesFromNode)}},Ix.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:gc(Ix.prototype.readLineString)}},Ix.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:gc(Ix.prototype.readPolygon)}},Ix.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:mc(Ix.prototype.readFlatLinearRing)}};var Lx=Ix,Gx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dx={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},zx=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[Fx].featureMember=gc(i.readFeaturesInternal),i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return Gx(n,t),n.prototype.readFlatCoordinates=function(t,n){var i=vc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0].srsName,e="enu";if(r){var o=Sr(r);o&&(e=o.getAxisOrientation())}for(var s=i.trim().split(/\s+/),u=[],h=0,f=s.length;h<f;h++){var a=s[h].split(/,+/),c=parseFloat(a[0]),v=parseFloat(a[1]),l=3===a.length?parseFloat(a[2]):0;"en"===e.substr(0,2)?u.push(c,v,l):u.push(v,c,l)}return u},n.prototype.readBox=function(t,n){var i=Ac([null],this.tp,t,n,this);return In(i[1][0],i[1][1],i[1][3],i[1][4])},n.prototype.innerBoundaryIsParser=function(t,n){var i=Ac(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.outerBoundaryIsParser=function(t,n){var i=Ac(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.np=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===u&&(r="MultiCurve"),cc("http://www.opengis.net/gml",r)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],h=[];if(n.hasProperties()){var f=n.getProperties();for(var a in f){var c=f[a];null!==c&&(u.push(a),h.push(c),a==s||"function"==typeof c.getSimplifiedGeometry?a in e.serializers[o]||(e.serializers[o][a]=Mc(this.writeGeometryElement,this)):a in e.serializers[o]||(e.serializers[o][a]=Mc(Cm)))}}var v=A({},e);v.node=t,Pc(v,e.serializers,Oc(void 0,o),h,i,u)},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.ip(t.namespaceURI);t.appendChild(e),this.rp(e,n,i)}else if("Curve"===t.nodeName){var o=cc(t.namespaceURI,"segments");t.appendChild(o),this.ep(o,n,i)}},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.np(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Pc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.op,u,i,void 0,this)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?rm(n,e):im(n,!0,e),Pc(o,this.GEOMETRY_SERIALIZERS,this.np,[r],i,void 0,this)},n.prototype.ip=function(t){var n=cc(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n},n.prototype.rp=function(t,n,i){for(var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=n.getCoordinates(),u=s.length,h=new Array(u),f=0;f<u;++f){var a=s[f];h[f]=this.sp(a,o,e)}Cm(t,h.join(" "))},n.prototype.ep=function(t,n,i){var r=cc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Pc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.up,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=cc(t.namespaceURI,"patches");t.appendChild(u),this.hp(u,n,i)}},n.prototype.up=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),cc(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},n.prototype.hp=function(t,n,i){var r=cc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.writeRing=function(t,n,i){var r=cc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.sp=function(t,n,i){var r="enu";n&&(r=Sr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(e+=","+(t[2]||0));return e},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.ip(t.namespaceURI);t.appendChild(s);var u=n.getCoordinates();Cm(s,this.sp(u,o,e))},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=n.getPoints();Pc({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Oc("pointMember"),s,i,void 0,this)},n.prototype.writePointMember=function(t,n,i){var r=cc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=this.ip(t.namespaceURI);t.appendChild(e),this.rp(e,n,i)},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Pc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.op,u,i,void 0,this)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.np(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Pc({node:t},this.ENVELOPE_SERIALIZERS,Sc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.op=function(t,n,i){var r=n[n.length-1].node;return cc("http://www.opengis.net/gml",Dx[r.nodeName])},n}(Lx);zx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:mc(zx.prototype.readFlatCoordinates)}},zx.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:zx.prototype.innerBoundaryIsParser,outerBoundaryIs:zx.prototype.outerBoundaryIsParser}},zx.prototype.tp={"http://www.opengis.net/gml":{coordinates:gc(zx.prototype.readFlatCoordinates)}},zx.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:mc(Lx.prototype.readPoint),MultiPoint:mc(Lx.prototype.readMultiPoint),LineString:mc(Lx.prototype.readLineString),MultiLineString:mc(Lx.prototype.readMultiLineString),LinearRing:mc(Lx.prototype.readLinearRing),Polygon:mc(Lx.prototype.readPolygon),MultiPolygon:mc(Lx.prototype.readMultiPolygon),Box:mc(zx.prototype.readBox)}},zx.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Mc(zx.prototype.writeCurveOrLineString),MultiCurve:Mc(zx.prototype.writeMultiCurveOrLineString),Point:Mc(zx.prototype.writePoint),MultiPoint:Mc(zx.prototype.writeMultiPoint),LineString:Mc(zx.prototype.writeCurveOrLineString),MultiLineString:Mc(zx.prototype.writeMultiCurveOrLineString),LinearRing:Mc(zx.prototype.writeLinearRing),Polygon:Mc(zx.prototype.writeSurfaceOrPolygon),MultiPolygon:Mc(zx.prototype.writeMultiSurfaceOrPolygon),Surface:Mc(zx.prototype.writeSurfaceOrPolygon),MultiSurface:Mc(zx.prototype.writeMultiSurfaceOrPolygon),Envelope:Mc(zx.prototype.writeEnvelope)}},zx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Mc(zx.prototype.writeLineStringOrCurveMember),curveMember:Mc(zx.prototype.writeLineStringOrCurveMember)}},zx.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Mc(zx.prototype.writeRing),innerBoundaryIs:Mc(zx.prototype.writeRing)}},zx.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Mc(zx.prototype.writePointMember)}},zx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Mc(zx.prototype.writeSurfaceOrPolygonMember),polygonMember:Mc(zx.prototype.writeSurfaceOrPolygonMember)}},zx.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Mc(Cm),upperCorner:Mc(Cm)}};var Ux=zx,Xx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bx={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},qx=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).fp=void 0!==r.surface&&r.surface,i.ap=void 0!==r.curve&&r.curve,i.cp=void 0===r.multiCurve||r.multiCurve,i.vp=void 0===r.multiSurface||r.multiSurface,i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==r.hasZ&&r.hasZ,i}return Xx(n,t),n.prototype.readMultiCurve=function(t,n){var i=Ac([],this.MULTICURVE_PARSERS,t,n,this);return i?new _y(i):void 0},n.prototype.readMultiSurface=function(t,n){var i=Ac([],this.MULTISURFACE_PARSERS,t,n,this);if(i)return new Oy(i)},n.prototype.curveMemberParser=function(t,n){Tc(this.CURVEMEMBER_PARSERS,t,n,this)},n.prototype.surfaceMemberParser=function(t,n){Tc(this.SURFACEMEMBER_PARSERS,t,n,this)},n.prototype.readPatch=function(t,n){return Ac([null],this.PATCHES_PARSERS,t,n,this)},n.prototype.readSegment=function(t,n){return Ac([null],this.SEGMENTS_PARSERS,t,n,this)},n.prototype.readPolygonPatch=function(t,n){return Ac([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)},n.prototype.readLineStringSegment=function(t,n){return Ac([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.interiorParser=function(t,n){var i=Ac(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.exteriorParser=function(t,n){var i=Ac(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.readSurface=function(t,n){var i=Ac([null],this.SURFACE_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)m(e,i[s]),o.push(e.length);return new to(e,At,o)}},n.prototype.readCurve=function(t,n){var i=Ac([null],this.CURVE_PARSERS,t,n,this);return i?new my(i,At):void 0},n.prototype.readEnvelope=function(t,n){var i=Ac([null],this.ENVELOPE_PARSERS,t,n,this);return In(i[1][0],i[1][1],i[2][0],i[2][1])},n.prototype.readFlatPos=function(t,n){for(var i,r=vc(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=e.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var s=n[0].srsName,u="enu";if(s)u=Sr(s).getAxisOrientation();if("neu"===u){var h,f=void 0;for(f=0,h=o.length;f<h;f+=3){var a=o[f],c=o[f+1];o[f]=c,o[f+1]=a}}var v=o.length;if(2==v&&o.push(0),0!==v)return o}},n.prototype.readFlatPosList=function(t,n){var i=vc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0],e=r.srsName,o=r.srsDimension,s="enu";e&&(s=Sr(e).getAxisOrientation());var u,h,f,a=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=xm(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=xm(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=xm(t.parentNode.getAttribute("srsDimension")):o&&(c=xm(o));for(var v=[],l=0,d=a.length;l<d;l+=c)u=parseFloat(a[l]),h=parseFloat(a[l+1]),f=3===c?parseFloat(a[l+2]):0,"en"===s.substr(0,2)?v.push(u,h,f):v.push(h,u,f);return v},n.prototype.lp=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,u="enu";s&&(u=Sr(s).getAxisOrientation());var h,f=n.getCoordinates();(h="en"===u.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0],e)&&(h+=" "+(f[2]||0));Cm(t,h)},n.prototype.sp=function(t,n,i){var r="enu";n&&(r=Sr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(e+=" "+(t[2]||0));return e},n.prototype.dp=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var s,u=r.srsName,h=n.getCoordinates(),f=h.length,a=new Array(f),c=0;c<f;++c)s=h[c],a[c]=this.sp(s,u,e);Cm(t,a.join(" "))},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=cc(t.namespaceURI,"pos");t.appendChild(e),this.lp(e,n,i)},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Pc({node:t},this.ENVELOPE_SERIALIZERS,Sc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=cc(t.namespaceURI,"posList");t.appendChild(e),this.dp(e,n,i)},n.prototype.up=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),cc(e.namespaceURI,void 0!==o?"interior":"exterior")},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Pc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.up,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=cc(t.namespaceURI,"patches");t.appendChild(u),this.hp(u,n,i)}},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=cc(t.namespaceURI,"posList");t.appendChild(e),this.dp(e,n,i)}else if("Curve"===t.nodeName){var o=cc(t.namespaceURI,"segments");t.appendChild(o),this.ep(o,n,i)}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Pc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.op,u,i,void 0,this)},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.srsName,o=r.hasZ;e&&t.setAttribute("srsName",e);var s=n.getPoints();Pc({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Oc("pointMember"),s,i,void 0,this)},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Pc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.op,u,i,void 0,this)},n.prototype.writeRing=function(t,n,i){var r=cc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.np(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writePointMember=function(t,n,i){var r=cc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.np(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.hp=function(t,n,i){var r=cc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.ep=function(t,n,i){var r=cc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?rm(n,e):im(n,!0,e),Pc(o,this.GEOMETRY_SERIALIZERS,this.np,[r],i,void 0,this)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],h=[];if(n.hasProperties()){var f=n.getProperties();for(var a in f){var c=f[a];null!==c&&(u.push(a),h.push(c),a==s||"function"==typeof c.getSimplifiedGeometry?a in e.serializers[o]||(e.serializers[o][a]=Mc(this.writeGeometryElement,this)):a in e.serializers[o]||(e.serializers[o][a]=Mc(Cm)))}}var v=A({},e);v.node=t,Pc(v,e.serializers,Oc(void 0,o),h,i,u)},n.prototype.pp=function(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s={};s[o]={},s[o][e]=Mc(this.writeFeatureElement,this);var u=A({},r);u.node=t,Pc(u,s,Oc(e,o),n,i)},n.prototype.op=function(t,n,i){var r=n[n.length-1].node;return cc(this.namespace,Bx[r.nodeName])},n.prototype.np=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.curve,h=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===u?r="Curve":"MultiLineString"===r&&!0===h&&(r="MultiCurve"),cc(this.namespace,r)},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var i=cc(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.ap,surface:this.fp,multiSurface:this.vp,multiCurve:this.cp};return n&&A(r,n),this.writeGeometryElement(i,t,[r]),i},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc(this.namespace,"featureMembers");i.setAttributeNS(ac,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.ap,surface:this.fp,multiSurface:this.vp,multiCurve:this.cp,featureNS:this.featureNS,featureType:this.featureType};return n&&A(r,n),this.pp(i,t,[r]),i},n}(Lx);qx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:mc(qx.prototype.readFlatPos),posList:mc(qx.prototype.readFlatPosList),coordinates:mc(Ux.prototype.readFlatCoordinates)}},qx.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:qx.prototype.interiorParser,exterior:qx.prototype.exteriorParser}},qx.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:mc(Lx.prototype.readPoint),MultiPoint:mc(Lx.prototype.readMultiPoint),LineString:mc(Lx.prototype.readLineString),MultiLineString:mc(Lx.prototype.readMultiLineString),LinearRing:mc(Lx.prototype.readLinearRing),Polygon:mc(Lx.prototype.readPolygon),MultiPolygon:mc(Lx.prototype.readMultiPolygon),Surface:mc(qx.prototype.readSurface),MultiSurface:mc(qx.prototype.readMultiSurface),Curve:mc(qx.prototype.readCurve),MultiCurve:mc(qx.prototype.readMultiCurve),Envelope:mc(qx.prototype.readEnvelope)}},qx.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:gc(qx.prototype.curveMemberParser),curveMembers:gc(qx.prototype.curveMemberParser)}},qx.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:gc(qx.prototype.surfaceMemberParser),surfaceMembers:gc(qx.prototype.surfaceMemberParser)}},qx.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:gc(Lx.prototype.readLineString),Curve:gc(qx.prototype.readCurve)}},qx.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:gc(Lx.prototype.readPolygon),Surface:gc(qx.prototype.readSurface)}},qx.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:mc(qx.prototype.readPatch)}},qx.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:mc(qx.prototype.readSegment)}},qx.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:gc(qx.prototype.readFlatPosList),upperCorner:gc(qx.prototype.readFlatPosList)}},qx.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:mc(qx.prototype.readPolygonPatch)}},qx.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:mc(qx.prototype.readLineStringSegment)}},qx.prototype.writeFeatures,qx.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Mc(qx.prototype.writeRing),interior:Mc(qx.prototype.writeRing)}},qx.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Mc(Cm),upperCorner:Mc(Cm)}},qx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Mc(qx.prototype.writeSurfaceOrPolygonMember),polygonMember:Mc(qx.prototype.writeSurfaceOrPolygonMember)}},qx.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Mc(qx.prototype.writePointMember)}},qx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Mc(qx.prototype.writeLineStringOrCurveMember),curveMember:Mc(qx.prototype.writeLineStringOrCurveMember)}},qx.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Mc(qx.prototype.writeCurveOrLineString),MultiCurve:Mc(qx.prototype.writeMultiCurveOrLineString),Point:Mc(qx.prototype.writePoint),MultiPoint:Mc(qx.prototype.writeMultiPoint),LineString:Mc(qx.prototype.writeCurveOrLineString),MultiLineString:Mc(qx.prototype.writeMultiCurveOrLineString),LinearRing:Mc(qx.prototype.writeLinearRing),Polygon:Mc(qx.prototype.writeSurfaceOrPolygon),MultiPolygon:Mc(qx.prototype.writeMultiSurfaceOrPolygon),Surface:Mc(qx.prototype.writeSurfaceOrPolygon),MultiSurface:Mc(qx.prototype.writeMultiSurfaceOrPolygon),Envelope:Mc(qx.prototype.writeEnvelope)}};var Vx=qx,Wx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zx=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return Wx(n,t),n}(Vx);Zx.prototype.namespace="http://www.opengis.net/gml/3.2",Zx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:mc(Vx.prototype.readFlatPos),posList:mc(Vx.prototype.readFlatPosList),coordinates:mc(Ux.prototype.readFlatCoordinates)}},Zx.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Vx.prototype.interiorParser,exterior:Vx.prototype.exteriorParser}},Zx.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:mc(Lx.prototype.readPoint),MultiPoint:mc(Lx.prototype.readMultiPoint),LineString:mc(Lx.prototype.readLineString),MultiLineString:mc(Lx.prototype.readMultiLineString),LinearRing:mc(Lx.prototype.readLinearRing),Polygon:mc(Lx.prototype.readPolygon),MultiPolygon:mc(Lx.prototype.readMultiPolygon),Surface:mc(Zx.prototype.readSurface),MultiSurface:mc(Vx.prototype.readMultiSurface),Curve:mc(Zx.prototype.readCurve),MultiCurve:mc(Vx.prototype.readMultiCurve),Envelope:mc(Zx.prototype.readEnvelope)}},Zx.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:gc(Vx.prototype.curveMemberParser),curveMembers:gc(Vx.prototype.curveMemberParser)}},Zx.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:gc(Vx.prototype.surfaceMemberParser),surfaceMembers:gc(Vx.prototype.surfaceMemberParser)}},Zx.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:gc(Lx.prototype.readLineString),Curve:gc(Vx.prototype.readCurve)}},Zx.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:gc(Lx.prototype.readPolygon),Surface:gc(Vx.prototype.readSurface)}},Zx.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:mc(Vx.prototype.readPatch)}},Zx.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:mc(Vx.prototype.readSegment)}},Zx.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:gc(Vx.prototype.readFlatPosList),upperCorner:gc(Vx.prototype.readFlatPosList)}},Zx.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:mc(Vx.prototype.readPolygonPatch)}},Zx.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:mc(Vx.prototype.readLineStringSegment)}},Zx.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:gc(Lx.prototype.pointMemberParser),pointMembers:gc(Lx.prototype.pointMemberParser)}},Zx.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:gc(Lx.prototype.lineStringMemberParser),lineStringMembers:gc(Lx.prototype.lineStringMemberParser)}},Zx.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:gc(Lx.prototype.polygonMemberParser),polygonMembers:gc(Lx.prototype.polygonMemberParser)}},Zx.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:gc(Lx.prototype.readFlatCoordinatesFromNode)}},Zx.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:gc(Lx.prototype.readLineString)}},Zx.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:gc(Lx.prototype.readPolygon)}},Zx.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:mc(Lx.prototype.readFlatLinearRing)}},Zx.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Mc(Vx.prototype.writeRing),interior:Mc(Vx.prototype.writeRing)}},Zx.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Mc(Cm),upperCorner:Mc(Cm)}},Zx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Mc(Vx.prototype.writeSurfaceOrPolygonMember),polygonMember:Mc(Vx.prototype.writeSurfaceOrPolygonMember)}},Zx.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Mc(Vx.prototype.writePointMember)}},Zx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Mc(Vx.prototype.writeLineStringOrCurveMember),curveMember:Mc(Vx.prototype.writeLineStringOrCurveMember)}},Zx.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Mc(Vx.prototype.writeCurveOrLineString),MultiCurve:Mc(Vx.prototype.writeMultiCurveOrLineString),Point:Mc(Zx.prototype.writePoint),MultiPoint:Mc(Vx.prototype.writeMultiPoint),LineString:Mc(Vx.prototype.writeCurveOrLineString),MultiLineString:Mc(Vx.prototype.writeMultiCurveOrLineString),LinearRing:Mc(Vx.prototype.writeLinearRing),Polygon:Mc(Vx.prototype.writeSurfaceOrPolygon),MultiPolygon:Mc(Vx.prototype.writeMultiSurfaceOrPolygon),Surface:Mc(Vx.prototype.writeSurfaceOrPolygon),MultiSurface:Mc(Vx.prototype.writeMultiSurfaceOrPolygon),Envelope:Mc(Vx.prototype.writeEnvelope)}};var Yx=Zx,Hx=function(){function t(t){this.wp=t}return t.prototype.getTagName=function(){return this.wp},t}(),Jx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$x=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,Ot(r.conditions.length>=2,57),r}return Jx(n,t),n}(Hx),Qx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kx=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return Qx(n,t),n}($x),tO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nO=function(t){function n(n,i,r){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=r,e}return tO(n,t),n}(Hx);var iO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rO={"http://www.opengis.net/gml":{boundedBy:_c(Lx.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:gc(Lx.prototype.readFeaturesInternal)}},eO={"http://www.opengis.net/wfs":{totalInserted:_c(Mm),totalUpdated:_c(Mm),totalDeleted:_c(Mm)},"http://www.opengis.net/wfs/2.0":{totalInserted:_c(Mm),totalUpdated:_c(Mm),totalDeleted:_c(Mm)}},oO={"http://www.opengis.net/wfs":{TransactionSummary:_c(yO,"transactionSummary"),InsertResults:_c(_O,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:_c(yO,"transactionSummary"),InsertResults:_c(_O,"insertIds")}},sO={"http://www.opengis.net/wfs":{PropertyName:Mc(Cm)},"http://www.opengis.net/wfs/2.0":{PropertyName:Mc(Cm)}},uO={"http://www.opengis.net/wfs":{Insert:Mc(MO),Update:Mc(jO),Delete:Mc(SO),Property:Mc(EO),Native:Mc(TO)},"http://www.opengis.net/wfs/2.0":{Insert:Mc(MO),Update:Mc(jO),Delete:Mc(SO),Property:Mc(EO),Native:Mc(TO)}},hO="feature",fO="http://www.w3.org/2000/xmlns/",aO={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},cO={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},vO={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},lO={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},dO={"2.0.0":Yx,"1.1.0":Vx,"1.0.0":Ux},pO=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.pf=r.version?r.version:"1.1.0",i.yp=r.featureType,i.gp=r.featureNS,i.mp=r.gmlFormat?r.gmlFormat:new dO[i.pf],i.bp=r.schemaLocation?r.schemaLocation:lO[i.pf],i}return iO(n,t),n.prototype.getFeatureType=function(){return this.yp},n.prototype.setFeatureType=function(t){this.yp=t},n.prototype.readFeaturesFromNode=function(t,n){var i={node:t};A(i,{featureType:this.yp,featureNS:this.gp}),A(i,this.getReadOptions(t,n||{}));var r=[i],e=Ac([],"2.0.0"===this.pf?rO:this.mp.FEATURE_COLLECTION_PARSERS,t,r,this.mp);return e||(e=[]),e},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=wc(t);return this.readTransactionResponseFromDocument(n)}return dc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=wc(t);return this.readFeatureCollectionMetadataFromDocument(n)}return dc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},i=xm(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=i,Ac(n,rO,t,[],this.mp)},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)},n.prototype.readTransactionResponseFromNode=function(t){return Ac({},oO,t,[])},n.prototype.writeGetFeature=function(t){var n=this,i=cc(cO[this.pf],"GetFeature");i.setAttribute("service","WFS"),i.setAttribute("version",this.pf),t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),i.setAttributeNS(ac,"xsi:schemaLocation",this.bp);var r={node:i};if(A(r,{version:this.pf,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.gp,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Ot(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(Ot(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),A(r,{geometryName:t.geometryName,filter:e}),WO(i,t.featureTypes,[r])}else t.featureTypes.forEach((function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);A(r,{geometryName:e.geometryName,filter:o}),WO(i,[e.name],[r])}));return i},n.prototype.combineBboxAndFilter=function(t,n,i,r){var e=function(t,n,i){return new nO(t,n,i)}(t,n,i);return r?function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Kx,n))}(r,e):e},n.prototype.writeTransaction=function(t,n,i,r){var e,o=[],s=r.version?r.version:this.pf,u=cc(cO[s],"Transaction");u.setAttribute("service","WFS"),u.setAttribute("version",s),r&&(e=r.gmlOptions?r.gmlOptions:{},r.handle&&u.setAttribute("handle",r.handle)),u.setAttributeNS(ac,"xsi:schemaLocation",lO[s]);var h=function(t,n,i,r){var e,o=r.featurePrefix?r.featurePrefix:hO;"1.0.0"===i?e=2:"1.1.0"===i?e=3:"2.0.0"===i&&(e=3.2);return A({node:t},{version:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:e,hasZ:r.hasZ,srsName:r.srsName},n)}(u,e,s,r);return t&&wO("Insert",t,o,h),n&&wO("Update",n,o,h),i&&wO("Delete",i,o,h),r.nativeElements&&wO("Native",r.nativeElements,o,h),u},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var i=[{}];return this.mp.readGeometryElement(n,i),Sr(i.pop().srsName)}return null},n}(wm);function wO(t,n,i,r){Pc(r,uO,Oc(t),n,i)}function yO(t,n){return Ac({},eO,t,n)}var gO={"http://www.opengis.net/ogc":{FeatureId:gc((function(t,n){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:gc((function(t,n){return t.getAttribute("fid")}))}};function mO(t,n){Tc(gO,t,n)}var bO={"http://www.opengis.net/wfs":{Feature:mO},"http://www.opengis.net/wfs/2.0":{Feature:mO}};function _O(t,n){return Ac([],bO,t,n)}function MO(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s=r.gmlVersion,u=cc(o,e);t.appendChild(u),2===s?Ux.prototype.writeFeatureElement(u,n,i):3===s?Vx.prototype.writeFeatureElement(u,n,i):Yx.prototype.writeFeatureElement(u,n,i)}function xO(t,n,i){var r=i[i.length-1].version,e=aO[r],o=cc(e,"Filter"),s=cc(e,"FeatureId");o.appendChild(s),s.setAttribute("fid",n),t.appendChild(o)}function OO(t,n){var i=(t=t||hO)+":";return 0===n.indexOf(i)?n:i+n}function SO(t,n,i){var r=i[i.length-1];Ot(void 0!==n.getId(),26);var e=r.featureType,o=r.featurePrefix,s=r.featureNS,u=OO(o,e);t.setAttribute("typeName",u),t.setAttributeNS(fO,"xmlns:"+o,s);var h=n.getId();void 0!==h&&xO(t,h,i)}function jO(t,n,i){var r=i[i.length-1];Ot(void 0!==n.getId(),27);var e=r.version,o=r.featureType,s=r.featurePrefix,u=r.featureNS,h=OO(s,o),f=n.getGeometryName();t.setAttribute("typeName",h),t.setAttributeNS(fO,"xmlns:"+s,u);var a=n.getId();if(void 0!==a){for(var c=n.getKeys(),v=[],l=0,d=c.length;l<d;l++){var p=n.get(c[l]);if(void 0!==p){var w=c[l];p&&"function"==typeof p.getSimplifiedGeometry&&(w=f),v.push({name:w,value:p})}}Pc({version:e,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},uO,Oc("Property"),v,i),xO(t,a,i)}}function EO(t,n,i){var r=i[i.length-1],e=r.version,o=cO[e],s=cc(o,"Name"),u=r.gmlVersion;if(t.appendChild(s),Cm(s,n.name),void 0!==n.value&&null!==n.value){var h=cc(o,"Value");t.appendChild(h),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===u?Ux.prototype.writeGeometryElement(h,n.value,i):3===u?Vx.prototype.writeGeometryElement(h,n.value,i):Yx.prototype.writeGeometryElement(h,n.value,i):Cm(h,n.value)}}function TO(t,n,i){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&Cm(t,n.value)}var AO={"http://www.opengis.net/wfs":{Query:Mc(CO)},"http://www.opengis.net/wfs/2.0":{Query:Mc(CO)},"http://www.opengis.net/ogc":{During:Mc(RO),And:Mc(IO),Or:Mc(IO),Not:Mc(LO),BBOX:Mc(NO),Contains:Mc(kO),Intersects:Mc(kO),Within:Mc(kO),DWithin:Mc(FO),PropertyIsEqualTo:Mc(GO),PropertyIsNotEqualTo:Mc(GO),PropertyIsLessThan:Mc(GO),PropertyIsLessThanOrEqualTo:Mc(GO),PropertyIsGreaterThan:Mc(GO),PropertyIsGreaterThanOrEqualTo:Mc(GO),PropertyIsNull:Mc(DO),PropertyIsBetween:Mc(zO),PropertyIsLike:Mc(UO)},"http://www.opengis.net/fes/2.0":{During:Mc(RO),And:Mc(IO),Or:Mc(IO),Not:Mc(LO),BBOX:Mc(NO),Contains:Mc(kO),Disjoint:Mc(kO),Intersects:Mc(kO),ResourceId:Mc((function(t,n,i){t.setAttribute("rid",n.rid)})),Within:Mc(kO),DWithin:Mc(FO),PropertyIsEqualTo:Mc(GO),PropertyIsNotEqualTo:Mc(GO),PropertyIsLessThan:Mc(GO),PropertyIsLessThanOrEqualTo:Mc(GO),PropertyIsGreaterThan:Mc(GO),PropertyIsGreaterThanOrEqualTo:Mc(GO),PropertyIsNull:Mc(DO),PropertyIsBetween:Mc(zO),PropertyIsLike:Mc(UO)}};function CO(t,n,i){var r,e,o=i[i.length-1],s=o.version,u=o.featurePrefix,h=o.featureNS,f=o.propertyNames,a=o.srsName;r=u?OO(u,n):n,e="2.0.0"===s?"typeNames":"typeName",t.setAttribute(e,r),a&&t.setAttribute("srsName",a),h&&t.setAttributeNS(fO,"xmlns:"+u,h);var c=A({},o);c.node=t,Pc(c,sO,Oc("PropertyName"),f,i);var v=o.filter;if(v){var l=cc(ZO(s),"Filter");t.appendChild(l),PO(l,v,i)}}function PO(t,n,i){var r=i[i.length-1],e={node:t};A(e,{context:r}),Pc(e,AO,Oc(n.getTagName()),[n],i)}function NO(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=dO[e];qO(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,i)}function kO(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=dO[e];qO(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,i)}function FO(t,n,i){var r=i[i.length-1].context.version;kO(t,n,i);var e=cc(ZO(r),"Distance");Cm(e,n.distance.toString()),"2.0.0"===r?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e)}function RO(t,n,i){var r=i[i.length-1].context.version;XO(vO[r],"ValueReference",t,n.propertyName);var e=cc(Fx,"TimePeriod");t.appendChild(e);var o=cc(Fx,"begin");e.appendChild(o),VO(o,n.begin);var s=cc(Fx,"end");e.appendChild(s),VO(s,n.end)}function IO(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});for(var o=n.conditions,s=0,u=o.length;s<u;++s){var h=o[s];Pc(e,AO,Oc(h.getTagName()),[h],i)}}function LO(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});var o=n.condition;Pc(e,AO,Oc(o.getTagName()),[o],i)}function GO(t,n,i){var r=i[i.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),qO(r,t,n.propertyName),BO(r,t,""+n.expression)}function DO(t,n,i){qO(i[i.length-1].context.version,t,n.propertyName)}function zO(t,n,i){var r=i[i.length-1].context.version,e=ZO(r);qO(r,t,n.propertyName);var o=cc(e,"LowerBoundary");t.appendChild(o),BO(r,o,""+n.lowerBoundary);var s=cc(e,"UpperBoundary");t.appendChild(s),BO(r,s,""+n.upperBoundary)}function UO(t,n,i){var r=i[i.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),qO(r,t,n.propertyName),BO(r,t,""+n.pattern)}function XO(t,n,i,r){var e=cc(t,n);Cm(e,r),i.appendChild(e)}function BO(t,n,i){XO(ZO(t),"Literal",n,i)}function qO(t,n,i){"2.0.0"===t?XO(vO[t],"ValueReference",n,i):XO(aO[t],"PropertyName",n,i)}function VO(t,n){var i=cc(Fx,"TimeInstant");t.appendChild(i);var r=cc(Fx,"timePosition");i.appendChild(r),Cm(r,n)}function WO(t,n,i){var r=i[i.length-1],e=A({},r);e.node=t,Pc(e,AO,Oc("Query"),n,i)}function ZO(t){return"2.0.0"===t?vO[t]:aO[t]}var YO=pO,HO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),JO=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.gp="http://mapserver.gis.umn.edu/mapserver",i.mp=new Ux,i.Jh=r.layers?r.layers:null,i}return HO(n,t),n.prototype.getLayers=function(){return this.Jh},n.prototype.setLayers=function(t){this.Jh=t},n.prototype._p=function(t,n){t.setAttribute("namespaceURI",this.gp);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var e=0,o=t.childNodes.length;e<o;e++){var s=t.childNodes[e];if(s.nodeType===Node.ELEMENT_NODE){var u=s,h=n[0],f=u.localName.replace("_layer","");if(!this.Jh||w(this.Jh,f)){var a=f+"_feature";h.featureType=a,h.featureNS=this.gp;var c={};c[a]=gc(this.mp.readFeatureElement,this.mp);var v=Ec([h.featureNS,null],c);u.setAttribute("namespaceURI",this.gp);var l=Ac([],v,u,n,this.mp);l&&m(r,l)}}}if("FeatureCollection"==i){var d=Ac([],this.mp.FEATURE_COLLECTION_PARSERS,t,[{}],this.mp);d&&(r=d)}return r},n.prototype.readFeaturesFromNode=function(t,n){var i={};return n&&A(i,this.getReadOptions(t,n)),this._p(t,[i])},n}(wm),$O=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),QO=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],KO="enterfullscreen",tS="leavefullscreen";function nS(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled)}function iS(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function rS(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var eS=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.af=void 0!==r.keys&&r.keys,i.uv=r.source,i.Mp=!1,i.xp=i.Op.bind(i),i.Sp=void 0!==r.className?r.className:"ol-full-screen",i.jp=[],i.Ep=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.Sp+"-true"],i.Tp=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.Sp+"-false"];var e=void 0!==r.label?r.label:"";i.Ap="string"==typeof e?document.createTextNode(e):e;var o=void 0!==r.labelActive?r.labelActive:"";i.Cp="string"==typeof o?document.createTextNode(o):o;var s=r.tipLabel?r.tipLabel:"Toggle full-screen";return i.Pp=document.createElement("button"),i.Pp.title=s,i.Pp.setAttribute("type","button"),i.Pp.appendChild(i.Ap),i.Pp.addEventListener(G,i.dr.bind(i),!1),i.Np(i.Pp,i.Mp),i.element.className="".concat(i.Sp," ").concat(Ns," ").concat(Fs),i.element.appendChild(i.Pp),i}return $O(n,t),n.prototype.dr=function(t){t.preventDefault(),this.kp()},n.prototype.kp=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(nS(n))if(iS(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(n);else{var i=void 0;i=this.uv?"string"==typeof this.uv?n.getElementById(this.uv):this.uv:t.getTargetElement(),this.af?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():rS(t)}(i):rS(i)}}},n.prototype.Fp=function(){var t=this.getMap();if(t){var n=this.Mp;this.Mp=iS(t.getOwnerDocument()),n!==this.Mp&&(this.Np(this.Pp,this.Mp),this.Mp?(Fo(this.Cp,this.Ap),this.dispatchEvent(KO)):(Fo(this.Ap,this.Cp),this.dispatchEvent(tS)),t.updateSize())}},n.prototype.Np=function(t,n){var i,r,e,o;n?((i=t.classList).remove.apply(i,this.Tp),(r=t.classList).add.apply(r,this.Ep)):((e=t.classList).remove.apply(e,this.Ep),(o=t.classList).add.apply(o,this.Tp))},n.prototype.setMap=function(n){var i=this.getMap();i&&i.removeChangeListener(ku,this.xp),t.prototype.setMap.call(this,n),this.Op(),n&&n.addChangeListener(ku,this.xp)},n.prototype.Op=function(){for(var t=this.jp,n=0,i=t.length;n<i;++n)$(t[n]);t.length=0;var r=this.getMap();if(r){var e=r.getOwnerDocument();nS(e)?this.element.classList.remove(ks):this.element.classList.add(ks);for(n=0,i=QO.length;n<i;++n)t.push(H(e,QO[n],this.Fp,this));this.Fp()}},n}(gh),oS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sS="projection",uS="coordinateFormat",hS=function(t){function n(n){var i=this,r=n||{},e=document.createElement("div");e.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:e,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(sS,i.lt),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,s="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(s=r.undefinedHTML),o=!!s):"placeholder"in r&&(!1===r.placeholder?o=!1:s=String(r.placeholder)),i.Rp=s,i.Ip=o,i.Lp=e.innerHTML,i.Gp=null,i.ct=null,i}return oS(n,t),n.prototype.lt=function(){this.ct=null},n.prototype.getCoordinateFormat=function(){return this.get(uS)},n.prototype.getProjection=function(){return this.get(sS)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Dp(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Dp(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(H(i,bu,this.handleMouseMove,this)),this.Ip&&this.listenerKeys.push(H(i,xu,this.handleMouseOut,this)),this.Dp(null)}},n.prototype.setCoordinateFormat=function(t){this.set(uS,t)},n.prototype.setProjection=function(t){this.set(sS,Sr(t))},n.prototype.Dp=function(t){var n=this.Rp;if(t&&this.Gp){if(!this.ct){var i=this.getProjection();this.ct=i?kr(this.Gp,i):Mr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var e=Dr();e&&(this.ct=kr(this.Gp,e)),this.ct(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.Lp&&n===this.Lp||(this.element.innerHTML=n,this.Lp=n)},n.prototype.render=function(t){var n=t.frameState;n?this.Gp!=n.viewState.projection&&(this.Gp=n.viewState.projection,this.ct=null):this.Gp=null},n}(gh),fS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),aS=.75,cS=.1,vS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return fS(n,t),n.prototype.createRenderer=function(){return new au(this)},n}(wh),lS=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).zp=i.Up.bind(i),i.sr=void 0===r.collapsed||r.collapsed,i.ar=void 0===r.collapsible||r.collapsible,i.ar||(i.sr=!1),i.po=void 0!==r.rotateWithView&&r.rotateWithView,i.Xp=void 0;var e=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",s=void 0!==r.collapseLabel?r.collapseLabel:"";"string"==typeof s?(i.cr=document.createElement("span"),i.cr.textContent=s):i.cr=s;var u=void 0!==r.label?r.label:"";"string"==typeof u?(i.vr=document.createElement("span"),i.vr.textContent=u):i.vr=u;var h=i.ar&&!i.sr?i.cr:i.vr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(h),f.addEventListener(G,i.dr.bind(i),!1),i.Bp=document.createElement("div"),i.Bp.className="ol-overviewmap-map",i.qp=r.view,i.Vp=new vS({view:r.view});var a=i.Vp;r.layers&&r.layers.forEach((function(t){a.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.Wp=new Zf({position:[0,0],positioning:Rf,element:c}),i.Vp.addOverlay(i.Wp);var v=e+" "+"ol-unselectable "+Fs+(i.sr&&i.ar?" ol-collapsed":"")+(i.ar?"":" ol-uncollapsible"),l=i.element;l.className=v,l.appendChild(i.Bp),l.appendChild(f);var d=i,p=i.Wp,w=i.Wp.getElement(),y=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=a.getEventCoordinateInternal(i);p.setPosition(r)},g=function t(n){var i=a.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(i),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",t)};return w.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",g)})),i}return fS(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.Zp(r),this.Vp.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.Vp.setTarget(this.Bp),this.listenerKeys.push(H(n,v,this.Yp,this));var e=n.getView();e&&(this.Hp(e),e.isDef()&&(this.Vp.updateSize(),this.Jp())),this.Vp.isRendered()||this.$p()}}},n.prototype.Yp=function(t){if(t.key===Fu){var n=t.oldValue;n&&this.Zp(n);var i=this.getMap().getView();this.Hp(i)}else this.Vp.isRendered()||t.key!==ku&&t.key!==Nu||this.Vp.updateSize()},n.prototype.Hp=function(t){if(!this.qp){var n=new hh({projection:t.getProjection()});this.Vp.setView(n)}t.addChangeListener(Xu.ROTATION,this.zp),this.Up()},n.prototype.Zp=function(t){t.removeChangeListener(Xu.ROTATION,this.zp)},n.prototype.Up=function(){this.po&&this.Vp.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.Qp=function(){var t=this.getMap(),n=this.Vp;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.Xp||!zn(r,this.Xp)){this.Xp=r;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),s=n.getPixelFromCoordinateInternal(ri(r)),u=n.getPixelFromCoordinateInternal($n(r)),h=Math.abs(s[0]-u[0]),f=Math.abs(s[1]-u[1]),a=e[0],c=e[1];h<a*cS||f<c*cS||h>a*aS||f>c*aS?this.Jp():Nn(o,r)||this.Kp()}}},n.prototype.Jp=function(){var t=this.getMap(),n=this.Vp,i=t.getSize(),r=t.getView().calculateExtentInternal(i),e=n.getView(),o=Math.log(7.5)/Math.LN2;fi(r,1/(Math.pow(2,o/2)*cS)),e.fitInternal(io(r))},n.prototype.Kp=function(){var t=this.getMap(),n=this.Vp,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.tw=function(){var t=this.getMap(),n=this.Vp;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),e=n.getView(),o=this.po?0:-r.getRotation(),s=this.Wp,u=this.Wp.getElement(),h=r.getCenterInternal(),f=r.getResolution(),a=e.getResolution(),c=i[0]*f/a,v=i[1]*f/a;if(s.setPosition(h),u){u.style.width=c+"px",u.style.height=v+"px";var l="rotate("+o+"rad)";u.style.transform=l}}},n.prototype.$p=function(){this.nw||(this.nw=J(this.Vp,ju,(function(t){delete this.nw,this.tw()}),this))},n.prototype.dr=function(t){t.preventDefault(),this.gr()},n.prototype.gr=function(){this.element.classList.toggle(Rs),this.sr?Fo(this.cr,this.vr):Fo(this.vr,this.cr),this.sr=!this.sr;var t=this.Vp;if(!this.sr){if(t.isRendered())return this.Xp=void 0,void t.render();t.updateSize(),this.Jp(),this.$p()}},n.prototype.getCollapsible=function(){return this.ar},n.prototype.setCollapsible=function(t){this.ar!==t&&(this.ar=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.sr&&this.gr())},n.prototype.setCollapsed=function(t){this.ar&&this.sr!==t&&this.gr()},n.prototype.getCollapsed=function(){return this.sr},n.prototype.getRotateWithView=function(){return this.po},n.prototype.setRotateWithView=function(t){this.po!==t&&(this.po=t,0!==this.getMap().getView().getRotation()&&(this.po?this.Up():this.Vp.getView().setRotation(0),this.Xp=void 0,this.Qp(),this.tw()))},n.prototype.getOverviewMap=function(){return this.Vp},n.prototype.render=function(t){this.Qp(),this.tw()},n}(gh),dS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pS="units",wS="degrees",yS="imperial",gS="nautical",mS="metric",bS="us",_S=[1,2,5],MS=25.4/.28,xS=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.iw=document.createElement("div"),i.iw.className=e+"-inner",i.element.className=e+" "+Ns,i.element.appendChild(i.iw),i.rw=null,i.ew=void 0!==r.minWidth?r.minWidth:64,i.Kt=!1,i.ow=void 0,i.Lp="",i.addChangeListener(pS,i.sw),i.setUnits(r.units||mS),i.uw=r.bar||!1,i.hw=r.steps||4,i.fw=r.text||!1,i.aw=r.dpi||void 0,i}return dS(n,t),n.prototype.getUnits=function(){return this.get(pS)},n.prototype.sw=function(){this.yr()},n.prototype.setUnits=function(t){this.set(pS,t)},n.prototype.setDpi=function(t){this.aw=t},n.prototype.yr=function(){var t=this.rw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),e=r==wS?Vt.DEGREES:Vt.METERS,o=jr(i,t.resolution,n,e),s=this.ew*(this.aw||MS)/MS,u=s*o,h="";if(r==wS){var f=Bt[Vt.DEGREES];(u*=f)<f/60?(h="",o*=3600):u<f?(h="",o*=60):h=""}else r==yS?u<.9144?(h="in",o/=.0254):u<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):r==gS?(o/=1852,h="nm"):r==mS?u<.001?(h="m",o*=1e6):u<1?(h="mm",o*=1e3):u<1e3?h="m":(h="km",o/=1e3):r==bS?u<.9144?(h="in",o*=39.37):u<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):Ot(!1,33);for(var a,c,v,l,d=3*Math.floor(Math.log(s*o)/Math.log(10));;){v=Math.floor(d/3);var p=Math.pow(10,v);if(a=_S[(d%3+3)%3]*p,c=Math.round(a/o),isNaN(c))return this.element.style.display="none",void(this.Kt=!1);if(c>=s)break;++d}l=this.uw?this.createScaleBar(c,a,h):a.toFixed(v<0?-v:0)+" "+h,this.Lp!=l&&(this.iw.innerHTML=l,this.Lp=l),this.ow!=c&&(this.iw.style.width=c+"px",this.ow=c),this.Kt||(this.element.style.display="",this.Kt=!0)}else this.Kt&&(this.element.style.display="none",this.Kt=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.hw,s="#ffffff",u=0;u<this.hw;u++)0===u&&e.push(this.createMarker("absolute",u)),e.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+s+';"></div>'+this.createMarker("relative",u)+(u%2==0||2===this.hw?this.createStepText(u,t,!1,n,i):"")+"</div>"),u===this.hw-1&&e.push(this.createStepText(u+1,t,!0,n,i)),s="#ffffff"===s?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.fw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+e.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,e){var o=(0===t?0:Math.round(r/this.hw*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.hw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.hw*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=jr(this.rw.projection,this.rw.resolution,this.rw.center,Vt.METERS),n=this.aw||MS;return parseFloat(t.toString())*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.rw=n?n.viewState:null,this.yr()},n}(gh),OS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),SS=0,jS=1,ES=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).yn=[],i.cw=void 0,i.lw=SS,i.wn,i.dw=0,i.pw=0,i.ww,i.yw,i.gw=null,i.mw=!1,i.br=void 0!==r.duration?r.duration:200;var e=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+Ns;var s=i.element;return s.className=e+" "+"ol-unselectable "+Fs,s.appendChild(o),s.addEventListener(_u,i.bw.bind(i),!1),s.addEventListener(bu,i._w.bind(i),!1),s.addEventListener(Mu,i.Mw.bind(i),!1),s.addEventListener(G,i.xw.bind(i),!1),o.addEventListener(G,a,!1),i}return OS(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.Ow=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.mw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),s=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),u=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.gw=[s,u],n>i?(this.lw=jS,this.pw=n-s):(this.lw=SS,this.dw=i-u),this.mw=!0},n.prototype.xw=function(t){var n=this.getMap().getView(),i=this.Sw(t.offsetX-this.gw[0]/2,t.offsetY-this.gw[1]/2),r=this.jw(i),e=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:e,duration:this.br,easing:yt})},n.prototype.bw=function(t){if(!this.wn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.ww=t.clientX-parseFloat(n.style.left),this.yw=t.clientY-parseFloat(n.style.top),this.wn=!0,0===this.yn.length){var i=this._w,r=this.Mw,e=this.getMap().getOwnerDocument();this.yn.push(H(e,bu,i,this),H(e,Mu,r,this))}}},n.prototype._w=function(t){if(this.wn){var n=t.clientX-this.ww,i=t.clientY-this.yw,r=this.Sw(n,i);this.cw=this.jw(r),this.getMap().getView().setResolution(this.cw)}},n.prototype.Mw=function(t){this.wn&&(this.getMap().getView().endInteraction(),this.wn=!1,this.ww=void 0,this.yw=void 0,this.yn.forEach($),this.yn.length=0)},n.prototype.Ew=function(t){var n=this.Tw(t),i=this.element.firstElementChild;this.lw==jS?i.style.left=this.pw*n+"px":i.style.top=this.dw*n+"px"},n.prototype.Sw=function(t,n){return di(this.lw===jS?t/this.pw:n/this.dw,0,1)},n.prototype.jw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.Tw=function(t){return di(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.mw||this.Ow())){var n=t.frameState.viewState.resolution;this.cw=n,this.Ew(n)}},n}(gh),TS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AS=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var e=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",s=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener(G,i.dr.bind(i),!1);var h=e+" "+"ol-unselectable "+Fs,f=i.element;return f.className=h,f.appendChild(u),i}return TS(n,t),n.prototype.dr=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(io(n))},n}(gh),CS={};CS.AssertionError=f,CS.Collection=at,CS.Collection.CollectionEvent=ft,CS.DataTile=xt,CS.Disposable=l,CS.Feature=Et,CS.Feature.createStyleFunction=jt,CS.Geolocation=go,CS.Image=To,CS.Image.listenImage=Eo,CS.ImageBase=bo,CS.ImageCanvas=Co,CS.ImageTile=Do,CS.Kinetic=zo,CS.Map=Cf,CS.MapBrowserEvent=gu,CS.MapBrowserEventHandler=Su,CS.MapEvent=wu,CS.Object=et,CS.Object.ObjectEvent=rt,CS.Observable=nt,CS.Observable.unByKey=tt,CS.Overlay=Zf,CS.PluggableMap=wh,CS.Tile=_t,CS.TileCache=ia,CS.TileQueue=Gu,CS.TileQueue.getTilePriority=Du,CS.TileRange=oa,CS.TileRange.createOrUpdate=ea,CS.VectorRenderTile=ha,CS.View=hh,CS.View.createCenterConstraint=rh,CS.View.createResolutionConstraint=eh,CS.View.createRotationConstraint=oh,CS.View.isNoopAnimation=sh,CS.array={},CS.array.binarySearch=d,CS.array.equals=_,CS.array.extend=m,CS.array.find=b,CS.array.findIndex=M,CS.array.includes=w,CS.array.isSorted=x,CS.array.linearFindNearest=y,CS.array.numberSafeCompareFunction=p,CS.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},CS.array.reverseSubArray=g,CS.array.stableSort=function(t,n){var i,r=t.length,e=Array(t.length);for(i=0;i<r;i++)e[i]={index:i,value:t[i]};for(e.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=e[i].value},CS.asserts={},CS.asserts.assert=Ot,CS.centerconstraint={},CS.centerconstraint.createExtent=qu,CS.centerconstraint.none=Vu,CS.color={},CS.color.asArray=Wo,CS.color.asString=Bo,CS.color.fromString=Vo,CS.color.isStringColor=Ho,CS.color.normalize=Zo,CS.color.toString=Yo,CS.colorlike={},CS.colorlike.asColorLike=fa,CS.control={},CS.control.Attribution=bh,CS.control.Control=gh,CS.control.FullScreen=eS,CS.control.MousePosition=hS,CS.control.OverviewMap=lS,CS.control.Rotate=Mh,CS.control.ScaleLine=xS,CS.control.Zoom=Oh,CS.control.ZoomSlider=ES,CS.control.ZoomToExtent=AS,CS.control.defaults=Sh,CS.coordinate={},CS.coordinate.add=tr,CS.coordinate.closestOnCircle=nr,CS.coordinate.closestOnSegment=ir,CS.coordinate.createStringXY=function(t){return function(n){return cr(n,t)}},CS.coordinate.degreesToStringHDMS=rr,CS.coordinate.distance=fr,CS.coordinate.equals=or,CS.coordinate.format=er,CS.coordinate.getWorldsAway=lr,CS.coordinate.rotate=sr,CS.coordinate.scale=ur,CS.coordinate.squaredDistance=hr,CS.coordinate.squaredDistanceToSegment=ar,CS.coordinate.toStringHDMS=function(t,n){return t?rr("NS",t[1],n)+" "+rr("EW",t[0],n):""},CS.coordinate.toStringXY=cr,CS.coordinate.wrapX=vr,CS.css={},CS.css.CLASS_COLLAPSED=Rs,CS.css.CLASS_CONTROL=Fs,CS.css.CLASS_HIDDEN=Cs,CS.css.CLASS_SELECTABLE=Ps,CS.css.CLASS_UNSELECTABLE=Ns,CS.css.CLASS_UNSUPPORTED=ks,CS.css.cssOpacity=Ds,CS.css.getFontParameters=Gs,CS.dom={},CS.dom.createCanvasContext2D=Po,CS.dom.outerHeight=ko,CS.dom.outerWidth=No,CS.dom.removeChildren=Io,CS.dom.removeNode=Ro,CS.dom.replaceChildren=Lo,CS.dom.replaceNode=Fo,CS.easing={},CS.easing.easeIn=wt,CS.easing.easeOut=yt,CS.easing.inAndOut=gt,CS.easing.linear=mt,CS.easing.upAndDown=function(t){return t<.5?gt(2*t):1-gt(2*(t-.5))},CS.events={},CS.events.Event=c,CS.events.Event.preventDefault=function(t){t.preventDefault()},CS.events.Event.stopPropagation=a,CS.events.Target=F,CS.events.condition={},CS.events.condition.all=Ih,CS.events.condition.altKeyOnly=Lh,CS.events.condition.altShiftKeysOnly=Gh,CS.events.condition.always=Uh,CS.events.condition.click=function(t){return t.type==mu.CLICK},CS.events.condition.doubleClick=function(t){return t.type==mu.DBLCLICK},CS.events.condition.focus=Dh,CS.events.condition.focusWithTabindex=zh,CS.events.condition.mouseActionButton=Xh,CS.events.condition.mouseOnly=Yh,CS.events.condition.never=Bh,CS.events.condition.noModifierKeys=Vh,CS.events.condition.penOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"pen"===n.pointerType},CS.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&($t?n.metaKey:n.ctrlKey)&&!n.shiftKey},CS.events.condition.pointerMove=function(t){return"pointermove"==t.type},CS.events.condition.primaryAction=Hh,CS.events.condition.shiftKeyOnly=Wh,CS.events.condition.singleClick=qh,CS.events.condition.targetNotEditable=Zh,CS.events.condition.touchOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"touch"===n.pointerType},CS.events.listen=H,CS.events.listenOnce=J,CS.events.unlistenByKey=$,CS.extent={},CS.extent.applyTransform=ci,CS.extent.approximatelyEquals=Un,CS.extent.boundingExtent=En,CS.extent.buffer=Tn,CS.extent.clone=An,CS.extent.closestSquaredDistanceXY=Cn,CS.extent.containsCoordinate=Pn,CS.extent.containsExtent=Nn,CS.extent.containsXY=kn,CS.extent.coordinateRelationship=Fn,CS.extent.createEmpty=Rn,CS.extent.createOrUpdate=In,CS.extent.createOrUpdateEmpty=Ln,CS.extent.createOrUpdateFromCoordinate=Gn,CS.extent.createOrUpdateFromCoordinates=function(t,n){return qn(Ln(n),t)},CS.extent.createOrUpdateFromFlatCoordinates=Dn,CS.extent.createOrUpdateFromRings=function(t,n){return Wn(Ln(n),t)},CS.extent.equals=zn,CS.extent.extend=Xn,CS.extent.extendCoordinate=Bn,CS.extent.extendCoordinates=qn,CS.extent.extendFlatCoordinates=Vn,CS.extent.extendRings=Wn,CS.extent.extendXY=Zn,CS.extent.forEachCorner=Yn,CS.extent.getArea=Hn,CS.extent.getBottomLeft=Jn,CS.extent.getBottomRight=$n,CS.extent.getCenter=Qn,CS.extent.getCorner=Kn,CS.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},CS.extent.getForViewAndSize=ti,CS.extent.getHeight=ni,CS.extent.getIntersection=ii,CS.extent.getIntersectionArea=function(t,n){return Hn(ii(t,n))},CS.extent.getMargin=function(t){return oi(t)+ni(t)},CS.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},CS.extent.getTopLeft=ri,CS.extent.getTopRight=ei,CS.extent.getWidth=oi,CS.extent.intersects=si,CS.extent.intersectsSegment=ai,CS.extent.isEmpty=ui,CS.extent.returnOrUpdate=hi,CS.extent.scaleFromCenter=fi,CS.extent.wrapX=vi,CS.featureloader={},CS.featureloader.loadFeaturesXhr=pa,CS.featureloader.setWithCredentials=function(t){da=t},CS.featureloader.xhr=wa,CS.format={},CS.format.EsriJSON=dm,CS.format.Feature=nm,CS.format.Feature.transformExtentWithOptions=rm,CS.format.Feature.transformGeometryWithOptions=im,CS.format.GPX=vb,CS.format.GeoJSON=wb,CS.format.IGC=Tb,CS.format.JSONFeature=sm,CS.format.KML=PM,CS.format.KML.getDefaultFillStyle=function(){return Wb},CS.format.KML.getDefaultImageStyle=function(){return Yb},CS.format.KML.getDefaultStrokeStyle=function(){return Jb},CS.format.KML.getDefaultStyle=function(){return Qb},CS.format.KML.getDefaultStyleArray=function(){return t_},CS.format.KML.getDefaultTextStyle=function(){return $b},CS.format.KML.readFlatCoordinates=s_,CS.format.MVT=GM,CS.format.OSMXML=WM,CS.format.OWS=vx,CS.format.Polyline=xx,CS.format.Polyline.decodeDeltas=px,CS.format.Polyline.decodeFloats=yx,CS.format.Polyline.decodeSignedIntegers=mx,CS.format.Polyline.decodeUnsignedIntegers=_x,CS.format.Polyline.encodeDeltas=dx,CS.format.Polyline.encodeFloats=wx,CS.format.Polyline.encodeSignedIntegers=gx,CS.format.Polyline.encodeUnsignedInteger=Mx,CS.format.Polyline.encodeUnsignedIntegers=bx,CS.format.TextFeature=mb,CS.format.TopoJSON=Nx,CS.format.WFS=YO,CS.format.WFS.writeFilter=function(t,n){var i=n||"1.1.0",r=cc(ZO(i),"Filter"),e={node:r};return A(e,{version:i,filter:t}),PO(r,t,[e]),r},CS.format.WMSGetFeatureInfo=JO,CS.format.xlink={},CS.format.xlink.readHref=YM,CS.format.xsd={},CS.format.xsd.readBoolean=ym,CS.format.xsd.readBooleanString=gm,CS.format.xsd.readDateTime=mm,CS.format.xsd.readDecimal=bm,CS.format.xsd.readDecimalString=_m,CS.format.xsd.readNonNegativeIntegerString=xm,CS.format.xsd.readPositiveInteger=Mm,CS.format.xsd.readString=Om,CS.format.xsd.writeBooleanTextNode=Sm,CS.format.xsd.writeCDATASection=jm,CS.format.xsd.writeDateTimeTextNode=Em,CS.format.xsd.writeDecimalTextNode=Tm,CS.format.xsd.writeNonNegativeIntegerTextNode=Am,CS.format.xsd.writeStringTextNode=Cm,CS.functions={},CS.functions.FALSE=S,CS.functions.TRUE=O,CS.functions.VOID=j,CS.functions.memoizeOne=E,CS.functions.toPromise=T,CS.geom={},CS.geom.Circle=ug,CS.geom.Geometry=te,CS.geom.GeometryCollection=Kg,CS.geom.LineString=my,CS.geom.LinearRing=Ce,CS.geom.MultiLineString=_y,CS.geom.MultiPoint=dy,CS.geom.MultiPolygon=Oy,CS.geom.Point=Ne,CS.geom.Polygon=to,CS.geom.Polygon.circular=no,CS.geom.Polygon.fromCircle=ro,CS.geom.Polygon.fromExtent=io,CS.geom.Polygon.makeRegular=eo,CS.geom.SimpleGeometry=ee,CS.geom.SimpleGeometry.getStrideForLayout=ie,CS.geom.SimpleGeometry.transformGeom2D=re,CS.geom.flat={},CS.geom.flat.area={},CS.geom.flat.area.linearRing=je,CS.geom.flat.area.linearRings=Ee,CS.geom.flat.area.linearRingss=Te,CS.geom.flat.center={},CS.geom.flat.center.linearRingss=My,CS.geom.flat.closest={},CS.geom.flat.closest.arrayMaxSquaredDelta=ue,CS.geom.flat.closest.assignClosestArrayPoint=ae,CS.geom.flat.closest.assignClosestMultiArrayPoint=ce,CS.geom.flat.closest.assignClosestPoint=fe,CS.geom.flat.closest.maxSquaredDelta=se,CS.geom.flat.closest.multiArrayMaxSquaredDelta=he,CS.geom.flat.contains={},CS.geom.flat.contains.linearRingContainsExtent=ke,CS.geom.flat.contains.linearRingContainsXY=Fe,CS.geom.flat.contains.linearRingsContainsXY=Re,CS.geom.flat.contains.linearRingssContainsXY=Ie,CS.geom.flat.deflate={},CS.geom.flat.deflate.deflateCoordinate=ve,CS.geom.flat.deflate.deflateCoordinates=le,CS.geom.flat.deflate.deflateCoordinatesArray=de,CS.geom.flat.deflate.deflateMultiCoordinatesArray=pe,CS.geom.flat.flip={},CS.geom.flat.flip.flipXY=tm,CS.geom.flat.geodesic={},CS.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,e,o){var s=Sr("EPSG:4326"),u=Math.cos(_i(n)),h=Math.sin(_i(n)),f=Math.cos(_i(r)),a=Math.sin(_i(r)),c=Math.cos(_i(i-t)),v=Math.sin(_i(i-t)),l=h*a+u*f*c;return Fy((function(n){if(1<=l)return[i,r];var e=n*Math.acos(l),o=Math.cos(e),s=Math.sin(e),d=v*f,p=u*a-h*f*c,w=Math.atan2(d,p),y=Math.asin(h*o+u*s*Math.cos(w));return[bi(_i(t)+Math.atan2(Math.sin(w)*s*u,o-h*Math.sin(y))),bi(y)]}),Fr(s,e),o)},CS.geom.flat.geodesic.meridian=Ry,CS.geom.flat.geodesic.parallel=Iy,CS.geom.flat.inflate={},CS.geom.flat.inflate.inflateCoordinates=xe,CS.geom.flat.inflate.inflateCoordinatesArray=Oe,CS.geom.flat.inflate.inflateMultiCoordinatesArray=Se,CS.geom.flat.interiorpoint={},CS.geom.flat.interiorpoint.getInteriorPointOfArray=Le,CS.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Ge,CS.geom.flat.interpolate={},CS.geom.flat.interpolate.interpolatePoint=py,CS.geom.flat.interpolate.lineStringCoordinateAtM=wy,CS.geom.flat.interpolate.lineStringsCoordinateAtM=yy,CS.geom.flat.intersectsextent={},CS.geom.flat.intersectsextent.intersectsLineString=ze,CS.geom.flat.intersectsextent.intersectsLineStringArray=Ue,CS.geom.flat.intersectsextent.intersectsLinearRing=Xe,CS.geom.flat.intersectsextent.intersectsLinearRingArray=Be,CS.geom.flat.intersectsextent.intersectsLinearRingMultiArray=qe,CS.geom.flat.length={},CS.geom.flat.length.lineStringLength=qw,CS.geom.flat.length.linearRingLength=function(t,n,i,r){var e=qw(t,n,i,r),o=t[i-r]-t[n],s=t[i-r+1]-t[n+1];return e+=Math.sqrt(o*o+s*s)},CS.geom.flat.orient={},CS.geom.flat.orient.inflateEnds=$e,CS.geom.flat.orient.linearRingIsClockwise=We,CS.geom.flat.orient.linearRingsAreOriented=Ze,CS.geom.flat.orient.linearRingssAreOriented=Ye,CS.geom.flat.orient.orientLinearRings=He,CS.geom.flat.orient.orientLinearRingsArray=Je,CS.geom.flat.reverse={},CS.geom.flat.reverse.coordinates=Ve,CS.geom.flat.segments={},CS.geom.flat.segments.forEach=De,CS.geom.flat.simplify={},CS.geom.flat.simplify.douglasPeucker=we,CS.geom.flat.simplify.douglasPeuckerArray=ye,CS.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,e,o,s,u){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];s=ye(t,n,a,r,e,o,s,c),u.push(c),n=a[a.length-1]}return s},CS.geom.flat.simplify.quantize=be,CS.geom.flat.simplify.quantizeArray=_e,CS.geom.flat.simplify.quantizeMultiArray=Me,CS.geom.flat.simplify.radialDistance=ge,CS.geom.flat.simplify.simplifyLineString=function(t,n,i,r,e,o,s){var u=void 0!==s?s:[];return o||(i=ge(t,n,i,r,e,u,0),t=u,n=0,r=2),u.length=we(t,n,i,r,e,u,0),u},CS.geom.flat.simplify.snap=me,CS.geom.flat.straightchunk={},CS.geom.flat.straightchunk.matchingChunk=Lw,CS.geom.flat.textpath={},CS.geom.flat.textpath.drawTextOnPath=Bw,CS.geom.flat.topology={},CS.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var e=i-r;return t[n]===t[e]&&t[n+1]===t[e+1]&&(i-n)/r>3&&!!je(t,n,i,r)},CS.geom.flat.transform={},CS.geom.flat.transform.rotate=Hr,CS.geom.flat.transform.scale=Jr,CS.geom.flat.transform.transform2D=Yr,CS.geom.flat.transform.translate=$r,CS.has={},CS.has.DEVICE_PIXEL_RATIO=Qt,CS.has.FIREFOX=Zt,CS.has.IMAGE_DECODE=tn,CS.has.MAC=$t,CS.has.PASSIVE_EVENT_LISTENERS=nn,CS.has.SAFARI=Yt,CS.has.SAFARI_BUG_237906=Ht,CS.has.WEBKIT=Jt,CS.has.WORKER_OFFSCREEN_CANVAS=Kt,CS.interaction={},CS.interaction.DoubleClickZoom=Nh,CS.interaction.DragAndDrop=ig,CS.interaction.DragAndDrop.DragAndDropEvent=ng,CS.interaction.DragBox=ff,CS.interaction.DragBox.DragBoxEvent=hf,CS.interaction.DragPan=$h,CS.interaction.DragRotate=Kh,CS.interaction.DragRotateAndZoom=eg,CS.interaction.DragZoom=cf,CS.interaction.Draw=yg,CS.interaction.Draw.DrawEvent=wg,CS.interaction.Draw.createBox=function(){return function(t,n,i){var r=En([t[0],t[t.length-1]].map((function(t){return Ur(t,i)}))),e=[[Jn(r),$n(r),ei(r),ri(r),Jn(r)]],o=n;o?o.setCoordinates(e):o=new to(e);var s=Dr();return s&&o.transform(i,s),o}},CS.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,e){var o=Ur(i[0],e),s=Ur(i[i.length-1],e),u=Math.sqrt(hr(o,s)),h=r||ro(new ug(o),t),f=n;if(!n&&0!==n){var a=s[0]-o[0],c=s[1]-o[1];f=Math.atan2(c,a)}eo(h,o,u,f);var v=Dr();return v&&h.transform(e,v),h}},CS.interaction.Extent=Og,CS.interaction.Extent.ExtentEvent=bg,CS.interaction.Interaction=Ch,CS.interaction.Interaction.pan=Th,CS.interaction.Interaction.zoomByDelta=Ah,CS.interaction.KeyboardPan=yf,CS.interaction.KeyboardZoom=mf,CS.interaction.Modify=Rg,CS.interaction.Modify.ModifyEvent=Pg,CS.interaction.MouseWheelZoom=xf,CS.interaction.PinchRotate=Sf,CS.interaction.PinchZoom=Ef,CS.interaction.Pointer=Rh,CS.interaction.Pointer.centroid=Fh,CS.interaction.Select=zg,CS.interaction.Select.SelectEvent=Gg,CS.interaction.Snap=qg,CS.interaction.Translate=Jg,CS.interaction.Translate.TranslateEvent=Hg,CS.interaction.defaults=Tf,CS.layer={},CS.layer.Base=vs,CS.layer.BaseImage=mp,CS.layer.BaseTile=Pp,CS.layer.BaseVector=Py,CS.layer.Graticule=zy,CS.layer.Group=du,CS.layer.Group.GroupEvent=vu,CS.layer.Heatmap=Jy,CS.layer.Image=Ep,CS.layer.Layer=Os,CS.layer.Layer.inView=xs,CS.layer.Tile=Rp,CS.layer.Vector=ky,CS.layer.VectorImage=Qy,CS.loadingstrategy={},CS.loadingstrategy.all=ya,CS.loadingstrategy.bbox=function(t,n){return[t]},CS.loadingstrategy.tile=function(t){return function(n,i,r){var e=t.getZForResolution(Vr(i,r)),o=t.getTileRangeForExtentAndZ(Br(n,r),e),s=[],u=[e,0,0];for(u[1]=o.minX;u[1]<=o.maxX;++u[1])for(u[2]=o.minY;u[2]<=o.maxY;++u[2])s.push(Xr(t.getTileCoordExtent(u),r));return s}},CS.math={},CS.math.ceil=Ei,CS.math.clamp=di,CS.math.cosh=pi,CS.math.floor=ji,CS.math.lerp=xi,CS.math.log2=wi,CS.math.modulo=Mi,CS.math.round=Si,CS.math.solveLinearSystem=mi,CS.math.squaredDistance=gi,CS.math.squaredSegmentDistance=yi,CS.math.toDegrees=bi,CS.math.toFixed=Oi,CS.math.toRadians=_i,CS.net={},CS.net.ClientError=Ma,CS.net.ResponseError=_a,CS.net.getJSON=xa,CS.net.jsonp=ma,CS.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(ba=XMLHttpRequest),global.XMLHttpRequest=t},CS.net.resolveUrl=Oa,CS.net.restoreXHR=function(){global.XMLHttpRequest=ba},CS.obj={},CS.obj.assign=A,CS.obj.clear=C,CS.obj.getValues=P,CS.obj.isEmpty=N,CS.proj={},CS.proj.Projection=li,CS.proj.Units={},CS.proj.Units.METERS_PER_UNIT=Bt,CS.proj.Units.fromCode=function(t){return Xt[t]},CS.proj.addCommon=Zr,CS.proj.addCoordinateTransforms=Pr,CS.proj.addEquivalentProjections=Er,CS.proj.addEquivalentTransforms=Tr,CS.proj.addProjection=xr,CS.proj.addProjections=Or,CS.proj.clearAllProjections=function(){Vi(),Hi()},CS.proj.clearUserProjection=function(){Lr=null},CS.proj.cloneTransform=_r,CS.proj.createProjection=Ar,CS.proj.createSafeCoordinateTransform=Wr,CS.proj.createTransformFromCoordinateTransform=Cr,CS.proj.disableCoordinateWarning=br,CS.proj.epsg3857={},CS.proj.epsg3857.EXTENT=Pi,CS.proj.epsg3857.HALF_SIZE=Ci,CS.proj.epsg3857.MAX_SAFE_Y=ki,CS.proj.epsg3857.PROJECTIONS=Ri,CS.proj.epsg3857.RADIUS=Ai,CS.proj.epsg3857.WORLD_EXTENT=Ni,CS.proj.epsg3857.fromEPSG4326=Ii,CS.proj.epsg3857.toEPSG4326=Li,CS.proj.epsg4326={},CS.proj.epsg4326.EXTENT=zi,CS.proj.epsg4326.METERS_PER_UNIT=Ui,CS.proj.epsg4326.PROJECTIONS=Bi,CS.proj.epsg4326.RADIUS=Di,CS.proj.equivalent=Nr,CS.proj.fromLonLat=function(t,n){return br(),Rr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")},CS.proj.fromUserCoordinate=Ur,CS.proj.fromUserExtent=Br,CS.proj.fromUserResolution=Vr,CS.proj.get=Sr,CS.proj.getPointResolution=jr,CS.proj.getTransform=Fr,CS.proj.getTransformFromProjections=kr,CS.proj.getUserProjection=Dr,CS.proj.identityTransform=Mr,CS.proj.proj4={},CS.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),e=r.length;for(n=0;n<e;++n){var o=r[n];if(!Sr(o)){var s=t.defs(o),u=s.units;u||"longlat"!==s.projName||(u=Vt.DEGREES),xr(new li({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:u}))}}for(n=0;n<e;++n){var h=r[n],f=Sr(h);for(i=0;i<e;++i){var a=r[i],c=Sr(a);if(!$i(h,a))if(t.defs[h]===t.defs[a])Er([f,c]);else{var v=t(h,a);Pr(f,c,Wr(f,c,v.forward),Wr(c,f,v.inverse))}}}},CS.proj.projections={},CS.proj.projections.add=Zi,CS.proj.projections.clear=Vi,CS.proj.projections.get=Wi,CS.proj.setUserProjection=Gr,CS.proj.toLonLat=function(t,n){var i=Rr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=Mi(r+180,360)-180),i},CS.proj.toUserCoordinate=zr,CS.proj.toUserExtent=Xr,CS.proj.toUserResolution=qr,CS.proj.transform=Rr,CS.proj.transformExtent=Ir,CS.proj.transformWithProjections=function(t,n,i){return kr(n,i)(t)},CS.proj.transforms={},CS.proj.transforms.add=Ji,CS.proj.transforms.clear=Hi,CS.proj.transforms.get=$i,CS.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),e=Yi[i][r];return delete Yi[i][r],N(Yi[i])&&delete Yi[i],e},CS.proj.useGeographic=function(){Gr("EPSG:4326")},CS.render={},CS.render.Box=nf,CS.render.Event=As,CS.render.Feature=Ty,CS.render.Feature.toFeature=function(t,n){var i=t.getId(),r=Ey(t),e=t.getProperties(),o=new Et;return void 0!==n&&o.setGeometryName(n),o.setGeometry(r),void 0!==i&&o.setId(i),o.setProperties(e,!0),o},CS.render.Feature.toGeometry=Ey,CS.render.VectorContext=Sa,CS.render.canvas={},CS.render.canvas.Builder=Cw,CS.render.canvas.BuilderGroup=Xw,CS.render.canvas.Executor=ty,CS.render.canvas.ExecutorGroup=oy,CS.render.canvas.ExecutorGroup.getPixelIndexArray=ey,CS.render.canvas.ImageBuilder=Nw,CS.render.canvas.Immediate=Ea,CS.render.canvas.Instruction={},CS.render.canvas.Instruction.beginPathInstruction=jw,CS.render.canvas.Instruction.closePathInstruction=Ew,CS.render.canvas.Instruction.fillInstruction=Ow,CS.render.canvas.Instruction.strokeInstruction=Sw,CS.render.canvas.LineStringBuilder=Fw,CS.render.canvas.PolygonBuilder=Iw,CS.render.canvas.TextBuilder=zw,CS.render.canvas.checkedFonts=Js,CS.render.canvas.defaultFillStyle=Us,CS.render.canvas.defaultFont=zs,CS.render.canvas.defaultLineCap=Xs,CS.render.canvas.defaultLineDash=Bs,CS.render.canvas.defaultLineDashOffset=0,CS.render.canvas.defaultLineJoin=qs,CS.render.canvas.defaultLineWidth=1,CS.render.canvas.defaultMiterLimit=Vs,CS.render.canvas.defaultPadding=Hs,CS.render.canvas.defaultStrokeStyle=Ws,CS.render.canvas.defaultTextAlign=Zs,CS.render.canvas.defaultTextBaseline=Ys,CS.render.canvas.drawImageOrLabel=hu,CS.render.canvas.getTextDimensions=uu,CS.render.canvas.hitdetect={},CS.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=sy,CS.render.canvas.hitdetect.createHitDetectionImageData=uy,CS.render.canvas.hitdetect.hitDetect=hy,CS.render.canvas.labelCache=$s,CS.render.canvas.measureAndCacheTextWidth=su,CS.render.canvas.measureTextHeight=ru,CS.render.canvas.measureTextWidth=ou,CS.render.canvas.registerFont=iu,CS.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},CS.render.canvas.textHeights=nu,CS.render.getRenderPixel=function(t,n){return fn(t.inversePixelTransform,n.slice(0))},CS.render.getVectorContext=za,CS.render.toContext=function(t,n){var i=t.canvas,r=n||{},e=r.pixelRatio||Qt,o=r.size;o&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],u=cn([1,0,0,1,0,0],e,e);return new Ea(t,e,s,u,0)},CS.renderer={},CS.renderer.Composite=au,CS.renderer.Layer=Dv,CS.renderer.Map=Es,CS.renderer.canvas={},CS.renderer.canvas.ImageLayer=Sp,CS.renderer.canvas.Layer=xp,CS.renderer.canvas.TileLayer=kp,CS.renderer.canvas.VectorImageLayer=vy,CS.renderer.canvas.VectorLayer=ay,CS.renderer.canvas.common={},CS.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=Xa,CS.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=Ba,CS.renderer.vector={},CS.renderer.vector.defaultOrder=Ra,CS.renderer.vector.getSquaredTolerance=Ia,CS.renderer.vector.getTolerance=La,CS.renderer.vector.renderFeature=Ga,CS.reproj={},CS.reproj.Image=Ld,CS.reproj.Tile=xv,CS.reproj.Triangulation=_v,CS.reproj.calculateSourceExtentResolution=Za,CS.reproj.calculateSourceResolution=Wa,CS.reproj.common={},CS.reproj.common.ENABLE_RASTER_REPROJECTION=bv,CS.reproj.common.ERROR_THRESHOLD=.5,CS.reproj.render=Ya,CS.resolutionconstraint={},CS.resolutionconstraint.createMinMaxResolution=Ju,CS.resolutionconstraint.createSnapToPower=Hu,CS.resolutionconstraint.createSnapToResolutions=Yu,CS.rotationconstraint={},CS.rotationconstraint.createSnapToN=Ku,CS.rotationconstraint.createSnapToZero=th,CS.rotationconstraint.disable=$u,CS.rotationconstraint.none=Qu,CS.size={},CS.size.buffer=fh,CS.size.hasArea=ah,CS.size.scale=ch,CS.size.toSize=vh,CS.source={},CS.source.BingMaps=_d,CS.source.BingMaps.quadKey=bd,CS.source.Cluster=kd,CS.source.DataTile=Rd,CS.source.Image=qd,CS.source.Image.ImageSourceEvent=Xd,CS.source.Image.defaultImageLoadFunction=Bd,CS.source.ImageArcGISRest=Wd,CS.source.ImageCanvas=Yd,CS.source.ImageStatic=Jd,CS.source.ImageWMS=ep,CS.source.OGCMapTile=vp,CS.source.OSM=yp,CS.source.OSM.ATTRIBUTION=wp,CS.source.Raster=$p,CS.source.Raster.Processor=Up,CS.source.Raster.RasterSourceEvent=Wp,CS.source.Raster.newImageData=Gp,CS.source.Source=fd,CS.source.Stamen=iw,CS.source.Tile=ld,CS.source.Tile.TileSourceEvent=vd,CS.source.TileArcGISRest=ew,CS.source.TileDebug=sw,CS.source.TileImage=gd,CS.source.TileJSON=hw,CS.source.TileWMS=aw,CS.source.UTFGrid=lw,CS.source.UTFGrid.CustomTile=vw,CS.source.UrlTile=pd,CS.source.Vector=Pd,CS.source.Vector.VectorSourceEvent=Cd,CS.source.WMTS=yw,CS.source.WMTS.optionsFromCapabilities=function(t,n){var i=b(t.Contents.Layer,(function(t,i,r){return t.Identifier==n.layer}));if(null===i)return null;var r,e=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?M(i.TileMatrixSetLink,"projection"in n?function(t,i,r){var o=b(e,(function(n){return n.Identifier==t.TileMatrixSet})).SupportedCRS,s=Sr(o),u=Sr(n.projection);return s&&u?Nr(s,u):o==n.projection}:function(t,i,r){return t.TileMatrixSet==n.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,u=i.Format[0];"format"in n&&(u=n.format),(r=M(i.Style,(function(t,i,r){return"style"in n?t.Title==n.style:t.isDefault})))<0&&(r=0);var h=i.Style[r].Identifier,f={};"Dimension"in i&&i.Dimension.forEach((function(t,n,i){var r=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),f[r]=e}));var a,c=b(t.Contents.TileMatrixSet,(function(t,n,i){return t.Identifier==o})),v=c.SupportedCRS;if(v&&(a=Sr(v)),"projection"in n){var l=Sr(n.projection);l&&(a&&!Nr(l,a)||(a=l))}var d=!1,p="ne"==a.getAxisOrientation().substr(0,2),y=c.TileMatrix[0],g={MinTileCol:0,MinTileRow:0,MaxTileCol:y.MatrixWidth-1,MaxTileRow:y.MatrixHeight-1};if(s){g=s[s.length-1];var m=b(c.TileMatrix,(function(t){return t.Identifier===g.TileMatrix||c.Identifier+":"+t.Identifier===g.TileMatrix}));m&&(y=m)}var _=28e-5*y.ScaleDenominator/a.getMetersPerUnit(),x=p?[y.TopLeftCorner[1],y.TopLeftCorner[0]]:y.TopLeftCorner,O=y.TileWidth*_,S=y.TileHeight*_,j=c.BoundingBox,E=[x[0]+O*g.MinTileCol,x[1]-S*(1+g.MaxTileRow),x[0]+O*(1+g.MaxTileCol),x[1]-S*g.MinTileRow];if(void 0!==j&&!Nn(j,E)){var T=i.WGS84BoundingBox,A=Sr("EPSG:4326").getExtent();if(E=j,T)d=T[0]===A[0]&&T[2]===A[2];else{var C=Ir(j,c.SupportedCRS,"EPSG:4326");d=C[0]-1e-10<=A[0]&&C[2]+1e-10>=A[2]}}var P=Uc(c,E,s),N=[],k=n.requestEncoding;if(k=void 0!==k?k:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var F=t.OperationsMetadata.GetTile.DCP.HTTP.Get,R=0,I=F.length;R<I;++R)if(F[R].Constraint){var L=b(F[R].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===k&&(k=L[0]),k!==dw)break;w(L,dw)&&N.push(F[R].href)}else F[R].href&&(k=dw,N.push(F[R].href));return 0===N.length&&(k=pw,i.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(u=t.format,N.push(t.template))}))),{urls:N,layer:n.layer,matrixSet:o,format:u,projection:a,requestEncoding:k,tileGrid:P,style:h,dimensions:f,wrapX:d,crossOrigin:n.crossOrigin}},CS.source.XYZ=dp,CS.source.Zoomify=Mw,CS.source.Zoomify.CustomTile=_w,CS.source.common={},CS.source.common.DEFAULT_WMS_VERSION=$d,CS.source.ogcTileUtil={},CS.source.ogcTileUtil.getMapTileUrlTemplate=up,CS.source.ogcTileUtil.getTileSetInfo=ap,CS.source.ogcTileUtil.getVectorTileUrlTemplate=hp,CS.source.sourcesFromTileGrid=function(t,n){var i=new Yf(32),r=t.getExtent();return function(e,o){i.expireCache(),r&&(e=ii(r,e));var s=t.getZForResolution(o),u=[];return t.forEachTileCoord(e,s,(function(t){var r=t.toString();if(!i.containsKey(r)){var e=n(t);i.set(r,e)}u.push(i.get(r))})),u}},CS.sphere={},CS.sphere.DEFAULT_RADIUS=dr,CS.sphere.getArea=function t(n,i){var r=i||{},e=r.radius||dr,o=r.projection||"EPSG:3857",s=n.getType();s!==Dt&&(n=n.clone().transform(o,"EPSG:4326"));var u,h,f,a,c,v,l=0;switch(s){case Nt:case It:case kt:case Lt:case Ft:break;case Rt:for(u=n.getCoordinates(),l=Math.abs(yr(u[0],e)),f=1,a=u.length;f<a;++f)l-=Math.abs(yr(u[f],e));break;case Gt:for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)for(h=u[f],l+=Math.abs(yr(h[0],e)),c=1,v=h.length;c<v;++c)l-=Math.abs(yr(h[c],e));break;case Dt:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+s)}return l},CS.sphere.getDistance=pr,CS.sphere.getLength=function t(n,i){var r=i||{},e=r.radius||dr,o=r.projection||"EPSG:3857",s=n.getType();s!==Dt&&(n=n.clone().transform(o,"EPSG:4326"));var u,h,f,a,c,v,l=0;switch(s){case Nt:case It:break;case kt:case Ft:l=wr(u=n.getCoordinates(),e);break;case Lt:case Rt:for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)l+=wr(u[f],e);break;case Gt:for(f=0,a=(u=n.getCoordinates()).length;f<a;++f)for(c=0,v=(h=u[f]).length;c<v;++c)l+=wr(h[c],e);break;case Dt:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+s)}return l},CS.sphere.offset=gr,CS.string={},CS.string.compareVersions=Ki,CS.string.padNumber=Qi,CS.structs={},CS.structs.LRUCache=Yf,CS.structs.LinkedList=nd,CS.structs.PriorityQueue=Iu,CS.structs.PriorityQueue.DROP=Ru,CS.structs.RBush=rd,CS.style={},CS.style.Circle=Wc,CS.style.Fill=Zc,CS.style.Icon=sv,CS.style.IconImage=ev,CS.style.IconImage.get=rv,CS.style.IconImageCache=Qo,CS.style.IconImageCache.shared=Ko,CS.style.Image=Xc,CS.style.RegularShape=qc,CS.style.Stroke=uv,CS.style.Style=pv,CS.style.Style.createDefaultStyle=vv,CS.style.Style.createEditingStyle=lv,CS.style.Style.toFunction=av,CS.style.Text=gv,CS.style.expressions={},CS.style.expressions.Operators=Nl,CS.style.expressions.PALETTE_TEXTURE_ARRAY=$l,CS.style.expressions.arrayToGlsl=Il,CS.style.expressions.colorToGlsl=Ll,CS.style.expressions.expressionToGlsl=zl,CS.style.expressions.getStringNumberEquivalent=Gl,CS.style.expressions.getValueType=kl,CS.style.expressions.isTypeUnique=Fl,CS.style.expressions.numberToGlsl=Rl,CS.style.expressions.stringToGlsl=Dl,CS.style.expressions.uniformNameForVariable=Jl,CS.tilecoord={},CS.tilecoord.createOrUpdate=Hf,CS.tilecoord.fromKey=Qf,CS.tilecoord.getCacheKeyForTileKey=function(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Jf(n[0],n[1],n[2])},CS.tilecoord.getKey=$f,CS.tilecoord.getKeyZXY=Jf,CS.tilecoord.hash=Kf,CS.tilecoord.withinExtentAndZ=ta,CS.tilegrid={},CS.tilegrid.TileGrid=Ja,CS.tilegrid.WMTS=zc,CS.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Uc,CS.tilegrid.common={},CS.tilegrid.common.DEFAULT_MAX_ZOOM=42,CS.tilegrid.common.DEFAULT_TILE_SIZE=Bu,CS.tilegrid.createForExtent=Ka,CS.tilegrid.createForProjection=ic,CS.tilegrid.createXYZ=tc,CS.tilegrid.extentFromProjection=rc,CS.tilegrid.getForProjection=$a,CS.tilegrid.wrapX=Qa,CS.tileurlfunction={},CS.tileurlfunction.createFromTemplate=ec,CS.tileurlfunction.createFromTemplates=oc,CS.tileurlfunction.createFromTileUrlFunctions=sc,CS.tileurlfunction.expandUrl=hc,CS.tileurlfunction.nullTileUrlFunction=uc,CS.transform={},CS.transform.apply=fn,CS.transform.compose=ln,CS.transform.composeCssTransform=function(t,n,i,r,e,o,s){return wn(ln([1,0,0,1,0,0],t,n,i,r,e,o,s))},CS.transform.create=en,CS.transform.determinant=pn,CS.transform.invert=function(t){return dn(t,t)},CS.transform.makeInverse=dn,CS.transform.makeScale=vn,CS.transform.multiply=sn,CS.transform.reset=on,CS.transform.rotate=an,CS.transform.scale=cn,CS.transform.set=un,CS.transform.setFromArray=hn,CS.transform.toString=wn,CS.transform.translate=function(t,n,i){return sn(t,un(rn,1,0,0,1,n,i))},CS.uri={},CS.uri.appendParams=fc,CS.util={},CS.util.VERSION=u,CS.util.abstract=r,CS.util.getUid=o,CS.vec={},CS.vec.mat4={},CS.vec.mat4.create=Ic,CS.vec.mat4.fromTransform=Lc,CS.xml={},CS.xml.OBJECT_PROPERTY_NODE_FACTORY=Sc,CS.xml.XML_SCHEMA_INSTANCE_URI=ac,CS.xml.createElementNS=cc,CS.xml.getAllTextContent=vc,CS.xml.Aw=lc,CS.xml.getAttributeNS=pc,CS.xml.getDocument=Rc,CS.xml.getXMLSerializer=kc,CS.xml.isDocument=dc,CS.xml.makeArrayExtender=yc,CS.xml.makeArrayPusher=gc,CS.xml.makeArraySerializer=xc,CS.xml.makeChildAppender=Mc,CS.xml.makeObjectPropertyPusher=bc,CS.xml.makeObjectPropertySetter=_c,CS.xml.makeReplacer=mc,CS.xml.makeSequence=jc,CS.xml.makeSimpleNodeFactory=Oc,CS.xml.makeStructureNS=Ec,CS.xml.parse=wc,CS.xml.parseNode=Tc,CS.xml.pushParseAndPop=Ac,CS.xml.pushSerializeAndPop=Pc,CS.xml.registerDocument=function(t){Fc=t},CS.xml.registerXMLSerializer=function(t){Nc=t},CS.xml.serialize=Cc;var PS=CS}},n={};function i(r){var e=n[r];if(void 0!==e)return e.exports;var o=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},i(760);var r=i(474);return r=r.default}()}));
//# sourceMappingURL=ol.js.map